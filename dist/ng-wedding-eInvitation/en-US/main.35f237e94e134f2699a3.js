var $localize=Object.assign(void 0===$localize?{}:$localize,{locale:"en-US"});
"use strict";(function(global){global.ng=global.ng||{};global.ng.common=global.ng.common||{};global.ng.common.locales=global.ng.common.locales||{};const u=undefined;function plural(n){let i=Math.floor(Math.abs(n)),v=n.toString().replace(/^[^.]*\.?/,"").length;if(i===1&&v===0)return 1;return 5}global.ng.common.locales["en-us-posix"]=["en-US-POSIX",[["a","p"],["AM","PM"],u],[["AM","PM"],u,u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",u,"{1} 'at' {0}",u],[".",",",";","%","+","-","E","\xD7","0/00","INF","NaN",":"],["0.######","0%","\xA4\xA00.00","0.000000E+000"],"USD","$","US Dollar",{},"ltr",plural,[[["mi","n","in the morning","in the afternoon","in the evening","at night"],["midnight","noon","in the morning","in the afternoon","in the evening","at night"],u],[["midnight","noon","morning","afternoon","evening","night"],u,u],["00:00","12:00",["06:00","12:00"],["12:00","18:00"],["18:00","21:00"],["21:00","06:00"]]]]})(typeof globalThis!=="undefined"&&globalThis||typeof global!=="undefined"&&global||typeof window!=="undefined"&&window);;
(self.webpackChunkng_wedding_e_invitation=self.webpackChunkng_wedding_e_invitation||[]).push([[179],{255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=255,e.exports=t},37:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function u(e){return null!==e&&"object"==typeof e}const l=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){t=a instanceof l?d(a.errors):[a]}}if(c(o)){let e=-1,n=o.length;for(;++e<n;){const n=o[e];if(u(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof l?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new l(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof l?t.errors:t),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[f](){return this}static create(e,t,n){const r=new p(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends p{constructor(e,t,n,i){let s;super(),this._parentSubscriber=e;let o=this;r(t)?s=t:t&&(s=t.next,n=t.error,i=t.complete,t!==a&&(o=Object.create(t),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}function v(...e){return w(e)}function w(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let b=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof p)return e;if(e[f])return e[f]()}return e||t||n?new p(e,t,n):new p(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof p?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=_(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:w(e)(this)}toPromise(e){return new(e=_(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function _(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const I=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class C extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class E extends p{constructor(e){super(e),this.destination=e}}let T=(()=>{class e extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(e){const t=new S(this,this);return t.operator=e,t}next(e){if(this.closed)throw new I;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new I;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new I;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new I;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new I;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new C(this,e))}asObservable(){const e=new b;return e.source=this,e}}return e.create=(e,t)=>new S(e,t),e})();class S extends T{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function k(e){return e&&"function"==typeof e.schedule}function x(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new A(e,t))}}class A{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new O(e,this.project,this.thisArg))}}class O extends p{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const M=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=P(),N=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function R(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[m])return n=e,e=>{const t=n[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(N(e))return M(e);if(R(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t))(e);if(e&&"function"==typeof e[D])return t=e,e=>{const n=t[D]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n};function V(e,t){return new b(n=>{const r=new h;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function F(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new b(n=>{const r=new h;return r.add(t.schedule(()=>{const i=e[m]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(R(e))return function(e,t){return new b(n=>{const r=new h;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(N(e))return V(e,t);if(function(e){return e&&"function"==typeof e[D]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new b(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[D](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof b?e:new b(L(e))}class j extends p{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U extends p{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function B(e,t){if(t.closed)return;if(e instanceof b)return e.subscribe(t);let n;try{n=L(e)(t)}catch(r){t.error(r)}return n}function q(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(q((n,r)=>F(e(n,r)).pipe(x((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new $(e,n)))}class ${constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new z(e,this.project,this.concurrent))}}class z extends U{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new j(this),n=this.destination;n.add(t);const r=B(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(e=Number.POSITIVE_INFINITY){return q(y,e)}function K(e,t){return t?V(e,t):new b(M(e))}function G(){return function(e){return e.lift(new W(e))}}class W{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new Q(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class Q extends p{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class J extends b{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new X(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return G()(this)}}const Y=(()=>{const e=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class X extends E{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Z(){return new T}function ee(e){for(let t in e)if(e[t]===ee)return t;throw Error("Could not find renamed property on target object.")}function te(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ne(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ne).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function re(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ie=ee({__forward_ref__:ee});function se(e){return e.__forward_ref__=se,e.toString=function(){return ne(this())},e}function oe(e){return ae(e)?e():e}function ae(e){return"function"==typeof e&&e.hasOwnProperty(ie)&&e.__forward_ref__===se}class ce extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function ue(e){return"string"==typeof e?e:null==e?"":String(e)}function le(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ue(e)}function he(e,t){const n=t?` in ${t}`:"";throw new ce("201",`No provider for ${le(e)} found${n}`)}function de(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function fe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function pe(e){return{providers:e.providers||[],imports:e.imports||[]}}function ge(e){return me(e,ve)||me(e,be)}function me(e,t){return e.hasOwnProperty(t)?e[t]:null}function ye(e){return e&&(e.hasOwnProperty(we)||e.hasOwnProperty(_e))?e[we]:null}const ve=ee({"\u0275prov":ee}),we=ee({"\u0275inj":ee}),be=ee({ngInjectableDef:ee}),_e=ee({ngInjectorDef:ee});var Ie=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let Ce;function Ee(e){const t=Ce;return Ce=e,t}function Te(e,t,n){const r=ge(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ie.Optional?null:void 0!==t?t:void he(ne(e),"Injector")}function Se(e){return{toString:e}.toString()}var ke=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),xe=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const Ae="undefined"!=typeof globalThis&&globalThis,Oe="undefined"!=typeof window&&window,Me="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pe="undefined"!=typeof global&&global,De=Ae||Pe||Oe||Me,Ne={},Re=[],Le=ee({"\u0275cmp":ee}),Ve=ee({"\u0275dir":ee}),Fe=ee({"\u0275pipe":ee}),je=ee({"\u0275mod":ee}),Ue=ee({"\u0275loc":ee}),Be=ee({"\u0275fac":ee}),qe=ee({__NG_ELEMENT_ID__:ee});let $e=0;function ze(e){return Se(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ke.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Re,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||xe.Emulated,id:"c",styles:e.styles||Re,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=$e++,n.inputs=Qe(e.inputs,t),n.outputs=Qe(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(He):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ke):null,n})}function He(e){return Ye(e)||function(e){return e[Ve]||null}(e)}function Ke(e){return function(e){return e[Fe]||null}(e)}const Ge={};function We(e){return Se(()=>{const t={type:e.type,bootstrap:e.bootstrap||Re,declarations:e.declarations||Re,imports:e.imports||Re,exports:e.exports||Re,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Ge[e.id]=e.type),t})}function Qe(e,t){if(null==e)return Ne;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const Je=ze;function Ye(e){return e[Le]||null}function Xe(e,t){const n=e[je]||null;if(!n&&!0===t)throw new Error(`Type ${ne(e)} does not have '\u0275mod' property.`);return n}const Ze=20,et=10;function tt(e){return Array.isArray(e)&&"object"==typeof e[1]}function nt(e){return Array.isArray(e)&&!0===e[1]}function rt(e){return 0!=(8&e.flags)}function it(e){return 2==(2&e.flags)}function st(e){return 1==(1&e.flags)}function ot(e){return null!==e.template}function at(e,t){return e.hasOwnProperty(Be)?e[Be]:null}class ct{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ut(){return lt}function lt(e){return e.type.prototype.ngOnChanges&&(e.setInput=dt),ht}function ht(){const e=ft(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Ne)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function dt(e,t,n,r){const i=ft(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Ne,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new ct(c&&c.currentValue,t,o===Ne),e[r]=t}function ft(e){return e.__ngSimpleChanges__||null}let pt;function gt(){return void 0!==pt?pt:"undefined"!=typeof document?document:void 0}function mt(e){return!!e.listen}ut.ngInherit=!0;const yt={createRenderer:(e,t)=>gt()};function vt(e){for(;Array.isArray(e);)e=e[0];return e}function wt(e,t){return vt(t[e.index])}function bt(e,t){return e.data[t]}function _t(e,t){const n=t[e];return tt(n)?n:n[0]}function It(e){return 128==(128&e[2])}function Ct(e,t){return null==t?null:e[t]}function Et(e){e[18]=0}function Tt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const St={lFrame:Kt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function kt(){return St.bindingsEnabled}function xt(){return St.lFrame.lView}function At(){return St.lFrame.tView}function Ot(){let e=Mt();for(;null!==e&&64===e.type;)e=e.parent;return e}function Mt(){return St.lFrame.currentTNode}function Pt(){const e=St.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Dt(e,t){const n=St.lFrame;n.currentTNode=e,n.isParent=t}function Nt(){return St.lFrame.isParent}function Rt(){return St.isInCheckNoChangesMode}function Lt(e){St.isInCheckNoChangesMode=e}function Vt(){return St.lFrame.bindingIndex++}function Ft(e){St.lFrame.inI18n=e}function jt(e,t){const n=St.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ut(t)}function Ut(e){St.lFrame.currentDirectiveIndex=e}function Bt(e){St.lFrame.currentQueryIndex=e}function qt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function $t(e,t,n){if(n&Ie.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&Ie.Host||(r=qt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=St.lFrame=Ht();return r.currentTNode=t,r.lView=e,!0}function zt(e){const t=Ht(),n=e[1];St.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Ht(){const e=St.lFrame,t=null===e?null:e.child;return null===t?Kt(e):t}function Kt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Gt(){const e=St.lFrame;return St.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Wt=Gt;function Qt(){const e=Gt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Jt(){return St.lFrame.selectedIndex}function Yt(e){St.lFrame.selectedIndex=e}function Xt(){const e=St.lFrame;return bt(e.tView,e.selectedIndex)}function Zt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function en(e,t,n){rn(e,t,3,n)}function tn(e,t,n,r){(3&e[2])===n&&rn(e,t,n,r)}function nn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function rn(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(sn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function sn(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const on=-1;class an{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function cn(e,t,n){const r=mt(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];un(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function un(e){return 64===e.charCodeAt(0)}function ln(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||hn(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function hn(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function dn(e){return 32767&e}function fn(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let pn=!0;function gn(e){const t=pn;return pn=e,t}let mn=0;function yn(e,t){const n=wn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,vn(r.data,e),vn(t,null),vn(r.blueprint,null));const i=bn(e,t),s=e.injectorIndex;if(i!==on){const e=dn(i),n=fn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function vn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function wn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function bn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return on;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return on}function _n(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(qe)&&(r=n[qe]),null==r&&(r=n[qe]=mn++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function In(e,t,n){if(n&Ie.Optional)return e;he(t,"NodeInjector")}function Cn(e,t,n,r){if(n&Ie.Optional&&void 0===r&&(r=null),0==(n&(Ie.Self|Ie.Host))){const i=e[9],s=Ee(void 0);try{return i?i.get(t,r,n&Ie.Optional):Te(t,r,n&Ie.Optional)}finally{Ee(s)}}return In(r,t,n)}function En(e,t,n,r=Ie.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(qe)?e[qe]:void 0;return"number"==typeof t?t>=0?255&t:Sn:t}(n);if("function"==typeof s){if(!$t(t,e,r))return r&Ie.Host?In(i,n,r):Cn(t,n,r,i);try{const e=s(r);if(null!=e||r&Ie.Optional)return e;he(n)}finally{Wt()}}else if("number"==typeof s){let i=null,o=wn(e,t),a=on,c=r&Ie.Host?t[16][6]:null;for((-1===o||r&Ie.SkipSelf)&&(a=-1===o?bn(e,t):t[o+8],a!==on&&On(r,!1)?(i=t[1],o=dn(a),t=fn(a,t)):o=-1);-1!==o;){const e=t[1];if(An(s,o,e.data)){const e=kn(o,t,n,i,r,c);if(e!==Tn)return e}a=t[o+8],a!==on&&On(r,t[1].data[o+8]===c)&&An(s,o,t)?(i=e,o=dn(a),t=fn(a,t)):o=-1}}}return Cn(t,n,r,i)}const Tn={};function Sn(){return new Mn(Ot(),xt())}function kn(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=function(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,u=s>>20,l=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<l;h++){const e=o[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=o[c];if(e&&ot(e)&&e.type===n)return c}return null}(a,o,n,null==r?it(a)&&pn:r!=o&&0!=(3&a.type),i&Ie.Host&&s===a);return null!==c?xn(t,o,c,a):Tn}function xn(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof an){const o=i;o.resolving&&function(e,t){throw new ce("200",`Circular dependency in DI detected for ${e}`)}(le(s[n]));const a=gn(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ee(o.injectImpl):null;$t(e,r,Ie.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=lt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==c&&Ee(c),gn(a),o.resolving=!1,Wt()}}return i}function An(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function On(e,t){return!(e&Ie.Self||e&Ie.Host&&t)}class Mn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return En(this._tNode,this._lView,e,void 0,t)}}function Pn(e){return Se(()=>{const t=e.prototype.constructor,n=t[Be]||Dn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Be]||Dn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Dn(e){return ae(e)?()=>{const t=Dn(oe(e));return t&&t()}:at(e)}const Nn="__parameters__";function Rn(e,t,n){return Se(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(Nn)?e[Nn]:Object.defineProperty(e,Nn,{value:[]})[Nn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Ln{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Vn(e,t){e.forEach(e=>Array.isArray(e)?Vn(e,t):t(e))}function Fn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function jn(e,t,n){let r=Bn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Un(e,t){const n=Bn(e,t);if(n>=0)return e[1|n]}function Bn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const qn={},$n=/\n/gm,zn="__source",Hn=ee({provide:String,useValue:ee});let Kn;function Gn(e){const t=Kn;return Kn=e,t}function Wn(e,t=Ie.Default){if(void 0===Kn)throw new Error("inject() must be called from an injection context");return null===Kn?Te(e,void 0,t):Kn.get(e,t&Ie.Optional?null:void 0,t)}function Qn(e,t=Ie.Default){return(Ce||Wn)(oe(e),t)}function Jn(e){const t=[];for(let n=0;n<e.length;n++){const r=oe(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=Ie.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(Qn(e,n))}else t.push(Qn(r))}return t}function Yn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Xn=Yn(Rn("Inject",e=>({token:e})),-1),Zn=Yn(Rn("Optional"),8),er=Yn(Rn("SkipSelf"),4);let tr;function nr(e){var t;return(null===(t=function(){if(void 0===tr&&(tr=null,De.trustedTypes))try{tr=De.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return tr}())||void 0===t?void 0:t.createHTML(e))||e}class rr{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(nr(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(jV){return null}}}class ir{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=nr(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=nr(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const sr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,or=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ar(e){return(e=String(e)).match(sr)||e.match(or)?e:"unsafe:"+e}function cr(e){return(e=String(e)).split(",").map(e=>ar(e.trim())).join(", ")}function ur(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function lr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const hr=ur("area,br,col,hr,img,wbr"),dr=ur("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fr=ur("rp,rt"),pr=lr(fr,dr),gr=lr(hr,lr(dr,ur("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lr(fr,ur("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pr),mr=ur("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yr=ur("srcset"),vr=lr(mr,yr,ur("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ur("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));function wr(e,t){e.__ngContext__=t}function br(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function _r(e){return e.ngDebugContext}function Ir(e){return e.ngOriginalError}function Cr(e,...t){e.error(...t)}class Er{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Cr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?_r(e)?_r(e):this._findContext(Ir(e)):null}_findOriginalError(e){let t=Ir(e);for(;t&&Ir(t);)t=Ir(t);return t}}const Tr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(De))();function Sr(e){return e instanceof Function?e():e}var kr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let xr;function Ar(e,t){return xr(e,t)}function Or(e){const t=e[3];return nt(t)?t[3]:t}function Mr(e){return Dr(e[13])}function Pr(e){return Dr(e[4])}function Dr(e){for(;null!==e&&!nt(e);)e=e[4];return e}function Nr(e,t,n,r,i){if(null!=r){let s,o=!1;nt(r)?s=r:tt(r)&&(o=!0,r=r[0]);const a=vt(r);0===e&&null!==n?null==i?Br(t,n,a):Ur(t,n,a,i||null,!0):1===e&&null!==n?Ur(t,n,a,i||null,!0):2===e?function(e,t,n){const r=function(e,t){return mt(e)?e.parentNode(t):t.parentNode}(e,t);r&&function(e,t,n,r){mt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==vt(n)&&Nr(t,e,r,s,i);for(let o=et;o<n.length;o++){const i=n[o];Jr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Rr(e,t){return mt(e)?e.createText(t):e.createTextNode(t)}function Lr(e,t,n){return mt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Vr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Tt(i,-1)),n.splice(r,1)}function Fr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof an)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):vt(t[e]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&mt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&nt(t[3])){n!==t[3]&&Vr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function jr(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===xe.None||t===xe.Emulated)return null}return wt(r,n)}function Ur(e,t,n,r,i){mt(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Br(e,t,n){mt(e)?e.appendChild(t,n):t.appendChild(n)}function qr(e,t,n,r,i){null!==r?Ur(e,t,n,r,i):Br(e,t,n)}function $r(e,t,n){return 40&e.type?wt(e,n):null}let zr,Hr=$r;function Kr(e,t){Hr=e,zr=t}function Gr(e,t,n,r){const i=function(e,t,n){return jr(e,t.parent,n)}(e,r,t),s=t[11],o=function(e,t,n){return Hr(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)qr(s,i,n[a],o,!1);else qr(s,i,n,o,!1);void 0!==zr&&zr(s,r,t,n,i)}function Wr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Qr(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&wr(vt(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Qr(e,t,n.child,r,i,s,!1),Nr(t,e,i,a,s);else if(32&c){const o=Ar(n,r);let c;for(;c=o();)Nr(t,e,i,c,s);Nr(t,e,i,a,s)}else 16&c?Yr(e,t,r,n,i,s):Nr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Jr(e,t,n,r,i,s){Qr(n,r,e.firstChild,t,i,s,!1)}function Yr(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Nr(t,e,i,a[c],s);else Qr(e,t,a,o[3],i,s,!0)}function Xr(e,t,n){mt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Zr(e,t,n){mt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ei(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const ti="ng-template";function ni(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==ei(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ri(e){return 4===e.type&&e.value!==ti}function ii(e,t,n){return t===(4!==e.type||n?e.value:ti)}function si(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let n=0;n<e.length;n++)if(3===(t=e[n])||4===t||6===t)return n;var t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!ii(e,c,n)||""===c&&1===t.length){if(oi(r))return!1;o=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!ni(e.attrs,u,n)){if(oi(r))return!1;o=!0}continue}const l=ai(8&r?"class":c,i,ri(e),n);if(-1===l){if(oi(r))return!1;o=!0;continue}if(""!==u){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==ei(t,u,0)||2&r&&u!==e){if(oi(r))return!1;o=!0}}}}else{if(!o&&!oi(r)&&!oi(c))return!1;if(o&&oi(c))continue;o=!1,r=c|1&r}}return oi(r)||o}function oi(e){return 0==(1&e)}function ai(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ci(e,t,n=!1){for(let r=0;r<t.length;r++)if(si(e,t[r],n))return!0;return!1}function ui(e,t){return e?":not("+t.trim()+")":t}function li(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||oi(o)||(t+=ui(s,i),i=""),r=o,s=s||!oi(r);n++}return""!==i&&(t+=ui(s,i)),t}const hi={};function di(e){fi(At(),xt(),Jt()+e,Rt())}function fi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&en(t,r,n)}else{const r=e.preOrderHooks;null!==r&&tn(t,r,0,n)}Yt(n)}function pi(e,t){return e<<17|t<<2}function gi(e){return e>>17&32767}function mi(e){return 2|e}function yi(e){return(131068&e)>>2}function vi(e,t){return-131069&e|t<<2}function wi(e){return 1|e}function bi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];Bt(i),n.contentQueries(2,t[s],s)}}}function _i(e,t,n,r,i,s,o,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Et(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function Ii(e,t,n,r,i){let s=e.data[t];if(null===s)s=Ci(e,t,n,r,i),St.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=Pt();s.injectorIndex=null===e?-1:e.injectorIndex}return Dt(s,!0),s}function Ci(e,t,n,r,i){const s=Mt(),o=Nt(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function Ei(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ti(e,t,n){zt(t);try{const r=e.viewQuery;null!==r&&Wi(1,r,n);const i=e.template;null!==i&&xi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&bi(e,t),e.staticViewQueries&&Wi(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)$i(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Qt()}}function Si(e,t,n,r){const i=t[2];if(256==(256&i))return;zt(t);const s=Rt();try{Et(t),St.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&xi(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&en(t,n,null)}else{const n=e.preOrderHooks;null!==n&&tn(t,n,0,null),nn(t,0)}if(function(e){for(let t=Mr(e);null!==t;t=Pr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Tt(r,1),n[2]|=1024}}}(t),function(e){for(let t=Mr(e);null!==t;t=Pr(t))for(let e=et;e<t.length;e++){const n=t[e],r=n[1];It(n)&&Si(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&bi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&en(t,n)}else{const n=e.contentHooks;null!==n&&tn(t,n,1),nn(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)Yt(~r);else{const i=r,s=n[++e],o=n[++e];jt(s,i),o(2,t[i])}}}finally{Yt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Bi(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&Wi(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&en(t,n)}else{const n=e.viewHooks;null!==n&&tn(t,n,2),nn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Tt(t[3],-1))}finally{Qt()}}function ki(e,t,n,r){const i=t[10],s=!Rt(),o=4==(4&t[2]);try{s&&!o&&i.begin&&i.begin(),o&&Ti(e,t,r),Si(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function xi(e,t,n,r,i){const s=Jt(),o=2&r;try{Yt(-1),o&&t.length>Ze&&fi(e,t,Ze,Rt()),n(r,i)}finally{Yt(s)}}function Ai(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Oi(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Oi(e,t,n,r,i,s,o,a,c,u){const l=Ze+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:hi);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Mi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Pi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Di(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ni(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Ri(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ot(t)&&(n[""]=e)}}function Li(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Vi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=at(i.type)),o=new an(s,ot(i),null);e.blueprint[r]=o,n[r]=o,Pi(e,t,0,r,Ei(e,n,i.hostVars,hi),i)}function Fi(e,t,n){const r=wt(t,e),i=Ai(n),s=e[10],o=zi(e,_i(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function ji(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Ui(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Bi(e,t){const n=_t(t,e);if(It(n)){const e=n[1];80&n[2]?Si(e,n,e.template,n[8]):n[5]>0&&qi(n)}}function qi(e){for(let n=Mr(e);null!==n;n=Pr(n))for(let e=et;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Si(e,t,e.template,t[8])}else t[5]>0&&qi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=_t(t[n],e);It(r)&&r[5]>0&&qi(r)}}function $i(e,t){const n=_t(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ti(r,n,n[8])}function zi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Hi(e){for(;e;){e[2]|=64;const t=Or(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Ki(e,t,n){const r=t[10];r.begin&&r.begin();try{Si(e,t,e.template,n)}catch(i){throw Xi(t,i),i}finally{r.end&&r.end()}}function Gi(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=br(n),i=r[1];ki(i,r,i.template,n)}}(e[8])}function Wi(e,t,n){Bt(0),t(e,n)}const Qi=(()=>Promise.resolve(null))();function Ji(e){return e[7]||(e[7]=[])}function Yi(e){return e.cleanup||(e.cleanup=[])}function Xi(e,t){const n=e[9],r=n?n.get(Er,null):null;r&&r.handleError(t)}function Zi(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],u=e.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function es(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=re(i,e):2==s&&(r=re(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const ts=new Ln("INJECTOR",-1);class ns{get(e,t=qn){if(t===qn){const t=new Error(`NullInjectorError: No provider for ${ne(e)}!`);throw t.name="NullInjectorError",t}return t}}const rs=new Ln("Set Injector scope."),is={},ss={};let os;function as(){return void 0===os&&(os=new ns),os}function cs(e,t=null,n=null,r){return new us(e,n,t||as(),r)}class us{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Vn(t,n=>this.processProvider(n,e,t)),Vn([e],e=>this.processInjectorType(e,[],i)),this.records.set(ts,ds(void 0,this));const s=this.records.get(rs);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:ne(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=qn,n=Ie.Default){this.assertNotDestroyed();const r=Gn(this);try{if(!(n&Ie.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Ln)&&ge(e);t=n&&this.injectableDefInScope(n)?ds(ls(e),is):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&Ie.Self?as():this.parent).get(e,t=n&Ie.Optional&&t===qn?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(ne(e)),r)throw s;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[zn]&&i.unshift(t[zn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=ne(t);if(Array.isArray(t))i=t.map(ne).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ne(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace($n,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{Gn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(ne(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=oe(e)))return!1;let r=ye(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=ye(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{Vn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Vn(r,e=>this.processProvider(e,n,r||Re))}}this.injectorDefTypes.add(s);const a=at(s)||(()=>new s);this.records.set(s,ds(a,is));const c=r.providers;if(null!=c&&!o){const t=e;Vn(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=ps(e=oe(e))?e:oe(e&&e.provide);const i=function(e,t,n){return fs(e)?ds(void 0,e.useValue):ds(hs(e),is)}(e);if(ps(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=ds(void 0,is,!0),t.factory=()=>Jn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===is&&(t.value=ss,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=oe(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ls(e){const t=ge(e),n=null!==t?t.factory:at(e);if(null!==n)return n;if(e instanceof Ln)throw new Error(`Token ${ne(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${ne(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[ve]||e[be]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function hs(e,t,n){let r;if(ps(e)){const t=oe(e);return at(t)||ls(t)}if(fs(e))r=()=>oe(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Jn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Qn(oe(e.useExisting));else{const t=oe(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return at(t)||ls(t);r=()=>new t(...Jn(e.deps))}var i;return r}function ds(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fs(e){return null!==e&&"object"==typeof e&&Hn in e}function ps(e){return"function"==typeof e}const gs=function(e,t,n){return function(e,t=null,n=null,r){const i=cs(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let ms=(()=>{class e{static create(e,t){return Array.isArray(e)?gs(e,t,""):gs(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=qn,e.NULL=new ns,e.\u0275prov=fe({token:e,providedIn:"any",factory:()=>Qn(ts)}),e.__NG_ELEMENT_ID__=-1,e})();function ys(e,t){Zt(br(e)[1],Ot())}function vs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ot(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=ws(e.inputs),t.declaredInputs=ws(e.declaredInputs),t.outputs=ws(e.outputs);const n=i.hostBindings;n&&Is(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&bs(e,s),o&&_s(e,o),te(e.inputs,i.inputs),te(e.declaredInputs,i.declaredInputs),te(e.outputs,i.outputs),ot(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===vs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=ln(i.hostAttrs,n=ln(n,i.hostAttrs))}}(r)}function ws(e){return e===Ne?{}:e===Re?[]:e}function bs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function _s(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Is(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let Cs=null;function Es(){if(!Cs){const e=De.Symbol;if(e&&e.iterator)Cs=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Cs=n)}}}return Cs}function Ts(e){return!!Ss(e)&&(Array.isArray(e)||!(e instanceof Map)&&Es()in e)}function Ss(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ks(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function xs(e,t,n,r){const i=xt();return ks(i,Vt(),t)&&(At(),function(e,t,n,r,i,s){const o=wt(e,t);!function(e,t,n,r,i,s,o){if(null==s)mt(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?ue(s):o(s,r||"",i);mt(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(Xt(),i,e,t,n,r)),xs}function As(e){return function(e,t){return e[t]}(St.lFrame.contextLView,Ze+e)}function Os(e,t=Ie.Default){const n=xt();return null===n?Qn(e,t):En(Ot(),n,oe(e),t)}function Ms(e,t,n){const r=xt();return ks(r,Vt(),t)&&function(e,t,n,r,i,s,o,a){const c=wt(t,n);let u,l=t.inputs;var h;null!=l&&(u=l[r])?(Zi(e,n,u,r,i),it(t)&&function(e,t){const n=_t(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,mt(s)?s.setProperty(c,r,i):un(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}(At(),Xt(),r,e,t,r[11],n),Ms}function Ps(e,t,n,r,i){const s=i?"class":"style";Zi(e,n,t.inputs[s],s,r)}function Ds(e,t,n,r){const i=xt(),s=At(),o=Ze+e,a=i[11],c=i[o]=Lr(a,t,St.lFrame.currentNamespace),u=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=Ii(t,e,2,i,Ct(a,s));return function(e,t,n,r){let i=!1;if(kt()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ci(n,o.selectors,!1)&&(i||(i=[]),_n(yn(n,t),e,o.type),ot(o)?(Ni(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Li(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=Ei(e,t,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=ln(n.mergedAttrs,u.hostAttrs),Vi(e,n,t,c,u),Ri(c,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||ri(t)?null:Ui(n,i);s.push(u),o=Mi(n,c,o),a=Mi(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new ce("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}n.mergedAttrs=ln(n.mergedAttrs,n.attrs)}(t,n,c,Ct(a,o)),null!==c.attrs&&es(c,c.attrs,!1),null!==c.mergedAttrs&&es(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];Dt(u,!0);const l=u.mergedAttrs;null!==l&&cn(a,c,l);const h=u.classes;null!==h&&Zr(a,c,h);const d=u.styles;null!==d&&Xr(a,c,d),64!=(64&u.flags)&&Gr(s,i,c,u),0===St.lFrame.elementDepthCount&&wr(c,i),St.lFrame.elementDepthCount++,st(u)&&(function(e,t,n){kt()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||yn(n,t),wr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ot(r);s&&Fi(t,n,r);const c=xn(t,e,a,n);wr(c,t),null!==o&&ji(0,a-i,c,r,0,o),s&&(_t(n.index,t)[8]=c)}}(e,t,n,wt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=St.lFrame.currentDirectiveIndex;try{Yt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];Ut(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Di(r,i)}}finally{Yt(-1),Ut(o)}}(e,t,n))}(s,i,u),function(e,t,n){if(rt(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}(s,u,i)),null!==r&&function(e,t,n=wt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}(i,u)}function Ns(){let e=Ot();Nt()?St.lFrame.isParent=!1:(e=e.parent,Dt(e,!1));const t=e;St.lFrame.elementDepthCount--;const n=At();n.firstCreatePass&&(Zt(n,e),rt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ps(n,t,xt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ps(n,t,xt(),t.stylesWithoutHost,!1)}function Rs(e,t,n,r){Ds(e,t,n,r),Ns()}function Ls(e){return!!e&&"function"==typeof e.then}const Vs=function(e){return!!e&&"function"==typeof e.subscribe};function Fs(e,t,n,r){const i=xt(),s=At(),o=Ot();return function(e,t,n,r,i,s,o,a){const c=st(r),u=e.firstCreatePass&&Yi(e),l=Ji(t);let h=!0;if(3&r.type||a){const d=wt(r,t),f=a?a(d):d,p=l.length,g=a?e=>a(vt(e[r.index])):r.index;if(mt(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Us(r,t,0,s,!1);const e=n.listen(f,i,s);l.push(s,e),u&&u.push(i,g,p,p+1)}}else s=Us(r,t,0,s,!0),f.addEventListener(i,s,o),l.push(s),u&&u.push(i,g,p,o)}else s=Us(r,t,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,e),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),Fs}function js(e,t,n,r){try{return!1!==n(r)}catch(i){return Xi(e,i),!1}}function Us(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?_t(e.index,t):t;0==(32&t[2])&&Hi(o);let a=js(t,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=js(t,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Bs(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?gi(s):yi(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];qs(e[a],t)&&(c=!0,e[a+1]=r?wi(n):mi(n)),a=r?gi(n):yi(n)}c&&(e[n+1]=r?mi(s):wi(s))}function qs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Bn(e,t)>=0}function $s(e,t){return function(e,t,n,r){const i=xt(),s=At(),o=function(e){const t=St.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,n}();s.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[Jt()],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(s)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=St.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=t.residualClasses;if(null===i)0===t.classBindings&&(n=Hs(n=zs(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=zs(i,e,t,n,r),null===s){let n=function(e,t,n){const r=t.classBindings;if(0!==yi(r))return e[gi(r)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=zs(null,e,t,n[1],r),n=Hs(n,t.attrs,r),function(e,t,n,r){e[gi(t.classBindings)]=r}(e,t,0,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Hs(r,e[s].hostAttrs,true);return Hs(r,t.attrs,true)}(e,t)}return void 0!==s&&(t.residualClasses=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=t.classBindings,a=gi(o),c=yi(o);e[r]=n;let u,l=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||Bn(e,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const t=gi(e[a+1]);e[r+1]=pi(t,a),0!==t&&(e[t+1]=vi(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=pi(a,0),0!==a&&(e[a+1]=vi(e[a+1],r)),a=r;else e[r+1]=pi(c,0),0===a?a=r:e[c+1]=vi(e[c+1],r),c=r;l&&(e[r+1]=mi(e[r+1])),Bs(e,u,r,!0),Bs(e,u,r,!1),function(e,t,n,r,i){const s=e.residualClasses;null!=s&&"string"==typeof t&&Bn(s,t)>=0&&(n[r+1]=wi(n[r+1]))}(t,u,e,r),o=pi(a,c),t.classBindings=o}(i,s,t,n,o)}}(s,e,o,true),t!==hi&&ks(i,o,t)&&function(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,u=c[a+1];Gs(1==(1&u)?Ks(c,t,n,i,yi(u),o):void 0)||(Gs(s)||function(e){return 2==(2&e)}(u)&&(s=Ks(c,null,n,i,a,o)),function(e,t,n,r,i){const s=mt(e);i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r)}(r,0,function(e,t){return vt(t[e])}(Jt(),n),i,s))}(s,s.data[Jt()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=ne(function(e){return e instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?e.changingThisBreaksApplicationSecurity:e}(e))),e}(t),true,o)}(e,t),$s}function zs(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=Hs(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Hs(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),jn(e,o,!!n||t[++s]))}return void 0===e?null:e}function Ks(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,u=null===c;let l=n[i+1];l===hi&&(l=u?Re:void 0);let h=u?Un(l,r):c===r?l:void 0;if(s&&!Gs(h)&&(h=Un(t,r)),Gs(h)&&(a=h,o))return a;const d=e[i+1];i=o?gi(d):yi(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=Un(e,r))}return a}function Gs(e){return void 0!==e}function Ws(e,t=""){const n=xt(),r=At(),i=e+Ze,s=r.firstCreatePass?Ii(r,i,1,t,null):r.data[i],o=n[i]=Rr(n[11],t);Gr(r,n,o,s),Dt(s,!1)}const Qs=void 0;var Js=["en",[["a","p"],["AM","PM"],Qs],[["AM","PM"],Qs,Qs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qs,"{1} 'at' {0}",Qs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Ys={};function Xs(e){return e in Ys||(Ys[e]=De.ng&&De.ng.common&&De.ng.common.locales&&De.ng.common.locales[e]),Ys[e]}var Zs=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const eo="en-US",to={marker:"element"},no={marker:"ICU"};var ro=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({});let io=eo;function so(e){var t;null==(t=e)&&de("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(io=e.toLowerCase().replace(/_/g,"-"))}function oo(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?$r(e,0,n):vt(n[i])}function ao(e,t,n,r,i){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&t.type||(a=o,o=i),null!==o&&0==(2&t.flags))for(let t=1;t<s.length;t++)Ur(e,o,n[s[t]],a,!1)}}function co(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];uo(r)||lo(r,t)&&null===ho(r)&&fo(r,t.index)}}function uo(e){return!(64&e.type)}function lo(e,t){return uo(t)||e.index>t.index}function ho(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function fo(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(Kr(oo,ao),e.insertBeforeIndex=t)}function po(e,t,n){const r=Ci(e,n,64,null,null);return co(t,r),r}const go=/\ufffd(\d+):?\d*\ufffd/gi,mo=/\ufffd(\d+)\ufffd/,yo=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,vo=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,wo=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,bo=/\uE500/g;function _o(e,t,n,r,i,s,o){const a=Ei(e,r,1,null);let c=a<<ro.SHIFT,u=Pt();t===u&&(u=null),null===u&&(c|=ro.APPEND_EAGERLY),o&&(c|=ro.COMMENT,void 0===xr&&(xr=function(){const e=[];let t,n,r=-1;function i(e,t){r=0;const i=function(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}(e,t);n=null!==i?e.remove[i]:Re}function s(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),i(t[1].data[~o],t),s())}return 0===e.length?null:(n=e.pop(),r=e.pop(),s())}return function(n,r){for(t=r;e.length;)e.pop();return i(n.value,r),s}}())),i.push(c,null===s?"":s);const l=Ci(e,a,o?32:1,null===s?"":s,null);co(n,l);const h=l.index;return Dt(l,!1),null!==u&&t!==u&&function(e,t){let n=e.insertBeforeIndex;var r;null===n?(Kr(oo,ao),n=e.insertBeforeIndex=[null,t]):("Expecting array here",(r=Array.isArray(n))!=!0&&de("Expecting array here",r,true,"=="),n.push(t))}(u,h),l}function Io(e,t,n,r,i,s,o){const a=o.match(go),c=_o(e,t,n,s,r,a?null:o,!1);a&&Co(i,o,c.index,null,0,null)}function Co(e,t,n,r,i,s){const o=e.length,a=o+1;e.push(null,null);const c=o+2,u=t.split(go);let l=0;for(let h=0;h<u.length;h++){const t=u[h];if(1&h){const n=i+parseInt(t,10);e.push(-1-n),l|=Eo(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,s),e[o]=l,e[a]=e.length-c,l}function Eo(e){return 1<<Math.min(e,31)}function To(e){let t,n,r="",i=0,s=!1;for(;null!==(t=vo.exec(e));)s?t[0]===`\ufffd/*${n}\ufffd`&&(i=t.index,s=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],s=!0);return r+=e.substr(i),r}function So(e,t,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:Ei(e,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(Eo(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,s),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,s,a);const c=i.values;for(let u=0;u<c.length;u++){const s=c[u],l=[];for(let e=0;e<s.length;e++){const t=s[e];if("string"!=typeof t){const n=l.push(t)-1;s[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Ao(e,a,t,n,r,i.cases[u],s.join(""),l)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,s)}function ko(e){const t=[],n=[];let r=1,i=0;const s=xo(e=e.replace(yo,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""}));for(let o=0;o<s.length;){let e=s[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const i=xo(s[o++]);t.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:t,values:n}}function xo(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(e);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=e.substring(t,i);yo.test(n)?r.push(ko(n)):r.push(n),t=i+1}}else{if(0==n.length){const n=e.substring(t,i);r.push(n),t=i+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function Ao(e,t,n,r,i,s,o,a){const c=[],u=[],l=[];t.cases.push(s),t.create.push(c),t.remove.push(u),t.update.push(l);const h=function(e){const t=new ir(e);return function(){try{return!!(new window.DOMParser).parseFromString(nr(""),"text/html")}catch(jV){return!1}}()?new rr(t):t}(gt()).getInertBodyElement(o),d=function(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}(h)||h;return d?Oo(e,t,n,r,c,u,l,d,i,a,0):0}function Oo(e,t,n,r,i,s,o,a,c,u,l){let h=0,d=a.firstChild;for(;d;){const a=Ei(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(gr.hasOwnProperty(p)){Do(i,to,p,c,a),e.data[a]=p;const g=f.attributes;for(let e=0;e<g.length;e++){const t=g.item(e),n=t.name.toLowerCase();t.value.match(go)?vr.hasOwnProperty(n)&&Co(o,t.value,a,t.name,0,mr[n]?ar:yr[n]?cr:null):No(i,a,t)}h=Oo(e,t,n,r,i,s,o,d,a,u,l+1)|h,Mo(s,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(go);Do(i,null,m?"":g,c,a),Mo(s,a,l),m&&(h=Co(o,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=mo.exec(d.textContent||"");if(y){const t=u[parseInt(y[1],10)];Do(i,no,"",c,a),So(e,n,r,c,t,a),Po(s,a,l)}}d=d.nextSibling}return h}function Mo(e,t,n){0===n&&e.push(t)}function Po(e,t,n){0===n&&(e.push(~t),e.push(t))}function Do(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function No(e,t,n){e.push(t<<1|1,n.name,n.value)}function Ro(e,t,n){(function(e,t,n=-1){const r=At(),i=xt(),s=Ze+e,o=Ct(r.consts,t),a=Pt();r.firstCreatePass&&function(e,t,n,r,i,s){const o=Pt(),a=[],c=[],u=[[]],l=(h=i=function(e,t){if(function(e){return-1===e}(t))return To(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return To(e.substring(n,r))}}(i,s),h.replace(bo," ")).split(wo);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const s=xo(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const t=l;""!==t&&Io(e,o,u[0],a,c,n,t)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);So(e,n,c,t,r,_o(e,o,u[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),Ze+Number.parseInt(r.substring(t?2:1)));if(t)u.shift(),Dt(Pt(),!1);else{const t=po(e,u[0],n);u.unshift([]),Dt(t,!0)}}}e.data[r]={create:a,update:c}}(r,null===a?0:a.index,i,s,o,n);const c=r.data[s],u=jr(r,a===i[6]?null:a,i);!function(e,t,n,r){const i=e[11];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],c=(o&ro.COMMENT)===ro.COMMENT,u=(o&ro.APPEND_EAGERLY)===ro.APPEND_EAGERLY,l=o>>>ro.SHIFT;let h=e[l];null===h&&(h=e[l]=c?i.createComment(a):Rr(i,a)),u&&null!==n&&Ur(i,n,h,r,!1)}}(i,c.create,u,a&&8&a.type?i[a.index]:null),Ft(!0)})(e,t,n),Ft(!1)}function Lo(e,t,n,r,i){if(e=oe(e),Array.isArray(e))for(let s=0;s<e.length;s++)Lo(e[s],t,n,r,i);else{const s=At(),o=xt();let a=ps(e)?e:oe(e.provide),c=hs(e);const u=Ot(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(ps(e)||!e.multi){const r=new an(c,i,Os),f=jo(a,t,i?l:l+d,h);-1===f?(_n(yn(u,o),s,a),Vo(s,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=jo(a,t,l+d,h),p=jo(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){_n(yn(u,o),s,a);const l=function(e,t,n,r,i){const s=new an(e,n,Os);return s.multi=[],s.index=t,s.componentProviders=0,Fo(s,i,r&&!n),s}(i?Bo:Uo,n.length,i,r,c);!i&&m&&(n[p].providerFactory=l),Vo(s,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),o.push(l)}else Vo(s,e,f>-1?f:p,Fo(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Vo(e,t,n,r){const i=ps(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Fo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function jo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Uo(e,t,n,r){return qo(this.multi,[])}function Bo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=xn(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),qo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],qo(i,s);return s}function qo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function $o(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=At();if(r.firstCreatePass){const i=ot(e);Lo(n,r.data,r.blueprint,i,!0),Lo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class zo{}class Ho{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ne(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Ko=(()=>{class e{}return e.NULL=new Ho,e})();function Go(...e){}function Wo(e,t){return new Jo(wt(e,t))}const Qo=function(){return Wo(Ot(),xt())};let Jo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Qo,e})();class Yo{}let Xo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Zo(),e})();const Zo=function(){const e=xt(),t=_t(Ot().index,e);return function(e){return e[11]}(tt(t)?t:e)};let ea=(()=>{class e{}return e.\u0275prov=fe({token:e,providedIn:"root",factory:()=>null}),e})();class ta{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const na=new ta("12.0.5");class ra{constructor(){}supports(e){return Ts(e)}create(e){return new sa(e)}}const ia=(e,t)=>t;class sa{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ia}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<ua(n,r,i)?t:n,o=ua(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ts(e))throw new Error(`Error trying to diff '${ne(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Es()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new oa(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ca),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ca),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class oa{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aa{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class ca{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new aa,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ua(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class la{constructor(){}supports(e){return e instanceof Map||Ss(e)}create(){return new ha}}class ha{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ss(e)))throw new Error(`Error trying to diff '${ne(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new da(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class da{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fa(){return new pa([new ra])}let pa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||fa()),deps:[[e,new er,new Zn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=fe({token:e,providedIn:"root",factory:fa}),e})();function ga(){return new ma([new la])}let ma=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||ga()),deps:[[e,new er,new Zn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=fe({token:e,providedIn:"root",factory:ga}),e})();function ya(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(vt(s)),nt(s))for(let e=et;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&ya(t[1],t,n,r)}const o=n.type;if(8&o)ya(e,t,n.child,r);else if(32&o){const e=Ar(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Wr(t,n);if(Array.isArray(e))r.push(...e);else{const n=Or(t[16]);ya(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class va extends class{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ya(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(nt(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(function(e,t){if(e.length<=et)return;const n=et+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Vr(s,r),t>0&&(e[n-1][4]=r[4]);const o=Fn(e,et+t);Jr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i}(e,n),Fn(t,n))}this._attachedToViewContainer=!1}!function(e,t){if(!(256&t[2])){const n=t[11];mt(n)&&n.destroyNode&&Jr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Fr(e[1],e);for(;t;){let n=null;if(tt(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)tt(t)&&Fr(t[1],t),t=t[3];null===t&&(t=e),tt(t)&&Fr(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}onDestroy(e){!function(e,t,n,r){const i=Ji(t);i.push(r)}(0,this._lView,0,e)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ki(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Lt(!0);try{Ki(e,t,n)}finally{Lt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Jr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}{constructor(e){super(e),this._view=e}detectChanges(){Gi(this._view)}checkNoChanges(){!function(e){Lt(!0);try{Gi(e)}finally{Lt(!1)}}(this._view)}get context(){return null}}const wa=[new la],ba=new pa([new ra]),_a=new ma(wa);class Ia{}const Ca={};class Ea extends Ko{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ye(e);return new ka(t,this.ngModule)}}function Ta(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Sa=new Ln("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Tr});class ka extends zo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(li).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ta(this.componentDef.inputs)}get outputs(){return Ta(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ca,i);return s!==Ca||r===Ca?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(Yo,yt),o=i.get(ea,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(mt(e))return e.selectRootElement(t,n===xe.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Lr(s.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Tr,clean:Qi,playerHandler:null,flags:0},d=Oi(0,null,null,1,0,null,null,null,null,null),f=_i(null,d,h,l,null,null,s,a,o,i);let p,g;zt(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Ii(o,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(es(a,c,!0),null!==e&&(cn(i,e,c),null!==a.classes&&Zr(i,e,a.classes),null!==a.styles&&Xr(i,e,a.styles)));const u=r.createRenderer(e,t),l=_i(n,Ai(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(_n(yn(a,n),o,t.type),Ni(o,a),Li(a,n.length,1)),zi(n,l),n[20]=l}(u,this.componentDef,f,s,a);if(u)if(n)cn(a,u,["ng-version",na.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!oi(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&cn(a,u,e),t&&t.length>0&&Zr(a,u,t.join(" "))}if(g=bt(d,Ze),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Ot();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Vi(e,r,t,Ei(e,t,1,null),n));const i=xn(t,e,r.directiveStart,r);wr(i,t);const s=wt(r,t);return s&&wr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=Ot();t.contentQueries(1,o,e.directiveStart)}const a=Ot();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Yt(a.index),Pi(n[1],a,0,a.directiveStart,a.directiveEnd,t),Di(t,o)),o}(e,this.componentDef,f,h,[ys]),Ti(d,f,null)}finally{Qt()}return new xa(this.componentType,p,Wo(g,f),f,g)}}class xa extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new va(r),this.componentType=e}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Aa=new Map;class Oa extends Ia{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ea(this);const n=Xe(e),r=e[Ue]||null;r&&so(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=cs(e,t,[{provide:Ia,useValue:this},{provide:Ko,useValue:this.componentFactoryResolver}],ne(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ms.THROW_IF_NOT_FOUND,n=Ie.Default){return e===ms||e===Ia||e===ts?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ma extends class{}{constructor(e){super(),this.moduleType=e,null!==Xe(e)&&function(e){const t=new Set;!function e(n){const r=Xe(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ne(t)} vs ${ne(t.name)}`)}(i,Aa.get(i),n),Aa.set(i,n));const s=Sr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Oa(this.moduleType,e)}}function Pa(e){return t=>{setTimeout(e,void 0,t)}}const Da=class extends T{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,i,s;let o=e,a=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;o=null===(r=t.next)||void 0===r?void 0:r.bind(t),a=null===(i=t.error)||void 0===i?void 0:i.bind(t),c=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}this.__isAsync&&(a=Pa(a),o&&(o=Pa(o)),c&&(c=Pa(c)));const u=super.subscribe({next:o,error:a,complete:c});return e instanceof h&&e.add(u),u}},Na=new Ln("Application Initializer");let Ra=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Go,this.reject=Go,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Ls(t))e.push(t);else if(Vs(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Qn(Na,8))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const La=new Ln("AppId"),Va={provide:La,useFactory:function(){return`${Fa()}${Fa()}${Fa()}`},deps:[]};function Fa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ja=new Ln("Platform Initializer"),Ua=new Ln("Platform ID"),Ba=new Ln("appBootstrapListener");let qa=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const $a=new Ln("LocaleId"),za=new Ln("DefaultCurrencyCode");class Ha{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ka=function(e){return new Ma(e)},Ga=Ka,Wa=function(e){return Promise.resolve(Ka(e))},Qa=function(e){const t=Ka(e),n=Sr(Xe(e).declarations).reduce((e,t)=>{const n=Ye(t);return n&&e.push(new ka(n)),e},[]);return new Ha(t,n)},Ja=Qa,Ya=function(e){return Promise.resolve(Qa(e))};let Xa=(()=>{class e{constructor(){this.compileModuleSync=Ga,this.compileModuleAsync=Wa,this.compileModuleAndAllComponentsSync=Ja,this.compileModuleAndAllComponentsAsync=Ya}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const Za=(()=>Promise.resolve(0))();function ec(e){"undefined"==typeof Zone?Za.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class tc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=De.requestAnimationFrame,t=De.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(De,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,ic(e),e.isCheckStableRunning=!0,rc(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),ic(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return sc(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),oc(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return sc(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),oc(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,ic(e),rc(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(tc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,nc,Go,Go);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const nc={};function rc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ic(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function sc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function oc(e){e._nesting--,rc(e)}class ac{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let cc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tc.assertNotInAngularZone(),ec(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ec(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Qn(tc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),uc=(()=>{class e{constructor(){this._applications=new Map,dc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return dc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class lc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let hc,dc=new lc,fc=!0,pc=!1;const gc=new Ln("AllowMultipleToken");function mc(e,t,n=[]){const r=`Platform: ${t}`,i=new Ln(r);return(t=[])=>{let s=yc();if(!s||s.injector.get(gc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:rs,useValue:"platform"});!function(e){if(hc&&!hc.destroyed&&!hc.injector.get(gc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");hc=e.get(vc);const t=e.get(ja,null);t&&t.forEach(e=>e())}(ms.create({providers:e,name:r}))}return function(e){const t=yc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function yc(){return hc&&!hc.destroyed?hc:null}let vc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new ac:("zone.js"===e?void 0:e)||new tc({enableLongStackTrace:(pc=!0,fc),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:tc,useValue:n}];return n.run(()=>{const t=ms.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Er,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{_c(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Ls(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Ra);return e.runInitializers(),e.donePromise.then(()=>(so(i.injector.get($a,eo)||eo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=wc({},t);return function(e,t,n){const r=new Ma(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(bc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ne(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Qn(ms))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function wc(e,t){return Array.isArray(t)?t.reduce(wc,e):Object.assign(Object.assign({},e),t)}let bc=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new b(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),o=new b(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{tc.assertNotInAngularZone(),ec(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{tc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return k(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof b?e[0]:H(t)(K(e,n))}(s,o.pipe(e=>{return G()((t=Z,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,Y);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof zo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ia),i=n.create(ms.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(cc,null),a=o&&i.injector.get(uc);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),_c(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;_c(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ba,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Qn(tc),Qn(ms),Qn(Er),Qn(Ko),Qn(Ra))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function _c(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ic=mc(null,"core",[{provide:Ua,useValue:"unknown"},{provide:vc,deps:[ms]},{provide:uc,deps:[]},{provide:qa,deps:[]}]),Cc=[{provide:bc,useClass:bc,deps:[tc,ms,Er,Ko,Ra]},{provide:Sa,deps:[tc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Ra,useClass:Ra,deps:[[new Zn,Na]]},{provide:Xa,useClass:Xa,deps:[]},Va,{provide:pa,useFactory:function(){return ba},deps:[]},{provide:ma,useFactory:function(){return _a},deps:[]},{provide:$a,useFactory:function(e){return so(e=e||"undefined"!=typeof $localize&&$localize.locale||eo),e},deps:[[new Xn($a),new Zn,new er]]},{provide:za,useValue:"USD"}];let Ec=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Qn(bc))},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:Cc}),e})(),Tc=null;function Sc(){return Tc}const kc=new Ln("DocumentToken");var xc=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Ac{}let Oc=(()=>{class e extends Ac{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Xs(t);if(n)return n;const r=t.split("-")[0];if(n=Xs(r),n)return n;if("en"===r)return Js;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[Zs.PluralCase]}(t||this.locale)(e)){case xc.Zero:return"zero";case xc.One:return"one";case xc.Two:return"two";case xc.Few:return"few";case xc.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Qn($a))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function Mc(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let Pc=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ts(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ne(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(Os(pa),Os(ma),Os(Jo),Os(Xo))},e.\u0275dir=Je({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})(),Dc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[{provide:Ac,useClass:Oc}]}),e})();class Nc{}class Rc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new Rc,Tc||(Tc=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Vc=Vc||document.querySelector("base"),Vc?Vc.getAttribute("href"):null);return null==t?null:function(e){Lc=Lc||document.createElement("a"),Lc.setAttribute("href",e);const t=Lc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){Vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Mc(document.cookie,e)}}let Lc,Vc=null;const Fc=new Ln("TRANSITION_ID"),jc=[{provide:Na,useFactory:function(e,t,n){return()=>{n.get(Ra).donePromise.then(()=>{const n=Sc();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Fc,kc,ms],multi:!0}];class Uc{static init(){var e;e=new Uc,dc=e}addToWindow(e){De.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},De.getAllAngularTestabilities=()=>e.getAllTestabilities(),De.getAllAngularRootElements=()=>e.getAllRootElements(),De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push(e=>{const t=De.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Sc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Bc=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const qc=new Ln("EventManagerPlugins");let $c=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(Qn(qc),Qn(tc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class zc{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Sc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let Hc=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),Kc=(()=>{class e extends Hc{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(Gc),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Gc))}}return e.\u0275fac=function(t){return new(t||e)(Qn(kc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function Gc(e){Sc().remove(e)}const Wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qc=/%COMP%/g;function Jc(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Jc(e,i,n):(i=i.replace(Qc,e),n.push(i))}return n}function Yc(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Xc=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Zc(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case xe.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new eu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case xe.ShadowDom:return new tu(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Jc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Qn($c),Qn(Kc),Qn(La))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class Zc{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Wc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=Wc[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Wc[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(kr.DashCase|kr.Important)?e.style.setProperty(t,n,r&kr.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Yc(n)):this.eventManager.addEventListener(e,t,Yc(n))}}class eu extends Zc{constructor(e,t,n,r){super(e),this.component=n;const i=Jc(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Qc,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Qc,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class tu extends Zc{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Jc(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nu=(()=>{class e extends zc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Qn(kc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const ru=["alt","control","meta","shift"],iu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},su={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ou={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let au=(()=>{class e extends zc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),s=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sc().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(ru.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&su.hasOwnProperty(t)&&(t=su[t]))}return iu[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ru.forEach(r=>{r!=n&&(0,ou[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Qn(kc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const cu=mc(Ic,"browser",[{provide:Ua,useValue:"browser"},{provide:ja,useValue:function(){Rc.makeCurrent(),Uc.init()},multi:!0},{provide:kc,useFactory:function(){return function(e){pt=e}(document),document},deps:[]}]),uu=[[],{provide:rs,useValue:"root"},{provide:Er,useFactory:function(){return new Er},deps:[]},{provide:qc,useClass:nu,multi:!0,deps:[kc,tc,Ua]},{provide:qc,useClass:au,multi:!0,deps:[kc]},[],{provide:Xc,useClass:Xc,deps:[$c,Kc,La]},{provide:Yo,useExisting:Xc},{provide:Hc,useExisting:Kc},{provide:Kc,useClass:Kc,deps:[kc]},{provide:cc,useClass:cc,deps:[tc]},{provide:$c,useClass:$c,deps:[qc,tc]},{provide:Nc,useClass:Bc,deps:[]},[]];let lu=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:La,useValue:t.appId},{provide:Fc,useExisting:La},jc]}}}return e.\u0275fac=function(t){return new(t||e)(Qn(e,12))},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:uu,imports:[Dc,Ec]}),e})();function hu(...e){let t=e[e.length-1];return k(t)?(e.pop(),V(e,t)):K(e)}function du(e,t){return function(n){return n.lift(new fu(e,t))}}"undefined"!=typeof window&&window;class fu{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new pu(e,this.predicate,this.thisArg))}}class pu extends p{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}class gu{}class mu{}class yu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof yu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new yu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof yu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class vu{encodeKey(e){return wu(e)}encodeValue(e){return wu(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function wu(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function bu(e){return`${e}`}class _u{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new vu,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new _u({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(bu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(bu(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Iu{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Cu(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Eu(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Tu(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Su{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new yu),this.context||(this.context=new Iu),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new _u,this.urlWithParams=t}serializeBody(){return null===this.body?null:Cu(this.body)||Eu(this.body)||Tu(this.body)||"string"==typeof this.body?this.body:this.body instanceof _u?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Tu(this.body)?null:Eu(this.body)?this.body.type||null:Cu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _u?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const l=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),u)),new Su(n,r,s,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var ku=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class xu{constructor(e,t=200,n="OK"){this.headers=e.headers||new yu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Au extends xu{constructor(e={}){super(e),this.type=ku.ResponseHeader}clone(e={}){return new Au({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ou extends xu{constructor(e={}){super(e),this.type=ku.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ou({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Mu extends xu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Pu(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Du=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof Su)r=e;else{let i,s;i=n.headers instanceof yu?n.headers:new yu(n.headers),n.params&&(s=n.params instanceof _u?n.params:new _u({fromObject:n.params})),r=new Su(e,t,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=hu(r).pipe(q(e=>this.handler.handle(e),void 0,1));if(e instanceof Su||"events"===n.observe)return i;const s=i.pipe(du(e=>e instanceof Ou));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(x(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(x(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(x(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(x(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new _u).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,Pu(n,t))}post(e,t,n={}){return this.request("POST",e,Pu(n,t))}put(e,t,n={}){return this.request("PUT",e,Pu(n,t))}}return e.\u0275fac=function(t){return new(t||e)(Qn(gu))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class Nu{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Ru=new Ln("HTTP_INTERCEPTORS");let Lu=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const Vu=/^\)\]\}',?\n/;let Fu=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new b(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new yu(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new Au({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),c=null;204!==i&&(c=void 0===n.response?n.responseText:n.response),0===i&&(i=c?200:0);let u=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(Vu,"");try{c=""!==c?JSON.parse(c):null}catch(l){c=e,u&&(u=!1,c={error:l,text:c})}}u?(t.next(new Ou({body:c,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new Mu({error:c,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new Mu({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let c=!1;const u=r=>{c||(t.next(s()),c=!0);let i={type:ku.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:ku.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),t.next({type:ku.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Qn(Nc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const ju=new Ln("XSRF_COOKIE_NAME"),Uu=new Ln("XSRF_HEADER_NAME");class Bu{}let qu=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Mc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Qn(kc),Qn(Ua),Qn(ju))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),$u=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Qn(Bu),Qn(Uu))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),zu=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(Ru,[]);this.chain=e.reduceRight((e,t)=>new Nu(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Qn(mu),Qn(ms))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),Hu=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:$u,useClass:Lu}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:ju,useValue:t.cookieName}:[],t.headerName?{provide:Uu,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[$u,{provide:Ru,useExisting:$u,multi:!0},{provide:Bu,useClass:qu},{provide:ju,useValue:"XSRF-TOKEN"},{provide:Uu,useValue:"X-XSRF-TOKEN"}]}),e})(),Ku=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[Du,{provide:gu,useClass:zu},Fu,{provide:mu,useExisting:Fu}],imports:[[Hu.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();function Gu(e,t){return new b(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=F(e[a]);let u=!1;n.add(c.subscribe({next:e=>{u||(u=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&u||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let Wu=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Os(Xo),Os(Jo))},e.\u0275dir=Je({type:e}),e})(),Qu=(()=>{class e extends Wu{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=Pn(e)))(n||e)}}(),e.\u0275dir=Je({type:e,features:[vs]}),e})();const Ju=new Ln("NgValueAccessor"),Yu={provide:Ju,useExisting:se(()=>Zu),multi:!0},Xu=new Ln("CompositionEventMode");let Zu=(()=>{class e extends Wu{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Sc()?Sc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(Os(Xo),Os(Jo),Os(Xu,8))},e.\u0275dir=Je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Fs("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[$o([Yu]),vs]}),e})();const el=new Ln("NgValidators"),tl=new Ln("NgAsyncValidators");function nl(e){return null!=e}function rl(e){const t=Ls(e)?F(e):e;return Vs(t),t}function il(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function sl(e,t){return t.map(t=>t(e))}function ol(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function al(e){return null!=e?function(e){if(!e)return null;const t=e.filter(nl);return 0==t.length?null:function(e){return il(sl(e,t))}}(ol(e)):null}function cl(e){return null!=e?function(e){if(!e)return null;const t=e.filter(nl);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(c(t))return Gu(t,null);if(u(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Gu(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Gu(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(x(e=>t(...e)))}return Gu(e,null)}(sl(e,t).map(rl)).pipe(x(il))}}(ol(e)):null}function ul(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}let ll=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=al(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Je({type:e}),e})(),hl=(()=>{class e extends ll{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=Pn(e)))(n||e)}}(),e.\u0275dir=Je({type:e,features:[vs]}),e})();class dl extends ll{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fl{constructor(e){this._cd=e}is(e){var t,n;return!!(null===(n=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===n?void 0:n[e])}}let pl=(()=>{class e extends fl{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Os(dl,2))},e.\u0275dir=Je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&$s("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[vs]}),e})(),gl=(()=>{class e extends fl{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Os(hl,10))},e.\u0275dir=Je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&$s("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[vs]}),e})();function ml(e,t){vl(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&wl(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&wl(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function yl(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function vl(e,t){const n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(ul(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(ul(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();yl(t._rawValidators,i),yl(t._rawAsyncValidators,i)}function wl(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function bl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const _l="VALID",Il="INVALID",Cl="PENDING",El="DISABLED";function Tl(e){return(Al(e)?e.validators:e)||null}function Sl(e){return Array.isArray(e)?al(e):e||null}function kl(e,t){return(Al(t)?t.asyncValidators:e)||null}function xl(e){return Array.isArray(e)?cl(e):e||null}function Al(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Ol{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Sl(this._rawValidators),this._composedAsyncValidatorFn=xl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_l}get invalid(){return this.status===Il}get pending(){return this.status==Cl}get disabled(){return this.status===El}get enabled(){return this.status!==El}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Sl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=xl(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Cl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=El,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_l,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==_l&&this.status!==Cl||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?El:_l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Cl,this._hasOwnPendingAsyncValidator=!0;const t=rl(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof Pl?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Dl&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Da,this.statusChanges=new Da}_calculateStatus(){return this._allControlsDisabled()?El:this.errors?Il:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cl)?Cl:this._anyControlsHaveStatus(Il)?Il:_l}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Al(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ml extends Ol{constructor(e=null,t,n){super(Tl(t),kl(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bl(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bl(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Pl extends Ol{constructor(e,t,n){super(Tl(t),kl(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Ml?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Dl extends Ol{constructor(e,t,n){super(Tl(t),kl(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Ml?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Nl={provide:hl,useExisting:se(()=>Ll)},Rl=(()=>Promise.resolve(null))();let Ll=(()=>{class e extends hl{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Da,this.form=new Pl({},al(e),cl(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Rl.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),ml(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Rl.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),bl(this._directives,e)})}addFormGroup(e){Rl.then(()=>{const t=this._findContainer(e.path),n=new Pl({});(function(e,t){vl(e,t)})(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Rl.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Rl.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(Os(el,10),Os(tl,10))},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Fs("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$o([Nl]),vs]}),e})();const Vl={provide:dl,useExisting:se(()=>jl)},Fl=(()=>Promise.resolve(null))();let jl=(()=>{class e extends dl{constructor(e,t,n,r){super(),this.control=new Ml,this._registered=!1,this.update=new Da,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===Zu?n=e:Object.getPrototypeOf(e.constructor)===Qu?r=e:i=e}),i||r||n||null}(0,r)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ml(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Fl.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;Fl.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(Os(hl,9),Os(el,10),Os(tl,10),Os(Ju,10))},e.\u0275dir=Je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$o([Vl]),vs,ut]}),e})(),Ul=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const Bl={provide:Ju,useExisting:se(()=>ql),multi:!0};let ql=(()=>{class e extends Qu{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=Pn(e)))(n||e)}}(),e.\u0275dir=Je({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Fs("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[$o([Bl]),vs]}),e})(),$l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({}),e})();const zl=new Ln("NgModelWithFormControlWarning"),Hl={provide:el,useExisting:se(()=>Kl),multi:!0};let Kl=(()=>{class e{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(e){return null==(t=e.value)||0===t.length?{required:!0}:null;var t}(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Je({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&xs("required",t.required?"":null)},inputs:{required:"required"},features:[$o([Hl])]}),e})(),Gl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[[$l]]}),e})(),Wl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[Gl]}),e})(),Ql=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:zl,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[Gl]}),e})(),Jl=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,s=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new Pl(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new Ml(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new Dl(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof Ml||e instanceof Pl||e instanceof Dl?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({factory:function(){return new e},token:e,providedIn:Ql}),e})();const Yl=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Xl=(e,t,n,r)=>{const i=r-t;return Math.sqrt(Math.pow(n-e,2)+Math.pow(i,2))};let Zl,eh,th;const nh={x:void 0,y:void 0,prevX:void 0,prevY:void 0,counter:0,isMoving:()=>!(nh.counter>50)};let rh;const ih=[],sh=e=>{th=requestAnimationFrame(sh),eh.clearRect(0,0,Zl.width,Zl.height),nh.prevX==nh.x&&nh.prevY==nh.y&&nh.counter++;for(let t=0;t<ih.length;t++)ih[t].fly(),(ih[t].x<0-ih[t].radius||ih[t].x>Zl.width+ih[t].radius||ih[t].y<0-ih[t].radius||ih[t].y>Zl.height+ih[t].radius)&&(ih[t].x=Yl(ih[t].radius,Zl.width-ih[t].radius),ih[t].y=Yl(ih[t].radius,Zl.height-ih[t].radius));nh.prevX=nh.x,nh.prevY=nh.y},oh=e=>{Zl.width=window.innerWidth,Zl.height=window.innerHeight},ah=e=>{nh.x=event.clientX,nh.y=event.clientY,nh.counter=0};class ch{constructor(e,t,n,r,i,s,o,a){this.x=e,this.y=t,this.radius=n,this.color={fill:r.fill,glow:r.glow},this.velocity={x:Math.random()*Math.PI,y:Math.random()*Math.PI},this.glow={pulse:s,flicker:o,default:void 0,strength:s?Yl(16,255):191,growing:!0},this.collision=i,this.connect=a}draw(){eh.beginPath(),eh.arc(this.x,this.y,this.radius,0,2*Math.PI,!1);const e=eh.createRadialGradient(this.x,this.y,this.radius/10,this.x,this.y,this.radius);e.addColorStop(1,this.color.glow+"00"),e.addColorStop(.1,this.color.glow+this.glow.strength.toString(16)),e.addColorStop(0,this.color.fill),eh.fillStyle=e,eh.fill(),eh.closePath()}fly(){this.collide(),this.stayWithinView(),this.x+=.75*Math.cos(this.velocity.x),this.y+=.75*Math.sin(this.velocity.y),this.calcGlow(),this.draw()}stayWithinView(){this.x+this.radius>=Zl.width||this.x-this.radius<=0?this.velocity.x-=.07:this.velocity.x+=20*Math.random()*Math.PI/180-10*Math.PI/180,this.y+this.radius>=Zl.height||this.y-this.radius<=0?this.velocity.y-=.07:this.velocity.y+=20*Math.random()*Math.PI/180-10*Math.PI/180}collide(){if(this.collision){this.calcField();const e=ih.indexOf(this);for(let t=0;t<ih.length;t++)if(ih[t]!=ih[e]){const e=Xl(this.x,this.y,ih[t].x,ih[t].y),n=this.radius+ih[t].radius;e<=n&&(this.velocity.x-=.035,this.velocity.y-=.035,this.connect&&(eh.save(),eh.beginPath(),eh.moveTo(this.x,this.y),eh.lineTo(ih[t].x,ih[t].y),eh.strokeStyle=`#ffffff${Math.floor(255-238*e/n).toString(16)}`,eh.stroke(),eh.closePath(),eh.restore()))}}}calcField(){if(!nh.isMoving())return;let e=this.x-nh.x,t=this.y-nh.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),r=Math.atan(Math.abs(t)/Math.abs(e));if(n>7*rh)return;let i=8/Math.pow(n/rh,1.5);n<this.radius&&(i=8);let s=i*Math.cos(r)*(e/Math.abs(e)),o=i*Math.sin(r)*(t/Math.abs(t));Number.isFinite(s)&&(this.x+=s),Number.isFinite(o)&&(this.y+=o)}calcGlow(){void 0===this.glow.default&&(this.glow.default=this.glow.strength),this.glow.pulse&&(this.glow.default>=255?this.glow.growing=!1:this.glow.default<=48&&(this.glow.growing=!0),this.glow.growing?(this.glow.default++,this.glow.strength=this.glow.default):(this.glow.default--,this.glow.strength=this.glow.default)),this.glow.flicker&&(this.glow.strength=Math.random()>.99?Yl(16,255):this.glow.default)}}let uh=(()=>{class e{constructor(){this.isKL=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ze({type:e,selectors:[["app-hero"]],inputs:{isKL:"isKL"},decls:17,vars:0,consts:function(){let e,t,n,r;return e="Wedding Invitation",t="Jake & MJ",n="As we join in marriage,",r="We're so glad to have the pleasure of your company",[[1,"flex-column"],[1,"diamond","flex-row"],[1,"flex-column","txt-container"],[1,"title"],[1,"m-0"],e,t,[1,"subtext"],n,r]},template:function(e,t){1&e&&(Ds(0,"div",0),Ds(1,"div",1),Ds(2,"div",2),Ds(3,"div",3),Ds(4,"h1",4),Ro(5,5),Ns(),Ns(),Ds(6,"div",0),Ds(7,"h3"),Ro(8,6),Ns(),Ds(9,"h5"),Ws(10,"Reception on the 2nd of February 2024"),Ns(),Ns(),Ns(),Ns(),Ds(11,"div",7),Ds(12,"p"),Ro(13,8),Ns(),Ds(14,"p"),Ro(15,9),Ns(),Rs(16,"p"),Ns(),Ns())},styles:[".banner-image[_ngcontent-%COMP%]{background-image:url(/assets/images/background.jpeg);position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:50%}.txt-container[_ngcontent-%COMP%]{padding:0 1em;color:#585755}.subtext[_ngcontent-%COMP%], .txt-container[_ngcontent-%COMP%]{font-family:Dancing script,Ma Shan Zheng}.subtext[_ngcontent-%COMP%]{position:absolute;bottom:10%;color:#fff}.title[_ngcontent-%COMP%]{margin-bottom:1em}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;font-family:Playfair Display,Ma Shan Zheng}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:500}h3[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.5em}h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin-top:.5em}h5[_ngcontent-%COMP%]{margin-bottom:.5em;font-size:1em;font-weight:300}@media only screen and (min-width:768px){h1[_ngcontent-%COMP%]{font-size:5em}h3[_ngcontent-%COMP%]{font-size:2em}h5[_ngcontent-%COMP%]{font-weight:300}.subtext[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-size:1.5em}}@media only screen and (min-width:1024px){h1[_ngcontent-%COMP%]{font-size:5em}h3[_ngcontent-%COMP%]{font-size:2em}h5[_ngcontent-%COMP%]{font-size:1.5em;font-weight:300}.subtext[_ngcontent-%COMP%]{right:20%;bottom:10%}}@media only screen and (min-width:1440px){h1[_ngcontent-%COMP%]{font-size:8em}h3[_ngcontent-%COMP%]{font-size:4em}h5[_ngcontent-%COMP%]{font-size:3em;font-weight:300}}"]}),e})(),lh=(()=>{class e{constructor(){this.events=[{id:0,title:"My last travel",content:"\u76f8\u9047\u3001\u76f8\u8bc6\u3001\u76f8\u77e5...",date:"2018",icon:""},{id:1,title:"My Job",content:"\u76f8\u7231\u3001\u76f8\u604b",date:"2019",icon:""},{id:2,title:"My Education",content:"\u6211\u4eec\u51b3\u5b9a\u643a\u624b\u5171\u5ea6\u4f59\u751f",date:"2022",icon:""},{id:3,title:"My Education",content:"\u6c42\u5a5a",date:"01/04/22",icon:""},{id:4,title:"My Education",content:"\u9886\u8bc1",date:"31/08/22",icon:""},{id:3,title:"My Education",content:"\u5a5a\u793c",date:"17/12/22",icon:""},{id:5,title:"My Education",content:"\u5a5a\u793c",date:"25/12/22",icon:""}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ze({type:e,selectors:[["app-couple"]],decls:33,vars:0,consts:function(){let e,t,n;return e="When we first met",t="When Jake proposed",n="SLC Wedding",[[1,"couple-container"],[1,"flex-row","couple-img-container"],[1,"img-container","groom"],[1,"img-container","bride"],[1,"timeline-container","blur-bg"],[1,"timeline"],[1,"timeline-panel"],[1,"timeline-heading"],[1,"timeline-title"],e,[1,"timeline-date"],[1,"text-muted"],[1,"glyphicon","glyphicon-time"],[1,"timeline-inverted"],t,n]},template:function(e,t){1&e&&(Ds(0,"div",0),Ds(1,"div",1),Rs(2,"div",2),Rs(3,"div",3),Ns(),Ds(4,"div",4),Ds(5,"ul",5),Ds(6,"li"),Ds(7,"div",6),Ds(8,"div",7),Ds(9,"h4",8),Ro(10,9),Ns(),Ds(11,"p",10),Ds(12,"small",11),Rs(13,"i",12),Ws(14,"July 2023"),Ns(),Ns(),Ns(),Ns(),Ns(),Ds(15,"li",13),Ds(16,"div",6),Ds(17,"div",7),Ds(18,"h4",8),Ro(19,14),Ns(),Ds(20,"p",10),Ds(21,"small",11),Rs(22,"i",12),Ws(23,"October 2023"),Ns(),Ns(),Ns(),Ns(),Ns(),Ds(24,"li"),Ds(25,"div",6),Ds(26,"div",7),Ds(27,"h4",8),Ro(28,15),Ns(),Ds(29,"p",10),Ds(30,"small",11),Rs(31,"i",12),Ws(32,"February 2024"),Ns(),Ns(),Ns(),Ns(),Ns(),Ns(),Ns(),Ns())},styles:['.couple-container[_ngcontent-%COMP%]{position:relative;min-height:50vh}.couple-img-container[_ngcontent-%COMP%]{margin:1em}.couple-img-container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{margin-top:1em;justify-content:space-between}.couple-img-container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%}.bride[_ngcontent-%COMP%]{background-image:url(bride-cropped.4ad40b01ff4d9a3dde26.jpeg)}.groom[_ngcontent-%COMP%]{background-image:url(groom.ce549f6d60f4d37df6e5.jpeg)}.img-container[_ngcontent-%COMP%]{border-radius:50%;height:150px;width:150px;background-size:cover;background-position:50%;position:relative}.img-container[_ngcontent-%COMP%]:after{border-radius:50%;position:absolute;content:"";top:-5%;left:-5%;height:110%;width:110%}.img-container.bride[_ngcontent-%COMP%]{margin-top:10%}.img-container.bride[_ngcontent-%COMP%]:after{border:2px solid #4f3566}.img-container.groom[_ngcontent-%COMP%]{margin-bottom:10%}.img-container.groom[_ngcontent-%COMP%]:after{border:2px solid #4f3566}.card-title[_ngcontent-%COMP%]{font-size:2em}.right[_ngcontent-%COMP%]{right:-10%}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{position:absolute;top:-10%}.left[_ngcontent-%COMP%]{left:-10%}.right-text[_ngcontent-%COMP%]{text-align:right}.left-text[_ngcontent-%COMP%]{text-align:left}.txt-container[_ngcontent-%COMP%]{margin:2em;padding:1em 2em;font-size:1.5em;z-index:-1;min-height:250px;position:relative}.txt-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{z-index:1}.timeline-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.timeline[_ngcontent-%COMP%]{margin-top:2em;list-style:none;padding:20px 0;position:relative;width:100%;font-family:Dancing script,Ma Shan Zheng}.timeline[_ngcontent-%COMP%]:before{top:3%;bottom:3%;position:absolute;content:" ";width:3px;background-color:#4f3566;left:50%;margin-left:-1.5px}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-bottom:10px;position:relative;text-align:right}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:after, .timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:before{content:" ";display:table}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:after{clear:both}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]{width:46%;float:left;border-radius:2px;padding:-200px;position:relative}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%]{text-align:left}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]{float:right}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]:before{border-left-width:0;border-right-width:15px;left:-15px;right:auto}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]:after{border-left-width:0;border-right-width:14px;left:-14px;right:auto}.timeline-title[_ngcontent-%COMP%]{margin:0;color:inherit;font-size:1em}.timeline-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.timeline-date[_ngcontent-%COMP%]{font-weight:bolder;margin-bottom:.5em}.timeline-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .timeline-body[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin-bottom:0}.timeline-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{margin-top:5px}@media only screen and (min-width:768px){.img-container[_ngcontent-%COMP%]{height:250px;width:250px}}@media only screen and (min-width:1024px){.bg-image[_ngcontent-%COMP%]{display:none}.img-container[_ngcontent-%COMP%]{height:350px;width:350px}}@media only screen and (min-width:1440px){.bg-image[_ngcontent-%COMP%]{display:none}.img-container[_ngcontent-%COMP%]{height:500px;width:500px}}']}),e})(),hh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ze({type:e,selectors:[["app-biography"]],decls:16,vars:0,consts:[[1,"biography"],[1,"profile-picture"],[1,"bio-content"]],template:function(e,t){1&e&&(Ds(0,"div",0),Rs(1,"div",1),Ds(2,"div",2),Ds(3,"h1"),Ws(4,"Marjorie Itabashi"),Ns(),Ds(5,"p"),Ws(6," I was born in the middle of the summer with no a/c to a Japanese father and American Mother in Chiba, Japan. Raised with 4 other children as the oldest aka guinea pig of the pack, I always enjoyed having fun with people, being active, adventurous, and independent. Moving to Utah for high school, I was introduced to many cultures and learned to celebrate them. During this time, I also gained interest in personal growth through tourism college courses, late babysitting nights, and working for a marketing company. After serving my church mission in the countryside of the Japan Kobe Mission, I decided to go back to school by attending LDS Business College to study Project Management. Upon receiving my associate\u2019s degree, I transferred to Brigham Young University Hawaii to study Hospitality and Tourism Management. While I loved the industry, and worked in various parts of it, the difficulty of employment during the Covid-19 pandemic led me back to Utah where I currently work for The Church of Jesus Christ of Latter-Day Saints headquarters. Since I get to do customer support for Japan, I work in the evenings, allowing me to have the warm day time be my free time. Part of that is spent helping at a daycare where I get to experience high energy and mental healing through adoring children. Most of my other free time is spent hiking, going to the gym, and working on my small garden. During the winter I mostly just enjoy eating. Even though I found Jake to be a little cocky at first, I agreed to meet him because he offered free food upfront. Some of my favorite things about him is that he likes crunchy fries so that I can eat the soggy ones and how he would do steep hikes with me even the day after leg day. I can\u2019t be grateful enough to explore life\u2019s journey with someone who is just as crazy about life as I am. "),Ns(),Ns(),Ns(),Rs(7,"br"),Rs(8,"br"),Ds(9,"div",0),Rs(10,"div",1),Ds(11,"div",2),Ds(12,"h1"),Ws(13,"Jake Loke"),Ns(),Ds(14,"p"),Ws(15," Originating from vibrant and culturally diverse Malaysia, my journey to the United States in 2014 has been a thrilling pursuit of knowledge and a passion for diverse interests. My journey began as I landed in Alaska serving as a missionary for the LDS church. I completed my studies at Brigham Young University-Idaho (BYU-I), where I cultivated a solid foundation of knowledge. My educational adventure continued at Utah Valley University (UVU) and the University of Utah (U of U), broadening my horizons. My fascination with technology is an ever-present delight. From exploring the nuances of artificial intelligence to keeping up with the latest advancements, I enjoy staying at the forefront of innovation, fueling my analytical thinking and sparking innovative solutions to complex problems. Beyond academics and technology, I enjoy basketball and hitting the gym. The court and gym are both a sanctuary where I express my competitive spirit and dedication to build my yin and yang. My commitment to self-improvement extends to the gym, where I continuously strive to better myself, both physically and mentally. Embracing personal development as a way of life, I'm driven by a thirst for knowledge and growth. This guiding philosophy encourages me to evolve and contribute positively to the world around me. In summary, my journey from Malaysia to the United States is a transformative adventure marked by a commitment to education, a deep passion for technology, and an unwavering pursuit of self-improvement and a reminder of my wonderful supportive family members. With enthusiasm and a thirst for self-discovery, I eagerly anticipate the exciting adventures and opportunities that await me in the future with Marjorie. "),Ns(),Ns(),Ns())},styles:["body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:700}body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Comic Sans MS,cursive;color:#333}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f0f0f0;text-align:center}.biography[_ngcontent-%COMP%]{background:linear-gradient(180deg,#bcc7bb,#6b8d6b);border-radius:5px;width:80%;padding:20px;color:#fff;font-size:larger;margin:auto}h1[_ngcontent-%COMP%]{font-size:1.5em}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-top:10px}"]}),e})(),dh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ze({type:e,selectors:[["app-gallery"]],decls:7,vars:0,consts:[[1,"gallery-container"],[1,"flex-column","couple-img-container"],[1,"top"],["src","assets/images/couple1.jpeg",1,""],[1,"flex-row","col-12","bottom"],["src","assets/images/couple2.jpeg",1,""],["src","assets/images/couple3-2.jpeg",1,""]],template:function(e,t){1&e&&(Ds(0,"div",0),Ds(1,"div",1),Ds(2,"div",2),Rs(3,"img",3),Ns(),Ds(4,"div",4),Rs(5,"img",5),Rs(6,"img",6),Ns(),Ns(),Ns())},styles:[".gallery-container[_ngcontent-%COMP%]{position:relative;min-height:50vh}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%;border:2px solid #4f3566;margin:1em}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-right-radius:50%;border-top-left-radius:50%}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{margin-top:1em;justify-content:space-between}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%;border:2px solid #4f3566}@media only screen and (min-width:1024px){.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}}.couple-img-container[_ngcontent-%COMP%]{text-align:center}.image-container[_ngcontent-%COMP%]{display:inline-block}"]}),e})(),fh=(()=>{class e{constructor(){this.isKL=!0,this.KLRestaurant="Grand Imperial Restaurant",this.JBRestaurant="Kee Lin Vegetarian Food"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ze({type:e,selectors:[["app-venue"]],inputs:{isKL:"isKL"},decls:124,vars:3,consts:function(){let e,t,n,r;return e=" Date",t="2, February 2024",n="Venue",r="Dai-Ichi Japanese Ward",[[1,"wedding-container"],[1,"wedding-date-container"],[1,"venues__ceremony"],[1,"ceremony__card","venues__card","border--colored"],[1,"venues__card-head","text--colored"],[1,"venues__card-title","text--colored"],e,[1,"venues__card-info"],[1,"venues__card-block"],[1,"venues__card-label"],t,[1,"venues__card-data"],[1,"address__map-container--left","address__map"],["id","address__map--ceremony",1,"address__map--ceremony","map","glassmorphism"],["id","calendar-card",1,"card-body"],[1,"month"],[1,"year-txt"],[1,"weekdays"],[1,"days"],[1,"fa","fa-heart",3,"ngClass"],[3,"ngClass"],[1,"wedding-venue-container"],[1,"venues__reception"],[1,"reception__card","venues__card","border--colored"],n,r,["href","https://www.google.com/maps?q=2005+S+900+E,+Salt+Lake+City,+UT+84105","target","_blank","rel","noopener noreferrer"],[1,"address__map-container--right","address__map"],["id","address__map--reception",1,"address__map--reception","map","glassmorphism"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d96755.8648237736!2d-111.8653901797223!3d40.72636400873647!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x87528aa4495bbf1f%3A0xdf9f39145ea501b3!2s2005%20S%20900%20E%2C%20Salt%20Lake%20City%2C%20UT%2084105!5e0!3m2!1sen!2sus!4v1696537011037!5m2!1sen!2sus","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0",3,"ngClass"]]},template:function(e,t){1&e&&(Ds(0,"div",0),Ds(1,"div",1),Ds(2,"div",2),Ds(3,"div",3),Ds(4,"div",4),Ds(5,"h3",5),Ro(6,6),Ns(),Ns(),Ds(7,"div",7),Ds(8,"div",8),Ds(9,"span",9),Ro(10,10),Ns(),Ns(),Ds(11,"div",8),Ds(12,"span",11),Ws(13,"6:30 p.m."),Ns(),Ns(),Ns(),Ns(),Ds(14,"div",12),Ds(15,"div",13),Ds(16,"div",14),Ds(17,"div",15),Ds(18,"div",16),Ws(19," 2024 "),Ns(),Ds(20,"div"),Ds(21,"span"),Ws(22,"February"),Ns(),Ns(),Ns(),Ds(23,"ul",17),Ds(24,"li"),Ws(25,"Sun"),Ns(),Ds(26,"li"),Ws(27,"Mon"),Ns(),Ds(28,"li"),Ws(29,"Tue"),Ns(),Ds(30,"li"),Ws(31,"Wed"),Ns(),Ds(32,"li"),Ws(33,"Thur"),Ns(),Ds(34,"li"),Ws(35,"Fri"),Ns(),Ds(36,"li"),Ws(37,"Sat"),Ns(),Ns(),Ds(38,"ul",18),Rs(39,"li"),Rs(40,"li"),Rs(41,"li"),Rs(42,"li"),Ds(43,"li"),Ws(44,"1"),Ns(),Ds(45,"li"),Rs(46,"i",19),Ds(47,"div",20),Ds(48,"span"),Ws(49,"2"),Ns(),Ns(),Ns(),Ds(50,"li"),Ws(51,"3"),Ns(),Ds(52,"li"),Ws(53,"4"),Ns(),Ds(54,"li"),Ws(55,"5"),Ns(),Ds(56,"li"),Ws(57,"6"),Ns(),Ds(58,"li"),Ws(59,"7"),Ns(),Ds(60,"li"),Ws(61,"8"),Ns(),Ds(62,"li"),Ws(63,"9"),Ns(),Ds(64,"li"),Ws(65,"10"),Ns(),Ds(66,"li"),Ws(67,"11"),Ns(),Ds(68,"li"),Ws(69,"12"),Ns(),Ds(70,"li"),Ws(71,"13"),Ns(),Ds(72,"li"),Ws(73,"14"),Ns(),Ds(74,"li"),Ws(75,"15"),Ns(),Ds(76,"li"),Ws(77,"16"),Ns(),Ds(78,"li"),Ws(79,"17"),Ns(),Ds(80,"li"),Ws(81,"18"),Ns(),Ds(82,"li"),Ws(83,"10"),Ns(),Ds(84,"li"),Ws(85,"20"),Ns(),Ds(86,"li"),Ws(87,"21"),Ns(),Ds(88,"li"),Ws(89,"22"),Ns(),Ds(90,"li"),Ws(91,"23"),Ns(),Ds(92,"li"),Ws(93,"24"),Ns(),Ds(94,"li"),Ws(95,"25"),Ns(),Ds(96,"li"),Ws(97,"26"),Ns(),Ds(98,"li"),Ws(99,"27"),Ns(),Ds(100,"li"),Ws(101,"28"),Ns(),Ds(102,"li"),Ws(103,"29"),Ns(),Ds(104,"li"),Ws(105,"30"),Ns(),Rs(106,"li"),Ns(),Ns(),Ns(),Ns(),Ns(),Ns(),Ds(107,"div",21),Ds(108,"div",22),Ds(109,"div",23),Ds(110,"div",4),Ds(111,"h3",5),Ro(112,24),Ns(),Ns(),Ds(113,"div",7),Ds(114,"div",8),Ds(115,"span",9),Ro(116,25),Ns(),Ns(),Ds(117,"div",8),Ds(118,"a",26),Ds(119,"span",11),Ws(120,"2005 S 900 E, Salt Lake City, UT 84105"),Ns(),Ns(),Ns(),Ns(),Ns(),Ds(121,"div",27),Ds(122,"div",28),Rs(123,"iframe",29),Ns(),Ns(),Ns(),Ns(),Ns()),2&e&&(di(46),Ms("ngClass",t.isKL?"hide":"show"),di(1),Ms("ngClass",t.isKL?"":"active"),di(76),Ms("ngClass",t.isKL?"hide":"show"))},directives:[Pc],styles:['#calendar-card[_ngcontent-%COMP%]{width:90%;height:90%;display:flex;flex-direction:column;padding:0 1em;font-family:Playfair Display}#calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{color:#000;display:flex;justify-content:space-between;align-items:flex-end;padding:0 1em 1em}#calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   .year-txt[_ngcontent-%COMP%]{font-size:2em}#calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:4em}#calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]{margin:0;padding:5px;background-color:#000;border-radius:2em;display:flex;justify-content:space-evenly;flex-wrap:wrap}#calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;display:inline-block;width:13.6%;text-align:center;color:#fff}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{padding:5px;margin:0;display:flex;flex-wrap:wrap;justify-content:space-evenly;flex:1}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;width:13.6%;text-align:center;margin-bottom:5px;color:#777;font-weight:700;display:flex;align-items:center;justify-content:center}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#000;transform:scale(2)}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{position:relative;color:#fff!important}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{z-index:2}.wedding-container[_ngcontent-%COMP%]{width:92%;max-width:1152px;padding:0 16px;margin:0 auto}.wedding-date-container[_ngcontent-%COMP%], .wedding-venue-container[_ngcontent-%COMP%]{position:relative;max-width:992px;margin:0 auto 100px}.venues[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:112px}.venues[_ngcontent-%COMP%]   .s-title[_ngcontent-%COMP%]{padding-bottom:48px}.venues__card[_ngcontent-%COMP%]{width:560px;border:8px solid #4f3566}.address__map[_ngcontent-%COMP%]{width:576px;height:408px}.map[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff}.map[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:90%;width:90%}.venues__ceremony[_ngcontent-%COMP%]{margin-bottom:5em;min-height:450px;display:flex;justify-content:flex-end}.venues__reception[_ngcontent-%COMP%]{min-height:450px;display:flex;justify-content:flex-start}.address__map-container--left[_ngcontent-%COMP%]{position:absolute;order:1;left:0;top:100px}.address__map-container--right[_ngcontent-%COMP%]{position:absolute;right:0;top:100px}.address__map--ceremony[_ngcontent-%COMP%], .address__map--reception[_ngcontent-%COMP%]{border:none}.venues__card-head[_ngcontent-%COMP%]{position:relative;padding-bottom:15px;margin-bottom:24px}.venues__card-head[_ngcontent-%COMP%]:after{content:"";position:absolute;width:112px;height:1px;background-color:#4f3566;bottom:0;left:0;transform:translateX(-50%)}.venues__card-title[_ngcontent-%COMP%]{font-family:Playfair Display,Ma Shan Zheng,serif;font-weight:700;font-size:32px;line-height:44px;text-transform:uppercase;color:#3c3641}.venues__card-block[_ngcontent-%COMP%]{display:flex}.venues__card-label[_ngcontent-%COMP%]{font-weight:700}.venues__card-data[_ngcontent-%COMP%], .venues__card-label[_ngcontent-%COMP%]{font-size:24px;line-height:24px;color:#615869}.venues__card-data[_ngcontent-%COMP%]{font-weight:400}.venues__card-link[_ngcontent-%COMP%]{font-weight:400;font-size:20px;line-height:20px;color:#4f3566}.ceremony__card[_ngcontent-%COMP%]{padding:34px 32px 34px 224px}.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.mrg[_ngcontent-%COMP%]{margin-right:48px}.venues__card-info[_ngcontent-%COMP%]   .venues__card-block[_ngcontent-%COMP%]:first-child{margin-bottom:44px}.venues__card-link[_ngcontent-%COMP%]{display:block;margin-top:33px;text-align:center;opacity:1;transition:all .2s ease-out}.venues__card-link[_ngcontent-%COMP%]:hover{opacity:.8}.reception__card[_ngcontent-%COMP%]{padding:34px 174px 34px 82px}@media only screen and (max-width:1030px){.venues[_ngcontent-%COMP%]   .container-sm[_ngcontent-%COMP%]{max-width:100%}.venues__ceremony[_ngcontent-%COMP%], .venues__reception[_ngcontent-%COMP%]{flex-direction:column}.address__map[_ngcontent-%COMP%]{position:relative;top:0;left:50%;width:92%;transform:translateX(-50%)}.venues__card[_ngcontent-%COMP%]{max-width:90%;width:90%;padding-right:20px;padding-left:20px;text-align:center;margin:0 auto 20px;box-sizing:border-box}.venues__card-block[_ngcontent-%COMP%]{justify-content:center}.venues__card-head[_ngcontent-%COMP%]:after{left:50%;transform:translateX(-50%)}.venues__ceremony[_ngcontent-%COMP%]{margin-bottom:60px}}@media only screen and (max-width:500px){.venues__card-title[_ngcontent-%COMP%]{font-size:24px;line-height:34px}}']}),e})(),ph=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ze({type:e,selectors:[["app-link"]],decls:28,vars:0,consts:[[1,"link-container"],["href","https://www.amazon.com/wedding/registry/IBVPWF8HNLXS"],["href","https://weduploader.com/upload/v0zNe57BKZr75aXx"],["href","https://example.com/link1"],["href","https://www.paypal.com/donate/?business=2L2SVPSQPKAFW&no_recurring=0&item_name=Support+our+dream+wedding%2C+create+lasting+memories%21&currency_code=USD"]],template:function(e,t){1&e&&(Ds(0,"div",0),Ds(1,"h2"),Ws(2,"\ud83c\udf81 Check out our Amazon Registry for items that tickle our fancy."),Ns(),Ds(3,"ul"),Ds(4,"li"),Ds(5,"a",1),Ws(6,"Amazon Registry"),Ns(),Ns(),Ns(),Ns(),Ds(7,"div",0),Ds(8,"h2"),Ws(9,"\ud83d\udcf7 Share your cherished moments by uploading photos and videos on our special day!"),Ns(),Ds(10,"ul"),Ds(11,"li"),Ds(12,"a",2),Ws(13,"Video Upload"),Ns(),Ns(),Ns(),Ns(),Ds(14,"div",0),Ds(15,"h2"),Ws(16,"\ud83d\udcf8 Explore even more memories in our Photo Gallery."),Ns(),Ds(17,"ul"),Ds(18,"li"),Ds(19,"a",3),Ws(20,"Photo Gallery"),Ns(),Ns(),Ns(),Ns(),Ds(21,"div",0),Ds(22,"h2"),Ws(23,"\ud83d\udc95 Feeling extra generous? You can contribute via PayPal to help us make our dreams come true!"),Ns(),Ds(24,"ul"),Ds(25,"li"),Ds(26,"a",4),Ws(27,"Donations"),Ns(),Ns(),Ns(),Ns())},styles:[".link-container[_ngcontent-%COMP%]{font-family:Comic Sans MS,cursive;background:linear-gradient(180deg,#9dcea9,#609f60);border:1px solid #90aa77;border-radius:10px;padding:20px;margin:20px;box-shadow:0 0 5px #0003}.link-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;transition:color .3s}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#022850}"]}),e})();function gh(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function mh(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(e){gh(s,r,i,o,a,"next",e)}function a(e){gh(s,r,i,o,a,"throw",e)}o(void 0)})}}const yh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},vh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0;let u=(15&o)<<2|c>>6,l=63&c;a||(l=64,s||(u=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[u],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},wh=function(e){return function(e){const t=yh(e);return vh.encodeByteArray(t,!0)}(e).replace(/\./g,"")};class bh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ih(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_h())}function Ch(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Eh(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Th(){const e=_h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Sh(){return"object"==typeof indexedDB}function kh(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function xh(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ah extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ah.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oh.prototype.create)}}class Oh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Mh,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new Ah(r,`${this.serviceName}: ${s} (${r}).`,n)}}const Mh=/\{\$([^}]+)}/g;function Ph(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Dh(n)&&Dh(s)){if(!Ph(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dh(e){return null!==e&&"object"==typeof e}function Nh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Rh(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Lh(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Vh{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Fh),void 0===r.error&&(r.error=Fh),void 0===r.complete&&(r.complete=Fh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fh(){}function jh(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Uh(e){return e&&e._delegate?e._delegate:e}class Bh{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qh="[DEFAULT]";class $h{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new bh;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qh})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return mh(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(jV){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===qh?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(jV){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:qh:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class zh{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $h(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Hh=[];var Kh,Gh;(Gh=Kh||(Kh={}))[Gh.DEBUG=0]="DEBUG",Gh[Gh.VERBOSE=1]="VERBOSE",Gh[Gh.INFO=2]="INFO",Gh[Gh.WARN=3]="WARN",Gh[Gh.ERROR=4]="ERROR",Gh[Gh.SILENT=5]="SILENT";const Wh={debug:Kh.DEBUG,verbose:Kh.VERBOSE,info:Kh.INFO,warn:Kh.WARN,error:Kh.ERROR,silent:Kh.SILENT},Qh=Kh.INFO,Jh={[Kh.DEBUG]:"log",[Kh.VERBOSE]:"log",[Kh.INFO]:"info",[Kh.WARN]:"warn",[Kh.ERROR]:"error"},Yh=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Jh[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Xh{constructor(e){this.name=e,this._logLevel=Qh,this._logHandler=Yh,this._userLogHandler=null,Hh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kh))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Wh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kh.DEBUG,...e),this._logHandler(this,Kh.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kh.VERBOSE,...e),this._logHandler(this,Kh.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kh.INFO,...e),this._logHandler(this,Kh.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kh.WARN,...e),this._logHandler(this,Kh.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kh.ERROR,...e),this._logHandler(this,Kh.ERROR,...e)}}let Zh,ed;const td=new WeakMap,nd=new WeakMap,rd=new WeakMap,id=new WeakMap,sd=new WeakMap;let od={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nd.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ad(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ad(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ad(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&td.set(t,e)}).catch(()=>{}),sd.set(t,e),t}(e);if(id.has(e))return id.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ed||(ed=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(cd(this),e),ad(td.get(this))}:function(...e){return ad(t.apply(cd(this),e))}:function(e,...n){const r=t.call(cd(this),e,...n);return rd.set(r,e.sort?e.sort():[e]),ad(r)}:(e instanceof IDBTransaction&&function(e){if(nd.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});nd.set(e,t)}(e),n=e,(Zh||(Zh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(e,od):e);var t,n}(e);return t!==e&&(id.set(e,t),sd.set(t,e)),t}const cd=e=>sd.get(e);function ud(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=ad(o);return r&&o.addEventListener("upgradeneeded",e=>{r(ad(o.result),e.oldVersion,e.newVersion,ad(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function ld(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),ad(n).then(()=>{})}const hd=["get","getKey","getAll","getAllKeys","count"],dd=["put","add","delete","clear"],fd=new Map;function pd(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(fd.get(t))return fd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=dd.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!hd.includes(n))return;const s=function(){var e=mh(function*(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(yield Promise.all([o[n](...t),i&&s.done]))[0]});return function(t){return e.apply(this,arguments)}}();return fd.set(t,s),s}var gd;gd=od,od={...gd,get:(e,t,n)=>pd(e,t)||gd.get(e,t,n),has:(e,t)=>!!pd(e,t)||gd.has(e,t)};class md{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const yd="@firebase/app",vd="0.7.26",wd=new Xh("@firebase/app"),bd={[yd]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_d=new Map,Id=new Map;function Cd(e,t){try{e.container.addComponent(t)}catch(n){wd.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ed(e){const t=e.name;if(Id.has(t))return wd.debug(`There were multiple attempts to register component ${t}.`),!1;Id.set(t,e);for(const n of _d.values())Cd(n,e);return!0}function Td(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Sd=new Oh("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class kd{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sd.create("app-deleted",{appName:this._name})}}const xd="9.8.3";function Ad(e="[DEFAULT]"){const t=_d.get(e);if(!t)throw Sd.create("no-app",{appName:e});return t}function Od(){return Array.from(_d.values())}function Md(){return(Md=mh(function*(e){const t=e.name;_d.has(t)&&(_d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function Pd(e,t,n){var r;let i=null!==(r=bd[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void wd.warn(e.join(" "))}Ed(new Bh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Dd="firebase-heartbeat-store";let Nd=null;function Rd(){return Nd||(Nd=ud("firebase-heartbeat-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Dd)}}}).catch(e=>{throw Sd.create("storage-open",{originalErrorMessage:e.message})})),Nd}function Ld(){return(Ld=mh(function*(e){var t;try{return(yield Rd()).transaction(Dd).objectStore(Dd).get(jd(e))}catch(n){throw Sd.create("storage-get",{originalErrorMessage:null===(t=n)||void 0===t?void 0:t.message})}})).apply(this,arguments)}function Vd(e,t){return Fd.apply(this,arguments)}function Fd(){return(Fd=mh(function*(e,t){var n;try{const n=(yield Rd()).transaction(Dd,"readwrite"),r=n.objectStore(Dd);return yield r.put(t,jd(e)),n.done}catch(r){throw Sd.create("storage-set",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message})}})).apply(this,arguments)}function jd(e){return`${e.name}!${e.options.appId}`}class Ud{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qd(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}triggerHeartbeat(){var e=this;return mh(function*(){const t=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Bd();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==n&&!e._heartbeatsCache.heartbeats.some(e=>e.date===n))return e._heartbeatsCache.heartbeats.push({date:n,agent:t}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return mh(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Bd(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),$d(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$d(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),i=wh(JSON.stringify({version:2,heartbeats:n}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),i})()}}function Bd(){return(new Date).toISOString().substring(0,10)}class qd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return mh(function*(){return!!Sh()&&kh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return mh(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(e){return Ld.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return mh(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return Vd(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return mh(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return Vd(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function $d(e){return wh(JSON.stringify({version:2,heartbeats:e})).length}Ed(new Bh("platform-logger",e=>new md(e),"PRIVATE")),Ed(new Bh("heartbeat",e=>new Ud(e),"PRIVATE")),Pd(yd,vd,""),Pd(yd,vd,"esm2017"),Pd("fire-js",""),Pd("firebase","9.8.3","app");const zd="@firebase/installations",Hd="0.5.10",Kd="w:0.5.10",Gd="FIS_v2",Wd=new Oh("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qd(e){return e instanceof Ah&&e.code.includes("request-failed")}function Jd({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Yd(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Xd(e,t){return Zd.apply(this,arguments)}function Zd(){return(Zd=mh(function*(e,t){const n=(yield t.json()).error;return Wd.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function ef({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function tf(e,{refreshToken:t}){const n=ef(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function nf(e){return rf.apply(this,arguments)}function rf(){return(rf=mh(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function sf(e,t){return of.apply(this,arguments)}function of(){return(of=mh(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Jd(e),i=ef(e),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:Gd,appId:e.appId,sdkVersion:Kd})},a=yield nf(()=>fetch(r,o));if(a.ok){const e=yield a.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Yd(e.authToken)}}throw yield Xd("Create Installation",a)})).apply(this,arguments)}function af(e){return new Promise(t=>{setTimeout(t,e)})}const cf=/^[cdef][\w-]{21}$/;function uf(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return cf.test(t)?t:""}catch(jV){return""}}function lf(e){return`${e.appName}!${e.appId}`}const hf=new Map;function df(e,t){const n=lf(e);ff(n,t),function(e,t){const n=(!pf&&"BroadcastChannel"in self&&(pf=new BroadcastChannel("[Firebase] FID Change"),pf.onmessage=e=>{ff(e.data.key,e.data.fid)}),pf);n&&n.postMessage({key:e,fid:t}),0===hf.size&&pf&&(pf.close(),pf=null)}(n,t)}function ff(e,t){const n=hf.get(e);if(n)for(const r of n)r(t)}let pf=null;const gf="firebase-installations-store";let mf=null;function yf(){return mf||(mf=ud("firebase-installations-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(gf)}}})),mf}function vf(e,t){return wf.apply(this,arguments)}function wf(){return(wf=mh(function*(e,t){const n=lf(e),r=(yield yf()).transaction(gf,"readwrite"),i=r.objectStore(gf),s=yield i.get(n);return yield i.put(t,n),yield r.done,s&&s.fid===t.fid||df(e,t.fid),t})).apply(this,arguments)}function bf(e){return _f.apply(this,arguments)}function _f(){return(_f=mh(function*(e){const t=lf(e),n=(yield yf()).transaction(gf,"readwrite");yield n.objectStore(gf).delete(t),yield n.done})).apply(this,arguments)}function If(e,t){return Cf.apply(this,arguments)}function Cf(){return(Cf=mh(function*(e,t){const n=lf(e),r=(yield yf()).transaction(gf,"readwrite"),i=r.objectStore(gf),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.done,!o||s&&s.fid===o.fid||df(e,o.fid),o})).apply(this,arguments)}function Ef(e){return Tf.apply(this,arguments)}function Tf(){return(Tf=mh(function*(e){let t;const n=yield If(e.appConfig,n=>{const r=Sf(n),i=kf(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function Sf(e){return Pf(e||{fid:uf(),registrationStatus:0})}function kf(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Wd.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return xf.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Af(e)}:{installationEntry:t}}function xf(){return(xf=mh(function*(e,t){try{const n=yield sf(e,t);return vf(e.appConfig,n)}catch(n){throw Qd(n)&&409===n.customData.serverCode?yield bf(e.appConfig):yield vf(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function Af(e){return Of.apply(this,arguments)}function Of(){return(Of=mh(function*(e){let t=yield Mf(e.appConfig);for(;1===t.registrationStatus;)yield af(100),t=yield Mf(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield Ef(e);return n||t}return t})).apply(this,arguments)}function Mf(e){return If(e,e=>{if(!e)throw Wd.create("installation-not-found");return Pf(e)})}function Pf(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Df(e,t){return Nf.apply(this,arguments)}function Nf(){return(Nf=mh(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=Rf(e,n),i=tf(e,n),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Kd,appId:e.appId}})},a=yield nf(()=>fetch(r,o));if(a.ok)return Yd(yield a.json());throw yield Xd("Generate Auth Token",a)})).apply(this,arguments)}function Rf(e,{fid:t}){return`${Jd(e)}/${t}/authTokens:generate`}function Lf(e){return Vf.apply(this,arguments)}function Vf(){return(Vf=mh(function*(e,t=!1){let n;const r=yield If(e.appConfig,r=>{if(!$f(r))throw Wd.create("not-registered");const i=r.authToken;if(!t&&zf(i))return r;if(1===i.requestStatus)return n=Ff(e,t),r;{if(!navigator.onLine)throw Wd.create("app-offline");const t=Hf(r);return n=Bf(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function Ff(e,t){return jf.apply(this,arguments)}function jf(){return(jf=mh(function*(e,t){let n=yield Uf(e.appConfig);for(;1===n.authToken.requestStatus;)yield af(100),n=yield Uf(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Lf(e,t):r})).apply(this,arguments)}function Uf(e){return If(e,e=>{if(!$f(e))throw Wd.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function Bf(e,t){return qf.apply(this,arguments)}function qf(){return(qf=mh(function*(e,t){try{const n=yield Df(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield vf(e.appConfig,r),n}catch(n){if(!Qd(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield vf(e.appConfig,n)}else yield bf(e.appConfig);throw n}})).apply(this,arguments)}function $f(e){return void 0!==e&&2===e.registrationStatus}function zf(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function Hf(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Kf(){return(Kf=mh(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield Ef(t);return r?r.catch(console.error):Lf(t).catch(console.error),n.fid})).apply(this,arguments)}function Gf(){return(Gf=mh(function*(e,t=!1){const n=e;return yield Wf(n),(yield Lf(n,t)).token})).apply(this,arguments)}function Wf(e){return Qf.apply(this,arguments)}function Qf(){return(Qf=mh(function*(e){const{registrationPromise:t}=yield Ef(e);t&&(yield t)})).apply(this,arguments)}function Jf(e){return Wd.create("missing-app-config-values",{valueName:e})}const Yf="installations";Ed(new Bh(Yf,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw Jf("App Configuration");if(!e.name)throw Jf("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Jf(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:Td(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),Ed(new Bh("installations-internal",e=>{const t=Td(e.getProvider("app").getImmediate(),Yf).getImmediate();return{getId:()=>function(e){return Kf.apply(this,arguments)}(t),getToken:e=>function(e){return Gf.apply(this,arguments)}(t,e)}},"PRIVATE")),Pd(zd,Hd),Pd(zd,Hd,"esm2017");const Xf="@firebase/remote-config",Zf="0.3.9",ep=new Oh("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class tp{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return mh(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function np(e=navigator){return e.languages&&e.languages[0]||e.language}class rp{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return mh(function*(){var n,r,i;const[s,o]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),a=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:t.sdkVersion,app_instance_id:s,app_instance_id_token:o,app_id:t.appId,language_code:np()},l={method:"POST",headers:c,body:JSON.stringify(u)},h=fetch(a,l),d=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let f;try{yield Promise.race([h,d]),f=yield h}catch(v){let e="fetch-client-network";throw"AbortError"===(null===(n=v)||void 0===n?void 0:n.name)&&(e="fetch-timeout"),ep.create(e,{originalErrorMessage:null===(r=v)||void 0===r?void 0:r.message})}let p=f.status;const g=f.headers.get("ETag")||void 0;let m,y;if(200===f.status){let e;try{e=yield f.json()}catch(v){throw ep.create("fetch-client-parse",{originalErrorMessage:null===(i=v)||void 0===i?void 0:i.message})}m=e.entries,y=e.state}if("INSTANCE_STATE_UNSPECIFIED"===y?p=500:"NO_CHANGE"===y?p=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(m={}),304!==p&&200!==p)throw ep.create("fetch-status",{httpStatus:p});return{status:p,eTag:g,config:m}})()}}class ip{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return mh(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return mh(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(ep.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof Ah&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+jh(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class sp{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function op(e,t){var n;const r=e.target.error||void 0;return ep.create(t,{originalErrorMessage:r&&(null===(n=r)||void 0===n?void 0:n.message)})}const ap="app_namespace_store";class cp{constructor(e,t,n,r=function(){return new Promise((e,t)=>{var n;try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(op(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(ap,{keyPath:"compositeKey"})}}}catch(r){t(ep.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return mh(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{var s;const o=n.transaction([ap],"readonly").objectStore(ap),a=t.createCompositeKey(e);try{const e=o.get(a);e.onerror=e=>{i(op(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(c){i(ep.create("storage-get",{originalErrorMessage:null===(s=c)||void 0===s?void 0:s.message}))}})})()}set(e,t){var n=this;return mh(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const a=r.transaction([ap],"readwrite").objectStore(ap),c=n.createCompositeKey(e);try{const e=a.put({compositeKey:c,value:t});e.onerror=e=>{s(op(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(u){s(ep.create("storage-set",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}delete(e){var t=this;return mh(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{var s;const o=n.transaction([ap],"readwrite").objectStore(ap),a=t.createCompositeKey(e);try{const e=o.delete(a);e.onerror=e=>{i(op(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(c){i(ep.create("storage-delete",{originalErrorMessage:null===(s=c)||void 0===s?void 0:s.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class up{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return mh(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function lp(){return(lp=mh(function*(){if(!Sh())return!1;try{return yield kh()}catch(e){return!1}})).apply(this,arguments)}Ed(new Bh("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ep.create("registration-window");if(!Sh())throw ep.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:o}=n.options;if(!i)throw ep.create("registration-project-id");if(!s)throw ep.create("registration-api-key");if(!o)throw ep.create("registration-app-id");const a=new cp(o,n.name,t=t||"firebase"),c=new up(a),u=new Xh(Xf);u.logLevel=Kh.ERROR;const l=new rp(r,xd,t,i,s,o),h=new ip(l,a),d=new tp(h,a,c,u),f=new sp(n,d,c,a,u);return function(e){const t=Uh(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(f),f},"PUBLIC").setMultipleInstances(!0)),Pd(Xf,Zf),Pd(Xf,Zf,"esm2017");const hp="/firebase-messaging-sw.js",dp="/firebase-cloud-messaging-push-scope",fp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var pp,gp;function mp(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yp(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(pp||(pp={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(gp||(gp={}));const vp="fcm_token_details_db",wp="fcm_token_object_Store";function bp(e){return _p.apply(this,arguments)}function _p(){return(_p=mh(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(vp))return null;let t=null;var n;return(yield ud(vp,5,{upgrade:(n=mh(function*(n,r,i,s){var o;if(r<2)return;if(!n.objectStoreNames.contains(wp))return;const a=s.objectStore(wp),c=yield a.index("fcmSenderId").get(e);if(yield a.clear(),c)if(2===r){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:mp(e.vapidKey)}}}else if(3===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:mp(e.auth),p256dh:mp(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:mp(e.vapidKey)}}}else if(4===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:mp(e.auth),p256dh:mp(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:mp(e.vapidKey)}}}}),function(e,t,r,i){return n.apply(this,arguments)})})).close(),yield ld(vp),yield ld("fcm_vapid_details_db"),yield ld("undefined"),Ip(t)?t:null})).apply(this,arguments)}function Ip(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}const Cp="firebase-messaging-store";let Ep=null;function Tp(){return Ep||(Ep=ud("firebase-messaging-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Cp)}}})),Ep}function Sp(e){return kp.apply(this,arguments)}function kp(){return(kp=mh(function*(e){const t=Pp(e),n=yield Tp(),r=yield n.transaction(Cp).objectStore(Cp).get(t);if(r)return r;{const t=yield bp(e.appConfig.senderId);if(t)return yield xp(e,t),t}})).apply(this,arguments)}function xp(e,t){return Ap.apply(this,arguments)}function Ap(){return(Ap=mh(function*(e,t){const n=Pp(e),r=(yield Tp()).transaction(Cp,"readwrite");return yield r.objectStore(Cp).put(t,n),yield r.done,t})).apply(this,arguments)}function Op(e){return Mp.apply(this,arguments)}function Mp(){return(Mp=mh(function*(e){const t=Pp(e),n=(yield Tp()).transaction(Cp,"readwrite");yield n.objectStore(Cp).delete(t),yield n.done})).apply(this,arguments)}function Pp({appConfig:e}){return e.appId}const Dp=new Oh("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Np(e,t){return Rp.apply(this,arguments)}function Rp(){return(Rp=mh(function*(e,t){const n=yield Bp(e),r=$p(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=yield fetch(Up(e.appConfig),i);s=yield t.json()}catch(o){throw Dp.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw Dp.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Dp.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Lp(e,t){return Vp.apply(this,arguments)}function Vp(){return(Vp=mh(function*(e,t){const n=yield Bp(e),r=$p(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${Up(e.appConfig)}/${t.token}`,i);s=yield n.json()}catch(o){throw Dp.create("token-update-failed",{errorInfo:o})}if(s.error)throw Dp.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Dp.create("token-update-no-token");return s.token})).apply(this,arguments)}function Fp(e,t){return jp.apply(this,arguments)}function jp(){return(jp=mh(function*(e,t){const n={method:"DELETE",headers:yield Bp(e)};try{const r=yield fetch(`${Up(e.appConfig)}/${t}`,n),i=yield r.json();if(i.error)throw Dp.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw Dp.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function Up({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function Bp(e){return qp.apply(this,arguments)}function qp(){return(qp=mh(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function $p({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==fp&&(i.web.applicationPubKey=r),i}const zp=6048e5;function Hp(e){return Kp.apply(this,arguments)}function Kp(){return(Kp=mh(function*(e){const t=yield Zp(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:mp(t.getKey("auth")),p256dh:mp(t.getKey("p256dh"))},r=yield Sp(e.firebaseDependencies);if(r){if(tg(r.subscriptionOptions,n))return Date.now()>=r.createTime+zp?Qp(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield Fp(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Yp(e.firebaseDependencies,n)}return Yp(e.firebaseDependencies,n)})).apply(this,arguments)}function Gp(e){return Wp.apply(this,arguments)}function Wp(){return(Wp=mh(function*(e){const t=yield Sp(e.firebaseDependencies);t&&(yield Fp(e.firebaseDependencies,t.token),yield Op(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function Qp(e,t){return Jp.apply(this,arguments)}function Jp(){return(Jp=mh(function*(e,t){try{const n=yield Lp(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield xp(e.firebaseDependencies,r),n}catch(n){throw yield Gp(e),n}})).apply(this,arguments)}function Yp(e,t){return Xp.apply(this,arguments)}function Xp(){return(Xp=mh(function*(e,t){const n={token:yield Np(e,t),createTime:Date.now(),subscriptionOptions:t};return yield xp(e,n),n.token})).apply(this,arguments)}function Zp(e,t){return eg.apply(this,arguments)}function eg(){return(eg=mh(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yp(t)})})).apply(this,arguments)}function tg(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function ng(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const c=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}(t,e),t}function rg(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function ig(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function sg(e){return Dp.create("missing-app-config-values",{valueName:e})}ig("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ig("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class og{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw sg("App Configuration Object");if(!e.name)throw sg("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw sg(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function ag(e){return cg.apply(this,arguments)}function cg(){return(cg=mh(function*(e){var t;try{e.swRegistration=yield navigator.serviceWorker.register(hp,{scope:dp}),e.swRegistration.update().catch(()=>{})}catch(n){throw Dp.create("failed-service-worker-registration",{browserErrorMessage:null===(t=n)||void 0===t?void 0:t.message})}})).apply(this,arguments)}function ug(e,t){return lg.apply(this,arguments)}function lg(){return(lg=mh(function*(e,t){if(t||e.swRegistration||(yield ag(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Dp.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function hg(e,t){return dg.apply(this,arguments)}function dg(){return(dg=mh(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=fp)})).apply(this,arguments)}function fg(){return(fg=mh(function*(e,t){if(!navigator)throw Dp.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dp.create("permission-blocked");return yield hg(e,null==t?void 0:t.vapidKey),yield ug(e,null==t?void 0:t.serviceWorkerRegistration),Hp(e)})).apply(this,arguments)}function pg(e,t,n){return gg.apply(this,arguments)}function gg(){return(gg=mh(function*(e,t,n){const r=mg(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mg(e){switch(e){case gp.NOTIFICATION_CLICKED:return"notification_open";case gp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yg(){return(yg=mh(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===gp.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(ng(n)):e.onMessageHandler.next(ng(n)));const r=n.data;rg(r)&&"1"===r["google.c.a.e"]&&(yield pg(e,n.messageType,r))})).apply(this,arguments)}const vg="@firebase/messaging",wg="0.9.14";function bg(){return(bg=mh(function*(){try{yield kh()}catch(e){return!1}return"undefined"!=typeof window&&Sh()&&xh()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}Ed(new Bh("messaging",e=>{const t=new og(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return yg.apply(this,arguments)}(t,e)),t},"PUBLIC")),Ed(new Bh("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return fg.apply(this,arguments)}(t,e)}},"PRIVATE")),Pd(vg,wg),Pd(vg,wg,"esm2017");const _g="analytics",Ig="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cg="https://www.googletagmanager.com/gtag/js",Eg=new Xh("@firebase/analytics");function Tg(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Sg(e,t){const n=document.createElement("script");n.src=`${Cg}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function kg(e,t,n,r,i,s){return xg.apply(this,arguments)}function xg(){return(xg=mh(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Tg(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){Eg.error(a)}e("config",i,s)})).apply(this,arguments)}function Ag(e,t,n,r,i){return Og.apply(this,arguments)}function Og(){return(Og=mh(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Tg(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){Eg.error(s)}})).apply(this,arguments)}function Mg(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Cg))return t;return null}const Pg=new Oh("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Dg=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ng(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Rg(e){return Lg.apply(this,arguments)}function Lg(){return(Lg=mh(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Ng(r)},s=Ig.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Pg.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function Vg(e){return Fg.apply(this,arguments)}function Fg(){return(Fg=mh(function*(e,t=Dg,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Pg.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Pg.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new $g;return setTimeout(mh(function*(){a.abort()}),void 0!==n?n:6e4),jg({appId:r,apiKey:i,measurementId:s},o,a,t)})).apply(this,arguments)}function jg(e,t,n){return Ug.apply(this,arguments)}function Ug(){return(Ug=mh(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Dg){const{appId:s,measurementId:o}=e;try{yield Bg(r,t)}catch(a){if(o)return Eg.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}try{const t=yield Rg(e);return i.deleteThrottleMetadata(s),t}catch(a){if(!qg(a)){if(i.deleteThrottleMetadata(s),o)return Eg.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}const t=503===Number(a.customData.httpStatus)?jh(n,i.intervalMillis,30):jh(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,c),Eg.debug(`Calling attemptFetch again in ${t} millis`),jg(e,c,r,i)}})).apply(this,arguments)}function Bg(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Pg.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function qg(e){if(!(e instanceof Ah&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class $g{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function zg(){return Hg.apply(this,arguments)}function Hg(){return(Hg=mh(function*(){if(!Sh())return Eg.warn(Pg.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield kh()}catch(e){return Eg.warn(Pg.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function Kg(){return(Kg=mh(function*(e,t,n,r,i,s,o){var a;const c=Vg(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Eg.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Eg.error(e)),t.push(c);const u=zg().then(e=>e?r.getId():void 0),[l,h]=yield Promise.all([c,u]);Mg()||Sg(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class Gg{constructor(e){this.app=e}_delete(){return delete Wg[this.app.options.appId],Promise.resolve()}}let Wg={},Qg=[];const Jg={};let Yg,Xg,Zg="dataLayer",em=!1;function tm(){return(tm=mh(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function nm(){return(nm=mh(function*(){if(Ch())return!1;if(!xh())return!1;if(!Sh())return!1;try{return yield kh()}catch(e){return!1}})).apply(this,arguments)}const rm="@firebase/analytics",im="0.7.10";Ed(new Bh(_g,(e,{options:t})=>function(e,t,n){!function(){const e=[];if(Ch()&&e.push("This is a browser extension environment."),xh()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Pg.create("invalid-analytics-context",{errorInfo:t});Eg.warn(n.message)}}();const r=e.options.appId;if(!r)throw Pg.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Pg.create("no-api-key");Eg.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wg[r])throw Pg.create("already-exists",{id:r});if(!em){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=mh(function*(i,s,o){try{"event"===i?yield Ag(e,t,n,s,o):"config"===i?yield kg(e,t,n,r,s,o):e("set",s)}catch(a){Eg.error(a)}})).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(s,e,t,n),{gtagCore:s,wrappedGtag:window.gtag}}(Wg,Qg,Jg);Xg=e,Yg=t,em=!0}return Wg[r]=function(e,t,n,r,i,s,o){return Kg.apply(this,arguments)}(e,Qg,Jg,t,Yg,Zg,n),new Gg(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ed(new Bh("analytics-internal",function(e){try{const t=e.getProvider(_g).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=Uh(e),function(e,t,n,r,i){return tm.apply(this,arguments)}(Xg,Wg[e.app.options.appId],t,n,r).catch(e=>Eg.error(e))}(t,e,n,r)}}catch(t){throw Pg.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Pd(rm,im),Pd(rm,im,"esm2017");var sm=function(e,t){return(sm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function om(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}sm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function am(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function cm(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function um(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lm(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function hm(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function dm(e){return this instanceof dm?(this.v=e,this):new dm(e)}function fm(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof dm?Promise.resolve(n.value.v).then(c,u):l(s[0][2],n)}catch(r){l(s[0][3],r)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function pm(e){return"function"==typeof e}var gm,mm=((gm=function(e){Error.call(this),this.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),gm.prototype.constructor=gm,gm);function ym(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var vm=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=um(s),a=o.next();!a.done;a=o.next())a.value.remove(this)}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(pm(c))try{c()}catch(p){i=p instanceof mm?p.errors:[p]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=um(u),h=l.next();!h.done;h=l.next()){var d=h.value;try{bm(d)}catch(g){i=null!=i?i:[],g instanceof mm?i=hm(hm([],lm(i)),lm(g.errors)):i.push(g)}}}catch(m){n={error:m}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new mm(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)bm(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ym(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&ym(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();function wm(e){return e instanceof vm||e&&"closed"in e&&pm(e.remove)&&pm(e.add)&&pm(e.unsubscribe)}function bm(e){pm(e)?e():e.unsubscribe()}var _m=function(e){function t(t,n){return e.call(this)||this}return om(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(vm),Im={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Im.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,hm([e,t],lm(n))):setInterval.apply(void 0,hm([e,t],lm(n)))},clearInterval:function(e){var t=Im.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Cm=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return om(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Im.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;Im.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ym(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(_m),Em=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return om(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Cm),Tm={now:function(){return(Tm.delegate||Date).now()},delegate:void 0},Sm=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Tm.now,e}(),km=function(e){function t(t,n){void 0===n&&(n=Sm.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return om(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Sm),xm=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return om(t,e),t}(km))(Em),Am=new km(Cm),Om=Am,Mm={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Mm.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,hm([e,t],lm(n))):setTimeout.apply(void 0,hm([e,t],lm(n)))},clearTimeout:function(e){var t=Mm.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Pm(e){Mm.setTimeout(function(){throw e})}function Dm(){}var Nm=Rm("C",void 0,void 0);function Rm(e,t,n){return{kind:e,value:t,error:n}}var Lm=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,wm(t)&&t.add(n)):n.destination=Bm,n}return om(t,e),t.create=function(e,t,n){return new Fm(e,t,n)},t.prototype.next=function(e){this.isStopped?Um(function(e){return Rm("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Um(Rm("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Um(Nm,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(vm);var Vm=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){jm(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){jm(n)}else jm(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){jm(t)}},e}(),Fm=function(e){function t(t,n,r){var i,s=e.call(this)||this;return i=pm(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,s.destination=new Vm(i),s}return om(t,e),t}(Lm);function jm(e){Pm(e)}function Um(e,t){var n=null;n&&Mm.setTimeout(function(){return n(e,t)})}var Bm={closed:!0,next:Dm,error:function(e){throw e},complete:Dm},qm="function"==typeof Symbol&&Symbol.observable||"@@observable";function $m(e){return e}function zm(e){return 0===e.length?$m:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}var Hm=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,s=(r=e)&&r instanceof Lm||function(e){return e&&pm(e.next)&&pm(e.error)&&pm(e.complete)}(r)&&wm(r)?e:new Fm(e,t,n);return function(e){e()}(function(){var e=i.operator,t=i.source;s.add(e?e.call(s,t):t?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Km(t))(function(t,r){var i=new Fm({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[qm]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zm(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Km(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function Km(e){var t;return null!==(t=null!=e?e:undefined)&&void 0!==t?t:Promise}function Gm(e){return function(t){if(function(e){return pm(null==e?void 0:e.lift)}(t))return t.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Wm(e,t,n,r,i){return new Qm(e,t,n,r,i)}var Qm=function(e){function t(t,n,r,i,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return om(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Lm);function Jm(e,t){return void 0===t&&(t=0),Gm(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Ym(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Xm(e,t){return void 0===t&&(t=0),Gm(function(n,r){n.subscribe(Wm(r,function(n){return Ym(r,e,function(){return r.next(n)},t)},function(){return Ym(r,e,function(){return r.complete()},t)},function(n){return Ym(r,e,function(){return r.error(n)},t)}))})}const Zm=new ta("7.4.1"),ey="__angularfire_symbol__analyticsIsSupportedValue",ty="__angularfire_symbol__analyticsIsSupported",ny="__angularfire_symbol__remoteConfigIsSupportedValue",ry="__angularfire_symbol__remoteConfigIsSupported",iy="__angularfire_symbol__messagingIsSupportedValue",sy="__angularfire_symbol__messagingIsSupported";globalThis[ty]||(globalThis[ty]=function(){return nm.apply(this,arguments)}().then(e=>globalThis[ey]=e).catch(()=>globalThis[ey]=!1)),globalThis[sy]||(globalThis[sy]=function(){return bg.apply(this,arguments)}().then(e=>globalThis[iy]=e).catch(()=>globalThis[iy]=!1)),globalThis[ry]||(globalThis[ry]=function(){return lp.apply(this,arguments)}().then(e=>globalThis[ny]=e).catch(()=>globalThis[ny]=!1));const oy=(e,t)=>{const n=t?[t]:Od(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function ay(){}class cy{constructor(e,t=xm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class uy{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ay,{},ay,ay)),t.pipe((r={next:n,complete:n,error:n},i=pm(r)?{next:r,error:undefined,complete:undefined}:r,i?Gm(function(e,t){var n;null===(n=i.subscribe)||void 0===n||n.call(i);var r=!0;e.subscribe(Wm(t,function(e){var n;null===(n=i.next)||void 0===n||n.call(i,e),t.next(e)},function(){var e;r=!1,null===(e=i.complete)||void 0===e||e.call(i),t.complete()},function(e){var n;r=!1,null===(n=i.error)||void 0===n||n.call(i,e),t.error(e)},function(){var e,t;r&&(null===(e=i.unsubscribe)||void 0===e||e.call(i)),null===(t=i.finalize)||void 0===t||t.call(i)}))}):$m)).subscribe(e).add(n);var r,i}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ly=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new cy(Zone.current)),this.insideAngular=e.run(()=>new cy(Zone.current,Am)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(Qn(tc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function hy(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function dy(e){return hy().ngZone.runOutsideAngular(()=>e())}function fy(e){return hy().ngZone.run(()=>e())}function py(e){return hy(),(t=hy(),function(e){return(e=e.lift(new uy(t.ngZone))).pipe(Jm(t.outsideAngular),Xm(t.insideAngular))})(e);var t}const gy=(e,t)=>{const n=void 0;return function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),fy(()=>e.apply(n,r))}},my=(e,t)=>function(){let n;const r=arguments;for(let e=0;e<arguments.length;e++)"function"==typeof r[e]&&(t&&(n||(n=fy(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ay,{},ay,ay)))),r[e]=gy(r[e],n));const i=dy(()=>e.apply(this,r));if(!t){if(i instanceof Hm){const e=hy();return i.pipe(Jm(e.outsideAngular),Xm(e.insideAngular))}return fy(()=>i)}return i instanceof Hm?i.pipe(py):i instanceof Promise?fy(()=>new Promise((e,t)=>i.then(t=>fy(()=>e(t)),e=>fy(()=>t(e))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:fy(()=>i)};function yy(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Om);var r,i=-1;return null!=t&&((r=t)&&pm(r.schedule)?n=t:i=t),new Hm(function(t){var r=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;r<0&&(r=0);var s=0;return n.schedule(function(){t.closed||(t.next(s++),0<=i?this.schedule(void 0,i):t.complete())},r)})}var vy=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function wy(e){return pm(null==e?void 0:e.then)}function by(e){return pm(e[qm])}function _y(e){return Symbol.asyncIterator&&pm(null==e?void 0:e[Symbol.asyncIterator])}function Iy(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Cy="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ey(e){return pm(null==e?void 0:e[Cy])}function Ty(e){return fm(this,arguments,function(){var t,n,r;return cm(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,dm(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,dm(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,dm(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Sy(e){return pm(null==e?void 0:e.getReader)}function ky(e){if(e instanceof Hm)return e;if(null!=e){if(by(e))return r=e,new Hm(function(e){var t=r[qm]();if(pm(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(vy(e))return n=e,new Hm(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()});if(wy(e))return function(e){return new Hm(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,Pm)})}(e);if(_y(e))return xy(e);if(Ey(e))return t=e,new Hm(function(e){var n,r;try{for(var i=um(t),s=i.next();!s.done;s=i.next())if(e.next(s.value),e.closed)return}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()});if(Sy(e))return xy(Ty(e))}var t,n,r;throw Iy(e)}function xy(e){return new Hm(function(t){(function(e,t){var n,r,i,s;return function(e,t,n,r){return new(n||(n=Promise))(function(t,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function o(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(s,o)}a((r=r.apply(e,[])).next())})}(this,0,void 0,function(){var o;return cm(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=um(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(t.next(r.value),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=a.sent(),i={error:o},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function Ay(e,t){if(!e)throw new Error("Iterable cannot be null");return new Hm(function(n){Ym(n,t,function(){var r=e[Symbol.asyncIterator]();Ym(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function Oy(e,t){return t?function(e,t){if(null!=e){if(by(e))return function(e,t){return ky(e).pipe(Jm(t),Xm(t))}(e,t);if(vy(e))return function(e,t){return new Hm(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(wy(e))return function(e,t){return ky(e).pipe(Jm(t),Xm(t))}(e,t);if(_y(e))return Ay(e,t);if(Ey(e))return function(e,t){return new Hm(function(n){var r;return Ym(n,t,function(){r=e[Cy](),Ym(n,t,function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(s){return void n.error(s)}i?n.complete():n.next(t)},0,!0)}),function(){return pm(null==r?void 0:r.return)&&r.return()}})}(e,t);if(Sy(e))return function(e,t){return Ay(Ty(e),t)}(e,t)}throw Iy(e)}(e,t):ky(e)}function My(e,t,n){return void 0===n&&(n=1/0),pm(t)?My(function(n,r){return function(e,t){return Gm(function(t,n){var r=0;t.subscribe(Wm(n,function(t){n.next(e.call(void 0,t,r++))}))})}(function(e,i){return t(n,e,r,i)})(ky(e(n,r)))},n):("number"==typeof t&&(n=t),Gm(function(t,r){return function(e,t,n,r,i,s,o,a){var c=[],u=0,l=0,h=!1,d=function(){!h||c.length||u||t.complete()},f=function(e){u++;var i=!1;ky(n(e,l++)).subscribe(Wm(t,function(e){t.next(e)},function(){i=!0},void 0,function(){if(i)try{for(u--;c.length&&u<r;)void 0,e=c.shift(),f(e);d()}catch(n){t.error(n)}var e}))};return e.subscribe(Wm(t,function(e){return u<r?f(e):c.push(e)},function(){h=!0,d()})),function(){}}(t,r,e,n)}))}function Py(e,t){return pm(t)?My(e,t,1):My(e,1)}function Dy(e,t){return Gm(function(n,r){var i=new Set;n.subscribe(Wm(r,function(t){var n=e?e(t):t;i.has(n)||(i.add(n),r.next(t))})),null==t||t.subscribe(Wm(r,function(){return i.clear()},Dm))})}class Ny{constructor(e){return e}}class Ry{constructor(){return Od()}}yy(0,300).pipe(Py(()=>Oy(Od())),Dy());const Ly=new Ln("angularfire2._apps"),Vy={provide:Ny,useFactory:function(e){return e&&1===e.length?e[0]:new Ny(Ad())},deps:[[new Zn,Ly]]},Fy={provide:Ry,deps:[[new Zn,Ly]]};function jy(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Ny(r)}}let Uy=(()=>{class e{constructor(e){Pd("angularfire",Zm.full,"core"),Pd("angularfire",Zm.full,"app"),Pd("angular",na.full,e.toString())}}return e.\u0275fac=function(t){return new(t||e)(Qn(Ua))},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[Vy,Fy]}),e})();function By(e,...t){return{ngModule:Uy,providers:[{provide:Ly,useFactory:jy(e),multi:!0,deps:[tc,ms,ly,...t]}]}}my(function(e){return Md.apply(this,arguments)},!0),my(Ad,!0),my(Od,!0);const qy=my(function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw Sd.create("bad-app-name",{appName:String(r)});const i=_d.get(r);if(i){if(Ph(e,i.options)&&Ph(n,i.config))return i;throw Sd.create("duplicate-app",{appName:r})}const s=new zh(r);for(const a of Id.values())s.addComponent(a);const o=new kd(e,n,s);return _d.set(r,o),o},!0);my(function(e,t){if(null!==e&&"function"!=typeof e)throw Sd.create("invalid-log-argument");!function(e,t){for(const n of Hh){let r=null;t&&t.level&&(r=Wh[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Kh[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)},!0),my(Pd,!0),my(function(e){var t;t=e,Hh.forEach(e=>{e.setLogLevel(t)})},!0);const $y=new Oh("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zy=new Xh("@firebase/auth");function Hy(e,...t){zy.logLevel<=Kh.ERROR&&zy.error(`Auth (9.8.3): ${e}`,...t)}function Ky(e,...t){throw Jy(e,...t)}function Gy(e,...t){return Jy(e,...t)}function Wy(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new Oh("auth","Firebase",r).create(t,{appName:e.name})}function Qy(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ky(e,"argument-error"),Wy(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jy(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return $y.create(e,...t)}function Yy(e,t,...n){if(!e)throw Jy(t,...n)}function Xy(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hy(t),new Error(t)}function Zy(e,t){e||Xy(t)}const ev=new Map;function tv(e){Zy(e instanceof Function,"Expected a class definition");let t=ev.get(e);return t?(Zy(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ev.set(e,t),t)}function nv(e,t){const n=Td(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ph(n.getOptions(),null!=t?t:{}))return e;Ky(e,"already-initialized")}return n.initialize({options:t})}function rv(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function iv(){return"http:"===sv()||"https:"===sv()}function sv(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ov{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zy(t>e,"Short delay should be less than long delay!"),this.isMobile=Ih()||Eh()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(iv()||Ch()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function av(e,t){Zy(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class cv{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Xy("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Xy("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Xy("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const uv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},lv=new ov(3e4,6e4);function hv(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function dv(e,t,n,r){return fv.apply(this,arguments)}function fv(){return(fv=mh(function*(e,t,n,r,i={}){return pv(e,i,mh(function*(){let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Nh(Object.assign({key:e.config.apiKey},s)).slice(1),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),cv.fetch()(vv(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))})).apply(this,arguments)}function pv(e,t,n){return gv.apply(this,arguments)}function gv(){return(gv=mh(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},uv),t);try{const t=new wv(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw bv(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw bv(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw bv(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw bv(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Wy(e,a,o);Ky(e,a)}}catch(i){if(i instanceof Ah)throw i;Ky(e,"network-request-failed")}})).apply(this,arguments)}function mv(e,t,n,r){return yv.apply(this,arguments)}function yv(){return(yv=mh(function*(e,t,n,r,i={}){const s=yield dv(e,t,n,r,i);return"mfaPendingCredential"in s&&Ky(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function vv(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?av(e.config,i):`${e.config.apiScheme}://${i}`}class wv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Gy(this.auth,"network-request-failed")),lv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bv(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gy(e,t,r);return i.customData._tokenResponse=n,i}function _v(){return(_v=mh(function*(e,t){return dv(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function Iv(e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=mh(function*(e,t){return dv(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Ev(e,t){return Tv.apply(this,arguments)}function Tv(){return(Tv=mh(function*(e,t){return dv(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Sv(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function kv(e,t=!1){return Uh(e).getIdToken(t)}function xv(e){return Av.apply(this,arguments)}function Av(){return(Av=mh(function*(e,t=!1){const n=Uh(e),r=yield n.getIdToken(t),i=Mv(r);Yy(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sv(Ov(i.auth_time)),issuedAtTime:Sv(Ov(i.iat)),expirationTime:Sv(Ov(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}})).apply(this,arguments)}function Ov(e){return 1e3*Number(e)}function Mv(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hy("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return vh.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(n);return e?JSON.parse(e):(Hy("Failed to decode base64 JWT payload"),null)}catch(i){return Hy("Caught error parsing JWT payload as JSON",i),null}}function Pv(e,t){return Dv.apply(this,arguments)}function Dv(){return(Dv=mh(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof Ah&&Nv(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function Nv({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class Rv{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(mh(function*(){yield t.iteration()}),n)}iteration(){var e=this;return mh(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class Lv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sv(this.lastLoginAt),this.creationTime=Sv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vv(e){return Fv.apply(this,arguments)}function Fv(){return(Fv=mh(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Pv(e,Ev(n,{idToken:r}));Yy(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?qv(s.providerUserInfo):[],a=Bv(e.providerData,o),c=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,u)})).apply(this,arguments)}function jv(e){return Uv.apply(this,arguments)}function Uv(){return(Uv=mh(function*(e){const t=Uh(e);yield Vv(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function Bv(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function qv(e){return e.map(e=>{var{providerId:t}=e,n=am(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function $v(){return($v=mh(function*(e,t){const n=yield pv(e,{},mh(function*(){const n=Nh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=vv(e,r,"/v1/token",`key=${i}`),o=yield e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",cv.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class zv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yy(e.idToken,"internal-error"),Yy(void 0!==e.idToken,"internal-error"),Yy(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Mv(e);return Yy(t,"internal-error"),Yy(void 0!==t.exp,"internal-error"),Yy(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return mh(function*(){return Yy(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return mh(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return $v.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new zv;return n&&(Yy("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Yy("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Yy("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zv,this.toJSON())}_performRefresh(){return Xy("not implemented")}}function Hv(e,t){Yy("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Kv{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lv(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return mh(function*(){const n=yield Pv(t,t.stsTokenManager.getToken(t.auth,e));return Yy(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return xv(this,e)}reload(){return jv(this)}_assign(e){this!==e&&(Yy(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Kv(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Yy(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return mh(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Vv(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return mh(function*(){const t=yield e.getIdToken();return yield Pv(e,function(e,t){return _v.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Yy(v&&I,e,"internal-error");const C=zv.fromJSON(this.name,I);Yy("string"==typeof v,e,"internal-error"),Hv(l,e.name),Hv(h,e.name),Yy("boolean"==typeof w,e,"internal-error"),Yy("boolean"==typeof b,e,"internal-error"),Hv(d,e.name),Hv(f,e.name),Hv(p,e.name),Hv(g,e.name),Hv(m,e.name),Hv(y,e.name);const E=new Kv({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static _fromIdTokenResponse(e,t,n=!1){return mh(function*(){const r=new zv;r.updateFromServerResponse(t);const i=new Kv({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield Vv(i),i})()}}const Gv=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return mh(function*(){return!0})()}_set(e,t){var n=this;return mh(function*(){n.storage[e]=t})()}_get(e){var t=this;return mh(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return mh(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function Wv(e,t,n){return`firebase:${e}:${t}:${n}`}class Qv{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Wv(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wv("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return mh(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Kv._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return mh(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return mh(function*(){if(!t.length)return new Qv(tv(Gv),e,n);const r=(yield Promise.all(t.map(function(){var e=mh(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let i=r[0]||tv(Gv);const s=Wv(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=yield n._get(s);if(t){const r=Kv._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(jV){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&(yield i._set(s,o.toJSON())),yield Promise.all(t.map(function(){var e=mh(function*(e){if(e!==i)try{yield e._remove(s)}catch(jV){}});return function(t){return e.apply(this,arguments)}}())),new Qv(i,e,n)):new Qv(i,e,n)})()}}function Jv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ew(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nw(t))return"Blackberry";if(rw(t))return"Webos";if(Xv(t))return"Safari";if((t.includes("chrome/")||Zv(t))&&!t.includes("edge/"))return"Chrome";if(tw(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function Yv(e=_h()){return/firefox\//i.test(e)}function Xv(e=_h()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Zv(e=_h()){return/crios\//i.test(e)}function ew(e=_h()){return/iemobile/i.test(e)}function tw(e=_h()){return/android/i.test(e)}function nw(e=_h()){return/blackberry/i.test(e)}function rw(e=_h()){return/webos/i.test(e)}function iw(e=_h()){return/iphone|ipad|ipod/i.test(e)}function sw(e=_h()){return iw(e)||tw(e)||rw(e)||nw(e)||/windows phone/i.test(e)||ew(e)}function ow(e,t=[]){let n;switch(e){case"Browser":n=Jv(_h());break;case"Worker":n=`${Jv(_h())}-${e}`;break;default:n=e}return`${n}/JsCore/9.8.3/${t.length?t.join(","):"FirebaseCore-web"}`}class aw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return mh(function*(){var n;if(t.auth.currentUser===e)return;const r=[];try{for(const n of t.queue)yield n(e),n.onAbort&&r.push(n.onAbort)}catch(i){r.reverse();for(const e of r)try{e()}catch(s){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=i)||void 0===n?void 0:n.message})}})()}}class cw{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lw(this),this.idTokenSubscription=new lw(this),this.beforeStateQueue=new aw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$y,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=tv(t)),this._initializationPromise=this.queue(mh(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield Qv.create(n,e),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return mh(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t,!0)):void 0})()}initializeCurrentUser(e){var t=this;return mh(function*(){var n;const r=yield t.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const r=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null==i?void 0:i._redirectEventId,a=yield t.tryRedirectSignIn(e);r&&r!==o||!(null==a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return t.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(i)}catch(o){i=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(o))}return i?t.reloadAndSetCurrentUserOrClear(i):t.directlySetCurrentUser(null)}return Yy(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i)})()}tryRedirectSignIn(e){var t=this;return mh(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return mh(function*(){try{yield Vv(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return mh(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return mh(function*(){const n=e?Uh(e):null;return n&&Yy(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e,t=!1){var n=this;return mh(function*(){if(!n._deleted)return e&&Yy(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),t||(yield n.beforeStateQueue.runMiddleware(e)),n.queue(mh(function*(){yield n.directlySetCurrentUser(e),n.notifyAuthListeners()}))})()}signOut(){var e=this;return mh(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(mh(function*(){yield t.assertedPersistence.setPersistence(tv(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return mh(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return mh(function*(){if(!t.redirectPersistenceManager){const n=e&&tv(e)||t._popupRedirectResolver;Yy(n,t,"argument-error"),t.redirectPersistenceManager=yield Qv.create(t,[tv(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return mh(function*(){var n,r;return t._isInitialized&&(yield t.queue(mh(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return mh(function*(){if(e===t.currentUser)return t.queue(mh(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Yy(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return mh(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yy(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return mh(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(n["X-Firebase-Client"]=r),n})()}}function uw(e){return Uh(e)}class lw{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Vh(e,void 0);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Yy(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function dw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class fw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xy("not implemented")}_getIdTokenResponse(e){return Xy("not implemented")}_linkToIdToken(e,t){return Xy("not implemented")}_getReauthenticationResolver(e){return Xy("not implemented")}}function pw(e,t){return gw.apply(this,arguments)}function gw(){return(gw=mh(function*(e,t){return dv(e,"POST","/v1/accounts:resetPassword",hv(e,t))})).apply(this,arguments)}function mw(e,t){return yw.apply(this,arguments)}function yw(){return(yw=mh(function*(e,t){return dv(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function vw(e,t){return ww.apply(this,arguments)}function ww(){return(ww=mh(function*(e,t){return dv(e,"POST","/v1/accounts:update",hv(e,t))})).apply(this,arguments)}function bw(){return(bw=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithPassword",hv(e,t))})).apply(this,arguments)}function _w(e,t){return Iw.apply(this,arguments)}function Iw(){return(Iw=mh(function*(e,t){return dv(e,"POST","/v1/accounts:sendOobCode",hv(e,t))})).apply(this,arguments)}function Cw(e,t){return Ew.apply(this,arguments)}function Ew(){return(Ew=mh(function*(e,t){return _w(e,t)})).apply(this,arguments)}function Tw(e,t){return Sw.apply(this,arguments)}function Sw(){return(Sw=mh(function*(e,t){return _w(e,t)})).apply(this,arguments)}function kw(e,t){return xw.apply(this,arguments)}function xw(){return(xw=mh(function*(e,t){return _w(e,t)})).apply(this,arguments)}function Aw(e,t){return Ow.apply(this,arguments)}function Ow(){return(Ow=mh(function*(e,t){return _w(e,t)})).apply(this,arguments)}function Mw(){return(Mw=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithEmailLink",hv(e,t))})).apply(this,arguments)}function Pw(){return(Pw=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithEmailLink",hv(e,t))})).apply(this,arguments)}class Dw extends fw{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Dw(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Dw(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return mh(function*(){switch(t.signInMethod){case"password":return function(e,t){return bw.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Mw.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Ky(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return mh(function*(){switch(n.signInMethod){case"password":return mw(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Pw.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:Ky(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Nw(e,t){return Rw.apply(this,arguments)}function Rw(){return(Rw=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithIdp",hv(e,t))})).apply(this,arguments)}function Lw(e,t){return Vw.apply(this,arguments)}function Vw(){return(Vw=mh(function*(e,t){return dv(e,"POST","/v1/accounts:sendVerificationCode",hv(e,t))})).apply(this,arguments)}function Fw(){return(Fw=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithPhoneNumber",hv(e,t))})).apply(this,arguments)}function jw(){return(jw=mh(function*(e,t){const n=yield mv(e,"POST","/v1/accounts:signInWithPhoneNumber",hv(e,t));if(n.temporaryProof)throw bv(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const Uw={USER_NOT_FOUND:"user-not-found"};function Bw(){return(Bw=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithPhoneNumber",hv(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Uw)})).apply(this,arguments)}class qw extends fw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return Fw.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return jw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return Bw.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new qw({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class $w{constructor(e){var t,n,r,i,s,o;const a=Rh(Lh(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Yy(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Rh(Lh(e)).link,n=t?Rh(Lh(t)).deep_link_id:null,r=Rh(Lh(e)).deep_link_id;return(r?Rh(Lh(r)).link:null)||r||n||t||e}(e);try{return new $w(t)}catch(jV){return null}}}let zw=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Dw._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$w.parseLink(t);return Yy(n,"argument-error"),Dw._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class Hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Kw extends Hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function Gw(e,t){return Ww.apply(this,arguments)}function Ww(){return(Ww=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signUp",hv(e,t))})).apply(this,arguments)}class Qw{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,r=!1){return mh(function*(){const i=yield Kv._fromIdTokenResponse(e,n,r),s=Jw(n);return new Qw({user:i,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return mh(function*(){yield e._updateTokensIfNecessary(n,!0);const r=Jw(n);return new Qw({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function Jw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Yw(){return(Yw=mh(function*(e){var t;const n=uw(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Qw({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield Gw(n,{returnSecureToken:!0}),i=yield Qw._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Xw extends Ah{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Xw.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Xw(e,t,n,r)}}function Zw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Xw._fromErrorAndOperation(e,n,t,r);throw n})}function eb(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function tb(){return(tb=mh(function*(e,t){const n=Uh(e);yield ib(!0,n,t);const{providerUserInfo:r}=yield Iv(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=eb(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function nb(e,t){return rb.apply(this,arguments)}function rb(){return(rb=mh(function*(e,t,n=!1){const r=yield Pv(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return Qw._forOperation(e,"link",r)})).apply(this,arguments)}function ib(e,t,n){return sb.apply(this,arguments)}function sb(){return(sb=mh(function*(e,t,n){yield Vv(t);const r=!1===e?"provider-already-linked":"no-such-provider";Yy(eb(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function ob(e,t){return ab.apply(this,arguments)}function ab(){return(ab=mh(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield Pv(e,Zw(r,i,t,e),n);Yy(s.idToken,r,"internal-error");const o=Mv(s.idToken);Yy(o,r,"internal-error");const{sub:a}=o;return Yy(e.uid===a,r,"user-mismatch"),Qw._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Ky(r,"user-mismatch"),s}})).apply(this,arguments)}function cb(e,t){return ub.apply(this,arguments)}function ub(){return(ub=mh(function*(e,t,n=!1){const r="signIn",i=yield Zw(e,r,t),s=yield Qw._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function lb(e,t){return hb.apply(this,arguments)}function hb(){return(hb=mh(function*(e,t){return cb(uw(e),t)})).apply(this,arguments)}function db(e,t){return fb.apply(this,arguments)}function fb(){return(fb=mh(function*(e,t){const n=Uh(e);return yield ib(!1,n,t.providerId),nb(n,t)})).apply(this,arguments)}function pb(e,t){return gb.apply(this,arguments)}function gb(){return(gb=mh(function*(e,t){return ob(Uh(e),t)})).apply(this,arguments)}function mb(e,t){return yb.apply(this,arguments)}function yb(){return(yb=mh(function*(e,t){return mv(e,"POST","/v1/accounts:signInWithCustomToken",hv(e,t))})).apply(this,arguments)}function vb(){return(vb=mh(function*(e,t){const n=uw(e),r=yield mb(n,{token:t,returnSecureToken:!0}),i=yield Qw._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class wb{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?bb._fromServerResponse(e,t):Ky(e,"internal-error")}}class bb extends wb{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new bb(t)}}function _b(e,t,n){var r;Yy((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Yy(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Yy(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Yy(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ib(){return(Ib=mh(function*(e,t,n){const r=Uh(e),i={requestType:"PASSWORD_RESET",email:t};n&&_b(r,i,n),yield Tw(r,i)})).apply(this,arguments)}function Cb(){return(Cb=mh(function*(e,t,n){yield pw(Uh(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Eb(){return(Eb=mh(function*(e,t){yield vw(Uh(e),{oobCode:t})})).apply(this,arguments)}function Tb(e,t){return Sb.apply(this,arguments)}function Sb(){return(Sb=mh(function*(e,t){const n=Uh(e),r=yield pw(n,{oobCode:t}),i=r.requestType;switch(Yy(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Yy(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Yy(r.mfaInfo,n,"internal-error");default:Yy(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=wb._fromServerResponse(uw(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}})).apply(this,arguments)}function kb(){return(kb=mh(function*(e,t){const{data:n}=yield Tb(Uh(e),t);return n.email})).apply(this,arguments)}function xb(){return(xb=mh(function*(e,t,n){const r=uw(e),i=yield Gw(r,{returnSecureToken:!0,email:t,password:n}),s=yield Qw._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function Ab(){return(Ab=mh(function*(e,t,n){const r=Uh(e),i={requestType:"EMAIL_SIGNIN",email:t};Yy(n.handleCodeInApp,r,"argument-error"),n&&_b(r,i,n),yield kw(r,i)})).apply(this,arguments)}function Ob(){return(Ob=mh(function*(e,t,n){const r=Uh(e),i=zw.credentialWithLink(t,n||rv());return Yy(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),lb(r,i)})).apply(this,arguments)}function Mb(e,t){return Pb.apply(this,arguments)}function Pb(){return(Pb=mh(function*(e,t){return dv(e,"POST","/v1/accounts:createAuthUri",hv(e,t))})).apply(this,arguments)}function Db(){return(Db=mh(function*(e,t){const n={identifier:t,continueUri:iv()?rv():"http://localhost"},{signinMethods:r}=yield Mb(Uh(e),n);return r||[]})).apply(this,arguments)}function Nb(){return(Nb=mh(function*(e,t){const n=Uh(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&_b(n.auth,r,t);const{email:i}=yield Cw(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function Rb(){return(Rb=mh(function*(e,t,n){const r=Uh(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&_b(r.auth,i,n);const{email:s}=yield Aw(r.auth,i);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function Lb(e,t){return Vb.apply(this,arguments)}function Vb(){return(Vb=mh(function*(e,t){return dv(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Fb(){return(Fb=mh(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=Uh(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=yield Pv(r,Lb(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),yield r._updateTokensIfNecessary(s)})).apply(this,arguments)}function jb(e,t,n){return Ub.apply(this,arguments)}function Ub(){return(Ub=mh(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Pv(e,mw(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Bb{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class qb extends Bb{constructor(e,t,n,r){super(e,t,n),this.username=r}}class $b extends Bb{constructor(e,t){super(e,"facebook.com",t)}}class zb extends qb{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Hb extends Bb{constructor(e,t){super(e,"google.com",t)}}class Kb extends qb{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Gb(e,t,n,r){return Uh(e).onIdTokenChanged(t,n,r)}function Wb(e,t,n,r){return Uh(e).onAuthStateChanged(t,n,r)}function Qb(){return(Qb=mh(function*(e){return Uh(e).delete()})).apply(this,arguments)}class Jb{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new Jb("enroll",e)}static _fromMfaPendingCredential(e){return new Jb("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Jb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Jb._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Yb{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=uw(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>wb._fromServerResponse(n,e));Yy(r.mfaPendingCredential,n,"internal-error");const s=Jb._fromMfaPendingCredential(r.mfaPendingCredential);return new Yb(s,i,function(){var e=mh(function*(e){const i=yield e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=yield Qw._fromIdTokenResponse(n,t.operationType,o);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return Yy(t.user,n,"internal-error"),Qw._forOperation(t.user,t.operationType,o);default:Ky(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return mh(function*(){return t.signInResolver(e)})()}}function Xb(e,t){return dv(e,"POST","/v2/accounts/mfaEnrollment:start",hv(e,t))}class Zb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>wb._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Zb(e)}getSession(){var e=this;return mh(function*(){return Jb._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return mh(function*(){const r=e,i=yield n.getSession(),s=yield Pv(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return mh(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Pv(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},dv(s,"POST","/v2/accounts/mfaEnrollment:withdraw",hv(s,o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const e_=new WeakMap,t_="__sak";class n_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(t_,"1"),this.storage.removeItem(t_),Promise.resolve(!0)):Promise.resolve(!1)}catch(jV){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const r_=(()=>{class e extends n_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=_h();return Xv(e)||iw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Th()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,r=this;return mh(function*(){yield n().call(r,e,t),r.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return mh(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return mh(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),i_=(()=>{class e extends n_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let s_=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return mh(function*(){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=t.handlersMap[i];if(!(null==o?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(function(){var e=mh(function*(e){return e(n.origin,s)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=mh(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function o_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class a_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var r=this;return mh(function*(){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=o_("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"))}}},r.handlers.add(o),i.port1.addEventListener("message",o.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&r.removeMessageHandler(o)})})()}}function c_(){return window}function u_(){return void 0!==c_().WorkerGlobalScope&&"function"==typeof c_().importScripts}function l_(){return(l_=mh(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(jV){return null}})).apply(this,arguments)}const h_="firebaseLocalStorageDb",d_="firebaseLocalStorage",f_="fbase_key";class p_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function g_(e,t){return e.transaction([d_],t?"readwrite":"readonly").objectStore(d_)}function m_(){const e=indexedDB.open(h_,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(d_,{keyPath:f_})}catch(r){n(r)}}),e.addEventListener("success",mh(function*(){const n=e.result;n.objectStoreNames.contains(d_)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(h_);return new p_(e).toPromise()}(),t(yield m_()))}))})}function y_(e,t,n){return v_.apply(this,arguments)}function v_(){return(v_=mh(function*(e,t,n){const r=g_(e,!0).put({[f_]:t,value:n});return new p_(r).toPromise()})).apply(this,arguments)}function w_(){return(w_=mh(function*(e,t){const n=g_(e,!1).get(t),r=yield new p_(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function b_(e,t){const n=g_(e,!0).delete(t);return new p_(n).toPromise()}const __=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return mh(function*(){return e.db||(e.db=yield m_()),e.db})()}_withRetries(e){var t=this;return mh(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return mh(function*(){return u_()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return mh(function*(){e.receiver=s_._getInstance(u_()?self:null),e.receiver._subscribe("keyChanged",function(){var t=mh(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=mh(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return mh(function*(){var t,n;if(e.activeServiceWorker=yield function(){return l_.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new a_(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return mh(function*(){if(t.sender&&t.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(jV){}})()}_isAvailable(){return mh(function*(){try{if(!indexedDB)return!1;const e=yield m_();return yield y_(e,t_,"1"),yield b_(e,t_),!0}catch(jV){}return!1})()}_withPendingWrite(e){var t=this;return mh(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return mh(function*(){return n._withPendingWrite(mh(function*(){return yield n._withRetries(n=>y_(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return mh(function*(){const n=yield t._withRetries(t=>function(e,t){return w_.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return mh(function*(){return t._withPendingWrite(mh(function*(){return yield t._withRetries(t=>b_(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return mh(function*(){const t=yield e._withRetries(e=>{const t=g_(e,!1).getAll();return new p_(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval(mh(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function I_(e,t){return dv(e,"POST","/v2/accounts/mfaSignIn:start",hv(e,t))}function C_(e){return`__${e}${Math.floor(1e6*Math.random())}`}C_("rcb"),new ov(3e4,6e4);const E_="recaptcha";class T_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=qw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function S_(){return(S_=mh(function*(e,t,n){const r=uw(e),i=yield A_(r,t,Uh(n));return new T_(i,e=>lb(r,e))})).apply(this,arguments)}function k_(){return(k_=mh(function*(e,t,n){const r=Uh(e);yield ib(!1,r,"phone");const i=yield A_(r.auth,t,Uh(n));return new T_(i,e=>db(r,e))})).apply(this,arguments)}function x_(){return(x_=mh(function*(e,t,n){const r=Uh(e),i=yield A_(r.auth,t,Uh(n));return new T_(i,e=>pb(r,e))})).apply(this,arguments)}function A_(e,t,n){return O_.apply(this,arguments)}function O_(){return(O_=mh(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(Yy("string"==typeof i,e,"argument-error"),Yy(n.type===E_,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return Yy("enroll"===t.type,e,"internal-error"),(yield Xb(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Yy("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return Yy(n,e,"missing-multi-factor-info"),(yield I_(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield Lw(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function M_(){return(M_=mh(function*(e,t){yield nb(Uh(e),t)})).apply(this,arguments)}function P_(e,t){return t?tv(t):(Yy(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class D_ extends fw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function N_(e){return cb(e.auth,new D_(e),e.bypassAuthState)}function R_(e){const{auth:t,user:n}=e;return Yy(n,t,"internal-error"),ob(n,new D_(e),e.bypassAuthState)}function L_(e){return V_.apply(this,arguments)}function V_(){return(V_=mh(function*(e){const{auth:t,user:n}=e;return Yy(n,t,"internal-error"),nb(n,new D_(e),e.bypassAuthState)})).apply(this,arguments)}class F_{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=mh(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return mh(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const c={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N_;case"linkViaPopup":case"linkViaRedirect":return L_;case"reauthViaPopup":case"reauthViaRedirect":return R_;default:Ky(this.auth,"internal-error")}}resolve(e){Zy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const j_=new ov(2e3,1e4);function U_(){return(U_=mh(function*(e,t,n){const r=uw(e);Qy(e,t,Hw);const i=P_(r,n);return new $_(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function B_(){return(B_=mh(function*(e,t,n){const r=Uh(e);Qy(r.auth,t,Hw);const i=P_(r.auth,n);return new $_(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function q_(){return(q_=mh(function*(e,t,n){const r=Uh(e);Qy(r.auth,t,Hw);const i=P_(r.auth,n);return new $_(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let $_=(()=>{class e extends F_{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return mh(function*(){const t=yield e.execute();return Yy(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return mh(function*(){Zy(1===e.filter.length,"Popup operations only handle one event");const t=o_();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(Gy(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Gy(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Gy(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,j_.get())};e()}}return e.currentPopupAction=null,e})();const z_=new Map;class H_ extends F_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return mh(function*(){let n=z_.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return K_.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}z_.set(t.auth._key(),n)}return t.bypassAuthState||z_.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return mh(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return mh(function*(){})()}cleanUp(){}}function K_(){return(K_=mh(function*(e,t){const n=Y_(t),r=J_(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function G_(e,t){return W_.apply(this,arguments)}function W_(){return(W_=mh(function*(e,t){return J_(e)._set(Y_(t),"true")})).apply(this,arguments)}function Q_(e,t){z_.set(e._key(),t)}function J_(e){return tv(e._redirectPersistence)}function Y_(e){return Wv("pendingRedirect",e.config.apiKey,e.name)}function X_(){return(X_=mh(function*(e,t,n){const r=uw(e);Qy(e,t,Hw);const i=P_(r,n);return yield G_(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Z_(){return(Z_=mh(function*(e,t,n){const r=Uh(e);Qy(r.auth,t,Hw);const i=P_(r.auth,n);yield G_(i,r.auth);const s=yield iI(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)})).apply(this,arguments)}function eI(){return(eI=mh(function*(e,t,n){const r=Uh(e);Qy(r.auth,t,Hw);const i=P_(r.auth,n);yield ib(!1,r,t.providerId),yield G_(i,r.auth);const s=yield iI(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)})).apply(this,arguments)}function tI(){return(tI=mh(function*(e,t){return yield uw(e)._initializationPromise,nI(e,t,!1)})).apply(this,arguments)}function nI(e,t){return rI.apply(this,arguments)}function rI(){return(rI=mh(function*(e,t,n=!1){const r=uw(e),i=P_(r,t),s=new H_(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function iI(e){return sI.apply(this,arguments)}function sI(){return(sI=mh(function*(e){const t=o_(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class oI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!cI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gy(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aI(e))}saveEventToCache(e){this.cachedEventUids.add(aI(e)),this.lastProcessedEventTime=Date.now()}}function aI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function cI({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function uI(e){return lI.apply(this,arguments)}function lI(){return(lI=mh(function*(e,t={}){return dv(e,"GET","/v1/projects",t)})).apply(this,arguments)}const hI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dI=/^https?/;function fI(){return(fI=mh(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield uI(e);for(const n of t)try{if(pI(n))return}catch(jV){}Ky(e,"unauthorized-domain")})).apply(this,arguments)}function pI(e){const t=rv(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!dI.test(n))return!1;if(hI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gI=new ov(3e4,6e4);function mI(){const e=c_().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let yI=null;function vI(e){return yI=yI||function(e){return new Promise((t,n)=>{var r,i,s,o;function a(){mI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mI(),n(Gy(e,"network-request-failed"))},timeout:gI.get()})}if(null===(i=null===(r=c_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=c_().gapi)||void 0===s?void 0:s.load)){const t=C_("iframefcb");return c_()[t]=()=>{gapi.load?a():n(Gy(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=Gy("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)})).catch(e=>n(e))}a()}}).catch(e=>{throw yI=null,e})}(e),yI}const wI=new ov(5e3,15e3),bI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_I=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function II(e){const t=e.config;Yy(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?av(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:xd},i=_I.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Nh(r).slice(1)}`}function CI(){return(CI=mh(function*(e){const t=yield vI(e),n=c_().gapi;return Yy(n,e,"internal-error"),t.open({where:document.body,url:II(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bI,dontclear:!0},t=>new Promise(function(){var n=mh(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=Gy(e,"network-request-failed"),s=c_().setTimeout(()=>{r(i)},wI.get());function o(){c_().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const EI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class TI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function SI(e,t,n,r,i,s){Yy(e.config.authDomain,e,"auth-domain-config-required"),Yy(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xd,eventId:i};if(t instanceof Hw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Kw){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];return`${function({config:e}){return e.emulator?av(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Nh(a).slice(1)}`}const kI="webStorageSupport",xI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i_,this._completeRedirectFn=nI,this._overrideRedirectResult=Q_}_openPopup(e,t,n,r){var i=this;return mh(function*(){var s;Zy(null===(s=i.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const o=SI(e,t,n,rv(),r);return function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},EI),{width:r.toString(),height:i.toString(),top:s,left:o}),u=_h().toLowerCase();n&&(a=Zv(u)?"_blank":n),Yv(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=_h()){var t;return iw(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new TI(null);const h=window.open(t||"",a,l);Yy(h,e,"popup-blocked");try{h.focus()}catch(d){}return new TI(h)}(e,o,o_())})()}_openRedirect(e,t,n,r){var i=this;return mh(function*(){var s;return yield i._originValidation(e),s=SI(e,t,n,rv(),r),c_().location.href=s,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zy(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return mh(function*(){const n=yield function(e){return CI.apply(this,arguments)}(e),r=new oI(e);return n.register("authEvent",t=>(Yy(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kI,{type:kI},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ky(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fI.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sw()||Xv()||iw()}};var AI,OI="@firebase/auth",MI="0.20.3";class PI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return mh(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yy(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DI(e,t){return"function"==typeof t?n=>n.pipe(DI((n,r)=>F(e(n,r)).pipe(x((e,i)=>t(n,e,r,i))))):t=>t.lift(new NI(e))}AI="Browser",Ed(new Bh("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{Yy(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),Yy(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:AI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ow(AI)},o=new cw(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tv);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ed(new Bh("auth-internal",e=>{return t=uw(e.getProvider("auth").getImmediate()),new PI(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),Pd(OI,MI,void 0),Pd(OI,MI,"esm2017");class NI{constructor(e){this.project=e}call(e,t){return t.subscribe(new RI(e,this.project))}}class RI extends U{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new j(this),r=this.destination;r.add(n),this.innerSubscription=B(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function LI(e){return new b(function(t){return{unsubscribe:Gb(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})}const VI="auth";class FI{constructor(){return oy(VI)}}yy(0,300).pipe(Py(()=>Oy(oy(VI))),Dy()),new Ln("angularfire2.auth-instances"),new Zn,new Zn,my(function(e){return new b(function(t){return{unsubscribe:Wb(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})},!0),my(LI,!0),my(function(e){return LI(e).pipe(DI(function(e){return e?F(kv(e)):hu(null)}))},!0),my(function(e,t){return Eb.apply(this,arguments)},!0),my(function(e,t,n){return Uh(e).beforeAuthStateChanged(t,n)},!0),my(Tb,!0),my(function(e,t,n){return Cb.apply(this,arguments)},!0),my(function(e,t,n){const r=uw(e);Yy(r._canInitEmulator,r,"emulator-config-failed"),Yy(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=hw(t),{host:o,port:a}=function(e){const t=hw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:dw(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:dw(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()},!0),my(function(e,t,n){return xb.apply(this,arguments)},!0),my(function(e){return Qb.apply(this,arguments)},!0),my(function(e,t){return Db.apply(this,arguments)},!0),my(function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Mv(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Bb(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new $b(s,i);case"github.com":return new zb(s,i);case"google.com":return new Hb(s,i);case"twitter.com":return new Kb(s,i,e.screenName||null);case"custom":case"anonymous":return new Bb(s,null);default:return new Bb(s,r,i)}}(n)},!0),my(function(e=Ad()){const t=Td(e,"auth");return t.isInitialized()?t.getImmediate():nv(e,{popupRedirectResolver:xI,persistence:[__,r_,i_]})},!0),my(kv,!0),my(xv,!0),my(function(e,t){var n;const r=Uh(e),i=t;return Yy(t.customData.operationType,r,"argument-error"),Yy(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Yb._fromError(r,i)},!0),my(function(e,t){return tI.apply(this,arguments)},!0),my(nv,!0),my(function(e,t){const n=$w.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)},!0),my(db,!0),my(function(e,t,n){return k_.apply(this,arguments)},!0),my(function(e,t,n){return q_.apply(this,arguments)},!0),my(function(e,t,n){return function(e,t,n){return eI.apply(this,arguments)}(e,t,n)},!0),my(function(e){const t=Uh(e);return e_.has(t)||e_.set(t,Zb._fromUser(t)),e_.get(t)},!0),my(Wb,!0),my(Gb,!0),my(function(e){return $w.parseLink(e)},!0),my(pb,!0),my(function(e,t,n){return x_.apply(this,arguments)},!0),my(function(e,t,n){return B_.apply(this,arguments)},!0),my(function(e,t,n){return function(e,t,n){return Z_.apply(this,arguments)}(e,t,n)},!0),my(jv,!0),my(function(e,t){return Nb.apply(this,arguments)},!0),my(function(e,t,n){return Ib.apply(this,arguments)},!0),my(function(e,t,n){return Ab.apply(this,arguments)},!0),my(function(e,t){return Uh(e).setPersistence(t)},!0),my(function(e){return Yw.apply(this,arguments)},!0),my(lb,!0),my(function(e,t){return vb.apply(this,arguments)},!0),my(function(e,t,n){return lb(Uh(e),zw.credential(t,n))},!0),my(function(e,t,n){return Ob.apply(this,arguments)},!0),my(function(e,t,n){return S_.apply(this,arguments)},!0),my(function(e,t,n){return U_.apply(this,arguments)},!0),my(function(e,t,n){return function(e,t,n){return X_.apply(this,arguments)}(e,t,n)},!0),my(function(e){return Uh(e).signOut()},!0),my(function(e,t){return tb.apply(this,arguments)},!0),my(function(e,t){return Uh(e).updateCurrentUser(t)},!0),my(function(e,t){return jb(Uh(e),t,null)},!0),my(function(e,t){return jb(Uh(e),null,t)},!0),my(function(e,t){return M_.apply(this,arguments)},!0),my(function(e,t){return Fb.apply(this,arguments)},!0),my(function(e){Uh(e).useDeviceLanguage()},!0),my(function(e,t,n){return Rb.apply(this,arguments)},!0),my(function(e,t){return kb.apply(this,arguments)},!0);const jI=new Map,UI={activated:!1,tokenObservers:[]},BI={initialized:!1,enabled:!1};function qI(e){return jI.get(e)||UI}function $I(e,t){jI.set(e,t)}function zI(){return BI}class HI{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return mh(function*(){t.stop();try{t.pending=new bh,yield function(e){return new Promise(t=>{setTimeout(t,e)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new bh,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const KI=new Oh("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GI(e){if(!qI(e).activated)throw KI.create("use-before-activation",{appName:e.name})}function WI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function QI(e,t){return JI.apply(this,arguments)}function JI(){return(JI=mh(function*({url:e,body:t},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const e=yield o.getHeartbeatsHeader();e&&(s["X-Firebase-Client"]=e)}const a={method:"POST",body:JSON.stringify(t),headers:s};let c,u;try{c=yield fetch(e,a)}catch(f){throw KI.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==c.status)throw KI.create("fetch-status-error",{httpStatus:c.status});try{u=yield c.json()}catch(f){throw KI.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw KI.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const h=1e3*Number(l[1]),d=Date.now();return{token:u.token,expireTimeMillis:d+h,issuedAtTimeMillis:d}})).apply(this,arguments)}function YI(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const XI="firebase-app-check-store",ZI="debug-token";let eC=null;function tC(){return eC||(eC=new Promise((e,t)=>{var n;try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(KI.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(XI,{keyPath:"compositeKey"})}}}catch(r){t(KI.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}}),eC)}function nC(e){return aC(uC(e))}function rC(e){return sC(ZI,e)}function iC(){return aC(ZI)}function sC(e,t){return oC.apply(this,arguments)}function oC(){return(oC=mh(function*(e,t){const n=(yield tC()).transaction(XI,"readwrite"),r=n.objectStore(XI).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(KI.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}function aC(e){return cC.apply(this,arguments)}function cC(){return(cC=mh(function*(e){const t=(yield tC()).transaction(XI,"readonly"),n=t.objectStore(XI).get(e);return new Promise((e,r)=>{n.onsuccess=t=>{const n=t.target.result;e(n?n.value:void 0)},t.onerror=e=>{var t;r(KI.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}})})).apply(this,arguments)}function uC(e){return`${e.options.appId}-${e.name}`}const lC=new Xh("@firebase/app-check");function hC(){return(hC=mh(function*(e){if(Sh()){let n;try{n=yield nC(e)}catch(t){lC.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return n}})).apply(this,arguments)}function dC(e,t){return Sh()?function(e,t){return sC(uC(e),t)}(e,t).catch(e=>{lC.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function fC(){return(fC=mh(function*(){let e;try{e=yield iC()}catch(bA){}if(e)return e;{const e=WI();return rC(e).catch(e=>lC.warn(`Failed to persist debug token to IndexedDB. Error: ${e}`)),e}})).apply(this,arguments)}function pC(){return zI().enabled}function gC(){return mC.apply(this,arguments)}function mC(){return(mC=mh(function*(){const e=zI();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yC={error:"UNKNOWN_ERROR"};function vC(e){return wC.apply(this,arguments)}function wC(){return(wC=mh(function*(e,t=!1){const n=e.app;GI(n);const r=qI(n);let i,s=r.token;if(!s){const e=yield r.cachedTokenPromise;e&&EC(e)&&(s=e)}if(!t&&s&&EC(s))return{token:s.token};let o,a=!1;if(pC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=QI(YI(n,yield gC()),e.heartbeatServiceProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0);const t=yield r.exchangeTokenPromise;return yield dC(n,t),$I(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0),s=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?lC.warn(c.message):lC.error(c),i=c}return s?(o={token:s.token},$I(n,Object.assign(Object.assign({},r),{token:s})),yield dC(n,s)):o=TC(i),a&&CC(n,o),o})).apply(this,arguments)}function bC(e,t,n,r){const{app:i}=e,s=qI(i),o={next:n,error:r,type:t};if($I(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&EC(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),IC(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>IC(e))}function _C(e,t){const n=qI(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),$I(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function IC(e){const{app:t}=e,n=qI(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new HI(mh(function*(){let n;if(n=qI(t).token?yield vC(e,!0):yield vC(e),n.error)throw n.error}),()=>!0,()=>{const e=qI(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),$I(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function CC(e,t){const n=qI(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function EC(e){return e.expireTimeMillis-Date.now()>0}function TC(e){return{token:(t=yC,vh.encodeString(JSON.stringify(t),!1)),error:e};var t}class SC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=qI(this.app);for(const t of e)_C(this.app,t.next);return Promise.resolve()}}function kC(){return(kC=mh(function*(e,t){const n=yield vC(e,t);if(n.error)throw n.error;return{token:n.token}})).apply(this,arguments)}const xC="app-check-internal";Ed(new Bh("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new SC(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(xC).initialize()})),Ed(new Bh(xC,e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>vC(t,e),addTokenListener:e=>bC(t,"INTERNAL",e),removeTokenListener:e=>_C(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),Pd("@firebase/app-check","0.5.9");const AC="app-check";class OC{constructor(){return oy(AC)}}function MC(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}yy(0,300).pipe(Py(()=>Oy(oy(AC))),Dy()),new Ln("angularfire2.app-check-instances"),Symbol("angularfire2.app-check.namespace"),"undefined"!=typeof window&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname),new Zn,new Zn,my(function(e,t){return kC.apply(this,arguments)},!0),my(function(e=Ad(),t){const n=Td(e=Uh(e),"app-check");if(zI().initialized||function(){const e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}(),t=zI();if(t.initialized=!0,"string"!=typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const n=new bh;t.token=n,n.resolve("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?e.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return fC.apply(this,arguments)}())}(),pC()&&gC().then(e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw KI.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return function(e,t,n){const r=qI(e),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=t,i.cachedTokenPromise=function(e){return hC.apply(this,arguments)}(e).then(t=>(t&&EC(t)&&($I(e,Object.assign(Object.assign({},qI(e)),{token:t})),CC(e,{token:t.token})),t)),i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,$I(e,i),i.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),qI(e).isTokenAutoRefreshEnabled&&bC(r,"INTERNAL",()=>{}),r},!0),my(function(e,t,n,r){let i=()=>{},s=()=>{};return i=null!=t.next?t.next.bind(t):t,null!=t.error?s=t.error.bind(t):n&&(s=n),bC(e,"EXTERNAL",i,s),()=>_C(e.app,i)},!0),my(function(e,t){const n=e.app,r=qI(n);r.tokenRefresher&&(!0===t?r.tokenRefresher.start():r.tokenRefresher.stop()),$I(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:t}))},!0);var PC,DC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},NC={},RC=RC||{},LC=DC||self;function VC(){}function FC(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function jC(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var UC="closure_uid_"+(1e9*Math.random()>>>0),BC=0;function qC(e,t,n){return e.call.apply(e.bind,arguments)}function $C(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zC(e,t,n){return(zC=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qC:$C).apply(null,arguments)}function HC(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function KC(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function GC(){this.s=this.s,this.o=this.o}var WC={};GC.prototype.s=!1,GC.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,UC)&&e[UC]||(e[UC]=++BC)}(this);delete WC[e]}},GC.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QC=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},JC=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function YC(e){return Array.prototype.concat.apply([],arguments)}function XC(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ZC(e){return/^[\s\xa0]*$/.test(e)}var eE,tE=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function nE(e,t){return-1!=e.indexOf(t)}function rE(e,t){return e<t?-1:e>t?1:0}e:{var iE=LC.navigator;if(iE){var sE=iE.userAgent;if(sE){eE=sE;break e}}eE=""}function oE(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function aE(e){const t={};for(const n in e)t[n]=e[n];return t}var cE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uE(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<cE.length;t++)n=cE[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function lE(e){return lE[" "](e),e}lE[" "]=VC;var hE,dE,fE=nE(eE,"Opera"),pE=nE(eE,"Trident")||nE(eE,"MSIE"),gE=nE(eE,"Edge"),mE=gE||pE,yE=nE(eE,"Gecko")&&!(nE(eE.toLowerCase(),"webkit")&&!nE(eE,"Edge"))&&!(nE(eE,"Trident")||nE(eE,"MSIE"))&&!nE(eE,"Edge"),vE=nE(eE.toLowerCase(),"webkit")&&!nE(eE,"Edge");function wE(){var e=LC.document;return e?e.documentMode:void 0}e:{var bE="",_E=(dE=eE,yE?/rv:([^\);]+)(\)|;)/.exec(dE):gE?/Edge\/([\d\.]+)/.exec(dE):pE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dE):vE?/WebKit\/(\S+)/.exec(dE):fE?/(?:Version)[ \/]?(\S+)/.exec(dE):void 0);if(_E&&(bE=_E?_E[1]:""),pE){var IE=wE();if(null!=IE&&IE>parseFloat(bE)){hE=String(IE);break e}}hE=bE}var CE={};var EE=LC.document&&pE&&(wE()||parseInt(hE,10))||void 0,TE=function(){if(!LC.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{LC.addEventListener("test",VC,t),LC.removeEventListener("test",VC,t)}catch(eh){}return e}();function SE(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function kE(e,t){if(SE.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yE){e:{try{lE(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:xE[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&kE.Z.h.call(this)}}SE.prototype.h=function(){this.defaultPrevented=!0},KC(kE,SE);var xE={2:"touch",3:"pen",4:"mouse"};kE.prototype.h=function(){kE.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var AE="closure_listenable_"+(1e6*Math.random()|0),OE=0;function ME(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++OE,this.ca=this.fa=!1}function PE(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function DE(e){this.src=e,this.g={},this.h=0}function NE(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=QC(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(PE(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function RE(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}DE.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=RE(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ME(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var LE="closure_lm_"+(1e6*Math.random()|0),VE={};function FE(e,t,n,r,i){if(r&&r.once)return UE(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)FE(e,t[s],n,r,i);return null}return n=GE(n),e&&e[AE]?e.N(t,n,jC(r)?!!r.capture:!!r,i):jE(e,t,n,!1,r,i)}function jE(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=jC(i)?!!i.capture:!!i,a=HE(e);if(a||(e[LE]=a=new DE(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=zE;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)TE||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($E(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function UE(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)UE(e,t[s],n,r,i);return null}return n=GE(n),e&&e[AE]?e.O(t,n,jC(r)?!!r.capture:!!r,i):jE(e,t,n,!0,r,i)}function BE(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)BE(e,t[s],n,r,i);else r=jC(r)?!!r.capture:!!r,n=GE(n),e&&e[AE]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=RE(s=e.g[t],n,r,i))&&(PE(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=HE(e))&&(t=e.g[t.toString()],e=-1,t&&(e=RE(t,n,r,i)),(n=-1<e?t[e]:null)&&qE(n))}function qE(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[AE])NE(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($E(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=HE(t))?(NE(n,e),0==n.h&&(n.src=null,t[LE]=null)):PE(e)}}}function $E(e){return e in VE?VE[e]:VE[e]="on"+e}function zE(e,t){if(e.ca)e=!0;else{t=new kE(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&qE(e),e=n.call(r,t)}return e}function HE(e){return(e=e[LE])instanceof DE?e:null}var KE="__closure_events_fn_"+(1e9*Math.random()>>>0);function GE(e){return"function"==typeof e?e:(e[KE]||(e[KE]=function(t){return e.handleEvent(t)}),e[KE])}function WE(){GC.call(this),this.i=new DE(this),this.P=this,this.I=null}function QE(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new SE(t,e);else if(t instanceof SE)t.target=t.target||e;else{var i=t;uE(t=new SE(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=JE(o,r,!0,t)&&i}if(i=JE(o=t.g=e,r,!0,t)&&i,i=JE(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=JE(o=t.g=n[s],r,!1,t)&&i}function JE(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&NE(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}KC(WE,GC),WE.prototype[AE]=!0,WE.prototype.removeEventListener=function(e,t,n,r){BE(this,e,t,n,r)},WE.prototype.M=function(){if(WE.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)PE(n[r]);delete t.g[e],t.h--}}this.I=null},WE.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},WE.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var YE=LC.JSON.stringify;function XE(){var e=sT;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ZE,eT=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new tT,e=>e.reset());class tT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nT(e){LC.setTimeout(()=>{throw e},0)}function rT(e,t){ZE||function(){var e=LC.Promise.resolve(void 0);ZE=function(){e.then(oT)}}(),iT||(ZE(),iT=!0),sT.add(e,t)}var iT=!1,sT=new class{constructor(){this.h=this.g=null}add(e,t){const n=eT.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function oT(){for(var e;e=XE();){try{e.h.call(e.g)}catch(eh){nT(eh)}var t=eT;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}iT=!1}function aT(e,t){WE.call(this),this.h=e||1,this.g=t||LC,this.j=zC(this.kb,this),this.l=Date.now()}function cT(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function uT(e,t,n){if("function"==typeof e)n&&(e=zC(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zC(e.handleEvent,e)}return 2147483647<Number(t)?-1:LC.setTimeout(e,t||0)}function lT(e){e.g=uT(()=>{e.g=null,e.i&&(e.i=!1,lT(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}KC(aT,WE),(PC=aT.prototype).da=!1,PC.S=null,PC.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),QE(this,"tick"),this.da&&(cT(this),this.start()))}},PC.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},PC.M=function(){aT.Z.M.call(this),cT(this),delete this.g};class hT extends GC{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lT(this)}M(){super.M(),this.g&&(LC.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dT(e){GC.call(this),this.h=e,this.g={}}KC(dT,GC);var fT=[];function pT(e,t,n,r){Array.isArray(n)||(n&&(fT[0]=n.toString()),n=fT);for(var i=0;i<n.length;i++){var s=FE(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function gT(e){oE(e.g,function(e,t){this.g.hasOwnProperty(t)&&qE(e)},e),e.g={}}function mT(){this.g=!0}function yT(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return YE(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}dT.prototype.M=function(){dT.Z.M.call(this),gT(this)},dT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mT.prototype.Aa=function(){this.g=!1},mT.prototype.info=function(){};var vT={},wT=null;function bT(){return wT=wT||new WE}function _T(e){SE.call(this,vT.Ma,e)}function IT(e){const t=bT();QE(t,new _T(t,e))}function CT(e,t){SE.call(this,vT.STAT_EVENT,e),this.stat=t}function ET(e){const t=bT();QE(t,new CT(t,e))}function TT(e,t){SE.call(this,vT.Na,e),this.size=t}function ST(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return LC.setTimeout(function(){e()},t)}vT.Ma="serverreachability",KC(_T,SE),vT.STAT_EVENT="statevent",KC(CT,SE),vT.Na="timingevent",KC(TT,SE);var kT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function AT(){}function OT(){}AT.prototype.h=null;var MT,PT={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function DT(){SE.call(this,"d")}function NT(){SE.call(this,"c")}function RT(){}function LT(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new dT(this),this.P=FT,this.W=new aT(e=mE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new VT}function VT(){this.i=null,this.g="",this.h=!1}KC(DT,SE),KC(NT,SE),KC(RT,AT),RT.prototype.g=function(){return new XMLHttpRequest},RT.prototype.i=function(){return{}},MT=new RT;var FT=45e3,jT={},UT={};function BT(e,t,n){e.K=1,e.v=lS(iS(t)),e.s=n,e.U=!0,qT(e,null)}function qT(e,t){e.F=Date.now(),KT(e),e.A=iS(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),CS(n.h,"t",r),e.C=0,n=e.l.H,e.h=new VT,e.g=Ck(e.l,n?t:null,!e.s),0<e.O&&(e.L=new hT(zC(e.Ia,e,e.g),e.O)),pT(e.V,e.g,"readystatechange",e.gb),t=e.H?aE(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),IT(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function $T(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function zT(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=HT(e,n),r==UT){4==t&&(e.o=4,ET(14),i=!1),yT(e.j,e.m,null,"[Incomplete Response]");break}if(r==jT){e.o=4,ET(15),yT(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}yT(e.j,e.m,r,null),YT(e,r)}$T(e)&&r!=UT&&r!=jT&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ET(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),gk(t),t.L=!0,ET(11))):(yT(e.j,e.m,n,"[Invalid Chunked Response]"),JT(e),QT(e))}function HT(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?UT:(n=Number(t.substring(n,r)),isNaN(n)?jT:(r+=1)+n>t.length?UT:(t=t.substr(r,n),e.C=r+n,t))}function KT(e){e.Y=Date.now()+e.P,GT(e,e.P)}function GT(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ST(zC(e.eb,e),t)}function WT(e){e.B&&(LC.clearTimeout(e.B),e.B=null)}function QT(e){0==e.l.G||e.I||vk(e.l,e)}function JT(e){WT(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,cT(e.W),gT(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function YT(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||AS(n.i,e)))if(n.I=e.N,!e.J&&AS(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yk(n),ok(n)}pk(n),ET(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ST(zC(n.ab,n),6e3));if(1>=xS(n.i)&&n.ka){try{n.ka()}catch(u){}n.ka=void 0}}else bk(n,11)}else if((e.J||n.g==e)&&yk(n),!ZC(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(nE(e,"spdy")||nE(e,"quic")||nE(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(OS(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,uS(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Ik(r,r.H?r.la:null,r.W),o.J){MS(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(WT(a),KT(a)),r.g=o}else fk(r);0<n.l.length&&uk(n)}else"stop"!=u[0]&&"close"!=u[0]||bk(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?bk(n,7):sk(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}IT(4)}catch(u){}}function XT(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(FC(e)||"string"==typeof e)JC(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(FC(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(FC(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function ZT(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ZT)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function eS(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];tS(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)tS(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function tS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(PC=LT.prototype).setTimeout=function(e){this.P=e},PC.gb=function(e){e=e.target;const t=this.L;t&&3==ek(e)?t.l():this.Ia(e)},PC.Ia=function(e){try{if(e==this.g)e:{const l=ek(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||mE||this.g&&(this.h.h||this.g.ga()||tk(this.g)))){this.I||4!=l||7==t||IT(8==t||0>=h?3:2),WT(this);var n=this.g.ba();this.N=n;t:if($T(this)){var r=tk(this.g);e="";var i=r.length,s=4==ek(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){JT(this),QT(this);var o="";break t}this.h.i=new LC.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ZC(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,ET(12),JT(this),QT(this);break e}yT(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,YT(this,n)}this.U?(zT(this,l,o),mE&&this.i&&3==l&&(pT(this.V,this.W,"tick",this.fb),this.W.start())):(yT(this.j,this.m,o,null),YT(this,o)),4==l&&JT(this),this.i&&!this.I&&(4==l?vk(this.l,this):(this.i=!1,KT(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ET(12)):(this.o=0,ET(13)),JT(this),QT(this)}}}catch(l){}},PC.fb=function(){if(this.g){var e=ek(this.g),t=this.g.ga();this.C<t.length&&(WT(this),zT(this,e,t),this.i&&4!=e&&KT(this))}},PC.cancel=function(){this.I=!0,JT(this)},PC.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(IT(3),ET(17)),JT(this),this.o=2,QT(this)):GT(this,this.Y-e)},(PC=ZT.prototype).R=function(){eS(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},PC.T=function(){return eS(this),this.g.concat()},PC.get=function(e,t){return tS(this.h,e)?this.h[e]:t},PC.set=function(e,t){tS(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},PC.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var nS=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rS(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof rS){this.g=void 0!==t?t:e.g,sS(this,e.j),this.s=e.s,oS(this,e.i),aS(this,e.m),this.l=e.l,t=e.h;var n=new wS;n.i=t.i,t.g&&(n.g=new ZT(t.g),n.h=t.h),cS(this,n),this.o=e.o}else e&&(n=String(e).match(nS))?(this.g=!!t,sS(this,n[1]||"",!0),this.s=hS(n[2]||""),oS(this,n[3]||"",!0),aS(this,n[4]),this.l=hS(n[5]||"",!0),cS(this,n[6]||"",!0),this.o=hS(n[7]||"")):(this.g=!!t,this.h=new wS(null,this.g))}function iS(e){return new rS(e)}function sS(e,t,n){e.j=n?hS(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function oS(e,t,n){e.i=n?hS(t,!0):t}function aS(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cS(e,t,n){t instanceof wS?(e.h=t,function(e,t){t&&!e.j&&(bS(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_S(this,t),CS(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=dS(t,yS)),e.h=new wS(t,e.g))}function uS(e,t,n){e.h.set(t,n)}function lS(e){return uS(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hS(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dS(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,fS),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fS(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rS.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dS(t,pS,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(dS(t,pS,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(dS(n,"/"==n.charAt(0)?mS:gS,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",dS(n,vS)),e.join("")};var pS=/[#\/\?@]/g,gS=/[#\?:]/g,mS=/[#\?]/g,yS=/[#\?@]/g,vS=/#/g;function wS(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bS(e){e.g||(e.g=new ZT,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _S(e,t){bS(e),t=ES(e,t),tS(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,tS((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&eS(e)))}function IS(e,t){return bS(e),t=ES(e,t),tS(e.g.h,t)}function CS(e,t,n){_S(e,t),0<n.length&&(e.i=null,e.g.set(ES(e,t),XC(n)),e.h+=n.length)}function ES(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function TS(e){this.l=e||SS,e=LC.PerformanceNavigationTiming?0<(e=LC.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(LC.g&&LC.g.Ea&&LC.g.Ea()&&LC.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(PC=wS.prototype).add=function(e,t){bS(this),this.i=null,e=ES(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},PC.forEach=function(e,t){bS(this),this.g.forEach(function(n,r){JC(n,function(n){e.call(t,n,r,this)},this)},this)},PC.T=function(){bS(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},PC.R=function(e){bS(this);var t=[];if("string"==typeof e)IS(this,e)&&(t=YC(t,this.g.get(ES(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=YC(t,e[n])}return t},PC.set=function(e,t){return bS(this),this.i=null,IS(this,e=ES(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},PC.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},PC.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var SS=10;function kS(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xS(e){return e.h?1:e.g?e.g.size:0}function AS(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function OS(e,t){e.g?e.g.add(t):e.h=t}function MS(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function PS(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return XC(e.i)}function DS(){}function NS(){this.g=new DS}function RS(e,t,n){const r=n||"";try{XT(e,function(e,n){let i=e;jC(e)&&(i=YE(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function LS(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function VS(e){this.l=e.$b||null,this.j=e.ib||!1}function FS(e,t){WE.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=jS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}TS.prototype.cancel=function(){if(this.i=PS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},DS.prototype.stringify=function(e){return LC.JSON.stringify(e,void 0)},DS.prototype.parse=function(e){return LC.JSON.parse(e,void 0)},KC(VS,AT),VS.prototype.g=function(){return new FS(this.l,this.j)},VS.prototype.i=function(e){return function(){return e}}({}),KC(FS,WE);var jS=0;function US(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function BS(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qS(e)}function qS(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(PC=FS.prototype).open=function(e,t){if(this.readyState!=jS)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qS(this)},PC.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||LC).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},PC.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,BS(this)),this.readyState=jS},PC.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qS(this)),this.g&&(this.readyState=3,qS(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==LC.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;US(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},PC.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?BS(this):qS(this),3==this.readyState&&US(this)}},PC.Ua=function(e){this.g&&(this.response=this.responseText=e,BS(this))},PC.Ta=function(e){this.g&&(this.response=e,BS(this))},PC.ha=function(){this.g&&BS(this)},PC.setRequestHeader=function(e,t){this.v.append(e,t)},PC.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},PC.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(FS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var $S=LC.JSON.parse;function zS(e){WE.call(this),this.headers=new ZT,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=HS,this.K=this.L=!1}KC(zS,WE);var HS="",KS=/^https?$/i,GS=["POST","PUT"];function WS(e){return"content-type"==e.toLowerCase()}function QS(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,JS(e),XS(e)}function JS(e){e.D||(e.D=!0,QE(e,"complete"),QE(e,"error"))}function YS(e){if(e.h&&void 0!==RC&&(!e.C[1]||4!=ek(e)||2!=e.ba()))if(e.v&&4==ek(e))uT(e.Fa,0,e);else if(QE(e,"readystatechange"),4==ek(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(nS)[1]||null;if(!i&&LC.self&&LC.self.location){var s=LC.self.location.protocol;i=s.substr(0,s.length-1)}r=!KS.test(i?i.toLowerCase():"")}n=r}if(n)QE(e,"complete"),QE(e,"success");else{e.m=6;try{var o=2<ek(e)?e.g.statusText:""}catch(Qs){o=""}e.j=o+" ["+e.ba()+"]",JS(e)}}finally{XS(e)}}}function XS(e,t){if(e.g){ZS(e);const r=e.g,i=e.C[0]?VC:null;e.g=null,e.C=null,t||QE(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ZS(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(LC.clearTimeout(e.A),e.A=null)}function ek(e){return e.g?e.g.readyState:0}function tk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case HS:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function nk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return oE(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):uS(e,t,n))}function rk(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ik(e){this.za=0,this.l=[],this.h=new mT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rk("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rk("baseRetryDelayMs",5e3,e),this.$a=rk("retryDelaySeedMs",1e4,e),this.Ya=rk("forwardChannelMaxRetries",2,e),this.ra=rk("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new TS(e&&e.concurrentRequestLimit),this.Ca=new NS,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function sk(e){if(ak(e),3==e.G){var t=e.V++,n=iS(e.F);uS(n,"SID",e.J),uS(n,"RID",t),uS(n,"TYPE","terminate"),hk(e,n),(t=new LT(e,e.h,t,void 0)).K=2,t.v=lS(iS(n)),n=!1,LC.navigator&&LC.navigator.sendBeacon&&(n=LC.navigator.sendBeacon(t.v.toString(),"")),!n&&LC.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ck(t.l,null),t.g.ea(t.v)),t.F=Date.now(),KT(t)}_k(e)}function ok(e){e.g&&(gk(e),e.g.cancel(),e.g=null)}function ak(e){ok(e),e.u&&(LC.clearTimeout(e.u),e.u=null),yk(e),e.i.cancel(),e.m&&("number"==typeof e.m&&LC.clearTimeout(e.m),e.m=null)}function ck(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&uk(e)}function uk(e){kS(e.i)||e.m||(e.m=!0,rT(e.Ha,e),e.C=0)}function lk(e,t){var n;n=t?t.m:e.V++;const r=iS(e.F);uS(r,"SID",e.J),uS(r,"RID",n),uS(r,"AID",e.U),hk(e,r),e.o&&e.s&&nk(r,e.o,e.s),n=new LT(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=dk(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),OS(e.i,n),BT(n,r,t)}function hk(e,t){e.j&&XT({},function(e,n){uS(t,n,e)})}function dk(e,t,n){n=Math.min(e.l.length,n);var r=e.j?zC(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{RS(a,e,"req"+n+"_")}catch(Yk){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function fk(e){e.g||e.u||(e.Y=1,rT(e.Ga,e),e.A=0)}function pk(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=ST(zC(e.Ga,e),wk(e,e.A)),e.A++,0))}function gk(e){null!=e.B&&(LC.clearTimeout(e.B),e.B=null)}function mk(e){e.g=new LT(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=iS(e.oa);uS(t,"RID","rpc"),uS(t,"SID",e.J),uS(t,"CI",e.N?"0":"1"),uS(t,"AID",e.U),hk(e,t),uS(t,"TYPE","xmlhttp"),e.o&&e.s&&nk(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=lS(iS(t)),n.s=null,n.U=!0,qT(n,e)}function yk(e){null!=e.v&&(LC.clearTimeout(e.v),e.v=null)}function vk(e,t){var n=null;if(e.g==t){yk(e),gk(e),e.g=null;var r=2}else{if(!AS(e.i,t))return;n=t.D,MS(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;QE(r=bT(),new TT(r,n,t,i)),uk(e)}else fk(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(xS(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=ST(zC(e.Ha,e,t),wk(e,e.C)),e.C++,0)))}(e,t)||2==r&&pk(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:bk(e,5);break;case 4:bk(e,10);break;case 3:bk(e,6);break;default:bk(e,2)}}function wk(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function bk(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=zC(e.jb,e);n||(n=new rS("//www.google.com/images/cleardot.gif"),LC.location&&"http"==LC.location.protocol||sS(n,"https"),lS(n)),function(e,t){const n=new mT;if(LC.Image){const r=new Image;r.onload=HC(LS,n,r,"TestLoadImage: loaded",!0,t),r.onerror=HC(LS,n,r,"TestLoadImage: error",!1,t),r.onabort=HC(LS,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=HC(LS,n,r,"TestLoadImage: timeout",!1,t),LC.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else ET(2);e.G=0,e.j&&e.j.va(t),_k(e),ak(e)}function _k(e){e.G=0,e.I=-1,e.j&&(0==PS(e.i).length&&0==e.l.length||(e.i.i.length=0,XC(e.l),e.l.length=0),e.j.ua())}function Ik(e,t,n){let r=function(e){return e instanceof rS?iS(e):new rS(e,void 0)}(n);if(""!=r.i)t&&oS(r,t+"."+r.i),aS(r,r.m);else{const e=LC.location;r=function(e,t,n,r){var i=new rS(null,void 0);return e&&sS(i,e),t&&oS(i,t),n&&aS(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&oE(e.aa,function(e,t){uS(r,t,e)}),n=e.sa,(t=e.D)&&n&&uS(r,t,n),uS(r,"VER",e.ma),hk(e,r),r}function Ck(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new zS(n&&e.Ba&&!e.qa?new VS({ib:!0}):e.qa)).L=e.H,t}function Ek(){}function Tk(){if(pE&&!(10<=Number(EE)))throw Error("Environmental error: no available transport.")}function Sk(e,t){WE.call(this),this.g=new ik(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ZC(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ZC(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Ak(this)}function kk(e){DT.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xk(){NT.call(this),this.status=1}function Ak(e){this.g=e}(PC=zS.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():MT.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:MT),this.g.onreadystatechange=zC(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void QS(this,s)}e=n||"";const i=new ZT(this.headers);r&&XT(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=WS;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=LC.FormData&&e instanceof LC.FormData,!(0<=QC(GS,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZS(this),0<this.B&&((this.K=function(e){return pE&&function(){return e=CE,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=tE(String(hE)).split("."),n=tE("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=rE(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||rE(0==i[2].length,0==s[2].length)||rE(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zC(this.pa,this)):this.A=uT(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){QS(this,s)}},PC.pa=function(){void 0!==RC&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,QE(this,"timeout"),this.abort(8))},PC.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,QE(this,"complete"),QE(this,"abort"),XS(this))},PC.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),XS(this,!0)),zS.Z.M.call(this)},PC.Fa=function(){this.s||(this.F||this.v||this.l?YS(this):this.cb())},PC.cb=function(){YS(this)},PC.ba=function(){try{return 2<ek(this)?this.g.status:-1}catch(dE){return-1}},PC.ga=function(){try{return this.g?this.g.responseText:""}catch(dE){return""}},PC.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),$S(t)}},PC.Da=function(){return this.m},PC.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(PC=ik.prototype).ma=8,PC.G=1,PC.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},PC.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new LT(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=aE(s),uE(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dk(this,i,t),uS(n=iS(this.F),"RID",e),uS(n,"CVER",22),this.D&&uS(n,"X-HTTP-Session-Id",this.D),hk(this,n),this.o&&s&&nk(n,this.o,s),OS(this.i,i),this.Ra&&uS(n,"TYPE","init"),this.ja?(uS(n,"$req",t),uS(n,"SID","null"),i.$=!0,BT(i,n,null)):BT(i,n,t),this.G=2}}else 3==this.G&&(e?lk(this,e):0==this.l.length||kS(this.i)||lk(this))},PC.Ga=function(){if(this.u=null,mk(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ST(zC(this.bb,this),e)}},PC.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ET(10),ok(this),mk(this))},PC.ab=function(){null!=this.v&&(this.v=null,ok(this),pk(this),ET(19))},PC.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ET(2)):(this.h.info("Failed to ping google.com"),ET(1))},(PC=Ek.prototype).xa=function(){},PC.wa=function(){},PC.va=function(){},PC.ua=function(){},PC.Oa=function(){},Tk.prototype.g=function(e,t){return new Sk(e,t)},KC(Sk,WE),Sk.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),rT(zC(e.hb,e,t))),ET(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ik(e,null,e.W),uk(e)},Sk.prototype.close=function(){sk(this.g)},Sk.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,ck(this.g,t)}else this.v?((t={}).__data__=YE(e),ck(this.g,t)):ck(this.g,e)},Sk.prototype.M=function(){this.g.j=null,delete this.j,sk(this.g),delete this.g,Sk.Z.M.call(this)},KC(kk,DT),KC(xk,NT),KC(Ak,Ek),Ak.prototype.xa=function(){QE(this.g,"a")},Ak.prototype.wa=function(e){QE(this.g,new kk(e))},Ak.prototype.va=function(e){QE(this.g,new xk(e))},Ak.prototype.ua=function(){QE(this.g,"b")},Tk.prototype.createWebChannel=Tk.prototype.g,Sk.prototype.send=Sk.prototype.u,Sk.prototype.open=Sk.prototype.m,Sk.prototype.close=Sk.prototype.close,kT.NO_ERROR=0,kT.TIMEOUT=8,kT.HTTP_ERROR=6,xT.COMPLETE="complete",OT.EventType=PT,PT.OPEN="a",PT.CLOSE="b",PT.ERROR="c",PT.MESSAGE="d",WE.prototype.listen=WE.prototype.N,zS.prototype.listenOnce=zS.prototype.O,zS.prototype.getLastError=zS.prototype.La,zS.prototype.getLastErrorCode=zS.prototype.Da,zS.prototype.getStatus=zS.prototype.ba,zS.prototype.getResponseJson=zS.prototype.Qa,zS.prototype.getResponseText=zS.prototype.ga,zS.prototype.send=zS.prototype.ea;var Ok=NC.createWebChannelTransport=function(){return new Tk},Mk=NC.getStatEventTarget=function(){return bT()},Pk=NC.ErrorCode=kT,Dk=NC.EventType=xT,Nk=NC.Event=vT,Rk=NC.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Lk=NC.FetchXmlHttpFactory=VS,Vk=NC.WebChannel=OT,Fk=NC.XhrIo=zS;const jk="@firebase/firestore";class Uk{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Uk.UNAUTHENTICATED=new Uk(null),Uk.GOOGLE_CREDENTIALS=new Uk("google-credentials-uid"),Uk.FIRST_PARTY=new Uk("first-party-uid"),Uk.MOCK_USER=new Uk("mock-user");let Bk="9.8.3";const qk=new Xh("@firebase/firestore");function $k(){return qk.logLevel}function zk(e,...t){if(qk.logLevel<=Kh.DEBUG){const n=t.map(Gk);qk.debug(`Firestore (${Bk}): ${e}`,...n)}}function Hk(e,...t){if(qk.logLevel<=Kh.ERROR){const n=t.map(Gk);qk.error(`Firestore (${Bk}): ${e}`,...n)}}function Kk(e,...t){if(qk.logLevel<=Kh.WARN){const n=t.map(Gk);qk.warn(`Firestore (${Bk}): ${e}`,...n)}}function Gk(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Wk(e="Unexpected state"){const t=`FIRESTORE (${Bk}) INTERNAL ASSERTION FAILED: `+e;throw Hk(t),new Error(t)}function Qk(e,t){e||Wk()}function Jk(e,t){return e}const Yk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xk extends Ah{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zk{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ex{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Uk.UNAUTHENTICATED))}shutdown(){}}class nx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rx{constructor(e){this.t=e,this.currentUser=Uk.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Zk;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zk,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable(mh(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{zk("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(zk("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zk)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zk("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qk("string"==typeof t.accessToken),new ex(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qk(null===e||"string"==typeof e),new Uk(e)}}class ix{constructor(e,t,n){this.type="FirstParty",this.user=Uk.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class sx{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ix(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Uk.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ox{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ax{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&zk("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,zk("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zk("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):zk("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Qk("string"==typeof e.token),this.p=e.token,new ox(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cx(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ux{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=cx(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function lx(e,t){return e<t?-1:e>t?1:0}function hx(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function dx(e){return e+"\0"}class fx{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xk(Yk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xk(Yk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xk(Yk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xk(Yk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fx.fromMillis(Date.now())}static fromDate(e){return fx.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new fx(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lx(this.nanoseconds,e.nanoseconds):lx(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class px{constructor(e){this.timestamp=e}static fromTimestamp(e){return new px(e)}static min(){return new px(new fx(0,0))}static max(){return new px(new fx(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gx{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wk(),void 0===n?n=e.length-t:n>e.length-t&&Wk(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===gx.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gx?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mx extends gx{construct(e,t,n){return new mx(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new mx(t)}static emptyPath(){return new mx([])}}const yx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vx extends gx{construct(e,t,n){return new vx(e,t,n)}static isValidIdentifier(e){return yx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vx.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vx(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xk(Yk.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xk(Yk.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xk(Yk.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vx(t)}static emptyPath(){return new vx([])}}class wx{constructor(e){this.path=e}static fromPath(e){return new wx(mx.fromString(e))}static fromName(e){return new wx(mx.fromString(e).popFirst(5))}static empty(){return new wx(mx.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mx.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mx.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wx(new mx(e.slice()))}}class bx{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function _x(e){return e.fields.find(e=>2===e.kind)}function Ix(e){return e.fields.filter(e=>2!==e.kind)}bx.UNKNOWN_ID=-1;class Cx{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ex{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ex(0,kx.min())}}function Tx(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=px.fromTimestamp(1e9===r?new fx(n+1,0):new fx(n,r));return new kx(i,wx.empty(),t)}function Sx(e){return new kx(e.readTime,e.key,-1)}class kx{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new kx(px.min(),wx.empty(),-1)}static max(){return new kx(px.max(),wx.empty(),-1)}}function xx(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wx.comparator(e.documentKey,t.documentKey),0!==n?n:lx(e.largestBatchId,t.largestBatchId))}const Ax="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mx(e){return Px.apply(this,arguments)}function Px(){return(Px=mh(function*(e){if(e.code!==Yk.FAILED_PRECONDITION||e.message!==Ax)throw e;zk("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Dx{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wk(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Dx((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Dx?t:Dx.resolve(t)}catch(e){return Dx.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Dx.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Dx.reject(t)}static resolve(e){return new Dx((t,n)=>{t(e)})}static reject(e){return new Dx((t,n)=>{n(e)})}static waitFor(e){return new Dx((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Dx.resolve(!1);for(const n of e)t=t.next(e=>e?Dx.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Dx((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next(e=>{s[c]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Dx((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}class Nx{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Zk,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Vx(e,t.error)):this.T.resolve()},this.transaction.onerror=t=>{const n=qx(t.target.error);this.T.reject(new Vx(e,n))}}static open(e,t,n,r){try{return new Nx(t,e.transaction(r,n))}catch(e){throw new Vx(t,e)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(zk("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jx(t)}}class Rx{constructor(e,t,n){this.name=e,this.version=t,this.P=n,12.2===Rx.v(_h())&&Hk("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return zk("SimpleDb","Removing database:",e),Ux(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!Sh())return!1;if(Rx.S())return!0;const e=_h(),t=Rx.v(e),n=0<t&&t<10,r=Rx.D(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static D(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}k(e){var t=this;return mh(function*(){return t.db||(zk("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new Vx(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Xk(Yk.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Xk(Yk.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Vx(e,n))},i.onupgradeneeded=e=>{zk("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.P.O(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{zk("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=e=>t.M(e)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return mh(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.k(e);const t=Nx.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).next(e=>(t.R(),e)).catch(e=>(t.abort(e),Dx.reject(e))).toPromise();return o.catch(()=>{}),yield t.A,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(zk("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Lx{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ux(this.$.delete())}}class Vx extends Xk{constructor(e,t){super(Yk.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fx(e){return"IndexedDbTransactionError"===e.name}class jx{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(zk("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(zk("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ux(n)}add(e){return zk("SimpleDb","ADD",this.store.name,e,e),Ux(this.store.add(e))}get(e){return Ux(this.store.get(e)).next(t=>(void 0===t&&(t=null),zk("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return zk("SimpleDb","DELETE",this.store.name,e),Ux(this.store.delete(e))}count(){return zk("SimpleDb","COUNT",this.store.name),Ux(this.store.count())}K(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new Dx((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Dx((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}W(e,t){zk("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.G(r,(e,t,n)=>n.delete())}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Y(e){const t=this.cursor({});return new Dx((n,r)=>{t.onerror=e=>{const t=qx(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}G(e,t){const n=[];return new Dx((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Lx(i),o=t(i.primaryKey,i.value,s);if(o instanceof Dx){const e=o.catch(e=>(s.done(),Dx.reject(e)));n.push(e)}s.isDone?r():null===s.U?i.continue():i.continue(s.U)}}).next(()=>Dx.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ux(e){return new Dx((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=qx(e.target.error);n(t)}})}let Bx=!1;function qx(e){const t=Rx.v(_h());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Xk("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bx||(Bx=!0,setTimeout(()=>{throw e},0)),e}}return e}class $x{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;zk("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,mh(function*(){t.task=null;try{zk("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(e){Fx(e)?zk("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):yield Mx(e)}yield t.Z(1)}))}}class zx{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return mh(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>t.et(n,e))})()}et(e,t){const n=new Set;let r=t,i=!0;return Dx.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return zk("IndexBackiller",`Processing collection: ${t}`),this.nt(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}nt(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.st(r,n)).next(n=>(zk("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}st(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Sx(t);xx(r,n)>0&&(n=r)}),new kx(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hx{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.it(e),this.rt=e=>t.writeSequenceNumber(e))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Kx(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gx(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wx(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Hx.ot=-1;class Qx{constructor(e,t){this.comparator=e,this.root=t||Yx.EMPTY}insert(e,t){return new Qx(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yx.BLACK,null,null))}remove(e){return new Qx(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yx.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jx(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jx(this.root,e,this.comparator,!0)}}class Jx{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yx{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Yx.RED,this.left=null!=r?r:Yx.EMPTY,this.right=null!=i?i:Yx.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Yx(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Yx.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Yx.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yx.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yx.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wk();if(this.right.isRed())throw Wk();const e=this.left.check();if(e!==this.right.check())throw Wk();return e+(this.isRed()?0:1)}}Yx.EMPTY=null,Yx.RED=!0,Yx.BLACK=!1,Yx.EMPTY=new class{constructor(){this.size=0}get key(){throw Wk()}get value(){throw Wk()}get color(){throw Wk()}get left(){throw Wk()}get right(){throw Wk()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Yx(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xx{constructor(e){this.comparator=e,this.data=new Qx(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zx(this.data.getIterator())}getIteratorFrom(e){return new Zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Xx))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xx(this.comparator);return t.data=e,t}}class Zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function eA(e){return e.hasNext()?e.getNext():void 0}class tA{constructor(e){this.fields=e,e.sort(vx.comparator)}static empty(){return new tA([])}unionWith(e){let t=new Xx(vx.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new tA(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hx(this.fields,e.fields,(e,t)=>e.isEqual(t))}}let nA=(()=>{class e{constructor(e){this.binaryString=e}static fromBase64String(t){const n=atob(t);return new e(n)}static fromUint8Array(t){const n=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lx(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}return e.EMPTY_BYTE_STRING=new e(""),e})();const rA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iA(e){if(Qk(!!e),"string"==typeof e){let t=0;const n=rA.exec(e);if(Qk(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sA(e.seconds),nanos:sA(e.nanos)}}function sA(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function oA(e){return"string"==typeof e?nA.fromBase64String(e):nA.fromUint8Array(e)}function aA(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function cA(e){const t=e.mapValue.fields.__previous_value__;return aA(t)?cA(t):t}function uA(e){const t=iA(e.mapValue.fields.__local_write_time__.timestampValue);return new fx(t.seconds,t.nanos)}class lA{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class hA{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hA("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hA&&e.projectId===this.projectId&&e.database===this.database}}function dA(e){return null==e}function fA(e){return 0===e&&1/e==-1/0}function pA(e){return"number"==typeof e&&Number.isInteger(e)&&!fA(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const gA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mA={nullValue:"NULL_VALUE"};function yA(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?aA(e)?4:MA(e)?9007199254740991:10:Wk()}function vA(e,t){if(e===t)return!0;const n=yA(e);if(n!==yA(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return uA(e).isEqual(uA(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=iA(e.timestampValue),r=iA(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return oA(e.bytesValue).isEqual(oA(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sA(e.geoPointValue.latitude)===sA(t.geoPointValue.latitude)&&sA(e.geoPointValue.longitude)===sA(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sA(e.integerValue)===sA(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=sA(e.doubleValue),r=sA(t.doubleValue);return n===r?fA(n)===fA(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hx(e.arrayValue.values||[],t.arrayValue.values||[],vA);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Kx(n)!==Kx(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vA(n[i],r[i])))return!1;return!0}(e,t);default:return Wk()}}function wA(e,t){return void 0!==(e.values||[]).find(e=>vA(e,t))}function bA(e,t){if(e===t)return 0;const n=yA(e),r=yA(t);if(n!==r)return lx(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lx(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=sA(e.integerValue||e.doubleValue),r=sA(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _A(e.timestampValue,t.timestampValue);case 4:return _A(uA(e),uA(t));case 5:return lx(e.stringValue,t.stringValue);case 6:return function(e,t){const n=oA(e),r=oA(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=lx(n[i],r[i]);if(0!==e)return e}return lx(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=lx(sA(e.latitude),sA(t.latitude));return 0!==n?n:lx(sA(e.longitude),sA(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=bA(n[i],r[i]);if(e)return e}return lx(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===gA.mapValue&&t===gA.mapValue)return 0;if(e===gA.mapValue)return 1;if(t===gA.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=lx(r[o],s[o]);if(0!==e)return e;const t=bA(n[r[o]],i[s[o]]);if(0!==t)return t}return lx(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Wk()}}function _A(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return lx(e,t);const n=iA(e),r=iA(t),i=lx(n.seconds,r.seconds);return 0!==i?i:lx(n.nanos,r.nanos)}function IA(e){return CA(e)}function CA(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=iA(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?oA(e.bytesValue).toBase64():"referenceValue"in e?wx.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=CA(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${CA(e.fields[i])}`;return n+"}"}(e.mapValue):Wk();var t}function EA(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function TA(e){return!!e&&"integerValue"in e}function SA(e){return!!e&&"arrayValue"in e}function kA(e){return!!e&&"nullValue"in e}function xA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function AA(e){return!!e&&"mapValue"in e}function OA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gx(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=OA(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=OA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function MA(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function PA(e){return"nullValue"in e?mA:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?EA(hA.empty(),wx.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Wk()}function DA(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?EA(hA.empty(),wx.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?gA:Wk()}function NA(e,t){const n=bA(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function RA(e,t){const n=bA(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class LA{constructor(e){this.value=e}static empty(){return new LA({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!AA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=OA(t)}setAll(e){let t=vx.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=OA(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());AA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vA(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];AA(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Gx(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new LA(OA(this.value))}}function VA(e){const t=[];return Gx(e.fields,(e,n)=>{const r=new vx([e]);if(AA(n)){const e=VA(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new tA(t)}class FA{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new FA(e,0,px.min(),px.min(),LA.empty(),0)}static newFoundDocument(e,t,n){return new FA(e,1,t,px.min(),n,0)}static newNoDocument(e,t){return new FA(e,2,t,px.min(),LA.empty(),0)}static newUnknownDocument(e,t){return new FA(e,3,t,px.min(),LA.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=LA.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=LA.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=px.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof FA&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new FA(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jA{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ut=null}}function UA(e,t=null,n=[],r=[],i=null,s=null,o=null){return new jA(e,t,n,r,i,s,o)}function BA(e){const t=Jk(e);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>{return(t=e).field.canonicalString()+t.op.toString()+IA(t.value);var t}).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),dA(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>IA(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>IA(e)).join(",")),t.ut=e}return t.ut}function qA(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!iO(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!vA(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oO(e.startAt,t.startAt)&&oO(e.endAt,t.endAt)}function $A(e){return wx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function zA(e,t){return e.filters.filter(e=>e instanceof GA&&e.field.isEqual(t))}function HA(e,t,n){let r=mA,i=!0;for(const s of zA(e,t)){let e=mA,t=!0;switch(s.op){case"<":case"<=":e=PA(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=mA}NA({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];NA({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function KA(e,t,n){let r=gA,i=!0;for(const s of zA(e,t)){let e=gA,t=!0;switch(s.op){case">=":case">":e=DA(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=gA}RA({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];RA({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class GA extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,n):new WA(e,t,n):"array-contains"===t?new XA(e,n):"in"===t?new ZA(e,n):"not-in"===t?new eO(e,n):"array-contains-any"===t?new tO(e,n):new GA(e,t,n)}static ct(e,t,n){return"in"===t?new QA(e,n):new JA(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(bA(t,this.value)):null!==t&&yA(this.value)===yA(t)&&this.at(bA(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wk()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class WA extends GA{constructor(e,t,n){super(e,t,n),this.key=wx.fromName(n.referenceValue)}matches(e){const t=wx.comparator(e.key,this.key);return this.at(t)}}class QA extends GA{constructor(e,t){super(e,"in",t),this.keys=YA(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JA extends GA{constructor(e,t){super(e,"not-in",t),this.keys=YA(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YA(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>wx.fromName(e.referenceValue))}class XA extends GA{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return SA(t)&&wA(t.arrayValue,this.value)}}class ZA extends GA{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wA(this.value.arrayValue,t)}}class eO extends GA{constructor(e,t){super(e,"not-in",t)}matches(e){if(wA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wA(this.value.arrayValue,t)}}class tO extends GA{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!SA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>wA(this.value.arrayValue,e))}}class nO{constructor(e,t){this.position=e,this.inclusive=t}}class rO{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function sO(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?wx.comparator(wx.fromName(o.referenceValue),n.key):bA(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function oO(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vA(e.position[n],t.position[n]))return!1;return!0}class aO{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.lt=null,this.ft=null}}function cO(e,t,n,r,i,s,o,a){return new aO(e,t,n,r,i,s,o,a)}function uO(e){return new aO(e)}function lO(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hO(e){for(const t of e.filters)if(t.ht())return t.field;return null}function dO(e){return null!==e.collectionGroup}function fO(e){const t=Jk(e);if(null===t.lt){t.lt=[];const e=hO(t),n=lO(t);if(null!==e&&null===n)e.isKeyField()||t.lt.push(new rO(e)),t.lt.push(new rO(vx.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.lt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new rO(vx.keyField(),e))}}}return t.lt}function pO(e){const t=Jk(e);if(!t.ft)if("F"===t.limitType)t.ft=UA(t.path,t.collectionGroup,fO(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of fO(t))e.push(new rO(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new nO(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nO(t.startAt.position,t.startAt.inclusive):null;t.ft=UA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.ft}function gO(e,t,n){return new aO(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mO(e,t){return qA(pO(e),pO(t))&&e.limitType===t.limitType}function yO(e){return`${BA(pO(e))}|lt:${e.limitType}`}function vO(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${IA(t.value)}`;var t}).join(", ")}]`),dA(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>IA(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>IA(e)).join(",")),`Target(${t})`}(pO(e))}; limitType=${e.limitType})`}function wO(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wx.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sO(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,fO(e),t)||e.endAt&&!function(e,t,n){const r=sO(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,fO(e),t))}(e,t)}function bO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _O(e){return(t,n)=>{let r=!1;for(const i of fO(e)){const e=IO(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function IO(e,t,n){const r=e.field.isKeyField()?wx.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bA(r,i):Wk()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wk()}}function CO(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fA(t)?"-0":t}}function EO(e){return{integerValue:""+e}}function TO(e,t){return pA(t)?EO(t):CO(e,t)}class SO{constructor(){this._=void 0}}function kO(e,t,n){return e instanceof OO?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof MO?PO(e,t):e instanceof DO?NO(e,t):function(e,t){const n=AO(e,t),r=LO(n)+LO(e._t);return TA(n)&&TA(e._t)?EO(r):CO(e.wt,r)}(e,t)}function xO(e,t,n){return e instanceof MO?PO(e,t):e instanceof DO?NO(e,t):n}function AO(e,t){return e instanceof RO?TA(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class OO extends SO{}class MO extends SO{constructor(e){super(),this.elements=e}}function PO(e,t){const n=VO(t);for(const r of e.elements)n.some(e=>vA(e,r))||n.push(r);return{arrayValue:{values:n}}}class DO extends SO{constructor(e){super(),this.elements=e}}function NO(e,t){let n=VO(t);for(const r of e.elements)n=n.filter(e=>!vA(e,r));return{arrayValue:{values:n}}}class RO extends SO{constructor(e,t){super(),this.wt=e,this._t=t}}function LO(e){return sA(e.integerValue||e.doubleValue)}function VO(e){return SA(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class FO{constructor(e,t){this.field=e,this.transform=t}}class jO{constructor(e,t){this.version=e,this.transformResults=t}}class UO{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new UO}static exists(e){return new UO(void 0,e)}static updateTime(e){return new UO(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function BO(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qO{}function $O(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ZO(e.key,UO.none()):new WO(e.key,e.data,UO.none());{const n=e.data,r=LA.empty();let i=new Xx(vx.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new QO(e.key,r,new tA(i.toArray()),UO.none())}}function zO(e,t,n){e instanceof WO?function(e,t,n){const r=e.value.clone(),i=YO(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof QO?function(e,t,n){if(!BO(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=YO(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(JO(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function HO(e,t,n,r){return e instanceof WO?function(e,t,n,r){if(!BO(e.precondition,t))return n;const i=e.value.clone(),s=XO(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof QO?function(e,t,n,r){if(!BO(e.precondition,t))return n;const i=XO(e.fieldTransforms,r,t),s=t.data;return s.setAll(JO(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return BO(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function KO(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=AO(r.transform,e||null);null!=i&&(null===n&&(n=LA.empty()),n.set(r.field,i))}return n||null}function GO(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hx(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof MO&&t instanceof MO||e instanceof DO&&t instanceof DO?hx(e.elements,t.elements,vA):e instanceof RO&&t instanceof RO?vA(e._t,t._t):e instanceof OO&&t instanceof OO}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class WO extends qO{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class QO extends qO{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JO(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function YO(e,t,n){const r=new Map;Qk(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,xO(o,a,n[i]))}return r}function XO(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,kO(e,s,t))}return r}class ZO extends qO{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eM extends qO{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tM{constructor(e){this.count=e}}var nM,rM;function iM(e){switch(e){default:return Wk();case Yk.CANCELLED:case Yk.UNKNOWN:case Yk.DEADLINE_EXCEEDED:case Yk.RESOURCE_EXHAUSTED:case Yk.INTERNAL:case Yk.UNAVAILABLE:case Yk.UNAUTHENTICATED:return!1;case Yk.INVALID_ARGUMENT:case Yk.NOT_FOUND:case Yk.ALREADY_EXISTS:case Yk.PERMISSION_DENIED:case Yk.FAILED_PRECONDITION:case Yk.ABORTED:case Yk.OUT_OF_RANGE:case Yk.UNIMPLEMENTED:case Yk.DATA_LOSS:return!0}}function sM(e){if(void 0===e)return Hk("GRPC error has no .code"),Yk.UNKNOWN;switch(e){case nM.OK:return Yk.OK;case nM.CANCELLED:return Yk.CANCELLED;case nM.UNKNOWN:return Yk.UNKNOWN;case nM.DEADLINE_EXCEEDED:return Yk.DEADLINE_EXCEEDED;case nM.RESOURCE_EXHAUSTED:return Yk.RESOURCE_EXHAUSTED;case nM.INTERNAL:return Yk.INTERNAL;case nM.UNAVAILABLE:return Yk.UNAVAILABLE;case nM.UNAUTHENTICATED:return Yk.UNAUTHENTICATED;case nM.INVALID_ARGUMENT:return Yk.INVALID_ARGUMENT;case nM.NOT_FOUND:return Yk.NOT_FOUND;case nM.ALREADY_EXISTS:return Yk.ALREADY_EXISTS;case nM.PERMISSION_DENIED:return Yk.PERMISSION_DENIED;case nM.FAILED_PRECONDITION:return Yk.FAILED_PRECONDITION;case nM.ABORTED:return Yk.ABORTED;case nM.OUT_OF_RANGE:return Yk.OUT_OF_RANGE;case nM.UNIMPLEMENTED:return Yk.UNIMPLEMENTED;case nM.DATA_LOSS:return Yk.DATA_LOSS;default:return Wk()}}(rM=nM||(nM={}))[rM.OK=0]="OK",rM[rM.CANCELLED=1]="CANCELLED",rM[rM.UNKNOWN=2]="UNKNOWN",rM[rM.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rM[rM.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rM[rM.NOT_FOUND=5]="NOT_FOUND",rM[rM.ALREADY_EXISTS=6]="ALREADY_EXISTS",rM[rM.PERMISSION_DENIED=7]="PERMISSION_DENIED",rM[rM.UNAUTHENTICATED=16]="UNAUTHENTICATED",rM[rM.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rM[rM.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rM[rM.ABORTED=10]="ABORTED",rM[rM.OUT_OF_RANGE=11]="OUT_OF_RANGE",rM[rM.UNIMPLEMENTED=12]="UNIMPLEMENTED",rM[rM.INTERNAL=13]="INTERNAL",rM[rM.UNAVAILABLE=14]="UNAVAILABLE",rM[rM.DATA_LOSS=15]="DATA_LOSS";class oM{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gx(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Wx(this.inner)}size(){return this.innerSize}}const aM=new Qx(wx.comparator);function cM(){return aM}const uM=new Qx(wx.comparator);function lM(...e){let t=uM;for(const n of e)t=t.insert(n.key,n);return t}function hM(e){let t=uM;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function dM(){return pM()}function fM(){return pM()}function pM(){return new oM(e=>e.toString(),(e,t)=>e.isEqual(t))}const gM=new Qx(wx.comparator),mM=new Xx(wx.comparator);function yM(...e){let t=mM;for(const n of e)t=t.add(n);return t}const vM=new Xx(lx);function wM(){return vM}class bM{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,_M.createSynthesizedTargetChangeForCurrentChange(e,t)),new bM(px.min(),n,wM(),cM(),yM())}}class _M{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new _M(nA.EMPTY_BYTE_STRING,t,yM(),yM(),yM())}}class IM{constructor(e,t,n,r){this.gt=e,this.removedTargetIds=t,this.key=n,this.yt=r}}class CM{constructor(e,t){this.targetId=e,this.It=t}}class EM{constructor(e,t,n=nA.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class TM{constructor(){this.Tt=0,this.Et=xM(),this.At=nA.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=yM(),t=yM(),n=yM();return this.Et.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wk()}}),new _M(this.At,this.Rt,e,t,n)}Dt(){this.bt=!1,this.Et=xM()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class SM{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=cM(),this.Bt=kM(),this.Lt=new Xx(lx)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const n=this.Qt(t);switch(e.state){case 0:this.jt(t)&&n.Vt(e.resumeToken);break;case 1:n.kt(),n.Pt||n.Dt(),n.Vt(e.resumeToken);break;case 2:n.kt(),n.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(n.Ot(),n.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),n.Vt(e.resumeToken));break;default:Wk()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((e,n)=>{this.jt(n)&&t(n)})}zt(e){const t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){const e=r.target;if($A(e))if(0===n){const n=new wx(e.path);this.Kt(t,n,FA.newNoDocument(n,px.min()))}else Qk(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((n,r)=>{const i=this.Ht(r);if(i){if(n.current&&$A(i.target)){const t=new wx(i.target.path);null!==this.$t.get(t)||this.Xt(r,t)||this.Kt(r,t,FA.newNoDocument(t,e))}n.vt&&(t.set(r,n.St()),n.Dt())}});let n=yM();this.Bt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Ht(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.$t.forEach((t,n)=>n.setReadTime(e));const r=new bM(e,t,this.Lt,this.$t,n);return this.$t=cM(),this.Bt=kM(),this.Lt=new Xx(lx),r}qt(e,t){if(!this.jt(e))return;const n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,n){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new TM,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Xx(lx),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||zk("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new TM),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function kM(){return new Qx(wx.comparator)}function xM(){return new Qx(wx.comparator)}const AM={asc:"ASCENDING",desc:"DESCENDING"},OM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class MM{constructor(e,t){this.databaseId=e,this.dt=t}}function PM(e,t){return e.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DM(e,t){return e.dt?t.toBase64():t.toUint8Array()}function NM(e,t){return PM(e,t.toTimestamp())}function RM(e){return Qk(!!e),px.fromTimestamp(function(e){const t=iA(e);return new fx(t.seconds,t.nanos)}(e))}function LM(e,t){return function(e){return new mx(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function VM(e){const t=mx.fromString(e);return Qk(sP(t)),t}function FM(e,t){return LM(e.databaseId,t.path)}function jM(e,t){const n=VM(t);if(n.get(1)!==e.databaseId.projectId)throw new Xk(Yk.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xk(Yk.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wx($M(n))}function UM(e,t){return LM(e.databaseId,t)}function BM(e){const t=VM(e);return 4===t.length?mx.emptyPath():$M(t)}function qM(e){return new mx(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $M(e){return Qk(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zM(e,t,n){return{name:FM(e,t),fields:n.value.mapValue.fields}}function HM(e,t,n){const r=jM(e,t.name),i=RM(t.updateTime),s=new LA({mapValue:{fields:t.fields}}),o=FA.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function KM(e,t){let n;if(t instanceof WO)n={update:zM(e,t.key,t.value)};else if(t instanceof ZO)n={delete:FM(e,t.key)};else if(t instanceof QO)n={update:zM(e,t.key,t.data),updateMask:iP(t.fieldMask)};else{if(!(t instanceof eM))return Wk();n={verify:FM(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof OO)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof MO)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof DO)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof RO)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Wk()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:NM(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wk()}(e,t.precondition)),n}function GM(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?UO.updateTime(RM(e.updateTime)):void 0!==e.exists?UO.exists(e.exists):UO.none()}(t.currentDocument):UO.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(Qk("REQUEST_TIME"===t.setToServerValue),n=new OO):"appendMissingElements"in t?n=new MO(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new DO(t.removeAllFromArray.values||[]):"increment"in t?n=new RO(e,t.increment):Wk();const r=vx.fromServerFormat(t.fieldPath);return new FO(r,n)}(e,t)):[];if(t.update){const i=jM(e,t.update.name),s=new LA({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new tA((e.fieldPaths||[]).map(e=>vx.fromServerFormat(e)))}(t.updateMask);return new QO(i,s,e,n,r)}return new WO(i,s,n,r)}if(t.delete){const r=jM(e,t.delete);return new ZO(r,n)}if(t.verify){const r=jM(e,t.verify);return new eM(r,n)}return Wk()}function WM(e,t){return{documents:[UM(e,t.path)]}}function QM(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=UM(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=UM(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(xA(e.value))return{unaryFilter:{field:eP(e.field),op:"IS_NAN"}};if(kA(e.value))return{unaryFilter:{field:eP(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xA(e.value))return{unaryFilter:{field:eP(e.field),op:"IS_NOT_NAN"}};if(kA(e.value))return{unaryFilter:{field:eP(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eP(e.field),op:ZM(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:eP(e.field),direction:XM(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.dt||dA(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function JM(e){let t=BM(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qk(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=YM(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new rO(tP(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,dA(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){return new nO(e.values||[],!!e.before)}(n.startAt));let u=null;return n.endAt&&(u=function(e){return new nO(e.values||[],!e.before)}(n.endAt)),cO(t,i,o,s,a,"F",c,u)}function YM(e){return e?void 0!==e.unaryFilter?[rP(e)]:void 0!==e.fieldFilter?[nP(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>YM(e)).reduce((e,t)=>e.concat(t)):Wk():[]}function XM(e){return AM[e]}function ZM(e){return OM[e]}function eP(e){return{fieldPath:e.canonicalString()}}function tP(e){return vx.fromServerFormat(e.fieldPath)}function nP(e){return GA.create(tP(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wk()}}(e.fieldFilter.op),e.fieldFilter.value)}function rP(e){switch(e.unaryFilter.op){case"IS_NAN":const t=tP(e.unaryFilter.field);return GA.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=tP(e.unaryFilter.field);return GA.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=tP(e.unaryFilter.field);return GA.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=tP(e.unaryFilter.field);return GA.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wk()}}function iP(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function sP(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function oP(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=cP(t)),t=aP(e.get(n),t);return cP(t)}function aP(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function cP(e){return e+"\x01\x01"}function uP(e){const t=e.length;if(Qk(t>=2),2===t)return Qk("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),mx.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Wk(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Wk()}s=t+2}return new mx(r)}const lP=["userId","batchId"];function hP(e,t){return[e,oP(t)]}function dP(e,t,n){return[e,oP(t),n]}const fP={},pP=["prefixPath","collectionGroup","readTime","documentId"],gP=["prefixPath","collectionGroup","documentId"],mP=["collectionGroup","readTime","prefixPath","documentId"],yP=["canonicalId","targetId"],vP=["targetId","path"],wP=["path","targetId"],bP=["collectionId","parent"],_P=["indexId","uid"],IP=["uid","sequenceNumber"],CP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EP=["indexId","uid","orderedDocumentKey"],TP=["userId","collectionPath","documentId"],SP=["userId","collectionPath","largestBatchId"],kP=["userId","collectionGroup","largestBatchId"],xP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AP=[...xP,"documentOverlays"],OP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MP=OP,PP=[...MP,"indexConfiguration","indexState","indexEntries"];class DP extends Ox{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function NP(e,t){const n=Jk(e);return Rx.N(n.ee,t)}class RP{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&zO(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=HO(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=HO(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fM();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=$O(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(px.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yM())}isEqual(e){return this.batchId===e.batchId&&hx(this.mutations,e.mutations,(e,t)=>GO(e,t))&&hx(this.baseMutations,e.baseMutations,(e,t)=>GO(e,t))}}class LP{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qk(e.mutations.length===n.length);let r=gM;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new LP(e,t,n,r)}}class VP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class FP{constructor(e,t,n,r,i=px.min(),s=px.min(),o=nA.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new FP(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new FP(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new FP(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class jP{constructor(e){this.ne=e}}function UP(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:BP(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:FM(e,t.key),fields:t.data.value.mapValue.fields,updateTime:PM(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qP(t.version)};else{if(!t.isUnknownDocument())return Wk();r.unknownDocument={path:n.path.toArray(),version:qP(t.version)}}return r}function BP(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qP(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $P(e){const t=new fx(e.seconds,e.nanoseconds);return px.fromTimestamp(t)}function zP(e,t){const n=(t.baseMutations||[]).map(t=>GM(e.ne,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>GM(e.ne,t)),i=fx.fromMillis(t.localWriteTimeMs);return new RP(t.batchId,i,n,r)}function HP(e){const t=$P(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?$P(e.lastLimboFreeSnapshotVersion):px.min();let r;var i;return void 0!==e.query.documents?(Qk(1===(i=e.query).documents.length),r=pO(uO(BM(i.documents[0])))):r=function(e){return pO(JM(e))}(e.query),new FP(r,e.targetId,0,e.lastListenSequenceNumber,t,n,nA.fromBase64String(e.resumeToken))}function KP(e,t){const n=qP(t.snapshotVersion),r=qP(t.lastLimboFreeSnapshotVersion);let i;i=$A(t.target)?WM(e.ne,t.target):QM(e.ne,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:BA(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function GP(e){const t=JM({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gO(t,t.limit,"L"):t}function WP(e,t){return new VP(t.largestBatchId,GM(e.ne,t.overlayMutation))}function QP(e,t){const n=t.path.lastSegment();return[e,oP(t.path.popLast()),n]}function JP(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:qP(r.readTime),documentKey:oP(r.documentKey.path),largestBatchId:r.largestBatchId}}class YP{getBundleMetadata(e,t){return XP(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:$P(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return XP(e).put({bundleId:(n=t).id,createTime:qP(RM(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return ZP(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:GP(t.bundledQuery),readTime:$P(t.readTime)};var t})}saveNamedQuery(e,t){return ZP(e).put(function(e){return{name:e.name,readTime:qP(RM(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function XP(e){return NP(e,"bundles")}function ZP(e){return NP(e,"namedQueries")}class eD{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new eD(e,t.uid||"")}getOverlay(e,t){return tD(e).get(QP(this.userId,t)).next(e=>e?WP(this.wt,e):null)}getOverlays(e,t){const n=dM();return Dx.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new VP(t,i);r.push(this.ie(e,s))}),Dx.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(oP(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(tD(e).W("collectionPathOverlayIndex",r))}),Dx.waitFor(i)}getOverlaysForCollection(e,t,n){const r=dM(),i=oP(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return tD(e).K("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=WP(this.wt,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=dM();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tD(e).J({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=WP(this.wt,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}ie(e,t){return tD(e).put(function(e,t,n){const[r,i,s]=QP(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:KM(e.ne,n.mutation)}}(this.wt,this.userId,t))}}function tD(e){return NP(e,"documentOverlays")}let nD=(()=>{class e{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(sA(e.integerValue));else if("doubleValue"in e){const n=sA(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),fA(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ce(t,20),"string"==typeof n?t.he(n):(t.he(`${n.seconds||""}`),t.ae(n.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(oA(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ce(t,45),t.ae(n.latitude||0),t.ae(n.longitude||0)}else"mapValue"in e?MA(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Wk()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const n=e.fields||{};this.ce(t,55);for(const r of Object.keys(n))this.le(r,t),this.oe(n[r],t)}me(e,t){const n=e.values||[];this.ce(t,50);for(const r of n)this.oe(r,t)}_e(e,t){this.ce(t,37),wx.fromName(e).path.forEach(e=>{this.ce(t,60),this.ge(e,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}return e.ye=new e,e})();function rD(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function iD(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=rD(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class sD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ie(n.value),n=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ae(n.value),n=t.next();this.Re()}be(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ie(e);else if(e<2048)this.Ie(960|e>>>6),this.Ie(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|e>>>12),this.Ie(128|63&e>>>6),this.Ie(128|63&e);else{const e=t.codePointAt(0);this.Ie(240|e>>>18),this.Ie(128|63&e>>>12),this.Ie(128|63&e>>>6),this.Ie(128|63&e)}}this.Te()}Pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ae(e);else if(e<2048)this.Ae(960|e>>>6),this.Ae(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|e>>>12),this.Ae(128|63&e>>>6),this.Ae(128|63&e);else{const e=t.codePointAt(0);this.Ae(240|e>>>18),this.Ae(128|63&e>>>12),this.Ae(128|63&e>>>6),this.Ae(128|63&e)}}this.Re()}ve(e){const t=this.Ve(e),n=iD(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}De(e){const t=this.Ve(e),n=iD(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class oD{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class aD{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class cD{constructor(){this.Me=new sD,this.Fe=new oD(this.Me),this.$e=new aD(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class uD{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new uD(this.indexId,this.documentKey,this.arrayValue,n)}}function lD(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=hD(e.arrayValue,t.arrayValue),0!==n?n:(n=hD(e.directionalValue,t.directionalValue),0!==n?n:wx.comparator(e.documentKey,t.documentKey)))}function hD(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class dD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const e=t;e.ht()?this.Ke=e:this.qe.push(e)}}Ge(e){const t=_x(e);if(void 0!==t&&!this.Qe(t))return!1;const n=Ix(e);let r=0,i=0;for(;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){const e=n[r];if(!this.je(this.Ke,e)||!this.We(this.Ue[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],e))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fD{constructor(){this.ze=new pD}addToCollectionParentIndex(e,t){return this.ze.add(t),Dx.resolve()}getCollectionParents(e,t){return Dx.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Dx.resolve()}deleteFieldIndex(e,t){return Dx.resolve()}getDocumentsMatchingTarget(e,t){return Dx.resolve(null)}getIndexType(e,t){return Dx.resolve(0)}getFieldIndexes(e,t){return Dx.resolve([])}getNextCollectionGroupToUpdate(e){return Dx.resolve(null)}getMinOffset(e,t){return Dx.resolve(kx.min())}getMinOffsetFromCollectionGroup(e,t){return Dx.resolve(kx.min())}updateCollectionGroup(e,t,n){return Dx.resolve()}updateIndexEntries(e,t){return Dx.resolve()}}class pD{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Xx(mx.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Xx(mx.comparator)).toArray()}}const gD=new Uint8Array(0);class mD{constructor(e,t){this.user=e,this.databaseId=t,this.He=new pD,this.Je=new oM(e=>BA(e),(e,t)=>qA(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const i={collectionId:n,parent:oP(r)};return yD(e).put(i)}return Dx.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[dx(t),""],!1,!0);return yD(e).K(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(uP(r.parent))}return n})}addFieldIndex(e,t){const n=wD(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=bD(e);return i.next(e=>{n.put(JP(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=wD(e),r=bD(e),i=vD(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=vD(e);let r=!0;const i=new Map;return Dx.forEach(this.Ye(t),t=>this.Xe(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=yM();const r=[];return Dx.forEach(i,(i,s)=>{var o;zk("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${BA(t)}`);const a=function(e,t){const n=_x(t);if(void 0===n)return null;for(const r of zA(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of Ix(t))for(const t of zA(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Ix(t)){const t=0===i.kind?HA(e,i.fieldPath,e.startAt):KA(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new nO(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Ix(t)){const t=0===i.kind?KA(e,i.fieldPath,e.endAt):HA(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new nO(n,r)}(s,i),h=this.Ze(i,s,u),d=this.Ze(i,s,l),f=this.tn(i,s,c),p=this.en(i.indexId,a,h,u.inclusive,d,l.inclusive,f);return Dx.forEach(p,i=>n.j(i,t.limit).next(t=>{t.forEach(t=>{const n=wx.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Dx.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.nn(t[l/c]):gD,h=this.sn(e,a,n[l%c],r),d=this.rn(e,a,i[l%c],s),f=o.map(t=>this.sn(e,a,t,!0));u.push(...this.createRange(h,d,f))}return u}sn(e,t,n,r){const i=new uD(e,wx.empty(),t,n);return r?i:i.Le()}rn(e,t,n,r){const i=new uD(e,wx.empty(),t,n);return r?i.Le():i}Xe(e,t){const n=new dD(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.Ge(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;return Dx.forEach(this.Ye(t),t=>this.Xe(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Xx(vx.comparator),n=!1;for(const r of e.filters){const e=r;e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field))}for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>n)}on(e,t){const n=new cD;for(const r of Ix(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Be(r.kind);nD.ye.re(e,i)}return n.Oe()}nn(e){const t=new cD;return nD.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const n=new cD;return nD.ye.re(EA(this.databaseId,t),n.Be(function(e){const t=Ix(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}tn(e,t,n){if(null===n)return[];let r=[];r.push(new cD);let i=0;for(const s of Ix(e)){const e=n[i++];for(const n of r)if(this.cn(t,s.fieldPath)&&SA(e))r=this.an(r,s,e);else{const t=n.Be(s.kind);nD.ye.re(e,t)}}return this.hn(r)}Ze(e,t,n){return this.tn(e,t,n.position)}hn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Oe();return t}an(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new cD;n.seed(e.Oe()),nD.ye.re(s,n.Be(t.kind)),i.push(n)}return i}cn(e,t){return!!e.filters.find(e=>e instanceof GA&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=wD(e),r=bD(e);return(t?n.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.K()).next(e=>{const t=[];return Dx.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Ex(t.sequenceNumber,new kx($P(t.readTime),new wx(uP(t.documentKey)),t.largestBatchId)):Ex.empty(),r=e.fields.map(([e,t])=>new Cx(vx.fromServerFormat(e),t));return new bx(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:lx(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=wD(e),i=bD(e);return this.ln(e).next(e=>r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>Dx.forEach(t,t=>i.put(JP(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Dx.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?Dx.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),Dx.forEach(i,n=>this.fn(e,t,n).next(t=>{const i=this.dn(r,n);return t.isEqual(i)?Dx.resolve():this._n(e,r,n,t,i)}))))})}wn(e,t,n,r){return vD(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}mn(e,t,n,r){return vD(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}fn(e,t,n){const r=vD(e);let i=new Xx(lD);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(e,r)=>{i=i.add(new uD(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}dn(e,t){let n=new Xx(lD);const r=this.on(t,e);if(null==r)return n;const i=_x(t);if(null!=i){const s=e.data.field(i.fieldPath);if(SA(s))for(const i of s.arrayValue.values||[])n=n.add(new uD(t.indexId,e.key,this.nn(i),r))}else n=n.add(new uD(t.indexId,e.key,gD,r));return n}_n(e,t,n,r,i){zk("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=eA(s),c=eA(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=eA(o)):t?(i(a),a=eA(s)):(a=eA(s),c=eA(o))}}(r,i,lD,r=>{s.push(this.wn(e,t,n,r))},r=>{s.push(this.mn(e,t,n,r))}),Dx.waitFor(s)}ln(e){let t=1;return bD(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>lD(e,t)).filter((e,t,n)=>!t||0!==lD(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=lD(s,e),i=lD(s,t);if(0===n)r[0]=e.Le();else if(n>0&&i<0)r.push(s),r.push(s.Le());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2)i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,gD,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,gD,[]]));return i}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_D)}getMinOffset(e,t){return Dx.mapArray(this.Ye(t),t=>this.Xe(e,t).next(e=>e||Wk())).next(_D)}}function yD(e){return NP(e,"collectionParents")}function vD(e){return NP(e,"indexEntries")}function wD(e){return NP(e,"indexConfiguration")}function bD(e){return NP(e,"indexState")}function _D(e){Qk(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;xx(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new kx(t.readTime,t.documentKey,n)}const ID={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class CD{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new CD(e,CD.DEFAULT_COLLECTION_PERCENTILE,CD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ED(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{Qk(1===a)}));const u=[];for(const l of n.mutations){const e=dP(t,l.key.path,n.batchId);s.push(i.delete(e)),u.push(l.key)}return Dx.waitFor(s).next(()=>u)}function TD(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Wk();t=e.noDocument}return JSON.stringify(t).length}CD.DEFAULT_COLLECTION_PERCENTILE=10,CD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,CD.DEFAULT=new CD(41943040,CD.DEFAULT_COLLECTION_PERCENTILE,CD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),CD.DISABLED=new CD(-1,0,0);class SD{constructor(e,t,n,r){this.userId=e,this.wt=t,this.indexManager=n,this.referenceDelegate=r,this.gn={}}static se(e,t,n,r){Qk(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new SD(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xD(e).J({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=AD(e),s=xD(e);return s.add({}).next(o=>{Qk("number"==typeof o);const a=new RP(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>KM(e.ne,t)),i=n.mutations.map(t=>KM(e.ne,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.wt,this.userId,a),u=[];let l=new Xx((e,t)=>lx(e.canonicalString(),t.canonicalString()));for(const e of r){const t=dP(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,fP))}return l.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.gn[o]=a.keys()}),Dx.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return xD(e).get(t).next(e=>e?(Qk(e.userId===this.userId),zP(this.wt,e)):null)}yn(e,t){return this.gn[t]?Dx.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.gn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return xD(e).J({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(Qk(t.batchId>=n),i=zP(this.wt,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return xD(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xD(e).K("userMutationsIndex",t).next(e=>e.map(e=>zP(this.wt,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=hP(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return AD(e).J({range:r},(n,r,s)=>{const[o,a,c]=n,u=uP(a);if(o===this.userId&&t.path.isEqual(u))return xD(e).get(c).next(e=>{if(!e)throw Wk();Qk(e.userId===this.userId),i.push(zP(this.wt,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xx(lx);const r=[];return t.forEach(t=>{const i=hP(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=AD(e).J({range:s},(e,r,i)=>{const[s,o,a]=e,c=uP(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),Dx.waitFor(r).next(()=>this.pn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=hP(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Xx(lx);return AD(e).J({range:s},(e,t,i)=>{const[s,a,c]=e,u=uP(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.pn(e,o))}pn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(xD(e).get(t).next(e=>{if(null===e)throw Wk();Qk(e.userId===this.userId),n.push(zP(this.wt,e))}))}),Dx.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ED(e.ee,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Dx.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Dx.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return AD(e).J({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=uP(e[1]);r.push(t)}else n.done()}).next(()=>{Qk(0===r.length)})})}containsKey(e,t){return kD(e,this.userId,t)}Tn(e){return OD(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kD(e,t,n){const r=hP(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return AD(e).J({range:s,H:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function xD(e){return NP(e,"mutations")}function AD(e){return NP(e,"documentMutations")}function OD(e){return NP(e,"mutationQueues")}class MD{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new MD(0)}static Rn(){return new MD(-1)}}class PD{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const n=new MD(t.highestTargetId);return t.highestTargetId=n.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(e=>px.fromTimestamp(new fx(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.bn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pn(e,r)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(n=>(n.targetCount+=1,this.Vn(t,n),this.Pn(e,n))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>DD(e).delete(t.targetId)).next(()=>this.bn(e)).next(t=>(Qk(t.targetCount>0),t.targetCount-=1,this.Pn(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return DD(e).J((s,o)=>{const a=HP(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Dx.waitFor(i)).next(()=>r)}forEachTarget(e,t){return DD(e).J((e,n)=>{const r=HP(n);t(r)})}bn(e){return ND(e).get("targetGlobalKey").next(e=>(Qk(null!==e),e))}Pn(e,t){return ND(e).put("targetGlobalKey",t)}vn(e,t){return DD(e).put(KP(this.wt,t))}Vn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.bn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=BA(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return DD(e).J({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=HP(n);qA(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=RD(e);return t.forEach(t=>{const s=oP(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),Dx.waitFor(r)}removeMatchingKeys(e,t,n){const r=RD(e);return Dx.forEach(t,t=>{const i=oP(t.path);return Dx.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=RD(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=RD(e);let i=yM();return r.J({range:n,H:!0},(e,t,n)=>{const r=uP(e[1]),s=new wx(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=oP(t.path),r=IDBKeyRange.bound([n],[dx(n)],!1,!0);let i=0;return RD(e).J({index:"documentTargetsIndex",H:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}te(e,t){return DD(e).get(t).next(e=>e?HP(e):null)}}function DD(e){return NP(e,"targets")}function ND(e){return NP(e,"targetGlobal")}function RD(e){return NP(e,"targetDocuments")}function LD([e,t],[n,r]){const i=lx(e,n);return 0===i?lx(t,r):i}class VD{constructor(e){this.Sn=e,this.buffer=new Xx(LD),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();LD(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FD{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;zk("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,mh(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(e){Fx(e)?zk("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Mx(e)}yield t.kn(3e5)}))}}class jD{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Dx.resolve(Hx.ot);const n=new VD(t);return this.On.forEachTarget(e,e=>n.xn(e.sequenceNumber)).next(()=>this.On.Fn(e,e=>n.xn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.On.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(zk("LruGarbageCollector","Garbage collection skipped; disabled"),Dx.resolve(ID)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(zk("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ID):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(zk("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),$k()<=Kh.DEBUG&&zk("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-u}ms`),Dx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class UD{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new jD(e,t)}(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Bn(e){let t=0;return this.Fn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(e,n)=>t(n))}addReference(e,t,n){return BD(e,n)}removeReference(e,t,n){return BD(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return BD(e,t)}Un(e,t){return function(e,t){let n=!1;return OD(e).Y(r=>kD(e,r,t).next(e=>(e&&(n=!0),Dx.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ln(e,(s,o)=>{if(o<=t){const t=this.Un(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,px.min()),RD(e).delete([0,oP(s.path)])))});r.push(t)}}).next(()=>Dx.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return BD(e,t)}Ln(e,t){const n=RD(e);let r,i=Hx.ot;return n.J({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Hx.ot&&t(new wx(uP(r)),i),i=o,r=s):i=Hx.ot}).next(()=>{i!==Hx.ot&&t(new wx(uP(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function BD(e,t){return RD(e).put(function(e,t){return{targetId:0,path:oP(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class qD{constructor(){this.changes=new oM(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,FA.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Dx.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $D{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return GD(e).put(n)}removeEntry(e,t,n){return GD(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],BP(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.qn(e,n)))}getEntry(e,t){let n=FA.newInvalidDocument(t);return GD(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(WD(t))},(e,r)=>{n=this.Kn(t,r)}).next(()=>n)}Gn(e,t){let n={size:0,document:FA.newInvalidDocument(t)};return GD(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(WD(t))},(e,r)=>{n={document:this.Kn(t,r),size:TD(r)}}).next(()=>n)}getEntries(e,t){let n=cM();return this.Qn(e,t,(e,t)=>{const r=this.Kn(e,t);n=n.insert(e,r)}).next(()=>n)}jn(e,t){let n=cM(),r=new Qx(wx.comparator);return this.Qn(e,t,(e,t)=>{const i=this.Kn(e,t);n=n.insert(e,i),r=r.insert(e,TD(t))}).next(()=>({documents:n,Wn:r}))}Qn(e,t,n){if(t.isEmpty())return Dx.resolve();let r=new Xx(JD);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(WD(r.first()),WD(r.last())),s=r.getIterator();let o=s.getNext();return GD(e).J({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=wx.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&JD(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.q(WD(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),BP(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return GD(e).K(IDBKeyRange.bound(r,i,!0)).next(e=>{let t=cM();for(const n of e){const e=this.Kn(wx.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t})}getAllFromCollectionGroup(e,t,n,r){let i=cM();const s=QD(t,n),o=QD(t,kx.max());return GD(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.Kn(wx.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new HD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return KD(e).get("remoteDocumentGlobalKey").next(e=>(Qk(!!e),e))}qn(e,t){return KD(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const e=function(e,t){let n;if(t.document)n=HM(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=wx.fromSegments(t.noDocument.path),r=$P(t.noDocument.readTime);n=FA.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Wk();{const e=wx.fromSegments(t.unknownDocument.path),r=$P(t.unknownDocument.version);n=FA.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new fx(e[0],e[1]);return px.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!e.isNoDocument()||!e.version.isEqual(px.min()))return e}return FA.newInvalidDocument(e)}}function zD(e){return new $D(e)}class HD extends qD{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new oM(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Xx((e,t)=>lx(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Hn.get(i);if(t.push(this.zn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=UP(this.zn.wt,s);r=r.add(i.path.popLast());const c=TD(a);n+=c-o.size,t.push(this.zn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=UP(this.zn.wt,s.convertToNoDocument(px.min()));t.push(this.zn.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.zn.updateMetadata(e,n)),Dx.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(e=>(this.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:e,Wn:t})=>(t.forEach((t,n)=>{this.Hn.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function KD(e){return NP(e,"remoteDocumentGlobal")}function GD(e){return NP(e,"remoteDocumentsV14")}function WD(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function QD(e,t){const n=t.documentKey.path.toArray();return[e,BP(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function JD(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=lx(n[s],r[s]),i)return i;return i=lx(n.length,r.length),i||(i=lx(n[n.length-2],r[r.length-2]),i||lx(n[n.length-1],r[r.length-1]))}class YD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class XD{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.getBaseDocument(e,t,n))).next(e=>(null!==n&&HO(n.mutation,e,tA.empty(),fx.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,yM()).next(()=>t))}getLocalViewOfDocuments(e,t,n=yM()){const r=dM();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=lM();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=dM();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,yM()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=cM();const s=pM(),o=pM();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof QO)?i=i.insert(t.key,t):void 0!==o&&(s.set(t.key,o.mutation.getFieldMask()),HO(o.mutation,t,o.mutation.getFieldMask(),fx.now()))}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new YD(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=pM();let r=new Qx((e,t)=>e-t),i=yM();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||tA.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||yM()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=fM();c.forEach(e=>{if(!i.has(e)){const r=$O(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Dx.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return wx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Dx.resolve(dM());let o=-1,a=i;return s.next(t=>Dx.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Dx.resolve():this.getBaseDocument(e,t,n).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,yM())).next(e=>({batchId:o,changes:hM(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wx(t)).next(e=>{let t=lM();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=lM();return this.indexManager.getCollectionParents(e,r).next(s=>Dx.forEach(s,s=>{const o=function(e,t){return new aO(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId))).next(e=>{e.forEach((e,t)=>{const n=t.getKey();null===r.get(n)&&(r=r.insert(n,FA.newInvalidDocument(n)))});let n=lM();return r.forEach((r,i)=>{const s=e.get(r);void 0!==s&&HO(s.mutation,i,tA.empty(),fx.now()),wO(t,i)&&(n=n.insert(r,i))}),n})}getBaseDocument(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Dx.resolve(FA.newInvalidDocument(t))}}class ZD{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Dx.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:RM(n.createTime)}),Dx.resolve()}getNamedQuery(e,t){return Dx.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:GP(e.bundledQuery),readTime:RM(e.readTime)}}(t)),Dx.resolve()}}class eN{constructor(){this.overlays=new Qx(wx.comparator),this.Xn=new Map}getOverlay(e,t){return Dx.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dM();return Dx.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ie(e,t,r)}),Dx.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Xn.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Xn.delete(n)),Dx.resolve()}getOverlaysForCollection(e,t,n){const r=dM(),i=t.length+1,s=new wx(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Dx.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Qx((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=dM(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=dM(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Dx.resolve(o)}ie(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new VP(t,n));let i=this.Xn.get(t);void 0===i&&(i=yM(),this.Xn.set(t,i)),this.Xn.set(t,i.add(n.key))}}class tN{constructor(){this.Zn=new Xx(nN.ts),this.es=new Xx(nN.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new nN(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new nN(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}us(e){const t=new wx(new mx([])),n=new nN(t,e),r=new nN(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new wx(new mx([])),n=new nN(t,e),r=new nN(t,e+1);let i=yM();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new nN(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class nN{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return wx.comparator(e.key,t.key)||lx(e.ls,t.ls)}static ns(e,t){return lx(e.ls,t.ls)||wx.comparator(e.key,t.key)}}class rN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Xx(nN.ts)}checkEmpty(e){return Dx.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new RP(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.ds=this.ds.add(new nN(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Dx.resolve(s)}lookupMutationBatch(e,t){return Dx.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.ws(t+1),r=n<0?0:n;return Dx.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Dx.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Dx.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new nN(t,0),r=new nN(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this._s(e.ls);i.push(t)}),Dx.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xx(lx);return t.forEach(e=>{const t=new nN(e,0),r=new nN(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),Dx.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wx.isDocumentKey(i)||(i=i.child(""));const s=new nN(new wx(i),0);let o=new Xx(lx);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),Dx.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this._s(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Qk(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let n=this.ds;return Dx.forEach(t.mutations,r=>{const i=new nN(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}In(e){}containsKey(e,t){const n=new nN(t,0),r=this.ds.firstAfterOrEqual(n);return Dx.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Dx.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iN{constructor(e){this.ps=e,this.docs=new Qx(wx.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Dx.resolve(n?n.document.mutableCopy():FA.newInvalidDocument(t))}getEntries(e,t){let n=cM();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():FA.newInvalidDocument(e))}),Dx.resolve(n)}getAllFromCollection(e,t,n){let r=cM();const i=new wx(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||xx(Sx(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Dx.resolve(r)}getAllFromCollectionGroup(e,t,n,r){Wk()}Is(e,t){return Dx.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new sN(this)}getSize(e){return Dx.resolve(this.size)}}class sN extends qD{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(n)}),Dx.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class oN{constructor(e){this.persistence=e,this.Ts=new oM(e=>BA(e),qA),this.lastRemoteSnapshotVersion=px.min(),this.highestTargetId=0,this.Es=0,this.As=new tN,this.targetCount=0,this.Rs=MD.An()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),Dx.resolve()}getLastRemoteSnapshotVersion(e){return Dx.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dx.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Dx.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Dx.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new MD(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Dx.resolve()}updateTargetData(e,t){return this.vn(t),Dx.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Dx.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Dx.waitFor(i).next(()=>r)}getTargetCount(e){return Dx.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return Dx.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),Dx.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Dx.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Dx.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return Dx.resolve(n)}containsKey(e,t){return Dx.resolve(this.As.containsKey(t))}}class aN{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Hx(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new oN(this),this.indexManager=new fD,this.remoteDocumentCache=function(e){return new iN(e)}(e=>this.referenceDelegate.Ss(e)),this.wt=new jP(t),this.Ds=new ZD(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.bs[e.toKey()];return n||(n=new rN(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,n){zk("MemoryPersistence","Starting transaction:",e);const r=new cN(this.Ps.next());return this.referenceDelegate.Cs(),n(r).next(e=>this.referenceDelegate.xs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ns(e,t){return Dx.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class cN extends Ox{constructor(e){super(),this.currentSequenceNumber=e}}class uN{constructor(e){this.persistence=e,this.ks=new tN,this.Os=null}static Ms(e){return new uN(e)}get Fs(){if(this.Os)return this.Os;throw Wk()}addReference(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Dx.resolve()}removeReference(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Dx.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Dx.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(e=>this.Fs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Fs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dx.forEach(this.Fs,n=>{const r=wx.fromPath(n);return this.$s(e,r).next(e=>{e||t.removeEntry(r,px.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(e=>{e?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Dx.or([()=>Dx.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class lN{constructor(e){this.wt=e}O(e,t,n,r){const i=new Nx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lP,{unique:!0}),e.createObjectStore("documentMutations")}(e),hN(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Dx.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hN(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:px.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").K().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lP,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return Dx.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Bs(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(i)))),n<7&&r>=7&&(s=s.next(()=>this.Us(i))),n<8&&r>=8&&(s=s.next(()=>this.qs(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Ks(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:TP});t.createIndex("collectionPathOverlayIndex",SP,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",kP,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:pP});t.createIndex("documentKeyIndex",gP),t.createIndex("collectionGroupIndex",mP)}(e)).next(()=>this.Gs(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.Qs(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:_P}).createIndex("sequenceNumberIndex",IP,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:CP}).createIndex("documentKeyIndex",EP,{unique:!1})}(e))),s}Ls(e){let t=0;return e.store("remoteDocuments").J((e,n)=>{t+=TD(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Bs(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.K().next(t=>Dx.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.K("userMutationsIndex",r).next(n=>Dx.forEach(n,n=>{Qk(n.userId===t.userId);const r=zP(this.wt,n);return ED(e,t.userId,r).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.J((n,i)=>{const s=new mx(n),o=function(e){return[0,oP(e)]}(s);r.push(t.get(o).next(n=>n?Dx.resolve():(n=>t.put({targetId:0,path:oP(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>Dx.waitFor(r))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:bP});const n=t.store("collectionParents"),r=new pD,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:oP(r)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>{const n=new mx(e);return i(n.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([e,t,n],r)=>{const s=uP(t);return i(s.popLast())}))}Ks(e){const t=e.store("targets");return t.J((e,n)=>{const r=HP(n),i=KP(this.wt,r);return t.put(i)})}Gs(e,t){const n=t.store("remoteDocuments"),r=[];return n.J((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new wx(mx.fromString(o.document.name).popFirst(5)):o.noDocument?wx.fromSegments(o.noDocument.path):o.unknownDocument?wx.fromSegments(o.unknownDocument.path):Wk()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>Dx.waitFor(r))}Qs(e,t){const n=t.store("mutations"),r=zD(this.wt),i=new aN(uN.Ms,this.wt.ne);return n.K().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:yM();zP(this.wt,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Dx.forEach(n,(e,n)=>{const s=new Uk(n),o=eD.se(this.wt,s),a=i.getIndexManager(s),c=SD.se(s,this.wt,a,i.referenceDelegate);return new XD(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new DP(t,Hx.ot),e).next()})})}}function hN(e){e.createObjectStore("targetDocuments",{keyPath:vP}).createIndex("documentTargetsIndex",wP,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yP,{unique:!0}),e.createObjectStore("targetGlobal")}const dN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fN{constructor(e,t,n,r,i,s,o,a,c,u,l=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.js=i,this.window=s,this.document=o,this.Ws=c,this.zs=u,this.Hs=l,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=e=>Promise.resolve(),!fN.V())throw new Xk(Yk.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UD(this,r),this.ei=t+"main",this.wt=new jP(a),this.ni=new Rx(this.ei,this.Hs,new lN(this.wt)),this.Vs=new PD(this.referenceDelegate,this.wt),this.remoteDocumentCache=zD(this.wt),this.Ds=new YP,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===u&&Hk("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xk(Yk.FAILED_PRECONDITION,dN);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Hx(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var n=mh(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=mh(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(mh(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Fx(e))return zk("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return zk("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return pN(e).get("owner").next(e=>Dx.resolve(this.di(e)))}_i(e){return gN(e).delete(this.clientId)}wi(){var e=this;return mh(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=NP(t,"clientMetadata");return n.K().next(t=>{const r=e.gi(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return Dx.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.si)for(const n of t)e.si.removeItem(e.yi(n.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Dx.resolve(!0):pN(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Xk(Yk.FAILED_PRECONDITION,dN);return!1}}return!(!this.networkEnabled||!this.inForeground)||gN(e).K().next(e=>void 0===this.gi(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&zk("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return mh(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new DP(t,Hx.ot);return e.li(n).next(()=>e._i(n))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(e=>this.mi(e.updateTimeMs,t)&&!this.pi(e.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>gN(e).K().next(e=>this.gi(e,18e5).map(e=>e.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return SD.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mD(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return eD.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,n){zk("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.Hs)?PP:14===s?MP:13===s?OP:12===s?AP:11===s?xP:void Wk();var s;let o;return this.ni.runTransaction(e,r,i,r=>(o=new DP(r,this.Ps?this.Ps.next():Hx.ot),"readwrite-primary"===t?this.ai(o).next(e=>!!e||this.hi(o)).next(t=>{if(!t)throw Hk(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Xk(Yk.FAILED_PRECONDITION,Ax);return n(o)}).next(e=>this.fi(o).next(()=>e)):this.bi(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}bi(e){return pN(e).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Xk(Yk.FAILED_PRECONDITION,dN)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pN(e).put("owner",t)}static V(){return Rx.V()}li(e){const t=pN(e);return t.get("owner").next(e=>this.di(e)?(zk("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Dx.resolve())}mi(e,t){const n=Date.now();return!(e<n-t||e>n&&(Hk(`Detected an update time that is in the future: ${e} > ${n}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),!function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return zk("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Hk("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(KC){Hk("Failed to set zombie client id.",KC)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(KC){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pN(e){return NP(e,"owner")}function gN(e){return NP(e,"clientMetadata")}function mN(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class yN{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Pi=n,this.vi=r}static Vi(e,t){let n=yM(),r=yM();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new yN(e,t.fromCache,n,r)}}class vN{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ci(e,t).next(i=>i||this.xi(e,t,r,n)).next(n=>n||this.Ni(e,t))}Ci(e,t){return Dx.resolve(null)}xi(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(px.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next(i=>{const s=this.ki(t,i);return this.Oi(t,s,n,r)?this.Ni(e,t):($k()<=Kh.DEBUG&&zk("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vO(t)),this.Mi(e,s,t,Tx(r,-1)))})}ki(e,t){let n=new Xx(_O(e));return t.forEach((t,r)=>{wO(e,r)&&(n=n.add(r))}),n}Oi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ni(e,t){return $k()<=Kh.DEBUG&&zk("QueryEngine","Using full collection scan to execute query:",vO(t)),this.Di.getDocumentsMatchingQuery(e,t,kx.min())}Mi(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class wN{constructor(e,t,n,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new Qx(lx),this.Bi=new oM(e=>BA(e),qA),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(n)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XD(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function bN(e,t,n,r){return new wN(e,t,n,r)}function _N(e,t){return IN.apply(this,arguments)}function IN(){return(IN=mh(function*(e,t){const n=Jk(e);return yield n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.qi(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=yM();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ki:e,removedBatchIds:i,addedBatchIds:s}))})})})).apply(this,arguments)}function CN(e,t){const n=Jk(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Dx.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Qk(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yM();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}function EN(e){const t=Jk(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function TN(e,t){const n=Jk(e),r=t.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const o=[];t.targetChanges.forEach((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Vs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Vs.addMatchingKeys(e,s.addedDocuments,a)));let u=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(nA.EMPTY_BYTE_STRING,px.min()).withLastLimboFreeSnapshotVersion(px.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Vs.updateTargetData(e,u))});let a=cM(),c=yM();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(SN(e,s,t.documentUpdates).next(e=>{a=e.Gi,c=e.Qi})),!r.isEqual(px.min())){const t=n.Vs.getLastRemoteSnapshotVersion(e).next(t=>n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Dx.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.$i=i,e))}function SN(e,t,n){let r=yM(),i=yM();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=cM();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(px.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):zk("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Gi:r,Qi:i}})}function kN(e,t){const n=Jk(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function xN(e,t){const n=Jk(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Vs.getTargetData(e,t).next(i=>i?(r=i,Dx.resolve(r)):n.Vs.allocateTargetId(e).next(i=>(r=new FP(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e})}function AN(e,t,n){return ON.apply(this,arguments)}function ON(){return(ON=mh(function*(e,t,n){const r=Jk(e),i=r.$i.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Fx(e))throw e;zk("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.$i=r.$i.remove(t),r.Bi.delete(i.target)})).apply(this,arguments)}function MN(e,t,n){const r=Jk(e);let i=px.min(),s=yM();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Jk(e),i=r.Bi.get(n);return void 0!==i?Dx.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,pO(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fi.getDocumentsMatchingQuery(e,t,n?i:px.min(),n?s:yM())).next(e=>(NN(r,bO(t),e),{documents:e,ji:s})))}function PN(e,t){const n=Jk(e),r=Jk(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.te(e,t).next(e=>e?e.target:null))}function DN(e,t){const n=Jk(e),r=n.Li.get(t)||px.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Ui.getAllFromCollectionGroup(e,t,Tx(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(NN(n,t,e),e))}function NN(e,t,n){let r=px.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Li.set(t,r)}function RN(){return(RN=mh(function*(e,t,n,r){const i=Jk(e);let s=yM(),o=cM();for(const u of n){const e=t.Wi(u.metadata.name);u.document&&(s=s.add(e));const n=t.zi(u);n.setReadTime(t.Hi(u.metadata.readTime)),o=o.insert(e,n)}const a=i.Ui.newChangeBuffer({trackRemovals:!0}),c=yield xN(i,function(e){return pO(uO(mx.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>SN(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.Vs.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.Vs.addMatchingKeys(e,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)).next(()=>t.Gi)))})).apply(this,arguments)}function LN(e,t){return VN.apply(this,arguments)}function VN(){return(VN=mh(function*(e,t,n=yM()){const r=yield xN(e,pO(GP(t.bundledQuery))),i=Jk(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=RM(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ds.saveNamedQuery(e,t);const o=r.withResumeToken(nA.EMPTY_BYTE_STRING,s);return i.$i=i.$i.insert(o.targetId,o),i.Vs.updateTargetData(e,o).next(()=>i.Vs.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Vs.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ds.saveNamedQuery(e,t))})})).apply(this,arguments)}function FN(e,t){return`firestore_clients_${e}_${t}`}function jN(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function UN(e,t){return`firestore_targets_${e}_${t}`}class BN{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ji(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Xk(r.error.code,r.error.message))),s?new BN(e,t,r.state,i):(Hk("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qN{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ji(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Xk(n.error.code,n.error.message))),i?new qN(e,n.state,r):(Hk("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $N{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=wM();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=pA(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new $N(e,i):(Hk("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zN{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zN(t.clientId,t.onlineState):(Hk("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HN{constructor(){this.activeTargetIds=wM()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KN{constructor(e,t,n,r,i){this.window=e,this.js=t,this.persistenceKey=n,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Qx(lx),this.started=!1,this.ir=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.rr=FN(this.persistenceKey,this.tr),this.ur=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new HN),this.cr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.lr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.dr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return mh(function*(){const t=yield e.syncEngine.Ri();for(const r of t){if(r===e.tr)continue;const t=e.getItem(FN(e.persistenceKey,r));if(t){const n=$N.Ji(r,t);n&&(e.sr=e.sr.insert(n.clientId,n))}}e._r();const n=e.storage.getItem(e.lr);if(n){const t=e.wr(n);t&&e.mr(t)}for(const r of e.ir)e.nr(r);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,n){this.yr(e,t,n),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(UN(this.persistenceKey,e));if(n){const r=qN.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UN(this.persistenceKey,e))}updateQueryState(e,t,n){this.Tr(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.pr(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return zk("SharedClientState","READ",e,t),t}setItem(e,t){zk("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){zk("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const n=e;if(n.storageArea===this.storage){if(zk("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Hk("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(mh(function*(){if(t.started){if(null!==n.key)if(t.cr.test(n.key)){if(null==n.newValue){const e=t.Rr(n.key);return t.br(e,null)}{const e=t.Pr(n.key,n.newValue);if(e)return t.br(e.clientId,e)}}else if(t.ar.test(n.key)){if(null!==n.newValue){const e=t.vr(n.key,n.newValue);if(e)return t.Vr(e)}}else if(t.hr.test(n.key)){if(null!==n.newValue){const e=t.Sr(n.key,n.newValue);if(e)return t.Dr(e)}}else if(n.key===t.lr){if(null!==n.newValue){const e=t.wr(n.newValue);if(e)return t.mr(e)}}else if(n.key===t.ur){const e=function(e){let t=Hx.ot;if(null!=e)try{const n=JSON.parse(e);Qk("number"==typeof n),t=n}catch(e){Hk("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Hx.ot&&t.sequenceNumberHandler(e)}else if(n.key===t.dr){const e=t.Cr(n.newValue);yield Promise.all(e.map(e=>t.syncEngine.Nr(e)))}}else t.ir.push(n)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,n){const r=new BN(this.currentUser,e,t,n),i=jN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}pr(e){const t=jN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,n){const r=UN(this.persistenceKey,e),i=new qN(e,t,n);this.setItem(r,i.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const n=this.Rr(e);return $N.Ji(n,t)}vr(e,t){const n=this.ar.exec(e),r=Number(n[1]);return BN.Ji(new Uk(void 0!==n[2]?n[2]:null),r,t)}Sr(e,t){const n=this.hr.exec(e),r=Number(n[1]);return qN.Ji(r,t)}wr(e){return zN.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return mh(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);zk("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const n=t?this.sr.insert(e,t):this.sr.remove(e),r=this.gr(this.sr),i=this.gr(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Mr(s,o).then(()=>{this.sr=n})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=wM();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class GN{constructor(){this.Fr=new HN,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new HN,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WN{Br(e){}shutdown(){}}class QN{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){zk("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){zk("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const JN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class YN{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class XN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,r,i){const s=this.oo(e,t);zk("RestConnection","Sending: ",s,n);const o={};return this.uo(o,r,i),this.co(e,s,o,n).then(e=>(zk("RestConnection","Received: ",e),e),t=>{throw Kk("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}ao(e,t,n,r,i){return this.ro(e,t,n,r,i)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bk,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}oo(e,t){return`${this.so}/v1/${t}:${JN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,n,r){return new Promise((i,s)=>{const o=new Fk;o.listenOnce(Dk.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Pk.NO_ERROR:const t=o.getResponseJson();zk("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Pk.TIMEOUT:zk("Connection",'RPC "'+e+'" timed out'),s(new Xk(Yk.DEADLINE_EXCEEDED,"Request time out"));break;case Pk.HTTP_ERROR:const n=o.getStatus();if(zk("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Yk).indexOf(t)>=0?t:Yk.UNKNOWN}(e.status);s(new Xk(t,e.message))}else s(new Xk(Yk.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Xk(Yk.UNAVAILABLE,"Connection failed."));break;default:Wk()}}finally{zk("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ho(e,t,n){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ok(),s=Mk(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Lk({})),this.uo(o.initMessageHeaders,t,n),Ih()||Eh()||_h().indexOf("Electron/")>=0||Th()||_h().indexOf("MSAppHost/")>=0||Ch()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");zk("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const h=new YN({jr:e=>{l?zk("Connection","Not sending because WebChannel is closed:",e):(u||(zk("Connection","Opening WebChannel transport."),c.open(),u=!0),zk("Connection","WebChannel sending:",e),c.send(e))},Wr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return d(c,Vk.EventType.OPEN,()=>{l||zk("Connection","WebChannel transport opened.")}),d(c,Vk.EventType.CLOSE,()=>{l||(l=!0,zk("Connection","WebChannel transport closed"),h.eo())}),d(c,Vk.EventType.ERROR,e=>{l||(l=!0,Kk("Connection","WebChannel transport errored:",e),h.eo(new Xk(Yk.UNAVAILABLE,"The operation could not be completed")))}),d(c,Vk.EventType.MESSAGE,e=>{var t;if(!l){const n=e.data[0];Qk(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){zk("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=nM[e];if(void 0!==t)return sM(t)}(e),n=i.message;void 0===t&&(t=Yk.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.eo(new Xk(t,n)),c.close()}else zk("Connection","WebChannel received:",n),h.no(n)}}),d(s,Nk.STAT_EVENT,e=>{e.stat===Rk.PROXY?zk("Connection","Detected buffering proxy"):e.stat===Rk.NOPROXY&&zk("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.Zr()},0),h}}function ZN(){return"undefined"!=typeof window?window:null}function eR(){return"undefined"!=typeof document?document:null}function tR(e){return new MM(e,!0)}class nR{constructor(e,t,n=1e3,r=1.5,i=6e4){this.js=e,this.timerId=t,this.lo=n,this.fo=r,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-n);r>0&&zk("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class rR{constructor(e,t,n,r,i,s,o,a){this.js=e,this.Ao=n,this.Ro=r,this.bo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new nR(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return mh(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return mh(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var n=this;return mh(function*(){n.Fo(),n.$o(),n.So.cancel(),n.Po++,4!==e?n.So.reset():t&&t.code===Yk.RESOURCE_EXHAUSTED?(Hk(t.toString()),Hk("Using maximum backoff delay to prevent overloading the backend."),n.So.po()):t&&t.code===Yk.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Bo(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Po===t&&this.Uo(e,n)},t=>{e(()=>{const e=new Xk(Yk.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)})})}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{n(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(e=>{n(()=>this.qo(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}xo(){var e=this;this.state=5,this.So.Io(mh(function*(){e.state=0,e.start()}))}qo(e){return zk("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(zk("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iR extends rR{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.wt=i}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wk()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.dt?(Qk(void 0===t||"string"==typeof t),nA.fromBase64String(t||"")):(Qk(void 0===t||t instanceof Uint8Array),nA.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Yk.UNKNOWN:sM(e.code);return new Xk(t,e.message||"")}(o);n=new EM(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=jM(e,r.document.name),s=RM(r.document.updateTime),o=new LA({mapValue:{fields:r.document.fields}}),a=FA.newFoundDocument(i,s,o);n=new IM(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=jM(e,r.document),s=r.readTime?RM(r.readTime):px.min(),o=FA.newNoDocument(i,s);n=new IM([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=jM(e,r.document);n=new IM([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Wk();{const e=t.filter,r=new tM(e.count||0);n=new CM(e.targetId,r)}}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return px.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?px.min():t.readTime?RM(t.readTime):px.min()}(e);return this.listener.Go(t,n)}Qo(e){const t={};t.database=qM(this.wt),t.addTarget=function(e,t){let n;const r=t.target;return n=$A(r)?{documents:WM(e,r)}:{query:QM(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=DM(e,t.resumeToken):t.snapshotVersion.compareTo(px.min())>0&&(n.readTime=PM(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wk()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Mo(t)}jo(e){const t={};t.database=qM(this.wt),t.removeTarget=e,this.Mo(t)}}class sR extends rR{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Qk(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(e,t){return e&&e.length>0?(Qk(void 0!==t),e.map(e=>function(e,t){let n=RM(e.updateTime?e.updateTime:t);return n.isEqual(px.min())&&(n=RM(t)),new jO(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=RM(e.commitTime);return this.listener.Jo(n,t)}return Qk(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=qM(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>KM(this.wt,e))};this.Mo(t)}}class oR extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Xk(Yk.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.ro(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Yk.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xk(Yk.UNKNOWN,e.toString())})}ao(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.ao(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Yk.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xk(Yk.UNKNOWN,e.toString())})}terminate(){this.Zo=!0}}class aR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Hk(t),this.su=!1):zk("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class cR{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br(e=>{n.enqueueAndForget(mh(function*(){var e;wR(s)&&(zk("RemoteStore","Restarting streams for network reachability change."),yield(e=mh(function*(e){const t=Jk(e);t.lu.add(4),yield hR(t),t._u.set("Unknown"),t.lu.delete(4),yield uR(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this._u=new aR(n,r)}}function uR(e){return lR.apply(this,arguments)}function lR(){return(lR=mh(function*(e){if(wR(e))for(const t of e.fu)yield t(!0)})).apply(this,arguments)}function hR(e){return dR.apply(this,arguments)}function dR(){return(dR=mh(function*(e){for(const t of e.fu)yield t(!1)})).apply(this,arguments)}function fR(e,t){const n=Jk(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),vR(n)?yR(n):WR(n).Co()&&gR(n,t))}function pR(e,t){const n=Jk(e),r=WR(n);n.hu.delete(t),r.Co()&&mR(n,t),0===n.hu.size&&(r.Co()?r.ko():wR(n)&&n._u.set("Unknown"))}function gR(e,t){e.wu.Nt(t.targetId),WR(e).Qo(t)}function mR(e,t){e.wu.Nt(t),WR(e).jo(t)}function yR(e){e.wu=new SM({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),te:t=>e.hu.get(t)||null}),WR(e).start(),e._u.iu()}function vR(e){return wR(e)&&!WR(e).Do()&&e.hu.size>0}function wR(e){return 0===Jk(e).lu.size}function bR(e){e.wu=void 0}function _R(e){return IR.apply(this,arguments)}function IR(){return(IR=mh(function*(e){e.hu.forEach((t,n)=>{gR(e,t)})})).apply(this,arguments)}function CR(e,t){return ER.apply(this,arguments)}function ER(){return(ER=mh(function*(e,t){bR(e),vR(e)?(e._u.uu(t),yR(e)):e._u.set("Unknown")})).apply(this,arguments)}function TR(e,t,n){return SR.apply(this,arguments)}function SR(){return(SR=mh(function*(e,t,n){if(e._u.set("Online"),t instanceof EM&&2===t.state&&t.cause)try{yield(r=mh(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.hu.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.hu.delete(r),e.wu.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){zk("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield kR(e,n)}else if(t instanceof IM?e.wu.Ut(t):t instanceof CM?e.wu.zt(t):e.wu.Gt(t),!n.isEqual(px.min()))try{const t=yield EN(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.wu.Yt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(nA.EMPTY_BYTE_STRING,n.snapshotVersion)),mR(e,t);const r=new FP(n.target,t,1,n.sequenceNumber);gR(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){zk("RemoteStore","Failed to raise snapshot:",t),yield kR(e,t)}var r})).apply(this,arguments)}function kR(e,t,n){return xR.apply(this,arguments)}function xR(){return(xR=mh(function*(e,t,n){if(!Fx(t))throw t;e.lu.add(1),yield hR(e),e._u.set("Offline"),n||(n=()=>EN(e.localStore)),e.asyncQueue.enqueueRetryable(mh(function*(){zk("RemoteStore","Retrying IndexedDB access"),yield n(),e.lu.delete(1),yield uR(e)}))})).apply(this,arguments)}function AR(e,t){return t().catch(n=>kR(e,n,t))}function OR(e){return MR.apply(this,arguments)}function MR(){return(MR=mh(function*(e){const t=Jk(e),n=QR(t);let r=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;PR(t);)try{const e=yield kN(t.localStore,r);if(null===e){0===t.au.length&&n.ko();break}r=e.batchId,DR(t,e)}catch(e){yield kR(t,e)}NR(t)&&RR(t)})).apply(this,arguments)}function PR(e){return wR(e)&&e.au.length<10}function DR(e,t){e.au.push(t);const n=QR(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function NR(e){return wR(e)&&!QR(e).Do()&&e.au.length>0}function RR(e){QR(e).start()}function LR(e){return VR.apply(this,arguments)}function VR(){return(VR=mh(function*(e){QR(e).Xo()})).apply(this,arguments)}function FR(e){return jR.apply(this,arguments)}function jR(){return(jR=mh(function*(e){const t=QR(e);for(const n of e.au)t.Ho(n.mutations)})).apply(this,arguments)}function UR(e,t,n){return BR.apply(this,arguments)}function BR(){return(BR=mh(function*(e,t,n){const r=e.au.shift(),i=LP.from(r,t,n);yield AR(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield OR(e)})).apply(this,arguments)}function qR(e,t){return $R.apply(this,arguments)}function $R(){return($R=mh(function*(e,t){var n;t&&QR(e).zo&&(yield(n=mh(function*(e,t){if(iM(n=t.code)&&n!==Yk.ABORTED){const n=e.au.shift();QR(e).No(),yield AR(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield OR(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),NR(e)&&RR(e)})).apply(this,arguments)}function zR(e,t){return HR.apply(this,arguments)}function HR(){return(HR=mh(function*(e,t){const n=Jk(e);n.asyncQueue.verifyOperationInProgress(),zk("RemoteStore","RemoteStore received new credentials");const r=wR(n);n.lu.add(3),yield hR(n),r&&n._u.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),yield uR(n)})).apply(this,arguments)}function KR(e,t){return GR.apply(this,arguments)}function GR(){return(GR=mh(function*(e,t){const n=Jk(e);t?(n.lu.delete(2),yield uR(n)):t||(n.lu.add(2),yield hR(n),n._u.set("Unknown"))})).apply(this,arguments)}function WR(e){return e.mu||(e.mu=function(e,t,n){const r=Jk(e);return r.tu(),new iR(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:_R.bind(null,e),Jr:CR.bind(null,e),Go:TR.bind(null,e)}),e.fu.push(function(){var t=mh(function*(t){t?(e.mu.No(),vR(e)?yR(e):e._u.set("Unknown")):(yield e.mu.stop(),bR(e))});return function(e){return t.apply(this,arguments)}}())),e.mu}function QR(e){return e.gu||(e.gu=function(e,t,n){const r=Jk(e);return r.tu(),new sR(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:LR.bind(null,e),Jr:qR.bind(null,e),Yo:FR.bind(null,e),Jo:UR.bind(null,e)}),e.fu.push(function(){var t=mh(function*(t){t?(e.gu.No(),yield OR(e)):(yield e.gu.stop(),e.au.length>0&&(zk("RemoteStore",`Stopping write stream with ${e.au.length} pending writes`),e.au=[]))});return function(e){return t.apply(this,arguments)}}())),e.gu}class JR{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zk,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new JR(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xk(Yk.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function YR(e,t){if(Hk("AsyncQueue",`${t}: ${e}`),Fx(e))return new Xk(Yk.UNAVAILABLE,`${t}: ${e}`);throw e}class XR{constructor(e){this.comparator=e?(t,n)=>e(t,n)||wx.comparator(t.key,n.key):(e,t)=>wx.comparator(e.key,t.key),this.keyedMap=lM(),this.sortedSet=new Qx(this.comparator)}static emptySet(e){return new XR(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof XR))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new XR;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ZR{constructor(){this.yu=new Qx(wx.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Wk():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,n)=>{e.push(n)}),e}}class eL{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new eL(e,t,XR.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mO(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class tL{constructor(){this.Iu=void 0,this.listeners=[]}}class nL{constructor(){this.queries=new oM(e=>yO(e),mO),this.onlineState="Unknown",this.Tu=new Set}}function rL(e,t){return iL.apply(this,arguments)}function iL(){return(iL=mh(function*(e,t){const n=Jk(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new tL),i)try{s.Iu=yield n.onListen(r)}catch(e){const n=YR(e,`Initialization of query '${vO(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Eu(n.onlineState),s.Iu&&t.Au(s.Iu)&&uL(n)})).apply(this,arguments)}function sL(e,t){return oL.apply(this,arguments)}function oL(){return(oL=mh(function*(e,t){const n=Jk(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function aL(e,t){const n=Jk(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.Au(i)&&(r=!0);e.Iu=i}}r&&uL(n)}function cL(e,t,n){const r=Jk(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function uL(e){e.Tu.forEach(e=>{e.next()})}class lL{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new eL(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=eL.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class hL{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class dL{constructor(e){this.wt=e}Wi(e){return jM(this.wt,e)}zi(e){return e.metadata.exists?HM(this.wt,e.document,!1):FA.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return RM(e)}}class fL{constructor(e,t,n){this.xu=e,this.localStore=t,this.wt=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pL(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=mx.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,n=new dL(this.wt);for(const r of e)if(r.metadata.queries){const e=n.Wi(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||yM()).add(e);t.set(n,r)}}return t}complete(){var e=this;return mh(function*(){const t=yield function(e,t,n,r){return RN.apply(this,arguments)}(e.localStore,new dL(e.wt),e.documents,e.xu.id),n=e.ku(e.documents);for(const r of e.queries)yield LN(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function pL(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class gL{constructor(e){this.key=e}}class mL{constructor(e){this.key=e}}class yL{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=yM(),this.mutatedKeys=yM(),this.Lu=_O(e),this.Uu=new XR(this.Lu)}get qu(){return this.Fu}Ku(e,t){const n=t?t.Gu:new ZR,r=t?t.Uu:this.Uu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),l=wO(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Qu(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Lu(l,a)>0||c&&this.Lu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Uu:s,Gu:n,Oi:o,mutatedKeys:i}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const i=e.Gu.pu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wk()}};return n(e)-n(t)}(e.type,t.type)||this.Lu(e.doc,t.doc)),this.ju(n);const s=t?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==i.length||a?{snapshot:new eL(this.query,e.Uu,r,i,e.mutatedKeys,0===o,a,!1),zu:s}:{zu:s}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ZR,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=yM(),this.Uu.forEach(e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))});const t=[];return e.forEach(e=>{this.Bu.has(e)||t.push(new mL(e))}),this.Bu.forEach(n=>{e.has(n)||t.push(new gL(n))}),t}Ju(e){this.Fu=e.ji,this.Bu=yM();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return eL.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class vL{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class wL{constructor(e){this.key=e,this.Xu=!1}}class bL{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Zu={},this.tc=new oM(e=>yO(e),mO),this.ec=new Map,this.nc=new Set,this.sc=new Qx(wx.comparator),this.ic=new Map,this.rc=new tN,this.oc={},this.uc=new Map,this.cc=MD.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function _L(e,t){return IL.apply(this,arguments)}function IL(){return(IL=mh(function*(e,t){const n=hV(e);let r,i;const s=n.tc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const e=yield xN(n.localStore,pO(t));n.isPrimaryClient&&fR(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield CL(n,t,r,"current"===s)}return i})).apply(this,arguments)}function CL(e,t,n,r){return EL.apply(this,arguments)}function EL(){return(EL=mh(function*(e,t,n,r){e.hc=(t,n,r)=>{return(i=mh(function*(e,t,n,r){let i=t.view.Ku(n);i.Oi&&(i=yield MN(e.localStore,t.query,!1).then(({documents:e})=>t.view.Ku(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return qL(e,t.targetId,o.zu),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield MN(e.localStore,t,!0),s=new yL(t,i.ji),o=s.Ku(i.documents),a=_M.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);qL(e,n,c.zu);const u=new vL(t,n,s);return e.tc.set(t,u),e.ec.has(n)?e.ec.get(n).push(t):e.ec.set(n,[t]),c.snapshot})).apply(this,arguments)}function TL(e,t){return SL.apply(this,arguments)}function SL(){return(SL=mh(function*(e,t){const n=Jk(e),r=n.tc.get(t),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(e=>!mO(e,t))),void n.tc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield AN(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),pR(n.remoteStore,r.targetId),UL(n,r.targetId)}).catch(Mx))):(UL(n,r.targetId),yield AN(n.localStore,r.targetId,!0))})).apply(this,arguments)}function kL(){return(kL=mh(function*(e,t,n){const r=dV(e);try{const e=yield function(e,t){const n=Jk(e),r=fx.now(),i=t.reduce((e,t)=>e.add(t.key),yM());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=cM(),c=yM();return n.Ui.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=KO(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new QO(e.key,t,VA(t.value.mapValue),UO.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:hM(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.oc[e.currentUser.toKey()];r||(r=new Qx(lx)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(r,e.batchId,n),yield HL(r,e.changes),yield OR(r.remoteStore)}catch(e){const t=YR(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function xL(e,t){return AL.apply(this,arguments)}function AL(){return(AL=mh(function*(e,t){const n=Jk(e);try{const e=yield TN(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.ic.get(t);r&&(Qk(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Xu=!0:e.modifiedDocuments.size>0?Qk(r.Xu):e.removedDocuments.size>0&&(Qk(r.Xu),r.Xu=!1))}),yield HL(n,e,t)}catch(e){yield Mx(e)}})).apply(this,arguments)}function OL(e,t,n){const r=Jk(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.tc.forEach((n,r)=>{const i=r.view.Eu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Jk(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Eu(t)&&(r=!0)}),r&&uL(n)}(r.eventManager,t),e.length&&r.Zu.Go(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ML(e,t,n){return PL.apply(this,arguments)}function PL(){return(PL=mh(function*(e,t,n){const r=Jk(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ic.get(t),s=i&&i.key;if(s){let e=new Qx(wx.comparator);e=e.insert(s,FA.newNoDocument(s,px.min()));const n=yM().add(s),i=new bM(px.min(),new Map,new Xx(lx),e,n);yield xL(r,i),r.sc=r.sc.remove(s),r.ic.delete(t),zL(r)}else yield AN(r.localStore,t,!1).then(()=>UL(r,t,n)).catch(Mx)})).apply(this,arguments)}function DL(e,t){return NL.apply(this,arguments)}function NL(){return(NL=mh(function*(e,t){const n=Jk(e),r=t.batch.batchId;try{const e=yield CN(n.localStore,t);jL(n,r,null),FL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield HL(n,e)}catch(e){yield Mx(e)}})).apply(this,arguments)}function RL(e,t,n){return LL.apply(this,arguments)}function LL(){return(LL=mh(function*(e,t,n){const r=Jk(e);try{const e=yield function(e,t){const n=Jk(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Qk(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);jL(r,t,n),FL(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield HL(r,e)}catch(n){yield Mx(n)}})).apply(this,arguments)}function VL(){return(VL=mh(function*(e,t){const n=Jk(e);wR(n.remoteStore)||zk("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Jk(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.uc.get(e)||[];r.push(t),n.uc.set(e,r)}catch(e){const n=YR(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function FL(e,t){(e.uc.get(t)||[]).forEach(e=>{e.resolve()}),e.uc.delete(t)}function jL(e,t,n){const r=Jk(e);let i=r.oc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function UL(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ec.get(t))e.tc.delete(r),n&&e.Zu.lc(r,n);e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach(t=>{e.rc.containsKey(t)||BL(e,t)})}function BL(e,t){e.nc.delete(t.path.canonicalString());const n=e.sc.get(t);null!==n&&(pR(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),zL(e))}function qL(e,t,n){for(const r of n)r instanceof gL?(e.rc.addReference(r.key,t),$L(e,r)):r instanceof mL?(zk("SyncEngine","Document no longer in limbo: "+r.key),e.rc.removeReference(r.key,t),e.rc.containsKey(r.key)||BL(e,r.key)):Wk()}function $L(e,t){const n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(zk("SyncEngine","New document in limbo: "+n),e.nc.add(r),zL(e))}function zL(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){const t=e.nc.values().next().value;e.nc.delete(t);const n=new wx(mx.fromString(t)),r=e.cc.next();e.ic.set(r,new wL(n)),e.sc=e.sc.insert(n,r),fR(e.remoteStore,new FP(pO(uO(n.path)),r,2,Hx.ot))}}function HL(e,t,n){return KL.apply(this,arguments)}function KL(){return(KL=mh(function*(e,t,n){const r=Jk(e),i=[],s=[],o=[];var a;r.tc.isEmpty()||(r.tc.forEach((e,a)=>{o.push(r.hc(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=yN.Vi(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.Zu.Go(i),yield(a=mh(function*(e,t){const n=Jk(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Dx.forEach(t,t=>Dx.forEach(t.Pi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Dx.forEach(t.vi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Fx(e))throw e;zk("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.$i.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.$i=n.$i.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function GL(e,t){return WL.apply(this,arguments)}function WL(){return(WL=mh(function*(e,t){const n=Jk(e);if(!n.currentUser.isEqual(t)){zk("SyncEngine","User change. New user:",t.toKey());const e=yield _N(n.localStore,t);n.currentUser=t,function(e,t){e.uc.forEach(e=>{e.forEach(e=>{e.reject(new Xk(Yk.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.uc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield HL(n,e.Ki)}})).apply(this,arguments)}function QL(e,t){const n=Jk(e),r=n.ic.get(t);if(r&&r.Xu)return yM().add(r.key);{let e=yM();const r=n.ec.get(t);if(!r)return e;for(const t of r){const r=n.tc.get(t);e=e.unionWith(r.view.qu)}return e}}function JL(e,t){return YL.apply(this,arguments)}function YL(){return(YL=mh(function*(e,t){const n=Jk(e),r=yield MN(n.localStore,t.query,!0),i=t.view.Ju(r);return n.isPrimaryClient&&qL(n,t.targetId,i.zu),i})).apply(this,arguments)}function XL(e,t){return ZL.apply(this,arguments)}function ZL(){return(ZL=mh(function*(e,t){const n=Jk(e);return DN(n.localStore,t).then(e=>HL(n,e))})).apply(this,arguments)}function eV(e,t,n,r){return tV.apply(this,arguments)}function tV(){return(tV=mh(function*(e,t,n,r){const i=Jk(e),s=yield function(e,t){const n=Jk(e),r=Jk(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.yn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):Dx.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield OR(i.remoteStore):"acknowledged"===n||"rejected"===n?(jL(i,t,r||null),FL(i,t),function(e,t){Jk(Jk(e).mutationQueue).In(t)}(i.localStore,t)):Wk(),yield HL(i,s)):zk("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function nV(){return(nV=mh(function*(e,t){const n=Jk(e);if(hV(n),dV(n),!0===t&&!0!==n.ac){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield rV(n,e.toArray());n.ac=!0,yield KR(n.remoteStore,!0);for(const r of t)fR(n.remoteStore,r)}else if(!1===t&&!1!==n.ac){const e=[];let t=Promise.resolve();n.ec.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(UL(n,i),AN(n.localStore,i,!0))),pR(n.remoteStore,i)}),yield t,yield rV(n,e),function(e){const t=Jk(e);t.ic.forEach((e,n)=>{pR(t.remoteStore,n)}),t.rc.cs(),t.ic=new Map,t.sc=new Qx(wx.comparator)}(n),n.ac=!1,yield KR(n.remoteStore,!1)}})).apply(this,arguments)}function rV(e,t,n){return iV.apply(this,arguments)}function iV(){return(iV=mh(function*(e,t,n){const r=Jk(e),i=[],s=[];for(const o of t){let e;const t=r.ec.get(o);if(t&&0!==t.length){e=yield xN(r.localStore,pO(t[0]));for(const e of t){const t=r.tc.get(e),n=yield JL(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield PN(r.localStore,o);e=yield xN(r.localStore,t),yield CL(r,sV(t),o,!1)}i.push(e)}return r.Zu.Go(s),i})).apply(this,arguments)}function sV(e){return cO(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function oV(e){const t=Jk(e);return Jk(Jk(t.localStore).persistence).Ri()}function aV(e,t,n,r){return cV.apply(this,arguments)}function cV(){return(cV=mh(function*(e,t,n,r){const i=Jk(e);if(i.ac)return void zk("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=yield DN(i.localStore,bO(s[0])),r=bM.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield HL(i,e,r);break}case"rejected":yield AN(i.localStore,t,!0),UL(i,t,r);break;default:Wk()}})).apply(this,arguments)}function uV(e,t,n){return lV.apply(this,arguments)}function lV(){return(lV=mh(function*(e,t,n){const r=hV(e);if(r.ac){for(const e of t){if(r.ec.has(e)){zk("SyncEngine","Adding an already active target "+e);continue}const t=yield PN(r.localStore,e),n=yield xN(r.localStore,t);yield CL(r,sV(t),n.targetId,!1),fR(r.remoteStore,n)}for(const e of n)r.ec.has(e)&&(yield AN(r.localStore,e,!1).then(()=>{pR(r.remoteStore,e),UL(r,e)}).catch(Mx))}})).apply(this,arguments)}function hV(e){const t=Jk(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ML.bind(null,t),t.Zu.Go=aL.bind(null,t.eventManager),t.Zu.lc=cL.bind(null,t.eventManager),t}function dV(e){const t=Jk(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=DL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RL.bind(null,t),t}class fV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return mh(function*(){t.wt=tR(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return bN(this.persistence,new vN,e.initialUser,this.wt)}_c(e){return new aN(uN.Ms,this.wt)}dc(e){return new GN}terminate(){var e=this;return mh(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pV extends fV{constructor(e,t,n){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return mh(function*(){yield t().call(n,e),yield n.yc.initialize(n,e),yield dV(n.yc.syncEngine),yield OR(n.yc.remoteStore),yield n.persistence.ci(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(),n.indexBackfillerScheduler&&!n.indexBackfillerScheduler.started&&n.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return bN(this.persistence,new vN,e.initialUser,this.wt)}mc(e,t){return new FD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const n=new zx(t,this.persistence);return new $x(e.asyncQueue,n)}_c(e){const t=mN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?CD.withCacheSize(this.cacheSizeBytes):CD.DEFAULT;return new fN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ZN(),eR(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new GN}}class gV extends pV{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return mh(function*(){yield t().call(n,e);const r=n.yc.syncEngine;n.sharedClientState instanceof KN&&(n.sharedClientState.syncEngine={kr:eV.bind(null,r),Or:aV.bind(null,r),Mr:uV.bind(null,r),Ri:oV.bind(null,r),Nr:XL.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.ci(function(){var e=mh(function*(e){yield function(e,t){return nV.apply(this,arguments)}(n.yc.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start():e||n.gcScheduler.stop()),n.indexBackfillerScheduler&&(e&&!n.indexBackfillerScheduler.started?n.indexBackfillerScheduler.start():e||n.indexBackfillerScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}dc(e){const t=ZN();if(!KN.V(t))throw new Xk(Yk.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=mN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KN(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class mV{initialize(e,t){var n=this;return mh(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>OL(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=GL.bind(null,n.syncEngine),yield KR(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new nL}createDatastore(e){const t=tR(e.databaseInfo.databaseId),n=new XN(e.databaseInfo);return function(e,t,n,r){return new oR(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>OL(this.syncEngine,e,0),s=QN.V()?new QN:new WN,new cR(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new bL(e,t,n,r,i,s);return o&&(a.ac=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=mh(function*(e){const t=Jk(e);zk("RemoteStore","RemoteStore shutting down."),t.lu.add(5),yield hR(t),t.du.shutdown(),t._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function yV(e,t=10240){let n=0;return{read:()=>mh(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>mh(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class vV{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wV{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Zk,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(e=>{e&&e.Cu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return mh(function*(){return e.metadata.promise})()}fc(){var e=this;return mh(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return mh(function*(){const t=yield e.bc();if(null===t)return null;const n=e.Ac.decode(t),r=Number(n);isNaN(r)&&e.Pc(`length string (${n}) is not valid number`);const i=yield e.vc(r);return new hL(JSON.parse(i),t.length+r)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return mh(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}vc(e){var t=this;return mh(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const n=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return mh(function*(){const t=yield e.Ec.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class bV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return mh(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Xk(Yk.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=mh(function*(e,t){const n=Jk(e),r=qM(n.wt)+"/documents",i={documents:t.map(e=>FM(n.wt,e))},s=yield n.ao("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Qk(!!t.found);const n=jM(e,t.found.name),r=RM(t.found.updateTime),i=new LA({mapValue:{fields:t.found.fields}});return FA.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Qk(!!t.missing),Qk(!!t.readTime);const n=jM(e,t.missing),r=RM(t.readTime);return FA.newNoDocument(n,r)}(e,t):Wk()}(n.wt,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Qk(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ZO(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return mh(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=wx.fromPath(n);e.mutations.push(new eM(r,e.precondition(r)))}),yield(n=mh(function*(e,t){const n=Jk(e),r=qM(n.wt)+"/documents",i={writes:t.map(e=>KM(n.wt,e))};yield n.ro("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wk();t=px.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xk(Yk.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?UO.updateTime(t):UO.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(px.min()))throw new Xk(Yk.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return UO.updateTime(t)}return UO.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _V{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Dc=n.maxAttempts,this.So=new nR(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io(mh(function*(){const t=new bV(e.datastore),n=e.xc(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.Nc(t)}))}).catch(t=>{e.Nc(t)})}))}xc(e){try{const t=this.updateFunction(e);return!dA(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!iM(t)}return!1}}class IV{constructor(e,t,n,r){var i=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Uk.UNAUTHENTICATED,this.clientId=ux.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=mh(function*(e){zk("FirestoreClient","Received user=",e.uid),yield i.authCredentialListener(e),i.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,e=>(zk("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}getConfiguration(){var e=this;return mh(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xk(Yk.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Zk;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(mh(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=YR(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function CV(e,t){return EV.apply(this,arguments)}function EV(){return(EV=mh(function*(e,t){e.asyncQueue.verifyOperationInProgress(),zk("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=mh(function*(e){r.isEqual(e)||(yield _N(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function TV(e,t){return SV.apply(this,arguments)}function SV(){return(SV=mh(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield kV(e);zk("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>zR(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>zR(t.remoteStore,n)),e.onlineComponents=t})).apply(this,arguments)}function kV(e){return xV.apply(this,arguments)}function xV(){return(xV=mh(function*(e){return e.offlineComponents||(zk("FirestoreClient","Using default OfflineComponentProvider"),yield CV(e,new fV)),e.offlineComponents})).apply(this,arguments)}function AV(e){return OV.apply(this,arguments)}function OV(){return(OV=mh(function*(e){return e.onlineComponents||(zk("FirestoreClient","Using default OnlineComponentProvider"),yield TV(e,new mV)),e.onlineComponents})).apply(this,arguments)}function MV(e){return kV(e).then(e=>e.persistence)}function PV(e){return kV(e).then(e=>e.localStore)}function DV(e){return AV(e).then(e=>e.remoteStore)}function NV(e){return AV(e).then(e=>e.syncEngine)}function RV(e){return LV.apply(this,arguments)}function LV(){return(LV=mh(function*(e){const t=yield AV(e),n=t.eventManager;return n.onListen=_L.bind(null,t.syncEngine),n.onUnlisten=TL.bind(null,t.syncEngine),n})).apply(this,arguments)}function VV(e,t,n={}){const r=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){return function(e,t,n,r,i){const s=new vV({next:s=>{t.enqueueAndForget(()=>sL(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Xk(Yk.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Xk(Yk.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new lL(uO(n.path),s,{includeMetadataChanges:!0,Du:!0});return rL(e,o)}(yield RV(e),e.asyncQueue,t,n,r)})),r.promise}function FV(e,t,n={}){const r=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){return function(e,t,n,r,i){const s=new vV({next:n=>{t.enqueueAndForget(()=>sL(e,o)),n.fromCache&&"server"===r.source?i.reject(new Xk(Yk.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new lL(n,s,{includeMetadataChanges:!0,Du:!0});return rL(e,o)}(yield RV(e),e.asyncQueue,t,n,r)})),r.promise}const jV=new Map;function UV(e,t,n){if(!n)throw new Xk(Yk.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function BV(e){if(!wx.isDocumentKey(e))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function qV(e){if(wx.isDocumentKey(e))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $V(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Wk()}function zV(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xk(Yk.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$V(e);throw new Xk(Yk.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function HV(e,t){if(t<=0)throw new Xk(Yk.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class KV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Xk(Yk.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xk(Yk.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Xk(Yk.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class GV{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KV({}),this._settingsFrozen=!1,e instanceof hA?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xk(Yk.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hA(e.options.projectId)}(e))}get app(){if(!this._app)throw new Xk(Yk.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xk(Yk.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KV(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tx;switch(e.type){case"gapi":const t=e.client;return Qk(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new sx(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Xk(Yk.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jV.get(e);t&&(zk("ComponentProvider","Removing Datastore"),jV.delete(e),t.terminate())}(this),Promise.resolve()}}class WV{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new JV(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new WV(this.firestore,e,this._key)}}class QV{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new QV(this.firestore,e,this._query)}}class JV extends QV{constructor(e,t,n){super(e,t,uO(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new WV(this.firestore,null,new wx(e))}withConverter(e){return new JV(this.firestore,e,this._path)}}function YV(e,t,...n){if(e=Uh(e),1===arguments.length&&(t=ux.I()),UV("doc","path",t),e instanceof GV){const r=mx.fromString(t,...n);return BV(r),new WV(e,null,new wx(r))}{if(!(e instanceof WV||e instanceof JV))throw new Xk(Yk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mx.fromString(t,...n));return BV(r),new WV(e.firestore,e instanceof JV?e.converter:null,new wx(r))}}function XV(e,t){return e=Uh(e),t=Uh(t),(e instanceof WV||e instanceof JV)&&(t instanceof WV||t instanceof JV)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ZV(e,t){return e=Uh(e),t=Uh(t),e instanceof QV&&t instanceof QV&&e.firestore===t.firestore&&mO(e._query,t._query)&&e.converter===t.converter}class eF{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new nR(this,"async_queue_retry"),this.Kc=()=>{const e=eR();e&&zk("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=eR();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=eR();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Zk;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return mh(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(KC){if(!Fx(KC))throw KC;zk("AsyncQueue","Operation failed with retryable error: "+KC)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(e=>{throw this.Bc=e,this.Lc=!1,Hk("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Lc=!1,e))));return this.Oc=t,t}enqueueAfterDelay(e,t,n){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=JR.createAndSchedule(this,e,t,n,e=>this.Wc(e));return this.$c.push(r),r}Gc(){this.Bc&&Wk()}verifyOperationInProgress(){}zc(){var e=this;return mh(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function tF(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class nF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zk,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rF extends GV{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new eF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||sF(this),this._firestoreClient.terminate()}}function iF(e){return e._firestoreClient||sF(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function sF(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new lA(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new IV(e._authCredentials,e._appCheckCredentials,e._queue,r)}function oF(e,t,n){const r=new Zk;return e.asyncQueue.enqueue(mh(function*(){try{yield CV(e,n),yield TV(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Yk.FAILED_PRECONDITION||e.code===Yk.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function aF(e){if(e._initialized||e._terminated)throw new Xk(Yk.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cF{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Xk(Yk.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vx(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uF{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uF(nA.fromBase64String(e))}catch(e){throw new Xk(Yk.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new uF(nA.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lF{constructor(e){this._methodName=e}}class hF{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xk(Yk.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xk(Yk.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lx(this._lat,e._lat)||lx(this._long,e._long)}}const dF=/^__.*__$/;class fF{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new QO(e,this.data,this.fieldMask,t,this.fieldTransforms):new WO(e,this.data,t,this.fieldTransforms)}}class pF{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new QO(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gF(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wk()}}class mF{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.wt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new mF(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}ia(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return LF(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(gF(this.Zc)&&dF.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class yF{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=n||tR(e)}aa(e,t,n,r=!1){return new mF({Zc:e,methodName:t,ca:n,path:vx.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function vF(e){const t=e._freezeSettings(),n=tR(e._databaseId);return new yF(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wF(e,t,n,r,i,s={}){const o=e.aa(s.merge||s.mergeFields?2:0,t,n,i);PF("Data must be an object, but it was:",o,r);const a=OF(r,o);let c,u;if(s.merge)c=new tA(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=DF(t,r,n);if(!o.contains(i))throw new Xk(Yk.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);VF(e,i)||e.push(i)}c=new tA(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new fF(new LA(a),c,u)}class bF extends lF{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bF}}function _F(e,t,n){return new mF({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class IF extends lF{_toFieldTransform(e){return new FO(e.path,new OO)}isEqual(e){return e instanceof IF}}class CF extends lF{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=_F(this,e,!0),n=this.ha.map(e=>AF(e,t)),r=new MO(n);return new FO(e.path,r)}isEqual(e){return this===e}}class EF extends lF{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=_F(this,e,!0),n=this.ha.map(e=>AF(e,t)),r=new DO(n);return new FO(e.path,r)}isEqual(e){return this===e}}class TF extends lF{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new RO(e.wt,TO(e.wt,this.la));return new FO(e.path,t)}isEqual(e){return this===e}}function SF(e,t,n,r){const i=e.aa(1,t,n);PF("Data must be an object, but it was:",i,r);const s=[],o=LA.empty();Gx(r,(e,r)=>{const a=RF(t,e,n);r=Uh(r);const c=i.ia(a);if(r instanceof bF)s.push(a);else{const e=AF(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new tA(s);return new pF(o,a,i.fieldTransforms)}function kF(e,t,n,r,i,s){const o=e.aa(1,t,n),a=[DF(t,r,n)],c=[i];if(s.length%2!=0)throw new Xk(Yk.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(DF(t,s[d])),c.push(s[d+1]);const u=[],l=LA.empty();for(let d=a.length-1;d>=0;--d)if(!VF(u,a[d])){const e=a[d];let t=c[d];t=Uh(t);const n=o.ia(e);if(t instanceof bF)u.push(e);else{const r=AF(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new tA(u);return new pF(l,h,o.fieldTransforms)}function xF(e,t,n,r=!1){return AF(n,e.aa(r?4:3,t))}function AF(e,t){if(MF(e=Uh(e)))return PF("Unsupported field value:",t,e),OF(e,t);if(e instanceof lF)return function(e,t){if(!gF(t.Zc))throw t.oa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.oa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=AF(i,t.ra(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Uh(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return TO(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=fx.fromDate(e);return{timestampValue:PM(t.wt,n)}}if(e instanceof fx){const n=new fx(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:PM(t.wt,n)}}if(e instanceof hF)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uF)return{bytesValue:DM(t.wt,e._byteString)};if(e instanceof WV){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.oa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:LM(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa(`Unsupported field value: ${$V(e)}`)}(e,t)}function OF(e,t){const n={};return Wx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gx(e,(e,r)=>{const i=AF(r,t.ea(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function MF(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof fx||e instanceof hF||e instanceof uF||e instanceof WV||e instanceof lF)}function PF(e,t,n){if(!MF(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=$V(n);throw t.oa("an object"===r?e+" a custom object":e+" "+r)}}function DF(e,t,n){if((t=Uh(t))instanceof cF)return t._internalPath;if("string"==typeof t)return RF(e,t);throw LF("Field path arguments must be of type string or ",e,!1,void 0,n)}const NF=new RegExp("[~\\*/\\[\\]]");function RF(e,t,n){if(t.search(NF)>=0)throw LF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cF(...t.split("."))._internalPath}catch(r){throw LF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function LF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Xk(Yk.INVALID_ARGUMENT,a+e+c)}function VF(e,t){return e.some(e=>e.isEqual(t))}class FF{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new WV(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UF("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jF extends FF{data(){return super.data()}}function UF(e,t){return"string"==typeof t?RF(e,t):t instanceof cF?t._internalPath:t._delegate._internalPath}class BF{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qF extends FF{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $F(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(UF("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class $F extends qF{data(e={}){return super.data(e)}}class zF{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new BF(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $F(this._firestore,this._userDataWriter,n.key,n,new BF(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xk(Yk.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new $F(e._firestore,e._userDataWriter,n.doc.key,n.doc,new BF(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new $F(e._firestore,e._userDataWriter,t.doc.key,t.doc,new BF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:HF(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HF(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wk()}}function KF(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xk(Yk.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GF{}class WF extends GF{constructor(e,t,n){super(),this.fa=e,this.da=t,this._a=n,this.type="where"}_apply(e){const t=vF(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){tj(o,s);const t=[];for(const n of o)t.push(ej(r,e,n));a={arrayValue:{values:t}}}else a=ej(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||tj(o,s),a=xF(n,"where",o,"in"===s||"not-in"===s);const c=GA.create(i,s,a);return function(e,t){if(t.ht()){const n=hO(e);if(null!==n&&!n.isEqual(t.field))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=lO(e);null!==r&&nj(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Xk(Yk.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new QV(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new aO(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class QF extends GF{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xk(Yk.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xk(Yk.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new rO(t,n);return function(e,t){if(null===lO(e)){const n=hO(e);null!==n&&nj(0,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new QV(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new aO(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class JF extends GF{constructor(e,t,n){super(),this.type=e,this.ma=t,this.ga=n}_apply(e){return new QV(e.firestore,e.converter,gO(e._query,this.ma,this.ga))}}class YF extends GF{constructor(e,t,n){super(),this.type=e,this.ya=t,this.pa=n}_apply(e){const t=ZF(e,this.type,this.ya,this.pa);return new QV(e.firestore,e.converter,function(e,t){return new aO(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class XF extends GF{constructor(e,t,n){super(),this.type=e,this.ya=t,this.pa=n}_apply(e){const t=ZF(e,this.type,this.ya,this.pa);return new QV(e.firestore,e.converter,function(e,t){return new aO(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function ZF(e,t,n,r){if(n[0]=Uh(n[0]),n[0]instanceof FF)return function(e,t,n,r,i){if(!r)throw new Xk(Yk.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of fO(e))if(o.field.isKeyField())s.push(EA(t,r.key));else{const e=r.data.field(o.field);if(aA(e))throw new Xk(Yk.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new nO(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=vF(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Xk(Yk.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!dO(e)&&-1!==s.indexOf("/"))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(mx.fromString(s));if(!wx.isDocumentKey(n))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new wx(n);a.push(EA(t,i))}else{const e=xF(n,r,s);a.push(e)}}return new nO(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ej(e,t,n){if("string"==typeof(n=Uh(n))){if(""===n)throw new Xk(Yk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dO(t)&&-1!==n.indexOf("/"))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(mx.fromString(n));if(!wx.isDocumentKey(r))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EA(e,new wx(r))}if(n instanceof WV)return EA(e,n._key);throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$V(n)}.`)}function tj(e,t){if(!Array.isArray(e)||0===e.length)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function nj(e,t,n){if(!n.isEqual(t))throw new Xk(Yk.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const rj={maxAttempts:5};class ij{convertValue(e,t="none"){switch(yA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sA(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wk()}}convertObject(e,t){const n={};return Gx(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new hF(sA(e.latitude),sA(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=cA(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(uA(e));default:return null}}convertTimestamp(e){const t=iA(e);return new fx(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=mx.fromString(e);Qk(sP(n));const r=new hA(n.get(1),n.get(3)),i=new wx(n.popFirst(5));return r.isEqual(t)||Hk(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function sj(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class oj extends ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new uF(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new WV(this.firestore,null,t)}}class aj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vF(e)}set(e,t,n){this._verifyNotCommitted();const r=cj(e,this._firestore),i=sj(r.converter,t,n),s=wF(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,UO.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=cj(e,this._firestore);let s;return s="string"==typeof(t=Uh(t))||t instanceof cF?kF(this._dataReader,"WriteBatch.update",i._key,t,n,r):SF(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,UO.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cj(e,this._firestore);return this._mutations=this._mutations.concat(new ZO(t._key,UO.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xk(Yk.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cj(e,t){if((e=Uh(e)).firestore!==t)throw new Xk(Yk.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class uj extends ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new uF(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new WV(this.firestore,null,t)}}function lj(e,...t){var n,r,i;e=Uh(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||tF(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(tF(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,l;if(e instanceof WV)u=zV(e.firestore,rF),l=uO(e._key.path),c={next:n=>{t[o]&&t[o](dj(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=zV(e,QV);u=zV(n.firestore,rF),l=n._query;const r=new uj(u);c={next:e=>{t[o]&&t[o](new zF(u,r,n,e))},error:t[o+1],complete:t[o+2]},KF(e._query)}return function(e,t,n,r){const i=new vV(r),s=new lL(t,i,n);return e.asyncQueue.enqueueAndForget(mh(function*(){return rL(yield RV(e),s)})),()=>{i.Tc(),e.asyncQueue.enqueueAndForget(mh(function*(){return sL(yield RV(e),s)}))}}(iF(u),l,a,c)}function hj(e,t){return function(e,t){const n=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){return function(e,t,n){return kL.apply(this,arguments)}(yield NV(e),t,n)})),n.promise}(iF(e),t)}function dj(e,t,n){const r=n.docs.get(t._key),i=new uj(e);return new qF(e,i,t._key,r,new BF(n.hasPendingWrites,n.fromCache),t.converter)}class fj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vF(e)}get(e){const t=cj(e,this._firestore),n=new oj(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Wk();const r=e[0];if(r.isFoundDocument())return new FF(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new FF(this._firestore,n,t._key,null,t.converter);throw Wk()})}set(e,t,n){const r=cj(e,this._firestore),i=sj(r.converter,t,n),s=wF(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=cj(e,this._firestore);let s;return s="string"==typeof(t=Uh(t))||t instanceof cF?kF(this._dataReader,"Transaction.update",i._key,t,n,r):SF(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=cj(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cj(e,this._firestore),n=new uj(this._firestore);return super.get(e).then(e=>new qF(this._firestore,n,t._key,e._document,new BF(!1,!1),t.converter))}}function pj(...e){return H(1)(hu(...e))}!function(e,t=!0){Bk="9.8.3",Ed(new Bh("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new rF(r,new rx(e.getProvider("auth-internal")),new ax(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),Pd(jk,"3.4.10",e),Pd(jk,"3.4.10","esm2017")}();class gj{call(e,t){return t.subscribe(new mj(e))}}class mj extends p{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function yj(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vj(e,t,n))}}class vj{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new wj(e,this.accumulator,this.seed,this.hasSeed))}}class wj extends p{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class bj{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new _j(e,this.compare,this.keySelector))}}class _j extends p{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var Ij={includeMetadataChanges:!1};function Cj(e,t){return void 0===t&&(t=Ij),new b(function(n){return{unsubscribe:lj(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}function Ej(e){return Cj(e,{includeMetadataChanges:!0})}function Tj(e,t){void 0===t&&(t={});var n=e.data();return e.exists()&&"object"==typeof n&&null!==n?(t.idField&&(n[t.idField]=e.id),n):n}var Sj=["added","modified","removed"];function kj(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s=e.slice();return s.splice.apply(s,MC([t,n],r)),s}var xj=function(){return v(function(...e){const t=e[e.length-1];return k(t)?(e.pop(),n=>pj(e,n,t)):t=>pj(e,t)}(void 0),e=>e.lift(new gj))},Aj=function(e,t){return JSON.stringify(e.metadata)===JSON.stringify(t.metadata)};function Oj(e,t){return void 0===t&&(t={}),Cj(e,{includeMetadataChanges:!0}).pipe(xj(),x(function(e){var t=e[0],n=e[1],r=n.docChanges();return t&&!Aj(t,n)&&n.docs.forEach(function(e,n){var i=r.find(function(t){return XV(t.doc.ref,e.ref)});if(i){if(Aj(i.doc,e))return}else{var s=null==t?void 0:t.docs.find(function(t){return XV(t.ref,e.ref)});if(s&&Aj(s,e))return}r.push({oldIndex:n,newIndex:n,type:"modified",doc:e})}),r}),(n=t.events||Sj,du(function(e){for(var t=!1,r=0;r<e.length;r++)if(n&&n.indexOf(e[r].type)>=0){t=!0;break}return t})),v(xj(),du(function(e){return e[1].length>0||void 0===e[0]}),x(function(e){return e[1]})));var n}function Mj(e){return Cj(e,{includeMetadataChanges:!0}).pipe(x(function(e){return e.docs}))}class Pj{constructor(e){return e}}const Dj="firestore";yy(0,300).pipe(Py(()=>Oy(oy(Dj))),Dy());const Nj=new Ln("angularfire2.firestore-instances");function Rj(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Pj(r)}}const Lj={provide:class{constructor(){return oy(Dj)}},deps:[[new Zn,Nj]]},Vj={provide:Pj,useFactory:function(e,t){const n=function(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider("firestore").getImmediate({optional:!0})}(0,e,t);return n&&new Pj(n)},deps:[[new Zn,Nj],Ny]};let Fj=(()=>{class e{constructor(){Pd("angularfire",Zm.full,"fst")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[Vj,Lj]}),e})();function jj(e,...t){return{ngModule:Fj,providers:[{provide:Nj,useFactory:Rj(e),multi:!0,deps:[tc,ms,ly,Ry,[new Zn,FI],[new Zn,OC],...t]}]}}my(Oj,!0),my(Mj,!0),my(function(e,t){return void 0===t&&(t={}),Oj(e,t).pipe(yj(function(e,n){return function(e,t,n){return void 0===n&&(n=Sj),t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!XV(e[t.newIndex].doc.ref,t.doc.ref))return kj(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||XV(e[t.oldIndex].doc.ref,t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return kj(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&XV(e[t.oldIndex].doc.ref,t.doc.ref))return kj(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n,t.events)},[]),e=>e.lift(new bj(void 0,void 0)))},!0),my(function(e,t){return void 0===t&&(t={}),Oj(e,t).pipe(yj(function(e,t){return MC(MC([],e),t)},[]))},!0);const Uj=my(function(e,t){return void 0===t&&(t={}),Mj(e).pipe(x(function(e){return e.map(function(e){return Tj(e,t)})}))},!0),Bj=(my(Ej,!0),my(function(e,t){return void 0===t&&(t={}),Ej(e).pipe(x(function(e){return Tj(e,t)}))},!0),my(Tj,!0),my(Cj,!0),my(function(e,t){const n=zV(e.firestore,rF),r=YV(e),i=sj(e.converter,t);return hj(n,[wF(vF(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,UO.exists(!1))]).then(()=>r)},!0)),qj=(my(function(...e){return new EF("arrayRemove",e)},!0),my(function(...e){return new CF("arrayUnion",e)},!0),my(function(e){if(e._initialized&&!e._terminated)throw new Xk(Yk.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Zk;return e._queue.enqueueAndForgetEvenWhileRestricted(mh(function*(){try{yield(n=mh(function*(e){if(!Rx.V())return Promise.resolve();const t=e+"main";yield Rx.delete(t)}),function(e){return n.apply(this,arguments)})(mN(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise},!0),my(function(e,t,...n){if(e=Uh(e),UV("collection","path",t),e instanceof GV){const r=mx.fromString(t,...n);return qV(r),new JV(e,null,r)}{if(!(e instanceof WV||e instanceof JV))throw new Xk(Yk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mx.fromString(t,...n));return qV(r),new JV(e.firestore,null,r)}},!0)),$j=(my(function(e,t){if(e=zV(e,GV),UV("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xk(Yk.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new QV(e,null,function(e){return new aO(mx.emptyPath(),e)}(t))},!0),my(function(e,t,n,r={}){var i;const s=(e=zV(e,GV))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Kk("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Uk.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[wh(JSON.stringify({alg:"none",type:"JWT"})),wh(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xk(Yk.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Uk(s)}e._authCredentials=new nx(new ex(t,n))}},!0),my(function(e){return hj(zV(e.firestore,rF),[new ZO(e._key,UO.none())])},!0),my(function(){return new bF("deleteField")},!0),my(function(e){return function(e){return e.asyncQueue.enqueue(mh(function*(){const t=yield MV(e),n=yield DV(e);return t.setNetworkEnabled(!1),(r=mh(function*(e){const t=Jk(e);t.lu.add(0),yield hR(t),t._u.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(iF(e=zV(e,rF)))},!0),my(YV,!0),my(function(){return new cF("__name__")},!0),my(function(e,t){aF(e=zV(e,rF));const n=iF(e),r=e._freezeSettings(),i=new mV;return oF(n,i,new pV(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))},!0),my(function(e){aF(e=zV(e,rF));const t=iF(e),n=e._freezeSettings(),r=new mV;return oF(t,r,new gV(r,n.cacheSizeBytes))},!0),my(function(e){return function(e){return e.asyncQueue.enqueue(mh(function*(){const t=yield MV(e),n=yield DV(e);return t.setNetworkEnabled(!0),function(e){const t=Jk(e);return t.lu.delete(0),uR(t)}(n)}))}(iF(e=zV(e,rF)))},!0),my(function(...e){return new XF("endAt",e,!0)},!0),my(function(...e){return new XF("endBefore",e,!1)},!0),my(function(e){e=zV(e,WV);const t=zV(e.firestore,rF);return VV(iF(t),e._key).then(n=>dj(t,e,n))},!0),my(function(e){e=zV(e,WV);const t=zV(e.firestore,rF),n=iF(t),r=new uj(t);return function(e,t){const n=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){return(r=mh(function*(e,t,n){try{const r=yield function(e,t){const n=Jk(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Xk(Yk.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=YR(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield PV(e),t,n);var r})),n.promise}(n,e._key).then(n=>new qF(t,r,e._key,n,new BF(null!==n&&n.hasLocalMutations,!0),e.converter))},!0),my(function(e){e=zV(e,WV);const t=zV(e.firestore,rF);return VV(iF(t),e._key,{source:"server"}).then(n=>dj(t,e,n))},!0),my(function(e){e=zV(e,QV);const t=zV(e.firestore,rF),n=iF(t),r=new uj(t);return KF(e._query),FV(n,e._query).then(n=>new zF(t,r,e,n))},!0),my(function(e){e=zV(e,QV);const t=zV(e.firestore,rF),n=iF(t),r=new uj(t);return function(e,t){const n=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){return(r=mh(function*(e,t,n){try{const r=yield MN(e,t,!0),i=new yL(t,r.ji),s=i.Ku(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=YR(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield PV(e),t,n);var r})),n.promise}(n,e._query).then(n=>new zF(t,r,e,n))},!0),my(function(e){e=zV(e,QV);const t=zV(e.firestore,rF),n=iF(t),r=new uj(t);return FV(n,e._query,{source:"server"}).then(n=>new zF(t,r,e,n))},!0),my(function(e=Ad()){return Td(e,"firestore").getImmediate()},!0));my(function(e){return new TF("increment",e)},!0),my(function(e,t){const n=Td(e,"firestore");if(n.isInitialized()){const e=n.getImmediate();if(Ph(n.getOptions(),t))return e;throw new Xk(Yk.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xk(Yk.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:t})},!0),my(function(e){return HV("limit",e),new JF("limit",e,"F")},!0),my(function(e){return HV("limitToLast",e),new JF("limitToLast",e,"L")},!0),my(function(e,t){const n=iF(e=zV(e,rF)),r=new nF;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new wV(e,t)}(function(e,t){if(e instanceof Uint8Array)return yV(e,t);if(e instanceof ArrayBuffer)return yV(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,tR(t));e.asyncQueue.enqueueAndForget(mh(function*(){!function(e,t,n){const r=Jk(e);var i;(i=mh(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Jk(e),r=RM(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ds.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(pL(r));const i=new fL(r,e.localStore,t.wt);let s=yield t.fc();for(;s;){const e=yield i.Nu(s);e&&n._updateProgress(e),s=yield t.fc()}const o=yield i.complete();return yield HL(e,o.Mu,void 0),yield function(e,t){const n=Jk(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ds.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ou)}catch(e){return Kk("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(yield NV(e),i,r)}))}(n,e._databaseId,t,r),r},!0),my(function(e,t){return function(e,t){return e.asyncQueue.enqueue(mh(function*(){return function(e,t){const n=Jk(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ds.getNamedQuery(e,t))}(yield PV(e),t)}))}(iF(e=zV(e,rF)),t).then(t=>t?new QV(e,null,t.query):null)},!0),my(lj,!0),my(function(e,t){return function(e,t){const n=new vV(t);return e.asyncQueue.enqueueAndForget(mh(function*(){return function(e,t){Jk(e).Tu.add(t),t.next()}(yield RV(e),n)})),()=>{n.Tc(),e.asyncQueue.enqueueAndForget(mh(function*(){return function(e,t){Jk(e).Tu.delete(t)}(yield RV(e),n)}))}}(iF(e=zV(e,rF)),tF(t)?t:{next:t})},!0),my(function(e,t="asc"){const n=t,r=UF("orderBy",e);return new QF(r,n)},!0),my(function(e,...t){for(const n of t)e=n._apply(e);return e},!0),my(ZV,!0),my(XV,!0),my(function(e,t,n){e=zV(e,rF);const r=Object.assign(Object.assign({},rj),n);return function(e){if(e.maxAttempts<1)throw new Xk(Yk.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){const i=yield function(e){return AV(e).then(e=>e.datastore)}(e);new _V(e.asyncQueue,i,n,t,r).run()})),r.promise}(iF(e),n=>t(new fj(e,n)),r)},!0),my(function(){return new IF("serverTimestamp")},!0),my(function(e,t,n){e=zV(e,WV);const r=zV(e.firestore,rF),i=sj(e.converter,t,n);return hj(r,[wF(vF(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,UO.none())])},!0),my(function(e){qk.setLogLevel(e)},!0),my(function(e,t){return e instanceof qF&&t instanceof qF?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof zF&&t instanceof zF&&e._firestore===t._firestore&&ZV(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},!0),my(function(...e){return new YF("startAfter",e,!1)},!0),my(function(...e){return new YF("startAt",e,!0)},!0),my(function(e){return function(e,t,n="[DEFAULT]"){Td(e,"firestore").clearInstance(n)}(e.app),e._delete()},!0),my(function(e,t,n,...r){e=zV(e,WV);const i=zV(e.firestore,rF),s=vF(i);let o;return o="string"==typeof(t=Uh(t))||t instanceof cF?kF(s,"updateDoc",e._key,t,n,r):SF(s,"updateDoc",e._key,t),hj(i,[o.toMutation(e._key,UO.exists(!0))])},!0),my(function(e){return function(e){const t=new Zk;return e.asyncQueue.enqueueAndForget(mh(function*(){return function(e,t){return VL.apply(this,arguments)}(yield NV(e),t)})),t.promise}(iF(e=zV(e,rF)))},!0),my(function(e,t,n){const r=t,i=UF("where",e);return new WF(i,r,n)},!0),my(function(e){return iF(e=zV(e,rF)),new aj(e,t=>hj(e,t))},!0);let zj=(()=>{class e{constructor(e){this.firestore=e}addRSVP(e,t){const n=qj(this.firestore,t?"rsvp":"rsvp-jb");return Bj(n,e)}getRSVPs(e){const t=qj(this.firestore,e?"rsvp":"rsvp-jb");return Uj(t,{idField:"id"})}}return e.\u0275fac=function(t){return new(t||e)(Qn(Pj))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),Hj=(()=>{class e{constructor(e,t,n,r){this.document=e,this.fb=t,this.http=n,this.firebaseProvider=r,this.rsvp={name:"",phone:"",pax:"",address:""},this.rsvps=[],this.hasError=!1,this.isLoading=!1,this.isKL=!0,console.log(this.document.location.href)}ngOnInit(){this.firebaseProvider.getRSVPs(this.isKL).subscribe(e=>{this.rsvps=e,console.table(this.rsvps)}),this.confirmationModal=new window.bootstrap.Modal(document.getElementById("confirmationModal")),this.errorModal=new window.bootstrap.Modal(document.getElementById("errorModal")),console.log(this.isKL)}onSubmit(e){this.validate(e),this.hasError||(this.isLoading=!0,this.firebaseProvider.addRSVP(e.value,this.isKL).then(()=>{this.openConfirmationModal(),e.reset(),this.isLoading=!1}))}openConfirmationModal(){console.log("open"),this.confirmationModal.show()}openErrorModal(){this.errorModal.show()}validate(e){console.log(e.value);var t=e.value;this.hasError=!!(this.isStringNullOrEmpty(t.name)||this.isStringNullOrEmpty(t.phone)||this.isStringNullOrEmpty(t.pax))}isStringNullOrEmpty(e){return null==e||0==e.toString().trim().length}}return e.\u0275fac=function(t){return new(t||e)(Os(kc),Os(Jl),Os(Du),Os(zj))},e.\u0275cmp=ze({type:e,selectors:[["app-rsvp-form"]],inputs:{isKL:"isKL"},decls:40,vars:7,consts:[[1,""],[1,"form",3,"ngSubmit"],["rsvpForm","ngForm"],["id","name","name","name","placeholder","Your name..","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["id","phone","name","phone","placeholder","Your phone number..","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","pax","name","pax","placeholder","# of Guests","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","address","name","address","placeholder","Mailing Address","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"accept",3,"disabled"],[1,"bi","bi-plus"],[1,"errorTxt",3,"ngClass"],["id","confirmationModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","errorModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","errorModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"]],template:function(e,t){if(1&e){const e=xt();Ds(0,"div",0),Ds(1,"div",0),Ds(2,"form",1,2),Fs("ngSubmit",function(){St.lFrame.contextLView=e;const n=As(3);return t.onSubmit(n)}),Ds(4,"input",3,4),Fs("ngModelChange",function(e){return t.rsvp.name=e}),Ns(),Ds(6,"input",5,4),Fs("ngModelChange",function(e){return t.rsvp.phone=e}),Ns(),Ds(8,"input",6,4),Fs("ngModelChange",function(e){return t.rsvp.pax=e}),Ns(),Ds(10,"input",7,4),Fs("ngModelChange",function(e){return t.rsvp.address=e}),Ns(),Ds(12,"button",8),Rs(13,"i",9),Ws(14,"RSVP"),Ns(),Ns(),Ds(15,"div"),Ds(16,"span",10),Ws(17,"Kindly complete all the fields with the necessary information."),Ns(),Ns(),Ns(),Ds(18,"div",11),Ds(19,"div",12),Ds(20,"div",13),Ds(21,"div",14),Ds(22,"h3"),Ws(23,"Thanks for responding!"),Ns(),Ns(),Ds(24,"div",15),Ds(25,"button",16),Ws(26," Close "),Ns(),Ns(),Ns(),Ns(),Ns(),Ds(27,"div",17),Ds(28,"div",12),Ds(29,"div",13),Ds(30,"div",18),Ds(31,"h5",19),Ws(32,"Error"),Ns(),Rs(33,"button",20),Ns(),Ds(34,"div",14),Ds(35,"h3"),Ws(36,"Thanks for responding!"),Ns(),Ns(),Ds(37,"div",15),Ds(38,"button",16),Ws(39," Close "),Ns(),Ns(),Ns(),Ns(),Ns(),Ns()}if(2&e){const e=As(3);di(4),Ms("ngModel",t.rsvp.name),di(2),Ms("ngModel",t.rsvp.phone),di(2),Ms("ngModel",t.rsvp.pax),di(2),Ms("ngModel",t.rsvp.address),di(2),Ms("disabled",!e.valid)("disabled",e.invalid||t.isLoading),di(4),Ms("ngClass",t.hasError?"show":"hide")}},directives:[Ul,gl,Ll,Zu,Kl,pl,jl,ql,Pc],styles:[".container[_ngcontent-%COMP%]{margin:5em}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:15px;color:#666;padding:6px;margin:25px auto 20px;display:block;width:75%}input[_ngcontent-%COMP%]:focus{outline:0}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:400px}button[_ngcontent-%COMP%]{width:75%;margin:25px auto 20px;display:block;border-radius:.375rem;background:#4f3566;color:#fff;padding:.5em}button[_ngcontent-%COMP%]:hover{background-color:#12071b;transition:.5s}button[_ngcontent-%COMP%]:focus{outline:0}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.errorTxt[_ngcontent-%COMP%]{visibility:hidden;color:red;font-family:Courier New,Courier,monospace}.show[_ngcontent-%COMP%]{visibility:visible}.hide[_ngcontent-%COMP%]{visibility:hidden}.modal[_ngcontent-%COMP%]{top:50%}.modal-footer[_ngcontent-%COMP%]{justify-content:center}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}"]}),e})(),Kj=(()=>{class e{constructor(e){this.document=e,this.title="ng-wedding-eInvitation",this.isKL=!0,console.log(this.document.location.href),-1==this.document.location.href.toLowerCase().indexOf("kl")&&(this.isKL=!1)}ngOnInit(){(class{static initialize(e=Math.floor((window.innerHeight+window.innerWidth)/100),t=[5,25+Math.floor((window.innerHeight+window.innerWidth)/100)],n=[{fill:"#ffffea",glow:"#ff881b"}],r=!0,i=!0,s=!0,o=!1){this.terminate(),Zl=document.createElement("canvas"),document.body.appendChild(Zl),eh=Zl.getContext("2d"),Zl.width=window.innerWidth,Zl.height=window.innerHeight,eh.globalCompositeOperation="screen";for(let c=0;c<e;c++){let e;"[object Array]"===Object.prototype.toString.call(t)?(e=Yl(t[0],t[1]),rh=1.5*t[1]):(e=t,rh=1.5*t);const u=Yl(e,Zl.width-e),l=Yl(e,Zl.height-e),h=(a=n)[Math.floor(Math.random()*a.length)];ih[c]=new ch(u,l,e,h,r,i,s,o)}var a;addEventListener("resize",oh),addEventListener("mousemove",ah),sh()}static terminate(){cancelAnimationFrame(th),removeEventListener("resize",oh),removeEventListener("mousemove",ah);for(let e=0;e<ih.length;e++)ih.splice(0,ih.length);Zl&&Zl.remove()}}).initialize(15,[5,30],[{fill:"#ffffff",glow:"#eee063"}],!0,!0,!0,!0)}}return e.\u0275fac=function(t){return new(t||e)(Os(kc))},e.\u0275cmp=ze({type:e,selectors:[["app-root"]],decls:46,vars:3,consts:function(){let e;return e="Home",[["role","main",1,"content"],[1,"nav"],["href","#"],e,["href","#couple"],["href","#wedding"],["href","#biography"],["href","#link"],["href","#rsvp"],[1,"banner-area"],[1,"fs",3,"isKL"],["id","couple",1,"couple-area"],[1,"bg-image"],[1,"section-title"],["id","biography",1,"biography-area"],["id","gallery",1,"gallery-area"],["id","wedding",1,"wedding-area"],[1,"fs","blur-bg",3,"isKL"],["id","link",1,"link-area"],["id","rsvp",1,"rsvp-area"],["id","rsvp-form",1,"fs",3,"isKL"]]},template:function(e,t){1&e&&(Ds(0,"div",0),Ds(1,"header"),Ds(2,"ul",1),Ds(3,"li"),Ds(4,"a",2),Ro(5,3),Ns(),Ns(),Ds(6,"li"),Ds(7,"a",4),Ws(8,"Couple"),Ns(),Ns(),Ds(9,"li"),Ds(10,"a",5),Ws(11,"Venue"),Ns(),Ns(),Ds(12,"li"),Ds(13,"a",6),Ws(14,"Biography"),Ns(),Ns(),Ds(15,"li"),Ds(16,"a",7),Ws(17,"Links"),Ns(),Ns(),Ds(18,"li"),Ds(19,"a",8),Ws(20,"RSVP"),Ns(),Ns(),Ns(),Ns(),Ds(21,"section",9),Rs(22,"app-hero",10),Ns(),Ds(23,"section",11),Rs(24,"div",12),Ds(25,"h1",13),Ws(26,"The Happy Couple"),Ns(),Rs(27,"app-couple"),Ns(),Ds(28,"section",14),Ds(29,"h1",13),Ws(30,"Biography"),Ns(),Rs(31,"app-biography"),Ns(),Ds(32,"section",15),Rs(33,"app-gallery"),Ns(),Ds(34,"section",16),Ds(35,"h1",13),Ws(36,"The Venue "),Ns(),Rs(37,"app-venue",17),Ns(),Ds(38,"section",18),Ds(39,"h1",13),Ws(40,"Links"),Ns(),Rs(41,"app-link"),Ns(),Ds(42,"section",19),Ds(43,"h1",13),Ws(44,"Will you be attending?"),Ns(),Rs(45,"app-rsvp-form",20),Ns(),Ns()),2&e&&(di(22),Ms("isKL",t.isKL),di(15),Ms("isKL",t.isKL),di(8),Ms("isKL",t.isKL))},directives:[uh,lh,hh,dh,fh,ph,Hj],styles:['.card[_ngcontent-%COMP%]{padding:1em;margin:1em;border-radius:.5em;display:flex;flex-direction:column}header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:10;width:100%;display:flex;justify-content:center;align-items:center;color:#fff;margin-top:1em;font-size:1.5em;background-color:#104e4e70}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:1em}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:flex}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 1em}.banner-area[_ngcontent-%COMP%], .gallery-area[_ngcontent-%COMP%]{justify-content:center}.banner-area[_ngcontent-%COMP%]{position:relative;min-height:100vh;color:#fff;text-align:center}.section-title[_ngcontent-%COMP%]{color:#fff}.couple-area[_ngcontent-%COMP%]{position:relative}.bg-image[_ngcontent-%COMP%]{display:none;background-image:url(ring-cropped2.35cb5827d861335e7ede.png);background-repeat:no-repeat;background-size:contain;overflow:hidden;filter:blur(.15em) contrast(.5) opacity(.7);position:absolute;background-position:bottom;width:100%;height:100%}.wedding-area[_ngcontent-%COMP%]   .wedding-title[_ngcontent-%COMP%]{height:20%}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]{display:flex;width:75%;flex-direction:row;justify-content:space-evenly;flex-wrap:wrap}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{position:relative;min-width:600px;width:40%;display:flex;flex-direction:row;margin:1em 1em 2em;min-height:400px}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{padding:1em;color:#000;display:flex;justify-content:space-between;align-items:flex-end}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   .year-txt[_ngcontent-%COMP%]{font-size:2em}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:4em}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]{margin:0;padding:5px;background-color:#000;border-radius:2em;display:flex;justify-content:space-evenly;flex-wrap:wrap}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;display:inline-block;width:13.6%;text-align:center;color:#fff}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{padding:5px;margin:0;display:flex;flex-wrap:wrap;justify-content:space-evenly}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;display:inline-block;width:13.6%;text-align:center;margin-bottom:5px;color:#777;font-weight:700}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{position:relative;color:#fff!important}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#000;z-index:-1;transform:scale(2)}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{z-index:2}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:0;margin-top:1em;width:100%;z-index:2}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{border:.5em solid #000;position:absolute;padding:1em;margin-bottom:3em;display:flex;flex-direction:column;background-color:#fff;font-family:Ma Shan Zheng,Dancing script,"cursive";font-size:1.5em;width:100%;height:70%}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:.2em;width:100%;border-bottom:2px solid #000}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-txt-container[_ngcontent-%COMP%]{justify-content:flex-start}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-txt-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-txt-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3em}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #date-info-card[_ngcontent-%COMP%]{right:0;padding-left:4em;align-items:flex-start;justify-content:flex-start}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #venue-info-card[_ngcontent-%COMP%]{left:0;padding-right:4em;align-items:flex-end;justify-content:flex-start;text-align:right}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   #venue-card-container[_ngcontent-%COMP%]{flex-direction:row-reverse}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   #venue-card-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:100%;width:auto}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-family:Dancing script;font-size:2em}@media only screen and (max-width:768px){header[_ngcontent-%COMP%]{flex-direction:column}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1em}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 .5em}.banner-area[_ngcontent-%COMP%]{min-height:100vh}.banner-area[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1em}.banner-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.card-container[_ngcontent-%COMP%]{flex-direction:column!important;min-width:80%!important;width:unset!important;align-items:center!important}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:70%!important;margin-bottom:1em}.card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{position:relative!important;padding:1em!important;width:unset!important;text-align:start!important}}@media only screen and (max-width:1040px){.bg-image[_ngcontent-%COMP%]{display:block}}']}),e})();const Gj={apiKey:"AIzaSyAfOWLsTPy_bvwFsJEA4ML3aigQfuDSbcQ",authDomain:"einvite-ede8d.firebaseapp.com",projectId:"einvite-ede8d",storageBucket:"einvite-ede8d.appspot.com",messagingSenderId:"447945930691",appId:"1:447945930691:web:9cae5f8780fc8bb21c2f76"};let Wj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[[lu]]}),e})(),Qj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e,bootstrap:[Kj]}),e.\u0275inj=pe({providers:[Jl,zj],imports:[[lu,Wl,Ql,Ku,Wj,By(()=>qy(Gj)),jj(()=>$j())]]}),e})();(function(){if(pc)throw new Error("Cannot enable prod mode after platform setup.");fc=!1})(),cu().bootstrapModule(Qj).catch(e=>console.error(e))}},e=>{"use strict";e(e.s=37)}]);