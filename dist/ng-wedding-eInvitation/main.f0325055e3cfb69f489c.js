(self.webpackChunkng_wedding_e_invitation=self.webpackChunkng_wedding_e_invitation||[]).push([[179],{255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=255,e.exports=t},955:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function u(e){return null!==e&&"object"==typeof e}const l=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){t=a instanceof l?d(a.errors):[a]}}if(c(o)){let e=-1,n=o.length;for(;++e<n;){const n=o[e];if(u(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof l?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new l(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof l?t.errors:t),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[f](){return this}static create(e,t,n){const r=new p(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends p{constructor(e,t,n,i){let s;super(),this._parentSubscriber=e;let o=this;r(t)?s=t:t&&(s=t.next,n=t.error,i=t.complete,t!==a&&(o=Object.create(t),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}function v(...e){return w(e)}function w(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof p)return e;if(e[f])return e[f]()}return e||t||n?new p(e,t,n):new p(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof p?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=b(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:w(e)(this)}toPromise(e){return new(e=b(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function b(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const I=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class C extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class E extends p{constructor(e){super(e),this.destination=e}}let T=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(e){const t=new S(this,this);return t.operator=e,t}next(e){if(this.closed)throw new I;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new I;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new I;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new I;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new I;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new C(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new S(e,t),e})();class S extends T{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function k(e){return e&&"function"==typeof e.schedule}function x(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new A(e,t))}}class A{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new O(e,this.project,this.thisArg))}}class O extends p{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const P=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=M(),N=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function R(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[m])return n=e,e=>{const t=n[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(N(e))return P(e);if(R(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t))(e);if(e&&"function"==typeof e[D])return t=e,e=>{const n=t[D]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n};function V(e,t){return new _(n=>{const r=new h;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function F(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new _(n=>{const r=new h;return r.add(t.schedule(()=>{const i=e[m]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(R(e))return function(e,t){return new _(n=>{const r=new h;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(N(e))return V(e,t);if(function(e){return e&&"function"==typeof e[D]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[D](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof _?e:new _(L(e))}class j extends p{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U extends p{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function B(e,t){if(t.closed)return;if(e instanceof _)return e.subscribe(t);let n;try{n=L(e)(t)}catch(r){t.error(r)}return n}function z(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(z((n,r)=>F(e(n,r)).pipe(x((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new q(e,n)))}class q{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new $(e,this.project,this.concurrent))}}class $ extends U{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new j(this),n=this.destination;n.add(t);const r=B(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(e=Number.POSITIVE_INFINITY){return z(y,e)}function K(e,t){return t?V(e,t):new _(P(e))}function G(){return function(e){return e.lift(new W(e))}}class W{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new Q(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class Q extends p{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Y extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new X(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return G()(this)}}const J=(()=>{const e=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class X extends E{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Z(){return new T}function ee(e){for(let t in e)if(e[t]===ee)return t;throw Error("Could not find renamed property on target object.")}function te(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ne(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ne).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function re(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ie=ee({__forward_ref__:ee});function se(e){return e.__forward_ref__=se,e.toString=function(){return ne(this())},e}function oe(e){return ae(e)?e():e}function ae(e){return"function"==typeof e&&e.hasOwnProperty(ie)&&e.__forward_ref__===se}class ce extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function ue(e){return"string"==typeof e?e:null==e?"":String(e)}function le(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ue(e)}function he(e,t){const n=t?` in ${t}`:"";throw new ce("201",`No provider for ${le(e)} found${n}`)}function de(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function fe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function pe(e){return{providers:e.providers||[],imports:e.imports||[]}}function ge(e){return me(e,ve)||me(e,_e)}function me(e,t){return e.hasOwnProperty(t)?e[t]:null}function ye(e){return e&&(e.hasOwnProperty(we)||e.hasOwnProperty(be))?e[we]:null}const ve=ee({"\u0275prov":ee}),we=ee({"\u0275inj":ee}),_e=ee({ngInjectableDef:ee}),be=ee({ngInjectorDef:ee});var Ie=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let Ce;function Ee(e){const t=Ce;return Ce=e,t}function Te(e,t,n){const r=ge(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ie.Optional?null:void 0!==t?t:void he(ne(e),"Injector")}function Se(e){return{toString:e}.toString()}var ke=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),xe=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const Ae="undefined"!=typeof globalThis&&globalThis,Oe="undefined"!=typeof window&&window,Pe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Me="undefined"!=typeof global&&global,De=Ae||Me||Oe||Pe,Ne={},Re=[],Le=ee({"\u0275cmp":ee}),Ve=ee({"\u0275dir":ee}),Fe=ee({"\u0275pipe":ee}),je=ee({"\u0275mod":ee}),Ue=ee({"\u0275loc":ee}),Be=ee({"\u0275fac":ee}),ze=ee({__NG_ELEMENT_ID__:ee});let qe=0;function $e(e){return Se(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ke.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Re,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||xe.Emulated,id:"c",styles:e.styles||Re,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=qe++,n.inputs=Qe(e.inputs,t),n.outputs=Qe(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(He):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ke):null,n})}function He(e){return Je(e)||function(e){return e[Ve]||null}(e)}function Ke(e){return function(e){return e[Fe]||null}(e)}const Ge={};function We(e){return Se(()=>{const t={type:e.type,bootstrap:e.bootstrap||Re,declarations:e.declarations||Re,imports:e.imports||Re,exports:e.exports||Re,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Ge[e.id]=e.type),t})}function Qe(e,t){if(null==e)return Ne;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const Ye=$e;function Je(e){return e[Le]||null}function Xe(e,t){const n=e[je]||null;if(!n&&!0===t)throw new Error(`Type ${ne(e)} does not have '\u0275mod' property.`);return n}const Ze=20,et=10;function tt(e){return Array.isArray(e)&&"object"==typeof e[1]}function nt(e){return Array.isArray(e)&&!0===e[1]}function rt(e){return 0!=(8&e.flags)}function it(e){return 2==(2&e.flags)}function st(e){return 1==(1&e.flags)}function ot(e){return null!==e.template}function at(e,t){return e.hasOwnProperty(Be)?e[Be]:null}class ct{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ut(){return lt}function lt(e){return e.type.prototype.ngOnChanges&&(e.setInput=dt),ht}function ht(){const e=ft(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Ne)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function dt(e,t,n,r){const i=ft(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Ne,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new ct(c&&c.currentValue,t,o===Ne),e[r]=t}function ft(e){return e.__ngSimpleChanges__||null}let pt;function gt(){return void 0!==pt?pt:"undefined"!=typeof document?document:void 0}function mt(e){return!!e.listen}ut.ngInherit=!0;const yt={createRenderer:(e,t)=>gt()};function vt(e){for(;Array.isArray(e);)e=e[0];return e}function wt(e,t){return vt(t[e.index])}function _t(e,t){return e.data[t]}function bt(e,t){const n=t[e];return tt(n)?n:n[0]}function It(e){return 128==(128&e[2])}function Ct(e,t){return null==t?null:e[t]}function Et(e){e[18]=0}function Tt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const St={lFrame:Kt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function kt(){return St.bindingsEnabled}function xt(){return St.lFrame.lView}function At(){return St.lFrame.tView}function Ot(){let e=Pt();for(;null!==e&&64===e.type;)e=e.parent;return e}function Pt(){return St.lFrame.currentTNode}function Mt(){const e=St.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Dt(e,t){const n=St.lFrame;n.currentTNode=e,n.isParent=t}function Nt(){return St.lFrame.isParent}function Rt(){return St.isInCheckNoChangesMode}function Lt(e){St.isInCheckNoChangesMode=e}function Vt(){return St.lFrame.bindingIndex++}function Ft(e){St.lFrame.inI18n=e}function jt(e,t){const n=St.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ut(t)}function Ut(e){St.lFrame.currentDirectiveIndex=e}function Bt(e){St.lFrame.currentQueryIndex=e}function zt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function qt(e,t,n){if(n&Ie.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&Ie.Host||(r=zt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=St.lFrame=Ht();return r.currentTNode=t,r.lView=e,!0}function $t(e){const t=Ht(),n=e[1];St.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Ht(){const e=St.lFrame,t=null===e?null:e.child;return null===t?Kt(e):t}function Kt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Gt(){const e=St.lFrame;return St.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Wt=Gt;function Qt(){const e=Gt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Yt(){return St.lFrame.selectedIndex}function Jt(e){St.lFrame.selectedIndex=e}function Xt(){const e=St.lFrame;return _t(e.tView,e.selectedIndex)}function Zt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function en(e,t,n){rn(e,t,3,n)}function tn(e,t,n,r){(3&e[2])===n&&rn(e,t,n,r)}function nn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function rn(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(sn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function sn(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const on=-1;class an{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function cn(e,t,n){const r=mt(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];un(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function un(e){return 64===e.charCodeAt(0)}function ln(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||hn(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function hn(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function dn(e){return e!==on}function fn(e){return 32767&e}function pn(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let gn=!0;function mn(e){const t=gn;return gn=e,t}let yn=0;function vn(e,t){const n=_n(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,wn(r.data,e),wn(t,null),wn(r.blueprint,null));const i=bn(e,t),s=e.injectorIndex;if(dn(i)){const e=fn(i),n=pn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function wn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function _n(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function bn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return on;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return on}function In(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ze)&&(r=n[ze]),null==r&&(r=n[ze]=yn++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Cn(e,t,n){if(n&Ie.Optional)return e;he(t,"NodeInjector")}function En(e,t,n,r){if(n&Ie.Optional&&void 0===r&&(r=null),0==(n&(Ie.Self|Ie.Host))){const i=e[9],s=Ee(void 0);try{return i?i.get(t,r,n&Ie.Optional):Te(t,r,n&Ie.Optional)}finally{Ee(s)}}return Cn(r,t,n)}function Tn(e,t,n,r=Ie.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ze)?e[ze]:void 0;return"number"==typeof t?t>=0?255&t:kn:t}(n);if("function"==typeof s){if(!qt(t,e,r))return r&Ie.Host?Cn(i,n,r):En(t,n,r,i);try{const e=s(r);if(null!=e||r&Ie.Optional)return e;he(n)}finally{Wt()}}else if("number"==typeof s){let i=null,o=_n(e,t),a=on,c=r&Ie.Host?t[16][6]:null;for((-1===o||r&Ie.SkipSelf)&&(a=-1===o?bn(e,t):t[o+8],a!==on&&Pn(r,!1)?(i=t[1],o=fn(a),t=pn(a,t)):o=-1);-1!==o;){const e=t[1];if(On(s,o,e.data)){const e=xn(o,t,n,i,r,c);if(e!==Sn)return e}a=t[o+8],a!==on&&Pn(r,t[1].data[o+8]===c)&&On(s,o,t)?(i=e,o=fn(a),t=pn(a,t)):o=-1}}}return En(t,n,r,i)}const Sn={};function kn(){return new Mn(Ot(),xt())}function xn(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=function(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,u=s>>20,l=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<l;h++){const e=o[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=o[c];if(e&&ot(e)&&e.type===n)return c}return null}(a,o,n,null==r?it(a)&&gn:r!=o&&0!=(3&a.type),i&Ie.Host&&s===a);return null!==c?An(t,o,c,a):Sn}function An(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof an){const o=i;o.resolving&&function(e,t){throw new ce("200",`Circular dependency in DI detected for ${e}`)}(le(s[n]));const a=mn(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ee(o.injectImpl):null;qt(e,r,Ie.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=lt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==c&&Ee(c),mn(a),o.resolving=!1,Wt()}}return i}function On(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Pn(e,t){return!(e&Ie.Self||e&Ie.Host&&t)}class Mn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Tn(this._tNode,this._lView,e,void 0,t)}}function Dn(e){return Se(()=>{const t=e.prototype.constructor,n=t[Be]||Nn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Be]||Nn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Nn(e){return ae(e)?()=>{const t=Nn(oe(e));return t&&t()}:at(e)}const Rn="__parameters__";function Ln(e,t,n){return Se(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(Rn)?e[Rn]:Object.defineProperty(e,Rn,{value:[]})[Rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Vn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Fn(e,t){e.forEach(e=>Array.isArray(e)?Fn(e,t):t(e))}function jn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Un(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Bn(e,t,n){let r=qn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function zn(e,t){const n=qn(e,t);if(n>=0)return e[1|n]}function qn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const $n={},Hn=/\n/gm,Kn="__source",Gn=ee({provide:String,useValue:ee});let Wn;function Qn(e){const t=Wn;return Wn=e,t}function Yn(e,t=Ie.Default){if(void 0===Wn)throw new Error("inject() must be called from an injection context");return null===Wn?Te(e,void 0,t):Wn.get(e,t&Ie.Optional?null:void 0,t)}function Jn(e,t=Ie.Default){return(Ce||Yn)(oe(e),t)}function Xn(e){const t=[];for(let n=0;n<e.length;n++){const r=oe(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=Ie.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(Jn(e,n))}else t.push(Jn(r))}return t}function Zn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const er=Zn(Ln("Inject",e=>({token:e})),-1),tr=Zn(Ln("Optional"),8),nr=Zn(Ln("SkipSelf"),4);let rr;function ir(e){var t;return(null===(t=function(){if(void 0===rr&&(rr=null,De.trustedTypes))try{rr=De.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return rr}())||void 0===t?void 0:t.createHTML(e))||e}class sr{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(ir(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(FF){return null}}}class or{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=ir(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=ir(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ar=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,cr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ur(e){return(e=String(e)).match(ar)||e.match(cr)?e:"unsafe:"+e}function lr(e){return(e=String(e)).split(",").map(e=>ur(e.trim())).join(", ")}function hr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function dr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const fr=hr("area,br,col,hr,img,wbr"),pr=hr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gr=hr("rp,rt"),mr=dr(gr,pr),yr=dr(fr,dr(pr,hr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dr(gr,hr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mr),vr=hr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wr=hr("srcset"),_r=dr(vr,wr,hr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));function br(e,t){e.__ngContext__=t}function Ir(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Cr(e){return e.ngDebugContext}function Er(e){return e.ngOriginalError}function Tr(e,...t){e.error(...t)}class Sr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Tr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Cr(e)?Cr(e):this._findContext(Er(e)):null}_findOriginalError(e){let t=Er(e);for(;t&&Er(t);)t=Er(t);return t}}const kr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(De))();function xr(e){return e instanceof Function?e():e}var Ar=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Or;function Pr(e,t){return Or(e,t)}function Mr(e){const t=e[3];return nt(t)?t[3]:t}function Dr(e){return Rr(e[13])}function Nr(e){return Rr(e[4])}function Rr(e){for(;null!==e&&!nt(e);)e=e[4];return e}function Lr(e,t,n,r,i){if(null!=r){let s,o=!1;nt(r)?s=r:tt(r)&&(o=!0,r=r[0]);const a=vt(r);0===e&&null!==n?null==i?Hr(t,n,a):$r(t,n,a,i||null,!0):1===e&&null!==n?$r(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Gr(e,t);r&&function(e,t,n,r){mt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==vt(n)&&Lr(t,e,r,s,i);for(let o=et;o<n.length;o++){const i=n[o];ri(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Vr(e,t){return mt(e)?e.createText(t):e.createTextNode(t)}function Fr(e,t,n){return mt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function jr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Tt(i,-1)),n.splice(r,1)}function Ur(e,t){if(e.length<=et)return;const n=et+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&jr(s,r),t>0&&(e[n-1][4]=r[4]);const o=Un(e,et+t);ri(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Br(e,t){if(!(256&t[2])){const n=t[11];mt(n)&&n.destroyNode&&ri(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return zr(e[1],e);for(;t;){let n=null;if(tt(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)tt(t)&&zr(t[1],t),t=t[3];null===t&&(t=e),tt(t)&&zr(t[1],t),n=t&&t[4]}t=n}}(t)}}function zr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof an)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):vt(t[e]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&mt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&nt(t[3])){n!==t[3]&&jr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function qr(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===xe.None||t===xe.Emulated)return null}return wt(r,n)}function $r(e,t,n,r,i){mt(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Hr(e,t,n){mt(e)?e.appendChild(t,n):t.appendChild(n)}function Kr(e,t,n,r,i){null!==r?$r(e,t,n,r,i):Hr(e,t,n)}function Gr(e,t){return mt(e)?e.parentNode(t):t.parentNode}function Wr(e,t,n){return 40&e.type?wt(e,n):null}let Qr,Yr=Wr;function Jr(e,t){Yr=e,Qr=t}function Xr(e,t,n,r){const i=function(e,t,n){return qr(e,t.parent,n)}(e,r,t),s=t[11],o=function(e,t,n){return Yr(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Kr(s,i,n[a],o,!1);else Kr(s,i,n,o,!1);void 0!==Qr&&Qr(s,r,t,n,i)}function Zr(e,t){if(null!==t){const n=t.type;if(3&n)return wt(t,e);if(4&n)return ti(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Zr(e,n);{const n=e[t.index];return nt(n)?ti(-1,n):vt(n)}}if(32&n)return Pr(t,e)()||vt(e[t.index]);{const n=ei(e,t);return null!==n?Array.isArray(n)?n[0]:Zr(Mr(e[16]),n):Zr(e,t.next)}}return null}function ei(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ti(e,t){const n=et+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Zr(e,r)}return t[7]}function ni(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&br(vt(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)ni(e,t,n.child,r,i,s,!1),Lr(t,e,i,a,s);else if(32&c){const o=Pr(n,r);let c;for(;c=o();)Lr(t,e,i,c,s);Lr(t,e,i,a,s)}else 16&c?ii(e,t,r,n,i,s):Lr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function ri(e,t,n,r,i,s){ni(n,r,e.firstChild,t,i,s,!1)}function ii(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Lr(t,e,i,a[c],s);else ni(e,t,a,o[3],i,s,!0)}function si(e,t,n){mt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function oi(e,t,n){mt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ai(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const ci="ng-template";function ui(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==ai(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function li(e){return 4===e.type&&e.value!==ci}function hi(e,t,n){return t===(4!==e.type||n?e.value:ci)}function di(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let n=0;n<e.length;n++)if(3===(t=e[n])||4===t||6===t)return n;var t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!hi(e,c,n)||""===c&&1===t.length){if(fi(r))return!1;o=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!ui(e.attrs,u,n)){if(fi(r))return!1;o=!0}continue}const l=pi(8&r?"class":c,i,li(e),n);if(-1===l){if(fi(r))return!1;o=!0;continue}if(""!==u){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==ai(t,u,0)||2&r&&u!==e){if(fi(r))return!1;o=!0}}}}else{if(!o&&!fi(r)&&!fi(c))return!1;if(o&&fi(c))continue;o=!1,r=c|1&r}}return fi(r)||o}function fi(e){return 0==(1&e)}function pi(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function gi(e,t,n=!1){for(let r=0;r<t.length;r++)if(di(e,t[r],n))return!0;return!1}function mi(e,t){return e?":not("+t.trim()+")":t}function yi(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||fi(o)||(t+=mi(s,i),i=""),r=o,s=s||!fi(r);n++}return""!==i&&(t+=mi(s,i)),t}const vi={};function wi(e){_i(At(),xt(),Yt()+e,Rt())}function _i(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&en(t,r,n)}else{const r=e.preOrderHooks;null!==r&&tn(t,r,0,n)}Jt(n)}function bi(e,t){return e<<17|t<<2}function Ii(e){return e>>17&32767}function Ci(e){return 2|e}function Ei(e){return(131068&e)>>2}function Ti(e,t){return-131069&e|t<<2}function Si(e){return 1|e}function ki(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];Bt(i),n.contentQueries(2,t[s],s)}}}function xi(e,t,n,r,i,s,o,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Et(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function Ai(e,t,n,r,i){let s=e.data[t];if(null===s)s=Oi(e,t,n,r,i),St.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=Mt();s.injectorIndex=null===e?-1:e.injectorIndex}return Dt(s,!0),s}function Oi(e,t,n,r,i){const s=Pt(),o=Nt(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function Pi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Mi(e,t,n){$t(t);try{const r=e.viewQuery;null!==r&&ss(1,r,n);const i=e.template;null!==i&&Ri(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ki(e,t),e.staticViewQueries&&ss(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)es(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Qt()}}function Di(e,t,n,r){const i=t[2];if(256==(256&i))return;$t(t);const s=Rt();try{Et(t),St.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Ri(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&en(t,n,null)}else{const n=e.preOrderHooks;null!==n&&tn(t,n,0,null),nn(t,0)}if(function(e){for(let t=Dr(e);null!==t;t=Nr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Tt(r,1),n[2]|=1024}}}(t),function(e){for(let t=Dr(e);null!==t;t=Nr(t))for(let e=et;e<t.length;e++){const n=t[e],r=n[1];It(n)&&Di(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&ki(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&en(t,n)}else{const n=e.contentHooks;null!==n&&tn(t,n,1),nn(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)Jt(~r);else{const i=r,s=n[++e],o=n[++e];jt(s,i),o(2,t[i])}}}finally{Jt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Xi(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&ss(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&en(t,n)}else{const n=e.viewHooks;null!==n&&tn(t,n,2),nn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Tt(t[3],-1))}finally{Qt()}}function Ni(e,t,n,r){const i=t[10],s=!Rt(),o=4==(4&t[2]);try{s&&!o&&i.begin&&i.begin(),o&&Mi(e,t,r),Di(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ri(e,t,n,r,i){const s=Yt(),o=2&r;try{Jt(-1),o&&t.length>Ze&&_i(e,t,Ze,Rt()),n(r,i)}finally{Jt(s)}}function Li(e,t,n){kt()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||vn(n,t),br(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ot(r);s&&Wi(t,n,r);const c=An(t,e,a,n);br(c,t),null!==o&&Qi(0,a-i,c,r,0,o),s&&(bt(n.index,t)[8]=c)}}(e,t,n,wt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=St.lFrame.currentDirectiveIndex;try{Jt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];Ut(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||qi(r,i)}}finally{Jt(-1),Ut(o)}}(e,t,n))}function Vi(e,t,n=wt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Fi(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ji(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ji(e,t,n,r,i,s,o,a,c,u){const l=Ze+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:vi);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Ui(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Bi(e,t,n,r){let i=!1;if(kt()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];gi(n,o.selectors,!1)&&(i||(i=[]),In(vn(n,t),e,o.type),ot(o)?($i(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Ki(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=Pi(e,t,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=ln(n.mergedAttrs,u.hostAttrs),Gi(e,n,t,c,u),Hi(c,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||li(t)?null:Yi(n,i);s.push(u),o=Ui(n,c,o),a=Ui(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new ce("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=ln(n.mergedAttrs,n.attrs),i}function zi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function qi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function $i(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Hi(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ot(t)&&(n[""]=e)}}function Ki(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Gi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=at(i.type)),o=new an(s,ot(i),null);e.blueprint[r]=o,n[r]=o,zi(e,t,0,r,Pi(e,n,i.hostVars,vi),i)}function Wi(e,t,n){const r=wt(t,e),i=Fi(n),s=e[10],o=ts(e,xi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Qi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Yi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ji(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Xi(e,t){const n=bt(t,e);if(It(n)){const e=n[1];80&n[2]?Di(e,n,e.template,n[8]):n[5]>0&&Zi(n)}}function Zi(e){for(let n=Dr(e);null!==n;n=Nr(n))for(let e=et;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Di(e,t,e.template,t[8])}else t[5]>0&&Zi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=bt(t[n],e);It(r)&&r[5]>0&&Zi(r)}}function es(e,t){const n=bt(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Mi(r,n,n[8])}function ts(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ns(e){for(;e;){e[2]|=64;const t=Mr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function rs(e,t,n){const r=t[10];r.begin&&r.begin();try{Di(e,t,e.template,n)}catch(i){throw us(t,i),i}finally{r.end&&r.end()}}function is(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Ir(n),i=r[1];Ni(i,r,i.template,n)}}(e[8])}function ss(e,t,n){Bt(0),t(e,n)}const os=(()=>Promise.resolve(null))();function as(e){return e[7]||(e[7]=[])}function cs(e){return e.cleanup||(e.cleanup=[])}function us(e,t){const n=e[9],r=n?n.get(Sr,null):null;r&&r.handleError(t)}function ls(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],u=e.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function hs(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=re(i,e):2==s&&(r=re(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const ds=new Vn("INJECTOR",-1);class fs{get(e,t=$n){if(t===$n){const t=new Error(`NullInjectorError: No provider for ${ne(e)}!`);throw t.name="NullInjectorError",t}return t}}const ps=new Vn("Set Injector scope."),gs={},ms={};let ys;function vs(){return void 0===ys&&(ys=new fs),ys}function ws(e,t=null,n=null,r){return new _s(e,n,t||vs(),r)}class _s{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Fn(t,n=>this.processProvider(n,e,t)),Fn([e],e=>this.processInjectorType(e,[],i)),this.records.set(ds,Cs(void 0,this));const s=this.records.get(ps);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:ne(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=$n,n=Ie.Default){this.assertNotDestroyed();const r=Qn(this);try{if(!(n&Ie.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Vn)&&ge(e);t=n&&this.injectableDefInScope(n)?Cs(bs(e),gs):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&Ie.Self?vs():this.parent).get(e,t=n&Ie.Optional&&t===$n?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(ne(e)),r)throw s;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[Kn]&&i.unshift(t[Kn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=ne(t);if(Array.isArray(t))i=t.map(ne).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ne(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Hn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{Qn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(ne(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=oe(e)))return!1;let r=ye(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=ye(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{Fn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Fn(r,e=>this.processProvider(e,n,r||Re))}}this.injectorDefTypes.add(s);const a=at(s)||(()=>new s);this.records.set(s,Cs(a,gs));const c=r.providers;if(null!=c&&!o){const t=e;Fn(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Ts(e=oe(e))?e:oe(e&&e.provide);const i=function(e,t,n){return Es(e)?Cs(void 0,e.useValue):Cs(Is(e),gs)}(e);if(Ts(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Cs(void 0,gs,!0),t.factory=()=>Xn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===gs&&(t.value=ms,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=oe(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function bs(e){const t=ge(e),n=null!==t?t.factory:at(e);if(null!==n)return n;if(e instanceof Vn)throw new Error(`Token ${ne(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${ne(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[ve]||e[_e]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Is(e,t,n){let r;if(Ts(e)){const t=oe(e);return at(t)||bs(t)}if(Es(e))r=()=>oe(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Xn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Jn(oe(e.useExisting));else{const t=oe(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return at(t)||bs(t);r=()=>new t(...Xn(e.deps))}var i;return r}function Cs(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Es(e){return null!==e&&"object"==typeof e&&Gn in e}function Ts(e){return"function"==typeof e}const Ss=function(e,t,n){return function(e,t=null,n=null,r){const i=ws(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let ks=(()=>{class e{static create(e,t){return Array.isArray(e)?Ss(e,t,""):Ss(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=$n,e.NULL=new fs,e.\u0275prov=fe({token:e,providedIn:"any",factory:()=>Jn(ds)}),e.__NG_ELEMENT_ID__=-1,e})();function xs(e,t){Zt(Ir(e)[1],Ot())}function As(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ot(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=Os(e.inputs),t.declaredInputs=Os(e.declaredInputs),t.outputs=Os(e.outputs);const n=i.hostBindings;n&&Ds(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Ps(e,s),o&&Ms(e,o),te(e.inputs,i.inputs),te(e.declaredInputs,i.declaredInputs),te(e.outputs,i.outputs),ot(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===As&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=ln(i.hostAttrs,n=ln(n,i.hostAttrs))}}(r)}function Os(e){return e===Ne?{}:e===Re?[]:e}function Ps(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ms(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Ds(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let Ns=null;function Rs(){if(!Ns){const e=De.Symbol;if(e&&e.iterator)Ns=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ns=n)}}}return Ns}function Ls(e){return!!Vs(e)&&(Array.isArray(e)||!(e instanceof Map)&&Rs()in e)}function Vs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Fs(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function js(e,t,n,r){const i=xt();return Fs(i,Vt(),t)&&(At(),function(e,t,n,r,i,s){const o=wt(e,t);!function(e,t,n,r,i,s,o){if(null==s)mt(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?ue(s):o(s,r||"",i);mt(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(Xt(),i,e,t,n,r)),js}function Us(e){return function(e,t){return e[t]}(St.lFrame.contextLView,Ze+e)}function Bs(e,t=Ie.Default){const n=xt();return null===n?Jn(e,t):Tn(Ot(),n,oe(e),t)}function zs(e,t,n){const r=xt();return Fs(r,Vt(),t)&&function(e,t,n,r,i,s,o,a){const c=wt(t,n);let u,l=t.inputs;var h;null!=l&&(u=l[r])?(ls(e,n,u,r,i),it(t)&&function(e,t){const n=bt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,mt(s)?s.setProperty(c,r,i):un(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}(At(),Xt(),r,e,t,r[11],n),zs}function qs(e,t,n,r,i){const s=i?"class":"style";ls(e,n,t.inputs[s],s,r)}function $s(e,t,n,r){const i=xt(),s=At(),o=Ze+e,a=i[11],c=i[o]=Fr(a,t,St.lFrame.currentNamespace),u=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=Ai(t,e,2,i,Ct(a,s));return Bi(t,n,c,Ct(a,o)),null!==c.attrs&&hs(c,c.attrs,!1),null!==c.mergedAttrs&&hs(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];Dt(u,!0);const l=u.mergedAttrs;null!==l&&cn(a,c,l);const h=u.classes;null!==h&&oi(a,c,h);const d=u.styles;null!==d&&si(a,c,d),64!=(64&u.flags)&&Xr(s,i,c,u),0===St.lFrame.elementDepthCount&&br(c,i),St.lFrame.elementDepthCount++,st(u)&&(Li(s,i,u),function(e,t,n){if(rt(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}(s,u,i)),null!==r&&Vi(i,u)}function Hs(){let e=Ot();Nt()?St.lFrame.isParent=!1:(e=e.parent,Dt(e,!1));const t=e;St.lFrame.elementDepthCount--;const n=At();n.firstCreatePass&&(Zt(n,e),rt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&qs(n,t,xt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&qs(n,t,xt(),t.stylesWithoutHost,!1)}function Ks(e,t,n,r){$s(e,t,n,r),Hs()}function Gs(e){return!!e&&"function"==typeof e.then}const Ws=function(e){return!!e&&"function"==typeof e.subscribe};function Qs(e,t,n,r){const i=xt(),s=At(),o=Ot();return function(e,t,n,r,i,s,o,a){const c=st(r),u=e.firstCreatePass&&cs(e),l=as(t);let h=!0;if(3&r.type||a){const d=wt(r,t),f=a?a(d):d,p=l.length,g=a?e=>a(vt(e[r.index])):r.index;if(mt(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Js(r,t,0,s,!1);const e=n.listen(f,i,s);l.push(s,e),u&&u.push(i,g,p,p+1)}}else s=Js(r,t,0,s,!0),f.addEventListener(i,s,o),l.push(s),u&&u.push(i,g,p,o)}else s=Js(r,t,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,e),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),Qs}function Ys(e,t,n,r){try{return!1!==n(r)}catch(i){return us(e,i),!1}}function Js(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?bt(e.index,t):t;0==(32&t[2])&&ns(o);let a=Ys(t,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=Ys(t,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Xs(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Ii(s):Ei(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];Zs(e[a],t)&&(c=!0,e[a+1]=r?Si(n):Ci(n)),a=r?Ii(n):Ei(n)}c&&(e[n+1]=r?Ci(s):Si(s))}function Zs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&qn(e,t)>=0}function eo(e,t){return function(e,t,n,r){const i=xt(),s=At(),o=function(e){const t=St.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,n}();s.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[Yt()],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(s)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=St.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=t.residualClasses;if(null===i)0===t.classBindings&&(n=no(n=to(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=to(i,e,t,n,r),null===s){let n=function(e,t,n){const r=t.classBindings;if(0!==Ei(r))return e[Ii(r)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=to(null,e,t,n[1],r),n=no(n,t.attrs,r),function(e,t,n,r){e[Ii(t.classBindings)]=r}(e,t,0,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=no(r,e[s].hostAttrs,true);return no(r,t.attrs,true)}(e,t)}return void 0!==s&&(t.residualClasses=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=t.classBindings,a=Ii(o),c=Ei(o);e[r]=n;let u,l=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||qn(e,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const t=Ii(e[a+1]);e[r+1]=bi(t,a),0!==t&&(e[t+1]=Ti(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=bi(a,0),0!==a&&(e[a+1]=Ti(e[a+1],r)),a=r;else e[r+1]=bi(c,0),0===a?a=r:e[c+1]=Ti(e[c+1],r),c=r;l&&(e[r+1]=Ci(e[r+1])),Xs(e,u,r,!0),Xs(e,u,r,!1),function(e,t,n,r,i){const s=e.residualClasses;null!=s&&"string"==typeof t&&qn(s,t)>=0&&(n[r+1]=Si(n[r+1]))}(t,u,e,r),o=bi(a,c),t.classBindings=o}(i,s,t,n,o)}}(s,e,o,true),t!==vi&&Fs(i,o,t)&&function(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,u=c[a+1];io(1==(1&u)?ro(c,t,n,i,Ei(u),o):void 0)||(io(s)||function(e){return 2==(2&e)}(u)&&(s=ro(c,null,n,i,a,o)),function(e,t,n,r,i){const s=mt(e);i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r)}(r,0,function(e,t){return vt(t[e])}(Yt(),n),i,s))}(s,s.data[Yt()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=ne(function(e){return e instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?e.changingThisBreaksApplicationSecurity:e}(e))),e}(t),true,o)}(e,t),eo}function to(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=no(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function no(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Bn(e,o,!!n||t[++s]))}return void 0===e?null:e}function ro(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,u=null===c;let l=n[i+1];l===vi&&(l=u?Re:void 0);let h=u?zn(l,r):c===r?l:void 0;if(s&&!io(h)&&(h=zn(t,r)),io(h)&&(a=h,o))return a;const d=e[i+1];i=o?Ii(d):Ei(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=zn(e,r))}return a}function io(e){return void 0!==e}function so(e,t=""){const n=xt(),r=At(),i=e+Ze,s=r.firstCreatePass?Ai(r,i,1,t,null):r.data[i],o=n[i]=Vr(n[11],t);Xr(r,n,o,s),Dt(s,!1)}const oo=void 0;var ao=["en",[["a","p"],["AM","PM"],oo],[["AM","PM"],oo,oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oo,"{1} 'at' {0}",oo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let co={};function uo(e){return e in co||(co[e]=De.ng&&De.ng.common&&De.ng.common.locales&&De.ng.common.locales[e]),co[e]}var lo=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const ho="en-US",fo={marker:"element"},po={marker:"ICU"};var go=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({});let mo=ho;function yo(e){var t;null==(t=e)&&de("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(mo=e.toLowerCase().replace(/_/g,"-"))}function vo(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Wr(e,0,n):vt(n[i])}function wo(e,t,n,r,i){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&t.type||(a=o,o=i),null!==o&&0==(2&t.flags))for(let t=1;t<s.length;t++)$r(e,o,n[s[t]],a,!1)}}function _o(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];bo(r)||Io(r,t)&&null===Co(r)&&Eo(r,t.index)}}function bo(e){return!(64&e.type)}function Io(e,t){return bo(t)||e.index>t.index}function Co(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Eo(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(Jr(vo,wo),e.insertBeforeIndex=t)}function To(e,t,n){const r=Oi(e,n,64,null,null);return _o(t,r),r}const So=/\ufffd(\d+):?\d*\ufffd/gi,ko=/\ufffd(\d+)\ufffd/,xo=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ao=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Oo=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Po=/\uE500/g;function Mo(e,t,n,r,i,s,o){const a=Pi(e,r,1,null);let c=a<<go.SHIFT,u=Mt();t===u&&(u=null),null===u&&(c|=go.APPEND_EAGERLY),o&&(c|=go.COMMENT,void 0===Or&&(Or=function(){const e=[];let t,n,r=-1;function i(e,t){r=0;const i=function(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}(e,t);n=null!==i?e.remove[i]:Re}function s(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),i(t[1].data[~o],t),s())}return 0===e.length?null:(n=e.pop(),r=e.pop(),s())}return function(n,r){for(t=r;e.length;)e.pop();return i(n.value,r),s}}())),i.push(c,null===s?"":s);const l=Oi(e,a,o?32:1,null===s?"":s,null);_o(n,l);const h=l.index;return Dt(l,!1),null!==u&&t!==u&&function(e,t){let n=e.insertBeforeIndex;var r;null===n?(Jr(vo,wo),n=e.insertBeforeIndex=[null,t]):("Expecting array here",(r=Array.isArray(n))!=!0&&de("Expecting array here",r,true,"=="),n.push(t))}(u,h),l}function Do(e,t,n,r,i,s,o){const a=o.match(So),c=Mo(e,t,n,s,r,a?null:o,!1);a&&No(i,o,c.index,null,0,null)}function No(e,t,n,r,i,s){const o=e.length,a=o+1;e.push(null,null);const c=o+2,u=t.split(So);let l=0;for(let h=0;h<u.length;h++){const t=u[h];if(1&h){const n=i+parseInt(t,10);e.push(-1-n),l|=Ro(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,s),e[o]=l,e[a]=e.length-c,l}function Ro(e){return 1<<Math.min(e,31)}function Lo(e){let t,n,r="",i=0,s=!1;for(;null!==(t=Ao.exec(e));)s?t[0]===`\ufffd/*${n}\ufffd`&&(i=t.index,s=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],s=!0);return r+=e.substr(i),r}function Vo(e,t,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:Pi(e,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(Ro(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,s),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,s,a);const c=i.values;for(let u=0;u<c.length;u++){const s=c[u],l=[];for(let e=0;e<s.length;e++){const t=s[e];if("string"!=typeof t){const n=l.push(t)-1;s[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Uo(e,a,t,n,r,i.cases[u],s.join(""),l)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,s)}function Fo(e){const t=[],n=[];let r=1,i=0;const s=jo(e=e.replace(xo,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""}));for(let o=0;o<s.length;){let e=s[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const i=jo(s[o++]);t.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:t,values:n}}function jo(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(e);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=e.substring(t,i);xo.test(n)?r.push(Fo(n)):r.push(n),t=i+1}}else{if(0==n.length){const n=e.substring(t,i);r.push(n),t=i+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function Uo(e,t,n,r,i,s,o,a){const c=[],u=[],l=[];t.cases.push(s),t.create.push(c),t.remove.push(u),t.update.push(l);const h=function(e){const t=new or(e);return function(){try{return!!(new window.DOMParser).parseFromString(ir(""),"text/html")}catch(FF){return!1}}()?new sr(t):t}(gt()).getInertBodyElement(o),d=function(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}(h)||h;return d?Bo(e,t,n,r,c,u,l,d,i,a,0):0}function Bo(e,t,n,r,i,s,o,a,c,u,l){let h=0,d=a.firstChild;for(;d;){const a=Pi(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(yr.hasOwnProperty(p)){$o(i,fo,p,c,a),e.data[a]=p;const g=f.attributes;for(let e=0;e<g.length;e++){const t=g.item(e),n=t.name.toLowerCase();t.value.match(So)?_r.hasOwnProperty(n)&&No(o,t.value,a,t.name,0,vr[n]?ur:wr[n]?lr:null):Ho(i,a,t)}h=Bo(e,t,n,r,i,s,o,d,a,u,l+1)|h,zo(s,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(So);$o(i,null,m?"":g,c,a),zo(s,a,l),m&&(h=No(o,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=ko.exec(d.textContent||"");if(y){const t=u[parseInt(y[1],10)];$o(i,po,"",c,a),Vo(e,n,r,c,t,a),qo(s,a,l)}}d=d.nextSibling}return h}function zo(e,t,n){0===n&&e.push(t)}function qo(e,t,n){0===n&&(e.push(~t),e.push(t))}function $o(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function Ho(e,t,n){e.push(t<<1|1,n.name,n.value)}function Ko(e,t,n){(function(e,t,n=-1){const r=At(),i=xt(),s=Ze+e,o=Ct(r.consts,t),a=Mt();r.firstCreatePass&&function(e,t,n,r,i,s){const o=Mt(),a=[],c=[],u=[[]],l=(h=i=function(e,t){if(function(e){return-1===e}(t))return Lo(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return Lo(e.substring(n,r))}}(i,s),h.replace(Po," ")).split(Oo);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const s=jo(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const t=l;""!==t&&Do(e,o,u[0],a,c,n,t)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Vo(e,n,c,t,r,Mo(e,o,u[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),Ze+Number.parseInt(r.substring(t?2:1)));if(t)u.shift(),Dt(Mt(),!1);else{const t=To(e,u[0],n);u.unshift([]),Dt(t,!0)}}}e.data[r]={create:a,update:c}}(r,null===a?0:a.index,i,s,o,n);const c=r.data[s],u=qr(r,a===i[6]?null:a,i);!function(e,t,n,r){const i=e[11];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],c=(o&go.COMMENT)===go.COMMENT,u=(o&go.APPEND_EAGERLY)===go.APPEND_EAGERLY,l=o>>>go.SHIFT;let h=e[l];null===h&&(h=e[l]=c?i.createComment(a):Vr(i,a)),u&&null!==n&&$r(i,n,h,r,!1)}}(i,c.create,u,a&&8&a.type?i[a.index]:null),Ft(!0)})(e,t,n),Ft(!1)}function Go(e,t,n,r,i){if(e=oe(e),Array.isArray(e))for(let s=0;s<e.length;s++)Go(e[s],t,n,r,i);else{const s=At(),o=xt();let a=Ts(e)?e:oe(e.provide),c=Is(e);const u=Ot(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Ts(e)||!e.multi){const r=new an(c,i,Bs),f=Yo(a,t,i?l:l+d,h);-1===f?(In(vn(u,o),s,a),Wo(s,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Yo(a,t,l+d,h),p=Yo(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){In(vn(u,o),s,a);const l=function(e,t,n,r,i){const s=new an(e,n,Bs);return s.multi=[],s.index=t,s.componentProviders=0,Qo(s,i,r&&!n),s}(i?Xo:Jo,n.length,i,r,c);!i&&m&&(n[p].providerFactory=l),Wo(s,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),o.push(l)}else Wo(s,e,f>-1?f:p,Qo(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Wo(e,t,n,r){const i=Ts(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Qo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Yo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Jo(e,t,n,r){return Zo(this.multi,[])}function Xo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=An(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Zo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Zo(i,s);return s}function Zo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function ea(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=At();if(r.firstCreatePass){const i=ot(e);Go(n,r.data,r.blueprint,i,!0),Go(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class ta{}class na{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ne(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let ra=(()=>{class e{}return e.NULL=new na,e})();function ia(...e){}function sa(e,t){return new aa(wt(e,t))}const oa=function(){return sa(Ot(),xt())};let aa=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=oa,e})();class ca{}let ua=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>la(),e})();const la=function(){const e=xt(),t=bt(Ot().index,e);return function(e){return e[11]}(tt(t)?t:e)};let ha=(()=>{class e{}return e.\u0275prov=fe({token:e,providedIn:"root",factory:()=>null}),e})();class da{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fa=new da("12.0.5");class pa{constructor(){}supports(e){return Ls(e)}create(e){return new ma(e)}}const ga=(e,t)=>t;class ma{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ga}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<_a(n,r,i)?t:n,o=_a(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ls(e))throw new Error(`Error trying to diff '${ne(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Rs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new ya(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new wa),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ya{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class va{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class wa{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new va,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _a(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class ba{constructor(){}supports(e){return e instanceof Map||Vs(e)}create(){return new Ia}}class Ia{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Vs(e)))throw new Error(`Error trying to diff '${ne(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ca(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Ca{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ea(){return new Ta([new pa])}let Ta=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ea()),deps:[[e,new nr,new tr]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=fe({token:e,providedIn:"root",factory:Ea}),e})();function Sa(){return new ka([new ba])}let ka=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Sa()),deps:[[e,new nr,new tr]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=fe({token:e,providedIn:"root",factory:Sa}),e})();function xa(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(vt(s)),nt(s))for(let e=et;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&xa(t[1],t,n,r)}const o=n.type;if(8&o)xa(e,t,n.child,r);else if(32&o){const e=Pr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=ei(t,n);if(Array.isArray(e))r.push(...e);else{const n=Mr(t[16]);xa(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Aa{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return xa(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(nt(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Ur(e,n),Un(t,n))}this._attachedToViewContainer=!1}Br(this._lView[1],this._lView)}onDestroy(e){!function(e,t,n,r){const i=as(t);i.push(r)}(0,this._lView,0,e)}markForCheck(){ns(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Lt(!0);try{rs(e,t,n)}finally{Lt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,ri(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Oa extends Aa{constructor(e){super(e),this._view=e}detectChanges(){is(this._view)}checkNoChanges(){!function(e){Lt(!0);try{is(e)}finally{Lt(!1)}}(this._view)}get context(){return null}}const Pa=[new ba],Ma=new Ta([new pa]),Da=new ka(Pa),Na=function(){return e=Ot(),t=xt(),4&e.type?new Va(t,e,sa(e,t)):null;var e,t};let Ra=(()=>{class e{}return e.__NG_ELEMENT_ID__=Na,e})();const La=Ra,Va=class extends La{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=xi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Mi(t,n,e),new Aa(n)}};class Fa{}const ja=function(){return function(e,t){let n;const r=t[e.index];if(nt(r))n=r;else{let i;if(8&e.type)i=vt(r);else{const n=t[11];i=n.createComment("");const r=wt(e,t);$r(n,Gr(n,r),i,function(e,t){return mt(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Ji(r,t,i,e),ts(t,n)}return new za(n,e,t)}(Ot(),xt())};let Ua=(()=>{class e{}return e.__NG_ELEMENT_ID__=ja,e})();const Ba=Ua,za=class extends Ba{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Mn(this._hostTNode,this._hostLView)}get parentInjector(){const e=bn(this._hostTNode,this._hostLView);if(dn(e)){const t=pn(e,this._hostLView),n=fn(e);return new Mn(t[1].data[n+8],t)}return new Mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=qa(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-et}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Fa,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(nt(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new za(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=et+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-et?(t[4]=n[i],jn(n,et+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=ti(i,s),a=n[11],c=Gr(a,s[7]);return null!==c&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,ri(e,r,n,1,i,s)}(r,s[6],a,n,c,o),e.attachToViewContainerRef(),jn($a(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=qa(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Ur(this._lContainer,t);n&&(Un($a(this._lContainer),t),Br(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Ur(this._lContainer,t);return n&&null!=Un($a(this._lContainer),t)?new Aa(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function qa(e){return e[8]}function $a(e){return e[8]||(e[8]=[])}const Ha={};class Ka extends ra{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Je(e);return new Qa(t,this.ngModule)}}function Ga(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Wa=new Vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kr});class Qa extends ta{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(yi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ga(this.componentDef.inputs)}get outputs(){return Ga(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ha,i);return s!==Ha||r===Ha?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(ca,yt),o=i.get(ha,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(mt(e))return e.selectRootElement(t,n===xe.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Fr(s.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:kr,clean:os,playerHandler:null,flags:0},d=ji(0,null,null,1,0,null,null,null,null,null),f=xi(null,d,h,l,null,null,s,a,o,i);let p,g;$t(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Ai(o,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(hs(a,c,!0),null!==e&&(cn(i,e,c),null!==a.classes&&oi(i,e,a.classes),null!==a.styles&&si(i,e,a.styles)));const u=r.createRenderer(e,t),l=xi(n,Fi(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(In(vn(a,n),o,t.type),$i(o,a),Ki(a,n.length,1)),ts(n,l),n[20]=l}(u,this.componentDef,f,s,a);if(u)if(n)cn(a,u,["ng-version",fa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!fi(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&cn(a,u,e),t&&t.length>0&&oi(a,u,t.join(" "))}if(g=_t(d,Ze),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Ot();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Gi(e,r,t,Pi(e,t,1,null),n));const i=An(t,e,r.directiveStart,r);br(i,t);const s=wt(r,t);return s&&br(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=Ot();t.contentQueries(1,o,e.directiveStart)}const a=Ot();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Jt(a.index),zi(n[1],a,0,a.directiveStart,a.directiveEnd,t),qi(t,o)),o}(e,this.componentDef,f,h,[xs]),Mi(d,f,null)}finally{Qt()}return new Ya(this.componentType,p,sa(g,f),f,g)}}class Ya extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Oa(r),this.componentType=e}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Ja=new Map;class Xa extends Fa{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ka(this);const n=Xe(e),r=e[Ue]||null;r&&yo(r),this._bootstrapComponents=xr(n.bootstrap),this._r3Injector=ws(e,t,[{provide:Fa,useValue:this},{provide:ra,useValue:this.componentFactoryResolver}],ne(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ks.THROW_IF_NOT_FOUND,n=Ie.Default){return e===ks||e===Fa||e===ds?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Za extends class{}{constructor(e){super(),this.moduleType=e,null!==Xe(e)&&function(e){const t=new Set;!function e(n){const r=Xe(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ne(t)} vs ${ne(t.name)}`)}(i,Ja.get(i),n),Ja.set(i,n));const s=xr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Xa(this.moduleType,e)}}function ec(e){return t=>{setTimeout(e,void 0,t)}}const tc=class extends T{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,i,s;let o=e,a=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;o=null===(r=t.next)||void 0===r?void 0:r.bind(t),a=null===(i=t.error)||void 0===i?void 0:i.bind(t),c=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}this.__isAsync&&(a=ec(a),o&&(o=ec(o)),c&&(c=ec(c)));const u=super.subscribe({next:o,error:a,complete:c});return e instanceof h&&e.add(u),u}},nc=new Vn("Application Initializer");let rc=(()=>{class e{constructor(e){this.appInits=e,this.resolve=ia,this.reject=ia,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Gs(t))e.push(t);else if(Ws(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Jn(nc,8))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const ic=new Vn("AppId"),sc={provide:ic,useFactory:function(){return`${oc()}${oc()}${oc()}`},deps:[]};function oc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ac=new Vn("Platform Initializer"),cc=new Vn("Platform ID"),uc=new Vn("appBootstrapListener");let lc=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const hc=new Vn("LocaleId"),dc=new Vn("DefaultCurrencyCode");class fc{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const pc=function(e){return new Za(e)},gc=pc,mc=function(e){return Promise.resolve(pc(e))},yc=function(e){const t=pc(e),n=xr(Xe(e).declarations).reduce((e,t)=>{const n=Je(t);return n&&e.push(new Qa(n)),e},[]);return new fc(t,n)},vc=yc,wc=function(e){return Promise.resolve(yc(e))};let _c=(()=>{class e{constructor(){this.compileModuleSync=gc,this.compileModuleAsync=mc,this.compileModuleAndAllComponentsSync=vc,this.compileModuleAndAllComponentsAsync=wc}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const bc=(()=>Promise.resolve(0))();function Ic(e){"undefined"==typeof Zone?bc.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Cc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tc(!1),this.onMicrotaskEmpty=new tc(!1),this.onStable=new tc(!1),this.onError=new tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=De.requestAnimationFrame,t=De.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(De,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Sc(e),e.isCheckStableRunning=!0,Tc(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Sc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return kc(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),xc(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return kc(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),xc(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Sc(e),Tc(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Ec,ia,ia);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Ec={};function Tc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Sc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function kc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xc(e){e._nesting--,Tc(e)}class Ac{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tc,this.onMicrotaskEmpty=new tc,this.onStable=new tc,this.onError=new tc}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Oc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cc.assertNotInAngularZone(),Ic(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ic(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Jn(Cc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),Pc=(()=>{class e{constructor(){this._applications=new Map,Nc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Nc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class Mc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Dc,Nc=new Mc,Rc=!0,Lc=!1;const Vc=new Vn("AllowMultipleToken");function Fc(e,t,n=[]){const r=`Platform: ${t}`,i=new Vn(r);return(t=[])=>{let s=jc();if(!s||s.injector.get(Vc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:ps,useValue:"platform"});!function(e){if(Dc&&!Dc.destroyed&&!Dc.injector.get(Vc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dc=e.get(Uc);const t=e.get(ac,null);t&&t.forEach(e=>e())}(ks.create({providers:e,name:r}))}return function(e){const t=jc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function jc(){return Dc&&!Dc.destroyed?Dc:null}let Uc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Ac:("zone.js"===e?void 0:e)||new Cc({enableLongStackTrace:(Lc=!0,Rc),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Cc,useValue:n}];return n.run(()=>{const t=ks.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Sr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{qc(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Gs(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(rc);return e.runInitializers(),e.donePromise.then(()=>(yo(i.injector.get(hc,ho)||ho),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=Bc({},t);return function(e,t,n){const r=new Za(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(zc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ne(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Jn(ks))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function Bc(e,t){return Array.isArray(t)?t.reduce(Bc,e):Object.assign(Object.assign({},e),t)}let zc=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),o=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Cc.assertNotInAngularZone(),Ic(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Cc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return k(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:H(t)(K(e,n))}(s,o.pipe(e=>{return G()((t=Z,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,J);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof ta?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Fa),i=n.create(ks.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Oc,null),a=o&&i.injector.get(Pc);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),qc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;qc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(uc,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Jn(Cc),Jn(ks),Jn(Sr),Jn(ra),Jn(rc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function qc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const $c=Fc(null,"core",[{provide:cc,useValue:"unknown"},{provide:Uc,deps:[ks]},{provide:Pc,deps:[]},{provide:lc,deps:[]}]),Hc=[{provide:zc,useClass:zc,deps:[Cc,ks,Sr,ra,rc]},{provide:Wa,deps:[Cc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:rc,useClass:rc,deps:[[new tr,nc]]},{provide:_c,useClass:_c,deps:[]},sc,{provide:Ta,useFactory:function(){return Ma},deps:[]},{provide:ka,useFactory:function(){return Da},deps:[]},{provide:hc,useFactory:function(e){return yo(e=e||"undefined"!=typeof $localize&&$localize.locale||ho),e},deps:[[new er(hc),new tr,new nr]]},{provide:dc,useValue:"USD"}];let Kc=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Jn(zc))},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:Hc}),e})(),Gc=null;function Wc(){return Gc}const Qc=new Vn("DocumentToken");var Yc=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Jc{}let Xc=(()=>{class e extends Jc{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=uo(t);if(n)return n;const r=t.split("-")[0];if(n=uo(r),n)return n;if("en"===r)return ao;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[lo.PluralCase]}(t||this.locale)(e)){case Yc.Zero:return"zero";case Yc.One:return"one";case Yc.Two:return"two";case Yc.Few:return"few";case Yc.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Jn(hc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function Zc(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let eu=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ls(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ne(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(Bs(Ta),Bs(ka),Bs(aa),Bs(ua))},e.\u0275dir=Ye({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})(),tu=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new nu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ru("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ru("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Bs(Ua),Bs(Ra))},e.\u0275dir=Ye({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class nu{constructor(){this.$implicit=null,this.ngIf=null}}function ru(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ne(t)}'.`)}let iu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[{provide:Jc,useClass:Xc}]}),e})();class su{}class ou extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new ou,Gc||(Gc=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(cu=cu||document.querySelector("base"),cu?cu.getAttribute("href"):null);return null==t?null:function(e){au=au||document.createElement("a"),au.setAttribute("href",e);const t=au.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zc(document.cookie,e)}}let au,cu=null;const uu=new Vn("TRANSITION_ID"),lu=[{provide:nc,useFactory:function(e,t,n){return()=>{n.get(rc).donePromise.then(()=>{const n=Wc();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[uu,Qc,ks],multi:!0}];class hu{static init(){var e;e=new hu,Nc=e}addToWindow(e){De.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},De.getAllAngularTestabilities=()=>e.getAllTestabilities(),De.getAllAngularRootElements=()=>e.getAllRootElements(),De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push(e=>{const t=De.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Wc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let du=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const fu=new Vn("EventManagerPlugins");let pu=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(Jn(fu),Jn(Cc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Wc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let mu=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),yu=(()=>{class e extends mu{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(vu),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(vu))}}return e.\u0275fac=function(t){return new(t||e)(Jn(Qc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();function vu(e){Wc().remove(e)}const wu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_u=/%COMP%/g;function bu(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?bu(e,i,n):(i=i.replace(_u,e),n.push(i))}return n}function Iu(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Cu=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Eu(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case xe.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Tu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case xe.ShadowDom:return new Su(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=bu(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Jn(pu),Jn(yu),Jn(ic))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class Eu{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(wu[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=wu[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=wu[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(Ar.DashCase|Ar.Important)?e.style.setProperty(t,n,r&Ar.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Ar.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Iu(n)):this.eventManager.addEventListener(e,t,Iu(n))}}class Tu extends Eu{constructor(e,t,n,r){super(e),this.component=n;const i=bu(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(_u,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(_u,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Su extends Eu{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=bu(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ku=(()=>{class e extends gu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Jn(Qc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const xu=["alt","control","meta","shift"],Au={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ou={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pu={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Mu=(()=>{class e extends gu{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),s=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wc().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(xu.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Ou.hasOwnProperty(t)&&(t=Ou[t]))}return Au[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),xu.forEach(r=>{r!=n&&(0,Pu[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Jn(Qc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const Du=Fc($c,"browser",[{provide:cc,useValue:"browser"},{provide:ac,useValue:function(){ou.makeCurrent(),hu.init()},multi:!0},{provide:Qc,useFactory:function(){return function(e){pt=e}(document),document},deps:[]}]),Nu=[[],{provide:ps,useValue:"root"},{provide:Sr,useFactory:function(){return new Sr},deps:[]},{provide:fu,useClass:ku,multi:!0,deps:[Qc,Cc,cc]},{provide:fu,useClass:Mu,multi:!0,deps:[Qc]},[],{provide:Cu,useClass:Cu,deps:[pu,yu,ic]},{provide:ca,useExisting:Cu},{provide:mu,useExisting:yu},{provide:yu,useClass:yu,deps:[Qc]},{provide:Oc,useClass:Oc,deps:[Cc]},{provide:pu,useClass:pu,deps:[fu,Cc]},{provide:su,useClass:du,deps:[]},[]];let Ru=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:ic,useValue:t.appId},{provide:uu,useExisting:ic},lu]}}}return e.\u0275fac=function(t){return new(t||e)(Jn(e,12))},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:Nu,imports:[iu,Kc]}),e})();function Lu(...e){let t=e[e.length-1];return k(t)?(e.pop(),V(e,t)):K(e)}function Vu(e,t){return z(e,t,1)}function Fu(e,t){return function(n){return n.lift(new ju(e,t))}}"undefined"!=typeof window&&window;class ju{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Uu(e,this.predicate,this.thisArg))}}class Uu extends p{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}class Bu{}class zu{}class qu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof qu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new qu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof qu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class $u{encodeKey(e){return Hu(e)}encodeValue(e){return Hu(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function Hu(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Ku(e){return`${e}`}class Gu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $u,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Gu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ku(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(Ku(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Wu{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Qu(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Yu(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Ju(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Xu{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new qu),this.context||(this.context=new Wu),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Gu,this.urlWithParams=t}serializeBody(){return null===this.body?null:Qu(this.body)||Yu(this.body)||Ju(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ju(this.body)?null:Yu(this.body)?this.body.type||null:Qu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const l=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),u)),new Xu(n,r,s,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var Zu=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class el{constructor(e,t=200,n="OK"){this.headers=e.headers||new qu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class tl extends el{constructor(e={}){super(e),this.type=Zu.ResponseHeader}clone(e={}){return new tl({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nl extends el{constructor(e={}){super(e),this.type=Zu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rl extends el{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function il(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let sl=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof Xu)r=e;else{let i,s;i=n.headers instanceof qu?n.headers:new qu(n.headers),n.params&&(s=n.params instanceof Gu?n.params:new Gu({fromObject:n.params})),r=new Xu(e,t,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Lu(r).pipe(Vu(e=>this.handler.handle(e)));if(e instanceof Xu||"events"===n.observe)return i;const s=i.pipe(Fu(e=>e instanceof nl));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(x(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(x(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(x(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(x(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Gu).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,il(n,t))}post(e,t,n={}){return this.request("POST",e,il(n,t))}put(e,t,n={}){return this.request("PUT",e,il(n,t))}}return e.\u0275fac=function(t){return new(t||e)(Jn(Bu))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();class ol{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const al=new Vn("HTTP_INTERCEPTORS");let cl=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const ul=/^\)\]\}',?\n/;let ll=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new qu(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new tl({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),c=null;204!==i&&(c=void 0===n.response?n.responseText:n.response),0===i&&(i=c?200:0);let u=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(ul,"");try{c=""!==c?JSON.parse(c):null}catch(l){c=e,u&&(u=!1,c={error:l,text:c})}}u?(t.next(new nl({body:c,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new rl({error:c,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new rl({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let c=!1;const u=r=>{c||(t.next(s()),c=!0);let i={type:Zu.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:Zu.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),t.next({type:Zu.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Jn(su))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})();const hl=new Vn("XSRF_COOKIE_NAME"),dl=new Vn("XSRF_HEADER_NAME");class fl{}let pl=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Jn(Qc),Jn(cc),Jn(hl))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),gl=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Jn(fl),Jn(dl))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),ml=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(al,[]);this.chain=e.reduceRight((e,t)=>new ol(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Jn(zu),Jn(ks))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),yl=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:gl,useClass:cl}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:hl,useValue:t.cookieName}:[],t.headerName?{provide:dl,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[gl,{provide:al,useExisting:gl,multi:!0},{provide:fl,useClass:pl},{provide:hl,useValue:"XSRF-TOKEN"},{provide:dl,useValue:"X-XSRF-TOKEN"}]}),e})(),vl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[sl,{provide:Bu,useClass:ml},ll,{provide:zu,useExisting:ll}],imports:[[yl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();function wl(e,t){return new _(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=F(e[a]);let u=!1;n.add(c.subscribe({next:e=>{u||(u=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&u||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let _l=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Bs(ua),Bs(aa))},e.\u0275dir=Ye({type:e}),e})(),bl=(()=>{class e extends _l{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=Dn(e)))(n||e)}}(),e.\u0275dir=Ye({type:e,features:[As]}),e})();const Il=new Vn("NgValueAccessor"),Cl={provide:Il,useExisting:se(()=>Tl),multi:!0},El=new Vn("CompositionEventMode");let Tl=(()=>{class e extends _l{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Wc()?Wc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(Bs(ua),Bs(aa),Bs(El,8))},e.\u0275dir=Ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Qs("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[ea([Cl]),As]}),e})();const Sl=new Vn("NgValidators"),kl=new Vn("NgAsyncValidators");function xl(e){return null!=e}function Al(e){const t=Gs(e)?F(e):e;return Ws(t),t}function Ol(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Pl(e,t){return t.map(t=>t(e))}function Ml(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function Dl(e){return null!=e?function(e){if(!e)return null;const t=e.filter(xl);return 0==t.length?null:function(e){return Ol(Pl(e,t))}}(Ml(e)):null}function Nl(e){return null!=e?function(e){if(!e)return null;const t=e.filter(xl);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(c(t))return wl(t,null);if(u(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return wl(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return wl(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(x(e=>t(...e)))}return wl(e,null)}(Pl(e,t).map(Al)).pipe(x(Ol))}}(Ml(e)):null}function Rl(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}let Ll=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e}),e})(),Vl=(()=>{class e extends Ll{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=Dn(e)))(n||e)}}(),e.\u0275dir=Ye({type:e,features:[As]}),e})();class Fl extends Ll{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jl{constructor(e){this._cd=e}is(e){var t,n;return!!(null===(n=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===n?void 0:n[e])}}let Ul=(()=>{class e extends jl{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Bs(Fl,2))},e.\u0275dir=Ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&eo("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[As]}),e})(),Bl=(()=>{class e extends jl{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Bs(Vl,10))},e.\u0275dir=Ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&eo("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[As]}),e})();function zl(e,t){$l(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Hl(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Hl(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function ql(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function $l(e,t){const n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(Rl(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(Rl(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();ql(t._rawValidators,i),ql(t._rawAsyncValidators,i)}function Hl(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Kl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Gl="VALID",Wl="INVALID",Ql="PENDING",Yl="DISABLED";function Jl(e){return(th(e)?e.validators:e)||null}function Xl(e){return Array.isArray(e)?Dl(e):e||null}function Zl(e,t){return(th(t)?t.asyncValidators:e)||null}function eh(e){return Array.isArray(e)?Nl(e):e||null}function th(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class nh{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Xl(this._rawValidators),this._composedAsyncValidatorFn=eh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gl}get invalid(){return this.status===Wl}get pending(){return this.status==Ql}get disabled(){return this.status===Yl}get enabled(){return this.status!==Yl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Xl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=eh(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ql,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yl,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Gl&&this.status!==Ql||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yl:Gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ql,this._hasOwnPendingAsyncValidator=!0;const t=Al(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof ih?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof sh&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new tc,this.statusChanges=new tc}_calculateStatus(){return this._allControlsDisabled()?Yl:this.errors?Wl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ql)?Ql:this._anyControlsHaveStatus(Wl)?Wl:Gl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){th(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class rh extends nh{constructor(e=null,t,n){super(Jl(t),Zl(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Kl(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Kl(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ih extends nh{constructor(e,t,n){super(Jl(t),Zl(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof rh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class sh extends nh{constructor(e,t,n){super(Jl(t),Zl(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof rh?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const oh={provide:Vl,useExisting:se(()=>ch)},ah=(()=>Promise.resolve(null))();let ch=(()=>{class e extends Vl{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new tc,this.form=new ih({},Dl(e),Nl(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ah.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),zl(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ah.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),Kl(this._directives,e)})}addFormGroup(e){ah.then(()=>{const t=this._findContainer(e.path),n=new ih({});(function(e,t){$l(e,t)})(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ah.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){ah.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(Bs(Sl,10),Bs(kl,10))},e.\u0275dir=Ye({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Qs("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ea([oh]),As]}),e})();const uh={provide:Fl,useExisting:se(()=>hh)},lh=(()=>Promise.resolve(null))();let hh=(()=>{class e extends Fl{constructor(e,t,n,r){super(),this.control=new rh,this._registered=!1,this.update=new tc,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===Tl?n=e:Object.getPrototypeOf(e.constructor)===bl?r=e:i=e}),i||r||n||null}(0,r)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){lh.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;lh.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(Bs(Vl,9),Bs(Sl,10),Bs(kl,10),Bs(Il,10))},e.\u0275dir=Ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ea([uh]),As,ut]}),e})(),dh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const fh={provide:Il,useExisting:se(()=>ph),multi:!0};let ph=(()=>{class e extends bl{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=Dn(e)))(n||e)}}(),e.\u0275dir=Ye({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Qs("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[ea([fh]),As]}),e})(),gh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({}),e})();const mh=new Vn("NgModelWithFormControlWarning"),yh={provide:Sl,useExisting:se(()=>vh),multi:!0};let vh=(()=>{class e{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(e){return null==(t=e.value)||0===t.length?{required:!0}:null;var t}(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ye({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&js("required",t.required?"":null)},inputs:{required:"required"},features:[ea([yh])]}),e})(),wh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[[gh]]}),e})(),_h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[wh]}),e})(),bh=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:mh,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[wh]}),e})(),Ih=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,s=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new ih(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new rh(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new sh(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof rh||e instanceof ih||e instanceof sh?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({factory:function(){return new e},token:e,providedIn:bh}),e})();const Ch=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Eh=(e,t,n,r)=>{const i=r-t;return Math.sqrt(Math.pow(n-e,2)+Math.pow(i,2))};let Th,Sh,kh;const xh={x:void 0,y:void 0,prevX:void 0,prevY:void 0,counter:0,isMoving:()=>!(xh.counter>50)};let Ah;const Oh=[],Ph=e=>{kh=requestAnimationFrame(Ph),Sh.clearRect(0,0,Th.width,Th.height),xh.prevX==xh.x&&xh.prevY==xh.y&&xh.counter++;for(let t=0;t<Oh.length;t++)Oh[t].fly(),(Oh[t].x<0-Oh[t].radius||Oh[t].x>Th.width+Oh[t].radius||Oh[t].y<0-Oh[t].radius||Oh[t].y>Th.height+Oh[t].radius)&&(Oh[t].x=Ch(Oh[t].radius,Th.width-Oh[t].radius),Oh[t].y=Ch(Oh[t].radius,Th.height-Oh[t].radius));xh.prevX=xh.x,xh.prevY=xh.y},Mh=e=>{Th.width=window.innerWidth,Th.height=window.innerHeight},Dh=e=>{xh.x=event.clientX,xh.y=event.clientY,xh.counter=0};class Nh{constructor(e,t,n,r,i,s,o,a){this.x=e,this.y=t,this.radius=n,this.color={fill:r.fill,glow:r.glow},this.velocity={x:Math.random()*Math.PI,y:Math.random()*Math.PI},this.glow={pulse:s,flicker:o,default:void 0,strength:s?Ch(16,255):191,growing:!0},this.collision=i,this.connect=a}draw(){Sh.beginPath(),Sh.arc(this.x,this.y,this.radius,0,2*Math.PI,!1);const e=Sh.createRadialGradient(this.x,this.y,this.radius/10,this.x,this.y,this.radius);e.addColorStop(1,this.color.glow+"00"),e.addColorStop(.1,this.color.glow+this.glow.strength.toString(16)),e.addColorStop(0,this.color.fill),Sh.fillStyle=e,Sh.fill(),Sh.closePath()}fly(){this.collide(),this.stayWithinView(),this.x+=.75*Math.cos(this.velocity.x),this.y+=.75*Math.sin(this.velocity.y),this.calcGlow(),this.draw()}stayWithinView(){this.x+this.radius>=Th.width||this.x-this.radius<=0?this.velocity.x-=.07:this.velocity.x+=20*Math.random()*Math.PI/180-10*Math.PI/180,this.y+this.radius>=Th.height||this.y-this.radius<=0?this.velocity.y-=.07:this.velocity.y+=20*Math.random()*Math.PI/180-10*Math.PI/180}collide(){if(this.collision){this.calcField();const e=Oh.indexOf(this);for(let t=0;t<Oh.length;t++)if(Oh[t]!=Oh[e]){const e=Eh(this.x,this.y,Oh[t].x,Oh[t].y),n=this.radius+Oh[t].radius;e<=n&&(this.velocity.x-=.035,this.velocity.y-=.035,this.connect&&(Sh.save(),Sh.beginPath(),Sh.moveTo(this.x,this.y),Sh.lineTo(Oh[t].x,Oh[t].y),Sh.strokeStyle=`#ffffff${Math.floor(255-238*e/n).toString(16)}`,Sh.stroke(),Sh.closePath(),Sh.restore()))}}}calcField(){if(!xh.isMoving())return;let e=this.x-xh.x,t=this.y-xh.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),r=Math.atan(Math.abs(t)/Math.abs(e));if(n>7*Ah)return;let i=8/Math.pow(n/Ah,1.5);n<this.radius&&(i=8);let s=i*Math.cos(r)*(e/Math.abs(e)),o=i*Math.sin(r)*(t/Math.abs(t));Number.isFinite(s)&&(this.x+=s),Number.isFinite(o)&&(this.y+=o)}calcGlow(){void 0===this.glow.default&&(this.glow.default=this.glow.strength),this.glow.pulse&&(this.glow.default>=255?this.glow.growing=!1:this.glow.default<=48&&(this.glow.growing=!0),this.glow.growing?(this.glow.default++,this.glow.strength=this.glow.default):(this.glow.default--,this.glow.strength=this.glow.default)),this.glow.flicker&&(this.glow.strength=Math.random()>.99?Ch(16,255):this.glow.default)}}let Rh=(()=>{class e{constructor(){this.loading=!1}setLoading(e){this.loading=e}getLoading(){return this.loading}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Lh(e,t){1&e&&Ks(0,"div",1)}let Vh=(()=>{class e{constructor(e){this.loader=e}}return e.\u0275fac=function(t){return new(t||e)(Bs(Rh))},e.\u0275cmp=$e({type:e,selectors:[["app-spinner"]],decls:1,vars:1,consts:[["class","cssload-container",4,"ngIf"],[1,"cssload-container"]],template:function(e,t){1&e&&function(e,t,n,r,i,s,o,a){const c=xt(),u=At(),l=u.firstCreatePass?function(e,t,n,r,i,s,o,a,c){const u=t.consts,l=Ai(t,20,4,"div",Ct(u,0));Bi(t,n,l,Ct(u,undefined)),Zt(t,l);const h=l.tViews=ji(2,l,r,1,0,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(0,u,c,t):u.data[20];Dt(l,!1);const h=c[11].createComment("");Xr(u,c,h,l),br(h,c),ts(c,c[20]=Ji(h,c,h,l)),st(l)&&Li(u,c,l)}(0,Lh),2&e&&zs("ngIf",t.loader.getLoading())},directives:[tu],styles:[""],encapsulation:3}),e})(),Fh=(()=>{class e{constructor(){this.isKL=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-hero"]],inputs:{isKL:"isKL"},decls:17,vars:0,consts:function(){let e,t,n,r;return e=$localize`Wedding Invitation`,t=$localize`Jake & MJ`,n=$localize`As we join in marriage,`,r=$localize`We're so glad to have the pleasure of your company`,[[1,"flex-column"],[1,"diamond","flex-row"],[1,"flex-column","txt-container"],[1,"title"],[1,"m-0"],e,t,[1,"subtext"],n,r]},template:function(e,t){1&e&&($s(0,"div",0),$s(1,"div",1),$s(2,"div",2),$s(3,"div",3),$s(4,"h1",4),Ko(5,5),Hs(),Hs(),$s(6,"div",0),$s(7,"h3"),Ko(8,6),Hs(),$s(9,"h5"),so(10,"Reception on the 2nd of February 2024"),Hs(),Hs(),Hs(),Hs(),$s(11,"div",7),$s(12,"p"),Ko(13,8),Hs(),$s(14,"p"),Ko(15,9),Hs(),Ks(16,"p"),Hs(),Hs())},styles:[".banner-image[_ngcontent-%COMP%]{background-image:url(/assets/images/background.jpeg);position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:50%}.txt-container[_ngcontent-%COMP%]{padding:0 1em;color:#585755}.subtext[_ngcontent-%COMP%], .txt-container[_ngcontent-%COMP%]{font-family:Dancing script,Ma Shan Zheng}.subtext[_ngcontent-%COMP%]{position:absolute;bottom:10%;color:#fff}.title[_ngcontent-%COMP%]{margin-bottom:1em}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;font-family:Playfair Display,Ma Shan Zheng}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:500}h3[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.5em}h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin-top:.5em}h5[_ngcontent-%COMP%]{margin-bottom:.5em;font-size:1em;font-weight:300}@media only screen and (min-width:768px){h1[_ngcontent-%COMP%]{font-size:5em}h3[_ngcontent-%COMP%]{font-size:2em}h5[_ngcontent-%COMP%]{font-weight:300}.subtext[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-size:1.5em}}@media only screen and (min-width:1024px){h1[_ngcontent-%COMP%]{font-size:5em}h3[_ngcontent-%COMP%]{font-size:2em}h5[_ngcontent-%COMP%]{font-size:1.5em;font-weight:300}.subtext[_ngcontent-%COMP%]{right:20%;bottom:10%}}@media only screen and (min-width:1440px){h1[_ngcontent-%COMP%]{font-size:8em}h3[_ngcontent-%COMP%]{font-size:4em}h5[_ngcontent-%COMP%]{font-size:3em;font-weight:300}}"]}),e})(),jh=(()=>{class e{constructor(){this.events=[{id:0,title:"My last travel",content:"\u76f8\u9047\u3001\u76f8\u8bc6\u3001\u76f8\u77e5...",date:"2018",icon:""},{id:1,title:"My Job",content:"\u76f8\u7231\u3001\u76f8\u604b",date:"2019",icon:""},{id:2,title:"My Education",content:"\u6211\u4eec\u51b3\u5b9a\u643a\u624b\u5171\u5ea6\u4f59\u751f",date:"2022",icon:""},{id:3,title:"My Education",content:"\u6c42\u5a5a",date:"01/04/22",icon:""},{id:4,title:"My Education",content:"\u9886\u8bc1",date:"31/08/22",icon:""},{id:3,title:"My Education",content:"\u5a5a\u793c",date:"17/12/22",icon:""},{id:5,title:"My Education",content:"\u5a5a\u793c",date:"25/12/22",icon:""}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-couple"]],decls:33,vars:0,consts:function(){let e,t,n;return e=$localize`When we first met`,t=$localize`When Jake proposed`,n=$localize`SLC Wedding`,[[1,"couple-container"],[1,"flex-row","couple-img-container"],[1,"img-container","groom"],[1,"img-container","bride"],[1,"timeline-container"],[1,"timeline"],[1,"timeline-panel"],[1,"timeline-heading"],[1,"timeline-title"],e,[1,"timeline-date"],[1,""],[1,"glyphicon","glyphicon-time"],[1,"timeline-inverted"],t,n]},template:function(e,t){1&e&&($s(0,"div",0),$s(1,"div",1),Ks(2,"div",2),Ks(3,"div",3),Hs(),$s(4,"div",4),$s(5,"ul",5),$s(6,"li"),$s(7,"div",6),$s(8,"div",7),$s(9,"h4",8),Ko(10,9),Hs(),$s(11,"p",10),$s(12,"small",11),Ks(13,"i",12),so(14,"July 2023"),Hs(),Hs(),Hs(),Hs(),Hs(),$s(15,"li",13),$s(16,"div",6),$s(17,"div",7),$s(18,"h4",8),Ko(19,14),Hs(),$s(20,"p",10),$s(21,"small",11),Ks(22,"i",12),so(23,"October 2023"),Hs(),Hs(),Hs(),Hs(),Hs(),$s(24,"li"),$s(25,"div",6),$s(26,"div",7),$s(27,"h4",8),Ko(28,15),Hs(),$s(29,"p",10),$s(30,"small",11),Ks(31,"i",12),so(32,"February 2024"),Hs(),Hs(),Hs(),Hs(),Hs(),Hs(),Hs(),Hs())},styles:['.couple-container[_ngcontent-%COMP%]{position:relative;min-height:50vh}.couple-img-container[_ngcontent-%COMP%]{margin:1em}.couple-img-container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{margin-top:1em;justify-content:space-between}.couple-img-container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%}.bride[_ngcontent-%COMP%]{background-image:url(bride-cropped.4ad40b01ff4d9a3dde26.jpeg)}.groom[_ngcontent-%COMP%]{background-image:url(groom.ce549f6d60f4d37df6e5.jpeg)}.img-container[_ngcontent-%COMP%]{border-radius:50%;height:150px;width:150px;background-size:cover;background-position:50%;position:relative}.img-container[_ngcontent-%COMP%]:after{border-radius:50%;position:absolute;content:"";top:-5%;left:-5%;height:110%;width:110%}.img-container.bride[_ngcontent-%COMP%]{margin-top:10%}.img-container.bride[_ngcontent-%COMP%]:after{border:2px solid #4f3566}.img-container.groom[_ngcontent-%COMP%]{margin-bottom:10%}.img-container.groom[_ngcontent-%COMP%]:after{border:2px solid #4f3566}.card-title[_ngcontent-%COMP%]{font-size:2em}.right[_ngcontent-%COMP%]{right:-10%}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{position:absolute;top:-10%}.left[_ngcontent-%COMP%]{left:-10%}.right-text[_ngcontent-%COMP%]{text-align:right}.left-text[_ngcontent-%COMP%]{text-align:left}.txt-container[_ngcontent-%COMP%]{margin:2em;padding:1em 2em;font-size:1.5em;z-index:-1;min-height:250px;position:relative}.txt-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{z-index:1}.timeline-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.timeline[_ngcontent-%COMP%]{margin-top:2em;list-style:none;padding:20px 0;position:relative;width:100%;font-family:Dancing script,Ma Shan Zheng}.timeline[_ngcontent-%COMP%]:before{top:3%;bottom:3%;position:absolute;content:" ";width:3px;background-color:#fff;left:50%;margin-left:-1.5px}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-bottom:10px;position:relative;text-align:right}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:after, .timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:before{content:" ";display:table}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:after{clear:both}.timeline[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]{width:46%;float:left;border-radius:2px;padding:-200px;position:relative}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%]{text-align:left}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]{float:right}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]:before{border-left-width:0;border-right-width:15px;left:-15px;right:auto}.timeline[_ngcontent-%COMP%] > li.timeline-inverted[_ngcontent-%COMP%] > .timeline-panel[_ngcontent-%COMP%]:after{border-left-width:0;border-right-width:14px;left:-14px;right:auto}.timeline-title[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1em}.timeline-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.timeline-date[_ngcontent-%COMP%]{font-weight:bolder;margin-bottom:.5em;color:#fff}.timeline-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .timeline-body[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin-bottom:0}.timeline-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{margin-top:5px}@media only screen and (min-width:768px){.img-container[_ngcontent-%COMP%]{height:250px;width:250px}}@media only screen and (min-width:1024px){.bg-image[_ngcontent-%COMP%]{display:none}.img-container[_ngcontent-%COMP%]{height:350px;width:350px}}@media only screen and (min-width:1440px){.bg-image[_ngcontent-%COMP%]{display:none}.img-container[_ngcontent-%COMP%]{height:500px;width:500px}}']}),e})(),Uh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-biography"]],decls:16,vars:0,consts:[[1,"biography"],[1,"profile-picture"],[1,"bio-content"]],template:function(e,t){1&e&&($s(0,"div",0),Ks(1,"div",1),$s(2,"div",2),$s(3,"h1"),so(4,"Marjorie Itabashi"),Hs(),$s(5,"p"),so(6," I was born in the middle of the summer with no a/c to a Japanese father and American Mother in Chiba, Japan. Raised with 4 other children as the oldest aka guinea pig of the pack, I always enjoyed having fun with people, being active, adventurous, and independent. Moving to Utah for high school, I was introduced to many cultures and learned to celebrate them. During this time, I also gained interest in personal growth through tourism college courses, late babysitting nights, and working for a marketing company. After serving my church mission in the countryside of the Japan Kobe Mission, I decided to go back to school by attending LDS Business College to study Project Management. Upon receiving my associate\u2019s degree, I transferred to Brigham Young University Hawaii to study Hospitality and Tourism Management. While I loved the industry, and worked in various parts of it, the difficulty of employment during the Covid-19 pandemic led me back to Utah where I currently work for The Church of Jesus Christ of Latter-Day Saints headquarters. Since I get to do customer support for Japan, I work in the evenings, allowing me to have the warm day time be my free time. Part of that is spent helping at a daycare where I get to experience high energy and mental healing through adoring children. Most of my other free time is spent hiking, going to the gym, and working on my small garden. During the winter I mostly just enjoy eating. Even though I found Jake to be a little cocky at first, I agreed to meet him because he offered free food upfront. Some of my favorite things about him is that he likes crunchy fries so that I can eat the soggy ones and how he would do steep hikes with me even the day after leg day. I can\u2019t be grateful enough to explore life\u2019s journey with someone who is just as crazy about life as I am. "),Hs(),Hs(),Hs(),Ks(7,"br"),Ks(8,"br"),$s(9,"div",0),Ks(10,"div",1),$s(11,"div",2),$s(12,"h1"),so(13,"Jake Loke"),Hs(),$s(14,"p"),so(15," Originating from vibrant and culturally diverse Malaysia, my journey to the United States in 2014 has been a thrilling pursuit of knowledge and a passion for diverse interests. My journey began as I landed in Alaska serving as a missionary for the LDS church. I completed my studies at Brigham Young University-Idaho (BYU-I), where I cultivated a solid foundation of knowledge. My educational adventure continued at Utah Valley University (UVU) and the University of Utah (U of U), broadening my horizons. My fascination with technology is an ever-present delight. From exploring the nuances of artificial intelligence to keeping up with the latest advancements, I enjoy staying at the forefront of innovation, fueling my analytical thinking and sparking innovative solutions to complex problems. Beyond academics and technology, I enjoy basketball and hitting the gym. The court and gym are both a sanctuary where I express my competitive spirit and dedication to build my yin and yang. My commitment to self-improvement extends to the gym, where I continuously strive to better myself, both physically and mentally. Embracing personal development as a way of life, I'm driven by a thirst for knowledge and growth. This guiding philosophy encourages me to evolve and contribute positively to the world around me. In summary, my journey from Malaysia to the United States is a transformative adventure marked by a commitment to education, a deep passion for technology, and an unwavering pursuit of self-improvement and a reminder of my wonderful supportive family members. With enthusiasm and a thirst for self-discovery, I eagerly anticipate the exciting adventures and opportunities that await me in the future with Marjorie. "),Hs(),Hs(),Hs())},styles:["body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:700}body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Playfair Display,Ma Shan Zheng;color:#333}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f0f0f0;text-align:center}.biography[_ngcontent-%COMP%]{background:linear-gradient(180deg,#bcc7bb,#6b8d6b);border-radius:5px;width:80%;padding:20px;color:#fff;font-size:larger;margin:auto}h1[_ngcontent-%COMP%]{font-size:1.5em}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-top:10px}"]}),e})(),Bh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-gallery"]],decls:7,vars:0,consts:[[1,"gallery-container"],[1,"flex-column","couple-img-container"],[1,"top"],["src","assets/images/couple1.jpeg",1,""],[1,"flex-row","col-12","bottom"],["src","assets/images/couple2.jpeg",1,""],["src","assets/images/couple3-2.jpeg",1,""]],template:function(e,t){1&e&&($s(0,"div",0),$s(1,"div",1),$s(2,"div",2),Ks(3,"img",3),Hs(),$s(4,"div",4),Ks(5,"img",5),Ks(6,"img",6),Hs(),Hs(),Hs())},styles:[".gallery-container[_ngcontent-%COMP%]{position:relative;min-height:50vh}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%;border:2px solid #4f3566;margin:1em}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-right-radius:50%;border-top-left-radius:50%}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{margin-top:1em;justify-content:space-between}.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%;border:2px solid #4f3566}@media only screen and (min-width:1024px){.couple-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}}.couple-img-container[_ngcontent-%COMP%]{text-align:center}.image-container[_ngcontent-%COMP%]{display:inline-block}"]}),e})(),zh=(()=>{class e{constructor(){this.isKL=!0,this.KLRestaurant=$localize`Grand Imperial Restaurant`,this.JBRestaurant=$localize`Kee Lin Vegetarian Food`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-venue"]],inputs:{isKL:"isKL"},decls:123,vars:3,consts:function(){let e,t,n,r;return e=$localize` Date`,t=$localize`2, February 2024`,n=$localize`Venue`,r=$localize`Dai-Ichi Japanese Ward`,[[1,"wedding-container"],[1,"wedding-date-container"],[1,"venues__ceremony"],[1,"ceremony__card","venues__card","border--colored"],[1,"venues__card-head","text--colored"],[1,"venues__card-title","text--colored"],e,[1,"venues__card-info"],[1,"venues__card-block"],[1,"venues__card-label"],t,[1,"venues__card-data"],[1,"address__map-container--left","address__map"],["id","address__map--ceremony",1,"address__map--ceremony","map","glassmorphism"],["id","calendar-card",1,"card-body"],[1,"month"],[1,"year-txt"],[1,"weekdays"],[1,"days"],[1,"fa","fa-heart",3,"ngClass"],[3,"ngClass"],[1,"wedding-venue-container"],[1,"venues__reception"],[1,"reception__card","venues__card","border--colored"],n,r,["href","https://www.google.com/maps?q=2005+S+900+E,+Salt+Lake+City,+UT+84105","target","_blank","rel","noopener noreferrer"],[1,"address__map-container--right","address__map"],["id","address__map--reception",1,"address__map--reception","map","glassmorphism"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d96755.8648237736!2d-111.8653901797223!3d40.72636400873647!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x87528aa4495bbf1f%3A0xdf9f39145ea501b3!2s2005%20S%20900%20E%2C%20Salt%20Lake%20City%2C%20UT%2084105!5e0!3m2!1sen!2sus!4v1696537011037!5m2!1sen!2sus","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0",3,"ngClass"]]},template:function(e,t){1&e&&($s(0,"div",0),$s(1,"div",1),$s(2,"div",2),$s(3,"div",3),$s(4,"div",4),$s(5,"h3",5),Ko(6,6),Hs(),Hs(),$s(7,"div",7),$s(8,"div",8),$s(9,"span",9),Ko(10,10),Hs(),Hs(),$s(11,"div",8),$s(12,"span",11),so(13,"6:30 p.m."),Hs(),Hs(),Hs(),Hs(),$s(14,"div",12),$s(15,"div",13),$s(16,"div",14),$s(17,"div",15),$s(18,"div",16),so(19," 2024 "),Hs(),$s(20,"div"),$s(21,"span"),so(22,"February"),Hs(),Hs(),Hs(),$s(23,"ul",17),$s(24,"li"),so(25,"Sun"),Hs(),$s(26,"li"),so(27,"Mon"),Hs(),$s(28,"li"),so(29,"Tue"),Hs(),$s(30,"li"),so(31,"Wed"),Hs(),$s(32,"li"),so(33,"Thur"),Hs(),$s(34,"li"),so(35,"Fri"),Hs(),$s(36,"li"),so(37,"Sat"),Hs(),Hs(),$s(38,"ul",18),Ks(39,"li"),Ks(40,"li"),Ks(41,"li"),Ks(42,"li"),$s(43,"li"),so(44,"1"),Hs(),$s(45,"li"),Ks(46,"i",19),$s(47,"div",20),$s(48,"span"),so(49,"2"),Hs(),Hs(),Hs(),$s(50,"li"),so(51,"3"),Hs(),$s(52,"li"),so(53,"4"),Hs(),$s(54,"li"),so(55,"5"),Hs(),$s(56,"li"),so(57,"6"),Hs(),$s(58,"li"),so(59,"7"),Hs(),$s(60,"li"),so(61,"8"),Hs(),$s(62,"li"),so(63,"9"),Hs(),$s(64,"li"),so(65,"10"),Hs(),$s(66,"li"),so(67,"11"),Hs(),$s(68,"li"),so(69,"12"),Hs(),$s(70,"li"),so(71,"13"),Hs(),$s(72,"li"),so(73,"14"),Hs(),$s(74,"li"),so(75,"15"),Hs(),$s(76,"li"),so(77,"16"),Hs(),$s(78,"li"),so(79,"17"),Hs(),$s(80,"li"),so(81,"18"),Hs(),$s(82,"li"),so(83,"10"),Hs(),$s(84,"li"),so(85,"20"),Hs(),$s(86,"li"),so(87,"21"),Hs(),$s(88,"li"),so(89,"22"),Hs(),$s(90,"li"),so(91,"23"),Hs(),$s(92,"li"),so(93,"24"),Hs(),$s(94,"li"),so(95,"25"),Hs(),$s(96,"li"),so(97,"26"),Hs(),$s(98,"li"),so(99,"27"),Hs(),$s(100,"li"),so(101,"28"),Hs(),$s(102,"li"),so(103,"29"),Hs(),Ks(104,"li"),Ks(105,"li"),Hs(),Hs(),Hs(),Hs(),Hs(),Hs(),$s(106,"div",21),$s(107,"div",22),$s(108,"div",23),$s(109,"div",4),$s(110,"h3",5),Ko(111,24),Hs(),Hs(),$s(112,"div",7),$s(113,"div",8),$s(114,"span",9),Ko(115,25),Hs(),Hs(),$s(116,"div",8),$s(117,"a",26),$s(118,"span",11),so(119,"2005 S 900 E, Salt Lake City, UT 84105"),Hs(),Hs(),Hs(),Hs(),Hs(),$s(120,"div",27),$s(121,"div",28),Ks(122,"iframe",29),Hs(),Hs(),Hs(),Hs(),Hs()),2&e&&(wi(46),zs("ngClass",t.isKL?"hide":"show"),wi(1),zs("ngClass",t.isKL?"":"active"),wi(75),zs("ngClass",t.isKL?"hide":"show"))},directives:[eu],styles:['#calendar-card[_ngcontent-%COMP%]{width:90%;height:90%;display:flex;flex-direction:column;padding:0 1em;font-family:Playfair Display}#calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{color:#000;display:flex;justify-content:space-between;align-items:flex-end;padding:0 1em 1em}#calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   .year-txt[_ngcontent-%COMP%], #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2em}#calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]{margin:0;padding:5px;background-color:#000;border-radius:2em;display:flex;justify-content:space-evenly;flex-wrap:wrap}#calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;display:inline-block;width:13.6%;text-align:center;color:#fff}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{padding:5px;margin:0;display:flex;flex-wrap:wrap;justify-content:space-evenly;flex:1}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;width:13.6%;text-align:center;margin-bottom:5px;color:#777;font-weight:700;display:flex;align-items:center;justify-content:center}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#000;transform:scale(2)}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{position:relative;color:#fff!important}#calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{z-index:2}.wedding-container[_ngcontent-%COMP%]{width:92%;max-width:1152px;padding:0 16px;margin:0 auto}.wedding-date-container[_ngcontent-%COMP%], .wedding-venue-container[_ngcontent-%COMP%]{position:relative;max-width:992px;margin:0 auto 100px}.venues[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:112px}.venues[_ngcontent-%COMP%]   .s-title[_ngcontent-%COMP%]{padding-bottom:48px}.venues__card[_ngcontent-%COMP%]{width:560px;border:8px solid #4f3566}.address__map[_ngcontent-%COMP%]{width:576px;height:408px}.map[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff}.map[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:90%;width:90%}.venues__ceremony[_ngcontent-%COMP%]{margin-bottom:5em;min-height:450px;display:flex;justify-content:flex-end}.venues__reception[_ngcontent-%COMP%]{min-height:450px;display:flex;justify-content:flex-start}.address__map-container--left[_ngcontent-%COMP%]{position:absolute;order:1;left:0;top:100px}.address__map-container--right[_ngcontent-%COMP%]{position:absolute;right:0;top:100px}.address__map--ceremony[_ngcontent-%COMP%], .address__map--reception[_ngcontent-%COMP%]{border:none}.venues__card-head[_ngcontent-%COMP%]{position:relative;padding-bottom:15px;margin-bottom:24px}.venues__card-head[_ngcontent-%COMP%]:after{content:"";position:absolute;width:112px;height:1px;background-color:#fff;bottom:0;left:0;transform:translateX(-50%)}.venues__card-title[_ngcontent-%COMP%]{font-family:Playfair Display,Ma Shan Zheng,serif;font-weight:700;font-size:32px;line-height:44px;text-transform:uppercase;color:#fff}.venues__card-block[_ngcontent-%COMP%]{display:flex}.venues__card-label[_ngcontent-%COMP%]{font-weight:700}.venues__card-data[_ngcontent-%COMP%], .venues__card-label[_ngcontent-%COMP%]{font-size:24px;line-height:24px;color:#fff}.venues__card-data[_ngcontent-%COMP%]{font-weight:400}.venues__card-link[_ngcontent-%COMP%]{font-weight:400;font-size:20px;line-height:20px;color:#fff}.ceremony__card[_ngcontent-%COMP%]{padding:34px 32px 34px 224px}.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.mrg[_ngcontent-%COMP%]{margin-right:48px}.venues__card-info[_ngcontent-%COMP%]   .venues__card-block[_ngcontent-%COMP%]:first-child{margin-bottom:44px}.venues__card-link[_ngcontent-%COMP%]{display:block;margin-top:33px;text-align:center;opacity:1;transition:all .2s ease-out}.venues__card-link[_ngcontent-%COMP%]:hover{opacity:.8}.reception__card[_ngcontent-%COMP%]{padding:34px 174px 34px 82px}@media only screen and (max-width:1030px){.venues[_ngcontent-%COMP%]   .container-sm[_ngcontent-%COMP%]{max-width:100%}.venues__ceremony[_ngcontent-%COMP%], .venues__reception[_ngcontent-%COMP%]{flex-direction:column}.address__map[_ngcontent-%COMP%]{position:relative;top:0;left:50%;width:92%;transform:translateX(-50%)}.venues__card[_ngcontent-%COMP%]{max-width:90%;width:90%;padding-right:20px;padding-left:20px;text-align:center;margin:0 auto 20px;box-sizing:border-box}.venues__card-block[_ngcontent-%COMP%]{justify-content:center}.venues__card-head[_ngcontent-%COMP%]:after{left:50%;transform:translateX(-50%)}.venues__ceremony[_ngcontent-%COMP%]{margin-bottom:60px}}@media only screen and (max-width:500px){.venues__card-title[_ngcontent-%COMP%]{font-size:24px;line-height:34px}}']}),e})(),qh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-link"]],decls:28,vars:0,consts:[[1,"link-container"],["href","https://www.amazon.com/wedding/registry/IBVPWF8HNLXS"],["href","https://weduploader.com/upload/v0zNe57BKZr75aXx"],["href","https://drive.google.com/drive/folders/1tXMq7Mqsn7oFNdbbsLH_XSWFhfT1dc8U?usp=sharing"],["href","https://www.paypal.com/donate/?business=2L2SVPSQPKAFW&no_recurring=0&item_name=Support+our+dream+wedding%2C+create+lasting+memories%21&currency_code=USD"]],template:function(e,t){1&e&&($s(0,"div",0),$s(1,"h2"),so(2,"\ud83c\udf81 Check out our Amazon Registry for items that tickle our fancy."),Hs(),$s(3,"ul"),$s(4,"li"),$s(5,"a",1),so(6,"Amazon Registry"),Hs(),Hs(),Hs(),Hs(),$s(7,"div",0),$s(8,"h2"),so(9,"\ud83d\udcf7 Share your cherished moments by uploading photos and videos on our special day!"),Hs(),$s(10,"ul"),$s(11,"li"),$s(12,"a",2),so(13,"Video Upload"),Hs(),Hs(),Hs(),Hs(),$s(14,"div",0),$s(15,"h2"),so(16,"\ud83d\udcf8 Explore even more memories in our Photo Gallery."),Hs(),$s(17,"ul"),$s(18,"li"),$s(19,"a",3),so(20,"Photo Gallery"),Hs(),Hs(),Hs(),Hs(),$s(21,"div",0),$s(22,"h2"),so(23,"\ud83d\udc95 Feeling extra generous? You can contribute via PayPal to help us make our dreams come true!"),Hs(),$s(24,"ul"),$s(25,"li"),$s(26,"a",4),so(27,"Donations"),Hs(),Hs(),Hs(),Hs())},styles:[".link-container[_ngcontent-%COMP%]{font-family:Playfair Display,Ma Shan Zheng,serif;background:linear-gradient(180deg,#9dcea9,#609f60);border:1px solid #90aa77;border-radius:10px;padding:20px;margin:20px;box-shadow:0 0 5px #0003}.link-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;transition:color .3s}.link-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#022850}"]}),e})();function $h(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function Hh(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(e){$h(s,r,i,o,a,"next",e)}function a(e){$h(s,r,i,o,a,"throw",e)}o(void 0)})}}const Kh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Gh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0;let u=(15&o)<<2|c>>6,l=63&c;a||(l=64,s||(u=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[u],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Kh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Wh;r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Wh extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qh=function(e){return function(e){const t=Kh(e);return Gh.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Yh=function(e){try{return Gh.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Jh(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}const Xh=()=>{try{return Jh().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Yh(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Zh=e=>{var t,n;return null===(n=null===(t=Xh())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ed=()=>{var e;return null===(e=Xh())||void 0===e?void 0:e.config},td=e=>{var t;return null===(t=Xh())||void 0===t?void 0:t[`_${e}`]};class nd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function rd(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function id(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function sd(){try{return"object"==typeof indexedDB}catch(e){return!1}}function od(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function ad(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class cd extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,cd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ud.prototype.create)}}class ud{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(ld,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new cd(r,`${this.serviceName}: ${s} (${r}).`,n)}}const ld=/\{\$([^}]+)}/g;function hd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function dd(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(fd(n)&&fd(s)){if(!dd(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fd(e){return null!==e&&"object"==typeof e}function pd(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function gd(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function md(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class yd{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=vd),void 0===r.error&&(r.error=vd),void 0===r.complete&&(r.complete=vd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vd(){}const wd=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})};function _d(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function bd(e){return e&&e._delegate?e._delegate:e}class Id{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cd="[DEFAULT]";class Ed{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new nd;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Cd})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return Hh(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(FF){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Cd?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(FF){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:Cd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Td{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ed(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Sd=[];var kd,xd;(xd=kd||(kd={}))[xd.DEBUG=0]="DEBUG",xd[xd.VERBOSE=1]="VERBOSE",xd[xd.INFO=2]="INFO",xd[xd.WARN=3]="WARN",xd[xd.ERROR=4]="ERROR",xd[xd.SILENT=5]="SILENT";const Ad={debug:kd.DEBUG,verbose:kd.VERBOSE,info:kd.INFO,warn:kd.WARN,error:kd.ERROR,silent:kd.SILENT},Od=kd.INFO,Pd={[kd.DEBUG]:"log",[kd.VERBOSE]:"log",[kd.INFO]:"info",[kd.WARN]:"warn",[kd.ERROR]:"error"},Md=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Pd[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Dd{constructor(e){this.name=e,this._logLevel=Od,this._logHandler=Md,this._userLogHandler=null,Sd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kd))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ad[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kd.DEBUG,...e),this._logHandler(this,kd.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kd.VERBOSE,...e),this._logHandler(this,kd.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kd.INFO,...e),this._logHandler(this,kd.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kd.WARN,...e),this._logHandler(this,kd.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kd.ERROR,...e),this._logHandler(this,kd.ERROR,...e)}}let Nd,Rd;const Ld=new WeakMap,Vd=new WeakMap,Fd=new WeakMap,jd=new WeakMap,Ud=new WeakMap;let Bd={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Vd.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zd(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function zd(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(zd(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Ld.set(t,e)}).catch(()=>{}),Ud.set(t,e),t}(e);if(jd.has(e))return jd.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Rd||(Rd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(qd(this),e),zd(Ld.get(this))}:function(...e){return zd(t.apply(qd(this),e))}:function(e,...n){const r=t.call(qd(this),e,...n);return Fd.set(r,e.sort?e.sort():[e]),zd(r)}:(e instanceof IDBTransaction&&function(e){if(Vd.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Vd.set(e,t)}(e),n=e,(Nd||(Nd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(e,Bd):e);var t,n}(e);return t!==e&&(jd.set(e,t),Ud.set(t,e)),t}const qd=e=>Ud.get(e),$d=["get","getKey","getAll","getAllKeys","count"],Hd=["put","add","delete","clear"],Kd=new Map;function Gd(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Kd.get(t))return Kd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Hd.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$d.includes(n))return;const s=function(){var e=Hh(function*(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(yield Promise.all([o[n](...t),i&&s.done]))[0]});return function(t){return e.apply(this,arguments)}}();return Kd.set(t,s),s}var Wd;Wd=Bd,Bd={...Wd,get:(e,t,n)=>Gd(e,t)||Wd.get(e,t,n),has:(e,t)=>!!Gd(e,t)||Wd.has(e,t)};class Qd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Yd="@firebase/app",Jd="0.9.13",Xd=new Dd("@firebase/app"),Zd="[DEFAULT]",ef={[Yd]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tf=new Map,nf=new Map;function rf(e,t){try{e.container.addComponent(t)}catch(n){Xd.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function sf(e){const t=e.name;if(nf.has(t))return Xd.debug(`There were multiple attempts to register component ${t}.`),!1;nf.set(t,e);for(const n of tf.values())rf(n,e);return!0}function of(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const af=new ud("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Id("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw af.create("app-deleted",{appName:this._name})}}const uf="9.23.0";function lf(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Zd,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw af.create("bad-app-name",{appName:String(i)});if(n||(n=ed()),!n)throw af.create("no-options");const s=tf.get(i);if(s){if(dd(n,s.options)&&dd(r,s.config))return s;throw af.create("duplicate-app",{appName:i})}const o=new Td(i);for(const c of nf.values())o.addComponent(c);const a=new cf(n,r,o);return tf.set(i,a),a}function hf(e="[DEFAULT]"){const t=tf.get(e);if(!t&&e===Zd&&ed())return lf();if(!t)throw af.create("no-app",{appName:e});return t}function df(){return Array.from(tf.values())}function ff(){return(ff=Hh(function*(e){const t=e.name;tf.has(t)&&(tf.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function pf(e,t,n){var r;let i=null!==(r=ef[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Xd.warn(e.join(" "))}sf(new Id(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const gf="firebase-heartbeat-store";let mf,yf,vf=null;function wf(){return vf||(vf=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=zd(o);return r&&o.addEventListener("upgradeneeded",e=>{r(zd(o.result),e.oldVersion,e.newVersion,zd(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(gf)}}}).catch(e=>{throw af.create("idb-open",{originalErrorMessage:e.message})})),vf}function _f(){return(_f=Hh(function*(e){try{const t=yield wf();return yield t.transaction(gf).objectStore(gf).get(Cf(e))}catch(t){if(t instanceof cd)Xd.warn(t.message);else{const e=af.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Xd.warn(e.message)}}})).apply(this,arguments)}function bf(e,t){return If.apply(this,arguments)}function If(){return(If=Hh(function*(e,t){try{const n=(yield wf()).transaction(gf,"readwrite"),r=n.objectStore(gf);yield r.put(t,Cf(e)),yield n.done}catch(n){if(n instanceof cd)Xd.warn(n.message);else{const e=af.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Xd.warn(e.message)}}})).apply(this,arguments)}function Cf(e){return`${e.name}!${e.options.appId}`}class Ef{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sf(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}triggerHeartbeat(){var e=this;return Hh(function*(){const t=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Tf();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==n&&!e._heartbeatsCache.heartbeats.some(e=>e.date===n))return e._heartbeatsCache.heartbeats.push({date:n,agent:t}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return Hh(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Tf(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),kf(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),i=Qh(JSON.stringify({version:2,heartbeats:n}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),i})()}}function Tf(){return(new Date).toISOString().substring(0,10)}class Sf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Hh(function*(){return!!sd()&&od().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return Hh(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(e){return _f.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return Hh(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return bf(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return Hh(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return bf(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function kf(e){return Qh(JSON.stringify({version:2,heartbeats:e})).length}sf(new Id("platform-logger",e=>new Qd(e),"PRIVATE")),sf(new Id("heartbeat",e=>new Ef(e),"PRIVATE")),pf(Yd,Jd,""),pf(Yd,Jd,"esm2017"),pf("fire-js",""),pf("firebase","9.23.0","app");const xf=new WeakMap,Af=new WeakMap,Of=new WeakMap,Pf=new WeakMap,Mf=new WeakMap;let Df={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Af.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Of.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nf(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Nf(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Nf(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&xf.set(t,e)}).catch(()=>{}),Mf.set(t,e),t}(e);if(Pf.has(e))return Pf.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yf||(yf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Rf(this),e),Nf(xf.get(this))}:function(...e){return Nf(t.apply(Rf(this),e))}:function(e,...n){const r=t.call(Rf(this),e,...n);return Of.set(r,e.sort?e.sort():[e]),Nf(r)}:(e instanceof IDBTransaction&&function(e){if(Af.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Af.set(e,t)}(e),n=e,(mf||(mf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(e,Df):e);var t,n}(e);return t!==e&&(Pf.set(e,t),Mf.set(t,e)),t}const Rf=e=>Mf.get(e);function Lf(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Nf(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Nf(o.result),e.oldVersion,e.newVersion,Nf(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function Vf(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),Nf(n).then(()=>{})}const Ff=["get","getKey","getAll","getAllKeys","count"],jf=["put","add","delete","clear"],Uf=new Map;function Bf(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Uf.get(t))return Uf.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=jf.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ff.includes(n))return;const s=function(){var e=Hh(function*(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(yield Promise.all([o[n](...t),i&&s.done]))[0]});return function(t){return e.apply(this,arguments)}}();return Uf.set(t,s),s}Df=(e=>({...e,get:(t,n,r)=>Bf(t,n)||e.get(t,n,r),has:(t,n)=>!!Bf(t,n)||e.has(t,n)}))(Df);const zf="@firebase/installations",qf="0.6.4",$f="w:0.6.4",Hf="FIS_v2",Kf=new ud("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Gf(e){return e instanceof cd&&e.code.includes("request-failed")}function Wf({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Qf(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Yf(e,t){return Jf.apply(this,arguments)}function Jf(){return(Jf=Hh(function*(e,t){const n=(yield t.json()).error;return Kf.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function Xf({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Zf(e,{refreshToken:t}){const n=Xf(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function ep(e){return tp.apply(this,arguments)}function tp(){return(tp=Hh(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function np(e,t){return rp.apply(this,arguments)}function rp(){return(rp=Hh(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Wf(e),i=Xf(e),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:Hf,appId:e.appId,sdkVersion:$f})},a=yield ep(()=>fetch(r,o));if(a.ok){const e=yield a.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Qf(e.authToken)}}throw yield Yf("Create Installation",a)})).apply(this,arguments)}function ip(e){return new Promise(t=>{setTimeout(t,e)})}const sp=/^[cdef][\w-]{21}$/;function op(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return sp.test(t)?t:""}catch(FF){return""}}function ap(e){return`${e.appName}!${e.appId}`}const cp=new Map;function up(e,t){const n=ap(e);lp(n,t),function(e,t){const n=(!hp&&"BroadcastChannel"in self&&(hp=new BroadcastChannel("[Firebase] FID Change"),hp.onmessage=e=>{lp(e.data.key,e.data.fid)}),hp);n&&n.postMessage({key:e,fid:t}),0===cp.size&&hp&&(hp.close(),hp=null)}(n,t)}function lp(e,t){const n=cp.get(e);if(n)for(const r of n)r(t)}let hp=null;const dp="firebase-installations-store";let fp=null;function pp(){return fp||(fp=Lf("firebase-installations-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(dp)}}})),fp}function gp(e,t){return mp.apply(this,arguments)}function mp(){return(mp=Hh(function*(e,t){const n=ap(e),r=(yield pp()).transaction(dp,"readwrite"),i=r.objectStore(dp),s=yield i.get(n);return yield i.put(t,n),yield r.done,s&&s.fid===t.fid||up(e,t.fid),t})).apply(this,arguments)}function yp(e){return vp.apply(this,arguments)}function vp(){return(vp=Hh(function*(e){const t=ap(e),n=(yield pp()).transaction(dp,"readwrite");yield n.objectStore(dp).delete(t),yield n.done})).apply(this,arguments)}function wp(e,t){return _p.apply(this,arguments)}function _p(){return(_p=Hh(function*(e,t){const n=ap(e),r=(yield pp()).transaction(dp,"readwrite"),i=r.objectStore(dp),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.done,!o||s&&s.fid===o.fid||up(e,o.fid),o})).apply(this,arguments)}function bp(e){return Ip.apply(this,arguments)}function Ip(){return(Ip=Hh(function*(e){let t;const n=yield wp(e.appConfig,n=>{const r=Cp(n),i=Ep(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function Cp(e){return Ap(e||{fid:op(),registrationStatus:0})}function Ep(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Kf.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Tp.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Sp(e)}:{installationEntry:t}}function Tp(){return(Tp=Hh(function*(e,t){try{const n=yield np(e,t);return gp(e.appConfig,n)}catch(n){throw Gf(n)&&409===n.customData.serverCode?yield yp(e.appConfig):yield gp(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function Sp(e){return kp.apply(this,arguments)}function kp(){return(kp=Hh(function*(e){let t=yield xp(e.appConfig);for(;1===t.registrationStatus;)yield ip(100),t=yield xp(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield bp(e);return n||t}return t})).apply(this,arguments)}function xp(e){return wp(e,e=>{if(!e)throw Kf.create("installation-not-found");return Ap(e)})}function Ap(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Op(e,t){return Pp.apply(this,arguments)}function Pp(){return(Pp=Hh(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=Mp(e,n),i=Zf(e,n),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:$f,appId:e.appId}})},a=yield ep(()=>fetch(r,o));if(a.ok)return Qf(yield a.json());throw yield Yf("Generate Auth Token",a)})).apply(this,arguments)}function Mp(e,{fid:t}){return`${Wf(e)}/${t}/authTokens:generate`}function Dp(e){return Np.apply(this,arguments)}function Np(){return(Np=Hh(function*(e,t=!1){let n;const r=yield wp(e.appConfig,r=>{if(!Up(r))throw Kf.create("not-registered");const i=r.authToken;if(!t&&Bp(i))return r;if(1===i.requestStatus)return n=Rp(e,t),r;{if(!navigator.onLine)throw Kf.create("app-offline");const t=zp(r);return n=Fp(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function Rp(e,t){return Lp.apply(this,arguments)}function Lp(){return(Lp=Hh(function*(e,t){let n=yield Vp(e.appConfig);for(;1===n.authToken.requestStatus;)yield ip(100),n=yield Vp(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Dp(e,t):r})).apply(this,arguments)}function Vp(e){return wp(e,e=>{if(!Up(e))throw Kf.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function Fp(e,t){return jp.apply(this,arguments)}function jp(){return(jp=Hh(function*(e,t){try{const n=yield Op(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield gp(e.appConfig,r),n}catch(n){if(!Gf(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield gp(e.appConfig,n)}else yield yp(e.appConfig);throw n}})).apply(this,arguments)}function Up(e){return void 0!==e&&2===e.registrationStatus}function Bp(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function zp(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function qp(){return(qp=Hh(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield bp(t);return r?r.catch(console.error):Dp(t).catch(console.error),n.fid})).apply(this,arguments)}function $p(){return($p=Hh(function*(e,t=!1){const n=e;return yield Hp(n),(yield Dp(n,t)).token})).apply(this,arguments)}function Hp(e){return Kp.apply(this,arguments)}function Kp(){return(Kp=Hh(function*(e){const{registrationPromise:t}=yield bp(e);t&&(yield t)})).apply(this,arguments)}function Gp(e){return Kf.create("missing-app-config-values",{valueName:e})}const Wp="installations";sf(new Id(Wp,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw Gp("App Configuration");if(!e.name)throw Gp("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Gp(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:of(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),sf(new Id("installations-internal",e=>{const t=of(e.getProvider("app").getImmediate(),Wp).getImmediate();return{getId:()=>function(e){return qp.apply(this,arguments)}(t),getToken:e=>function(e){return $p.apply(this,arguments)}(t,e)}},"PRIVATE")),pf(zf,qf),pf(zf,qf,"esm2017");const Qp="@firebase/remote-config",Yp="0.4.4",Jp=new ud("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xp{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return Hh(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function Zp(e=navigator){return e.languages&&e.languages[0]||e.language}class eg{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return Hh(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:Zp()},a={method:"POST",headers:s,body:JSON.stringify(o)},c=fetch(i,a),u=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{yield Promise.race([c,u]),l=yield c}catch(g){let e="fetch-client-network";throw"AbortError"===(null==g?void 0:g.name)&&(e="fetch-timeout"),Jp.create(e,{originalErrorMessage:null==g?void 0:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let e;try{e=yield l.json()}catch(g){throw Jp.create("fetch-client-parse",{originalErrorMessage:null==g?void 0:g.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw Jp.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class tg{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return Hh(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return Hh(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Jp.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof cd&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+_d(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class ng{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rg(e,t){const n=e.target.error||void 0;return Jp.create(t,{originalErrorMessage:n&&(null==n?void 0:n.message)})}const ig="app_namespace_store";class sg{constructor(e,t,n,r=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(rg(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(ig,{keyPath:"compositeKey"})}}}catch(n){t(Jp.create("storage-open",{originalErrorMessage:null==n?void 0:n.message}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return Hh(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([ig],"readonly").objectStore(ig),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(rg(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(Jp.create("storage-get",{originalErrorMessage:null==a?void 0:a.message}))}})})()}set(e,t){var n=this;return Hh(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([ig],"readwrite").objectStore(ig),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(rg(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(c){s(Jp.create("storage-set",{originalErrorMessage:null==c?void 0:c.message}))}})})()}delete(e){var t=this;return Hh(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([ig],"readwrite").objectStore(ig),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(rg(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(Jp.create("storage-delete",{originalErrorMessage:null==a?void 0:a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class og{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return Hh(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function ag(){return(ag=Hh(function*(){if(!sd())return!1;try{return yield od()}catch(e){return!1}})).apply(this,arguments)}sf(new Id("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Jp.create("registration-window");if(!sd())throw Jp.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:o}=n.options;if(!i)throw Jp.create("registration-project-id");if(!s)throw Jp.create("registration-api-key");if(!o)throw Jp.create("registration-app-id");const a=new sg(o,n.name,t=t||"firebase"),c=new og(a),u=new Dd(Qp);u.logLevel=kd.ERROR;const l=new eg(r,uf,t,i,s,o),h=new tg(l,a),d=new Xp(h,a,c,u),f=new ng(n,d,c,a,u);return function(e){const t=bd(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(f),f},"PUBLIC").setMultipleInstances(!0)),pf(Qp,Yp),pf(Qp,Yp,"esm2017");const cg="/firebase-messaging-sw.js",ug="/firebase-cloud-messaging-push-scope",lg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var hg,dg;function fg(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pg(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(hg||(hg={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(dg||(dg={}));const gg="fcm_token_details_db",mg="fcm_token_object_Store";function yg(e){return vg.apply(this,arguments)}function vg(){return(vg=Hh(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(gg))return null;let t=null;var n;return(yield Lf(gg,5,{upgrade:(n=Hh(function*(n,r,i,s){var o;if(r<2)return;if(!n.objectStoreNames.contains(mg))return;const a=s.objectStore(mg),c=yield a.index("fcmSenderId").get(e);if(yield a.clear(),c)if(2===r){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:fg(e.vapidKey)}}}else if(3===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:fg(e.auth),p256dh:fg(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:fg(e.vapidKey)}}}else if(4===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:fg(e.auth),p256dh:fg(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:fg(e.vapidKey)}}}}),function(e,t,r,i){return n.apply(this,arguments)})})).close(),yield Vf(gg),yield Vf("fcm_vapid_details_db"),yield Vf("undefined"),wg(t)?t:null})).apply(this,arguments)}function wg(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}const _g="firebase-messaging-store";let bg=null;function Ig(){return bg||(bg=Lf("firebase-messaging-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(_g)}}})),bg}function Cg(e){return Eg.apply(this,arguments)}function Eg(){return(Eg=Hh(function*(e){const t=Ag(e),n=yield Ig(),r=yield n.transaction(_g).objectStore(_g).get(t);if(r)return r;{const t=yield yg(e.appConfig.senderId);if(t)return yield Tg(e,t),t}})).apply(this,arguments)}function Tg(e,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=Hh(function*(e,t){const n=Ag(e),r=(yield Ig()).transaction(_g,"readwrite");return yield r.objectStore(_g).put(t,n),yield r.done,t})).apply(this,arguments)}function kg(e){return xg.apply(this,arguments)}function xg(){return(xg=Hh(function*(e){const t=Ag(e),n=(yield Ig()).transaction(_g,"readwrite");yield n.objectStore(_g).delete(t),yield n.done})).apply(this,arguments)}function Ag({appConfig:e}){return e.appId}const Og=new ud("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pg(e,t){return Mg.apply(this,arguments)}function Mg(){return(Mg=Hh(function*(e,t){const n=yield Fg(e),r=Ug(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=yield fetch(Vg(e.appConfig),i);s=yield t.json()}catch(o){throw Og.create("token-subscribe-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw Og.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Og.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Dg(e,t){return Ng.apply(this,arguments)}function Ng(){return(Ng=Hh(function*(e,t){const n=yield Fg(e),r=Ug(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${Vg(e.appConfig)}/${t.token}`,i);s=yield n.json()}catch(o){throw Og.create("token-update-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw Og.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Og.create("token-update-no-token");return s.token})).apply(this,arguments)}function Rg(e,t){return Lg.apply(this,arguments)}function Lg(){return(Lg=Hh(function*(e,t){const n={method:"DELETE",headers:yield Fg(e)};try{const r=yield fetch(`${Vg(e.appConfig)}/${t}`,n),i=yield r.json();if(i.error)throw Og.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw Og.create("token-unsubscribe-failed",{errorInfo:null==r?void 0:r.toString()})}})).apply(this,arguments)}function Vg({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function Fg(e){return jg.apply(this,arguments)}function jg(){return(jg=Hh(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function Ug({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==lg&&(i.web.applicationPubKey=r),i}const Bg=6048e5;function zg(e){return qg.apply(this,arguments)}function qg(){return(qg=Hh(function*(e){const t=yield Yg(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:fg(t.getKey("auth")),p256dh:fg(t.getKey("p256dh"))},r=yield Cg(e.firebaseDependencies);if(r){if(Xg(r.subscriptionOptions,n))return Date.now()>=r.createTime+Bg?Kg(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield Rg(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Wg(e.firebaseDependencies,n)}return Wg(e.firebaseDependencies,n)})).apply(this,arguments)}function $g(e){return Hg.apply(this,arguments)}function Hg(){return(Hg=Hh(function*(e){const t=yield Cg(e.firebaseDependencies);t&&(yield Rg(e.firebaseDependencies,t.token),yield kg(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function Kg(e,t){return Gg.apply(this,arguments)}function Gg(){return(Gg=Hh(function*(e,t){try{const n=yield Dg(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Tg(e.firebaseDependencies,r),n}catch(n){throw yield $g(e),n}})).apply(this,arguments)}function Wg(e,t){return Qg.apply(this,arguments)}function Qg(){return(Qg=Hh(function*(e,t){const n={token:yield Pg(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Tg(e,n),n.token})).apply(this,arguments)}function Yg(e,t){return Jg.apply(this,arguments)}function Jg(){return(Jg=Hh(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pg(t)})})).apply(this,arguments)}function Xg(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function Zg(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(i=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const c=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}(t,e),t}function em(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function tm(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function nm(e){return Og.create("missing-app-config-values",{valueName:e})}tm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),tm("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rm{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw nm("App Configuration Object");if(!e.name)throw nm("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw nm(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function im(e){return sm.apply(this,arguments)}function sm(){return(sm=Hh(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(cg,{scope:ug}),e.swRegistration.update().catch(()=>{})}catch(t){throw Og.create("failed-service-worker-registration",{browserErrorMessage:null==t?void 0:t.message})}})).apply(this,arguments)}function om(e,t){return am.apply(this,arguments)}function am(){return(am=Hh(function*(e,t){if(t||e.swRegistration||(yield im(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Og.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function cm(e,t){return um.apply(this,arguments)}function um(){return(um=Hh(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=lg)})).apply(this,arguments)}function lm(){return(lm=Hh(function*(e,t){if(!navigator)throw Og.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Og.create("permission-blocked");return yield cm(e,null==t?void 0:t.vapidKey),yield om(e,null==t?void 0:t.serviceWorkerRegistration),zg(e)})).apply(this,arguments)}function hm(e,t,n){return dm.apply(this,arguments)}function dm(){return(dm=Hh(function*(e,t,n){const r=fm(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fm(e){switch(e){case dg.NOTIFICATION_CLICKED:return"notification_open";case dg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function pm(){return(pm=Hh(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===dg.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(Zg(n)):e.onMessageHandler.next(Zg(n)));const r=n.data;em(r)&&"1"===r["google.c.a.e"]&&(yield hm(e,n.messageType,r))})).apply(this,arguments)}const gm="@firebase/messaging",mm="0.12.4";function ym(){return(ym=Hh(function*(){try{yield od()}catch(e){return!1}return"undefined"!=typeof window&&sd()&&ad()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}sf(new Id("messaging",e=>{const t=new rm(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return pm.apply(this,arguments)}(t,e)),t},"PUBLIC")),sf(new Id("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return lm.apply(this,arguments)}(t,e)}},"PRIVATE")),pf(gm,mm),pf(gm,mm,"esm2017");const vm="analytics",wm="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_m="https://www.googletagmanager.com/gtag/js",bm=new Dd("@firebase/analytics"),Im=new ud("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Cm(e){if(!e.startsWith(_m)){const t=Im.create("invalid-gtag-resource",{gtagURL:e});return bm.warn(t.message),""}return e}function Em(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Tm(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Cm}),r=document.createElement("script"),i=`${_m}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Sm(e,t,n,r,i,s){return km.apply(this,arguments)}function km(){return(km=Hh(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Em(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){bm.error(a)}e("config",i,s)})).apply(this,arguments)}function xm(e,t,n,r,i){return Am.apply(this,arguments)}function Am(){return(Am=Hh(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Em(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){bm.error(s)}})).apply(this,arguments)}function Om(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(_m)&&n.src.includes(e))return n;return null}const Pm=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Mm(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Dm(e){return Nm.apply(this,arguments)}function Nm(){return(Nm=Hh(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Mm(r)},s=wm.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Im.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function Rm(e){return Lm.apply(this,arguments)}function Lm(){return(Lm=Hh(function*(e,t=Pm,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Im.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Im.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Bm;return setTimeout(Hh(function*(){a.abort()}),void 0!==n?n:6e4),Vm({appId:r,apiKey:i,measurementId:s},o,a,t)})).apply(this,arguments)}function Vm(e,t,n){return Fm.apply(this,arguments)}function Fm(){return(Fm=Hh(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Pm){var s;const{appId:o,measurementId:a}=e;try{yield jm(r,t)}catch(c){if(a)return bm.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const t=yield Dm(e);return i.deleteThrottleMetadata(o),t}catch(c){const t=c;if(!Um(t)){if(i.deleteThrottleMetadata(o),a)return bm.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw c}const u=503===Number(null===(s=null==t?void 0:t.customData)||void 0===s?void 0:s.httpStatus)?_d(n,i.intervalMillis,30):_d(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,l),bm.debug(`Calling attemptFetch again in ${u} millis`),Vm(e,l,r,i)}})).apply(this,arguments)}function jm(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Im.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Um(e){if(!(e instanceof cd&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class Bm{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let zm,qm;function $m(){return($m=Hh(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function Hm(e){qm=e}function Km(e){zm=e}function Gm(){return Wm.apply(this,arguments)}function Wm(){return(Wm=Hh(function*(){if(!sd())return bm.warn(Im.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield od()}catch(e){return bm.warn(Im.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0})).apply(this,arguments)}function Qm(){return(Qm=Hh(function*(e,t,n,r,i,s,o){var a;const c=Rm(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&bm.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>bm.error(e)),t.push(c);const u=Gm().then(e=>e?r.getId():void 0),[l,h]=yield Promise.all([c,u]);Om(s)||Tm(s,l.measurementId),qm&&(i("consent","default",qm),Hm(void 0)),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),zm&&(i("set",zm),Km(void 0)),l.measurementId})).apply(this,arguments)}class Ym{constructor(e){this.app=e}_delete(){return delete Jm[this.app.options.appId],Promise.resolve()}}let Jm={},Xm=[];const Zm={};let ey,ty,ny="dataLayer",ry=!1;function iy(){return(iy=Hh(function*(){if(id())return!1;if(!ad())return!1;if(!sd())return!1;try{return yield od()}catch(e){return!1}})).apply(this,arguments)}const sy="@firebase/analytics",oy="0.10.0";sf(new Id(vm,(e,{options:t})=>function(e,t,n){!function(){const e=[];if(id()&&e.push("This is a browser extension environment."),ad()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Im.create("invalid-analytics-context",{errorInfo:t});bm.warn(n.message)}}();const r=e.options.appId;if(!r)throw Im.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Im.create("no-api-key");bm.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jm[r])throw Im.create("already-exists",{id:r});if(!ry){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=Hh(function*(i,...s){try{if("event"===i){const[r,i]=s;yield xm(e,t,n,r,i)}else if("config"===i){const[i,o]=s;yield Sm(e,t,n,r,i,o)}else if("consent"===i){const[t]=s;e("consent","update",t)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(o){bm.error(o)}})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(s,e,t,n),{gtagCore:s,wrappedGtag:window.gtag}}(Jm,Xm,Zm);ty=e,ey=t,ry=!0}return Jm[r]=function(e,t,n,r,i,s,o){return Qm.apply(this,arguments)}(e,Xm,Zm,t,ey,ny,n),new Ym(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),sf(new Id("analytics-internal",function(e){try{const t=e.getProvider(vm).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=bd(e),function(e,t,n,r,i){return $m.apply(this,arguments)}(ty,Jm[e.app.options.appId],t,n,r).catch(e=>bm.error(e))}(t,e,n,r)}}catch(t){throw Im.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),pf(sy,oy),pf(sy,oy,"esm2017");class ay extends h{constructor(e,t){super()}schedule(e,t=0){return this}}class cy extends ay{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class uy extends cy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let ly=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class hy extends ly{constructor(e,t=ly.now){super(e,()=>hy.delegate&&hy.delegate!==this?hy.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return hy.delegate&&hy.delegate!==this?hy.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class dy extends hy{}const fy=new dy(uy),py=new hy(cy),gy=py;function my(){}class yy{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new vy(e,this.nextOrObserver,this.error,this.complete))}}class vy extends p{constructor(e,t,n,i){super(e),this._tapNext=my,this._tapError=my,this._tapComplete=my,this._tapError=n||my,this._tapComplete=i||my,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||my,this._tapError=t.error||my,this._tapComplete=t.complete||my)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}let wy=1;const _y=(()=>Promise.resolve())(),by={};function Iy(e){return e in by&&(delete by[e],!0)}const Cy={setImmediate(e){const t=wy++;return by[t]=!0,_y.then(()=>Iy(t)&&e()),t},clearImmediate(e){Iy(e)}};class Ey extends cy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=Cy.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(Cy.clearImmediate(t),e.scheduled=void 0)}}class Ty extends hy{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const Sy=new Ty(Ey);function ky(e){return!c(e)&&e-parseFloat(e)+1>=0}class xy extends _{constructor(e,t=0,n=Sy){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!ky(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=Sy)}static create(e,t=0,n=Sy){return new xy(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(xy.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function Ay(e,t=0){return function(n){return n.lift(new Oy(e,t))}}class Oy{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new xy(t,this.delay,this.scheduler).subscribe(e)}}const Py=new _(e=>e.complete());let My=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Lu(this.value);case"E":return e=this.error,new _(t=>t.error(e));case"C":return Py}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function Dy(e,t=0){return function(n){return n.lift(new Ny(e,t))}}class Ny{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new Ry(e,this.scheduler,this.delay))}}class Ry extends p{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Ry.dispatch,this.delay,new Ly(e,this.destination)))}_next(e){this.scheduleMessage(My.createNext(e))}_error(e){this.scheduleMessage(My.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(My.createComplete()),this.unsubscribe()}}class Ly{constructor(e,t){this.notification=e,this.destination=t}}const Vy=new da("7.6.1"),Fy="__angularfire_symbol__analyticsIsSupportedValue",jy="__angularfire_symbol__analyticsIsSupported",Uy="__angularfire_symbol__remoteConfigIsSupportedValue",By="__angularfire_symbol__remoteConfigIsSupported",zy="__angularfire_symbol__messagingIsSupportedValue",qy="__angularfire_symbol__messagingIsSupported";globalThis[jy]||(globalThis[jy]=function(){return iy.apply(this,arguments)}().then(e=>globalThis[Fy]=e).catch(()=>globalThis[Fy]=!1)),globalThis[qy]||(globalThis[qy]=function(){return ym.apply(this,arguments)}().then(e=>globalThis[zy]=e).catch(()=>globalThis[zy]=!1)),globalThis[By]||(globalThis[By]=function(){return ag.apply(this,arguments)}().then(e=>globalThis[Uy]=e).catch(()=>globalThis[Uy]=!1));const $y=(e,t)=>{const n=t?[t]:df(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function Hy(){}class Ky{constructor(e,t=fy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class Gy{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hy,{},Hy,Hy)),t.pipe((r={next:n,complete:n,error:n},function(e){return e.lift(new yy(r,void 0,void 0))})).subscribe(e).add(n);var r}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wy=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Ky(Zone.current)),this.insideAngular=e.run(()=>new Ky(Zone.current,py)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(Jn(Cc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Qy(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Yy(e){return Qy().ngZone.runOutsideAngular(()=>e())}function Jy(e){return Qy().ngZone.run(()=>e())}function Xy(e){return Qy(),(t=Qy(),function(e){return(e=e.lift(new Gy(t.ngZone))).pipe(Ay(t.outsideAngular),Dy(t.insideAngular))})(e);var t}const Zy=(e,t)=>{const n=void 0;return function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),Jy(()=>e.apply(n,r))}},ev=(e,t)=>function(){let n;const r=arguments;for(let e=0;e<arguments.length;e++)"function"==typeof r[e]&&(t&&(n||(n=Jy(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hy,{},Hy,Hy)))),r[e]=Zy(r[e],n));const i=Yy(()=>e.apply(this,r));if(!t){if(i instanceof _){const e=Qy();return i.pipe(Ay(e.outsideAngular),Dy(e.insideAngular))}return Jy(()=>i)}return i instanceof _?i.pipe(Xy):i instanceof Promise?Jy(()=>new Promise((e,t)=>i.then(t=>Jy(()=>e(t)),e=>Jy(()=>t(e))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Jy(()=>i)};function tv(e=0,t,n){let r=-1;return ky(t)?r=Number(t)<1?1:Number(t):k(t)&&(n=t),k(n)||(n=gy),new _(t=>{const i=ky(e)?e:+e-n.now();return n.schedule(nv,i,{index:0,period:r,subscriber:t})})}function nv(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function rv(e,t){return n=>n.lift(new iv(e,t))}class iv{constructor(e,t){this.keySelector=e,this.flushes=t}call(e,t){return t.subscribe(new sv(e,this.keySelector,this.flushes))}}class sv extends U{constructor(e,t,n){super(e),this.keySelector=t,this.values=new Set,n&&this.add(B(n,new j(this)))}notifyNext(){this.values.clear()}notifyError(e){this._error(e)}_next(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}_useKeySelector(e){let t;const{destination:n}=this;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)}_finalizeNext(e,t){const{values:n}=this;n.has(e)||(n.add(e),this.destination.next(t))}}class ov{constructor(e){return e}}class av{constructor(){return df()}}tv(0,300).pipe(Vu(()=>F(df())),rv());const cv=new Vn("angularfire2._apps"),uv={provide:ov,useFactory:function(e){return e&&1===e.length?e[0]:new ov(hf())},deps:[[new tr,cv]]},lv={provide:av,deps:[[new tr,cv]]};function hv(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new ov(r)}}let dv=(()=>{class e{constructor(e){pf("angularfire",Vy.full,"core"),pf("angularfire",Vy.full,"app"),pf("angular",fa.full,e.toString())}}return e.\u0275fac=function(t){return new(t||e)(Jn(cc))},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[uv,lv]}),e})();function fv(e,...t){return{ngModule:dv,providers:[{provide:cv,useFactory:hv(e),multi:!0,deps:[Cc,ks,Wy,...t]}]}}ev(function(e){return ff.apply(this,arguments)},!0),ev(hf,!0),ev(df,!0);const pv=ev(lf,!0);function gv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}ev(function(e,t){if(null!==e&&"function"!=typeof e)throw af.create("invalid-log-argument");!function(e,t){for(const n of Sd){let r=null;t&&t.level&&(r=Ad[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:kd[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)},!0),ev(pf,!0),ev(function(e){var t;t=e,Sd.forEach(e=>{e.setLogLevel(t)})},!0),"function"==typeof SuppressedError&&SuppressedError;const mv=new ud("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yv=new Dd("@firebase/auth");function vv(e,...t){yv.logLevel<=kd.ERROR&&yv.error(`Auth (9.23.0): ${e}`,...t)}function wv(e,...t){throw Cv(e,...t)}function _v(e,...t){return Cv(e,...t)}function bv(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new ud("auth","Firebase",r).create(t,{appName:e.name})}function Iv(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&wv(e,"argument-error"),bv(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cv(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return mv.create(e,...t)}function Ev(e,t,...n){if(!e)throw Cv(t,...n)}function Tv(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vv(t),new Error(t)}function Sv(e,t){e||Tv(t)}function kv(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xv(){return"http:"===Av()||"https:"===Av()}function Av(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ov{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sv(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rd())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xv()||id()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Pv(e,t){Sv(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Mv{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Tv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Tv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Tv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Nv=new Ov(3e4,6e4);function Rv(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Lv(e,t,n,r){return Vv.apply(this,arguments)}function Vv(){return(Vv=Hh(function*(e,t,n,r,i={}){return Fv(e,i,Hh(function*(){let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=pd(Object.assign({key:e.config.apiKey},s)).slice(1),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Mv.fetch()(zv(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))})).apply(this,arguments)}function Fv(e,t,n){return jv.apply(this,arguments)}function jv(){return(jv=Hh(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Dv),t);try{const t=new qv(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw $v(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw $v(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw $v(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw $v(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw bv(e,a,o);wv(e,a)}}catch(i){if(i instanceof cd)throw i;wv(e,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Uv(e,t,n,r){return Bv.apply(this,arguments)}function Bv(){return(Bv=Hh(function*(e,t,n,r,i={}){const s=yield Lv(e,t,n,r,i);return"mfaPendingCredential"in s&&wv(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function zv(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Pv(e.config,i):`${e.config.apiScheme}://${i}`}class qv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(_v(this.auth,"network-request-failed")),Nv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $v(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_v(e,t,r);return i.customData._tokenResponse=n,i}function Hv(){return(Hv=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function Kv(e,t){return Gv.apply(this,arguments)}function Gv(){return(Gv=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Wv(e,t){return Qv.apply(this,arguments)}function Qv(){return(Qv=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Yv(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Jv(e,t=!1){return bd(e).getIdToken(t)}function Xv(e){return Zv.apply(this,arguments)}function Zv(){return(Zv=Hh(function*(e,t=!1){const n=bd(e),r=yield n.getIdToken(t),i=tw(r);Ev(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yv(ew(i.auth_time)),issuedAtTime:Yv(ew(i.iat)),expirationTime:Yv(ew(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}})).apply(this,arguments)}function ew(e){return 1e3*Number(e)}function tw(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return vv("JWT malformed, contained fewer than 3 sections"),null;try{const e=Yh(n);return e?JSON.parse(e):(vv("Failed to decode base64 JWT payload"),null)}catch(i){return vv("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function nw(e,t){return rw.apply(this,arguments)}function rw(){return(rw=Hh(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof cd&&iw(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function iw({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class sw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(Hh(function*(){yield t.iteration()}),n)}iteration(){var e=this;return Hh(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class ow{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yv(this.lastLoginAt),this.creationTime=Yv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function aw(e){return cw.apply(this,arguments)}function cw(){return(cw=Hh(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield nw(e,Wv(n,{idToken:r}));Ev(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?dw(s.providerUserInfo):[],a=hw(e.providerData,o),c=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ow(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,u)})).apply(this,arguments)}function uw(e){return lw.apply(this,arguments)}function lw(){return(lw=Hh(function*(e){const t=bd(e);yield aw(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function hw(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function dw(e){return e.map(e=>{var{providerId:t}=e,n=gv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function fw(){return(fw=Hh(function*(e,t){const n=yield Fv(e,{},Hh(function*(){const n=pd({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=zv(e,r,"/v1/token",`key=${i}`),o=yield e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Mv.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class pw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ev(e.idToken,"internal-error"),Ev(void 0!==e.idToken,"internal-error"),Ev(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=tw(e);return Ev(t,"internal-error"),Ev(void 0!==t.exp,"internal-error"),Ev(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return Hh(function*(){return Ev(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return Hh(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return fw.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new pw;return n&&(Ev("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ev("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ev("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pw,this.toJSON())}_performRefresh(){return Tv("not implemented")}}function gw(e,t){Ev("string"==typeof e||void 0===e,"internal-error",{appName:t})}class mw{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=gv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ow(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return Hh(function*(){const n=yield nw(t,t.stsTokenManager.getToken(t.auth,e));return Ev(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return Xv(this,e)}reload(){return uw(this)}_assign(e){this!==e&&(Ev(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mw(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ev(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return Hh(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield aw(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return Hh(function*(){const t=yield e.getIdToken();return yield nw(e,function(e,t){return Hv.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:_,providerData:b,stsTokenManager:I}=t;Ev(v&&I,e,"internal-error");const C=pw.fromJSON(this.name,I);Ev("string"==typeof v,e,"internal-error"),gw(l,e.name),gw(h,e.name),Ev("boolean"==typeof w,e,"internal-error"),Ev("boolean"==typeof _,e,"internal-error"),gw(d,e.name),gw(f,e.name),gw(p,e.name),gw(g,e.name),gw(m,e.name),gw(y,e.name);const E=new mw({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(E.providerData=b.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static _fromIdTokenResponse(e,t,n=!1){return Hh(function*(){const r=new pw;r.updateFromServerResponse(t);const i=new mw({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield aw(i),i})()}}const yw=new Map;function vw(e){Sv(e instanceof Function,"Expected a class definition");let t=yw.get(e);return t?(Sv(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yw.set(e,t),t)}const ww=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return Hh(function*(){return!0})()}_set(e,t){var n=this;return Hh(function*(){n.storage[e]=t})()}_get(e){var t=this;return Hh(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return Hh(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function _w(e,t,n){return`firebase:${e}:${t}:${n}`}class bw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=_w(this.userKey,r.apiKey,i),this.fullPersistenceKey=_w("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return Hh(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?mw._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return Hh(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return Hh(function*(){if(!t.length)return new bw(vw(ww),e,n);const r=(yield Promise.all(t.map(function(){var e=Hh(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let i=r[0]||vw(ww);const s=_w(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=yield n._get(s);if(t){const r=mw._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(FF){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&(yield i._set(s,o.toJSON())),yield Promise.all(t.map(function(){var e=Hh(function*(e){if(e!==i)try{yield e._remove(s)}catch(FF){}});return function(t){return e.apply(this,arguments)}}())),new bw(i,e,n)):new bw(i,e,n)})()}}function Iw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xw(t))return"Blackberry";if(Aw(t))return"Webos";if(Ew(t))return"Safari";if((t.includes("chrome/")||Tw(t))&&!t.includes("edge/"))return"Chrome";if(kw(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function Cw(e=rd()){return/firefox\//i.test(e)}function Ew(e=rd()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Tw(e=rd()){return/crios\//i.test(e)}function Sw(e=rd()){return/iemobile/i.test(e)}function kw(e=rd()){return/android/i.test(e)}function xw(e=rd()){return/blackberry/i.test(e)}function Aw(e=rd()){return/webos/i.test(e)}function Ow(e=rd()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pw(e=rd()){return Ow(e)||kw(e)||Aw(e)||xw(e)||/windows phone/i.test(e)||Sw(e)}function Mw(e,t=[]){let n;switch(e){case"Browser":n=Iw(rd());break;case"Worker":n=`${Iw(rd())}-${e}`;break;default:n=e}return`${n}/JsCore/9.23.0/${t.length?t.join(","):"FirebaseCore-web"}`}function Dw(e,t){return Nw.apply(this,arguments)}function Nw(){return(Nw=Hh(function*(e,t){return Lv(e,"GET","/v2/recaptchaConfig",Rv(e,t))})).apply(this,arguments)}function Rw(e){return void 0!==e&&void 0!==e.enterprise}class Lw{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function Vw(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_v("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Fw(e){return`__${e}${Math.floor(1e6*Math.random())}`}class jw{constructor(e){this.type="recaptcha-enterprise",this.auth=$w(e)}verify(e="verify",t=!1){var n=this;return Hh(function*(){function r(){return(r=Hh(function*(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(function(){var t=Hh(function*(t,n){Dw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Lw(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})});return function(e,n){return t.apply(this,arguments)}}())})).apply(this,arguments)}function i(t,n,r){const i=window.grecaptcha;Rw(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,s)=>{(function(e){return r.apply(this,arguments)})(n.auth).then(n=>{if(!t&&Rw(window.grecaptcha))i(n,e,s);else{if("undefined"==typeof window)return void s(new Error("RecaptchaVerifier is only supported in browser"));Vw("https://www.google.com/recaptcha/enterprise.js?render="+n).then(()=>{i(n,e,s)}).catch(e=>{s(e)})}}).catch(e=>{s(e)})})})()}}function Uw(e,t,n){return Bw.apply(this,arguments)}function Bw(){return(Bw=Hh(function*(e,t,n,r=!1){const i=new jw(e);let s;try{s=yield i.verify(n)}catch(a){s=yield i.verify(n,!0)}const o=Object.assign({},t);return Object.assign(o,r?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})).apply(this,arguments)}class zw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return Hh(function*(){if(t.auth.currentUser===e)return;const n=[];try{for(const r of t.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const e of n)try{e()}catch(i){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==r?void 0:r.message})}})()}}class qw{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hw(this),this.idTokenSubscription=new Hw(this),this.beforeStateQueue=new zw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=vw(t)),this._initializationPromise=this.queue(Hh(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield bw.create(n,e),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return Hh(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t,!0)):void 0})()}initializeCurrentUser(e){var t=this;return Hh(function*(){var n;const r=yield t.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const r=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null==i?void 0:i._redirectEventId,a=yield t.tryRedirectSignIn(e);r&&r!==o||!(null==a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return t.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(i)}catch(o){i=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(o))}return i?t.reloadAndSetCurrentUserOrClear(i):t.directlySetCurrentUser(null)}return Ev(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i)})()}tryRedirectSignIn(e){var t=this;return Hh(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return Hh(function*(){try{yield aw(e)}catch(n){if("auth/network-request-failed"!==(null==n?void 0:n.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return Hh(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return Hh(function*(){const n=e?bd(e):null;return n&&Ev(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e,t=!1){var n=this;return Hh(function*(){if(!n._deleted)return e&&Ev(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),t||(yield n.beforeStateQueue.runMiddleware(e)),n.queue(Hh(function*(){yield n.directlySetCurrentUser(e),n.notifyAuthListeners()}))})()}signOut(){var e=this;return Hh(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(Hh(function*(){yield t.assertedPersistence.setPersistence(vw(e))}))}initializeRecaptchaConfig(){var e=this;return Hh(function*(){const t=yield Dw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new Lw(t);null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.emailPasswordEnabled&&new jw(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ud("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return Hh(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return Hh(function*(){if(!t.redirectPersistenceManager){const n=e&&vw(e)||t._popupRedirectResolver;Ev(n,t,"argument-error"),t.redirectPersistenceManager=yield bw.create(t,[vw(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return Hh(function*(){var n,r;return t._isInitialized&&(yield t.queue(Hh(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return Hh(function*(){if(e===t.currentUser)return t.queue(Hh(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Ev(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return Hh(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ev(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return Hh(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);const i=yield e._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})()}_getAppCheckToken(){var e=this;return Hh(function*(){var t;const n=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return(null==n?void 0:n.error)&&(yv.logLevel<=kd.WARN&&yv.warn(`Auth (9.23.0): ${`Error while retrieving App Check token: ${n.error}`}`)),null==n?void 0:n.token})()}}function $w(e){return bd(e)}class Hw{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new yd(e,void 0);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ev(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kw(e,t){const n=of(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(dd(n.getOptions(),null!=t?t:{}))return e;wv(e,"already-initialized")}return n.initialize({options:t})}function Gw(e,t,n){const r=$w(e);Ev(r._canInitEmulator,r,"emulator-config-failed"),Ev(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ww(t),{host:o,port:a}=function(e){const t=Ww(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Qw(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Qw(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ww(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Yw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tv("not implemented")}_getIdTokenResponse(e){return Tv("not implemented")}_linkToIdToken(e,t){return Tv("not implemented")}_getReauthenticationResolver(e){return Tv("not implemented")}}function Jw(e,t){return Xw.apply(this,arguments)}function Xw(){return(Xw=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:resetPassword",Rv(e,t))})).apply(this,arguments)}function Zw(e,t){return e_.apply(this,arguments)}function e_(){return(e_=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function t_(e,t){return n_.apply(this,arguments)}function n_(){return(n_=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:update",Rv(e,t))})).apply(this,arguments)}function r_(e,t){return i_.apply(this,arguments)}function i_(){return(i_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithPassword",Rv(e,t))})).apply(this,arguments)}function s_(e,t){return o_.apply(this,arguments)}function o_(){return(o_=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:sendOobCode",Rv(e,t))})).apply(this,arguments)}function a_(e,t){return c_.apply(this,arguments)}function c_(){return(c_=Hh(function*(e,t){return s_(e,t)})).apply(this,arguments)}function u_(e,t){return l_.apply(this,arguments)}function l_(){return(l_=Hh(function*(e,t){return s_(e,t)})).apply(this,arguments)}function h_(e,t){return d_.apply(this,arguments)}function d_(){return(d_=Hh(function*(e,t){return s_(e,t)})).apply(this,arguments)}function f_(e,t){return p_.apply(this,arguments)}function p_(){return(p_=Hh(function*(e,t){return s_(e,t)})).apply(this,arguments)}function g_(){return(g_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithEmailLink",Rv(e,t))})).apply(this,arguments)}function m_(){return(m_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithEmailLink",Rv(e,t))})).apply(this,arguments)}class y_ extends Yw{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new y_(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new y_(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return Hh(function*(){var n;switch(t.signInMethod){case"password":const r={returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"};if(null===(n=e._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled){const t=yield Uw(e,r,"signInWithPassword");return r_(e,t)}return r_(e,r).catch(function(){var t=Hh(function*(t){if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=yield Uw(e,r,"signInWithPassword");return r_(e,t)}return Promise.reject(t)});return function(e){return t.apply(this,arguments)}}());case"emailLink":return function(e,t){return g_.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:wv(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return Hh(function*(){switch(n.signInMethod){case"password":return Zw(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return m_.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:wv(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function v_(e,t){return w_.apply(this,arguments)}function w_(){return(w_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithIdp",Rv(e,t))})).apply(this,arguments)}function __(e,t){return b_.apply(this,arguments)}function b_(){return(b_=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:sendVerificationCode",Rv(e,t))})).apply(this,arguments)}function I_(){return(I_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithPhoneNumber",Rv(e,t))})).apply(this,arguments)}function C_(){return(C_=Hh(function*(e,t){const n=yield Uv(e,"POST","/v1/accounts:signInWithPhoneNumber",Rv(e,t));if(n.temporaryProof)throw $v(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const E_={USER_NOT_FOUND:"user-not-found"};function T_(){return(T_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithPhoneNumber",Rv(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),E_)})).apply(this,arguments)}class S_ extends Yw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new S_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new S_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return I_.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return C_.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return T_.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new S_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class k_{constructor(e){var t,n,r,i,s,o;const a=gd(md(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ev(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=gd(md(e)).link,n=t?gd(md(t)).deep_link_id:null,r=gd(md(e)).deep_link_id;return(r?gd(md(r)).link:null)||r||n||t||e}(e);try{return new k_(t)}catch(FF){return null}}}let x_=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return y_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=k_.parseLink(t);return Ev(n,"argument-error"),y_._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class A_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class O_ extends A_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function P_(e,t){return M_.apply(this,arguments)}function M_(){return(M_=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signUp",Rv(e,t))})).apply(this,arguments)}class D_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,r=!1){return Hh(function*(){const i=yield mw._fromIdTokenResponse(e,n,r),s=N_(n);return new D_({user:i,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return Hh(function*(){yield e._updateTokensIfNecessary(n,!0);const r=N_(n);return new D_({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function N_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function R_(){return(R_=Hh(function*(e){var t;const n=$w(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new D_({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield P_(n,{returnSecureToken:!0}),i=yield D_._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class L_ extends cd{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,L_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new L_(e,t,n,r)}}function V_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw L_._fromErrorAndOperation(e,n,t,r);throw n})}function F_(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function j_(){return(j_=Hh(function*(e,t){const n=bd(e);yield z_(!0,n,t);const{providerUserInfo:r}=yield Kv(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=F_(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function U_(e,t){return B_.apply(this,arguments)}function B_(){return(B_=Hh(function*(e,t,n=!1){const r=yield nw(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return D_._forOperation(e,"link",r)})).apply(this,arguments)}function z_(e,t,n){return q_.apply(this,arguments)}function q_(){return(q_=Hh(function*(e,t,n){yield aw(t);const r=!1===e?"provider-already-linked":"no-such-provider";Ev(F_(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function $_(e,t){return H_.apply(this,arguments)}function H_(){return(H_=Hh(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield nw(e,V_(r,i,t,e),n);Ev(s.idToken,r,"internal-error");const o=tw(s.idToken);Ev(o,r,"internal-error");const{sub:a}=o;return Ev(e.uid===a,r,"user-mismatch"),D_._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&wv(r,"user-mismatch"),s}})).apply(this,arguments)}function K_(e,t){return G_.apply(this,arguments)}function G_(){return(G_=Hh(function*(e,t,n=!1){const r="signIn",i=yield V_(e,r,t),s=yield D_._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function W_(e,t){return Q_.apply(this,arguments)}function Q_(){return(Q_=Hh(function*(e,t){return K_($w(e),t)})).apply(this,arguments)}function Y_(e,t){return J_.apply(this,arguments)}function J_(){return(J_=Hh(function*(e,t){const n=bd(e);return yield z_(!1,n,t.providerId),U_(n,t)})).apply(this,arguments)}function X_(e,t){return Z_.apply(this,arguments)}function Z_(){return(Z_=Hh(function*(e,t){return $_(bd(e),t)})).apply(this,arguments)}function eb(e,t){return tb.apply(this,arguments)}function tb(){return(tb=Hh(function*(e,t){return Uv(e,"POST","/v1/accounts:signInWithCustomToken",Rv(e,t))})).apply(this,arguments)}function nb(){return(nb=Hh(function*(e,t){const n=$w(e),r=yield eb(n,{token:t,returnSecureToken:!0}),i=yield D_._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class rb{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ib._fromServerResponse(e,t):"totpInfo"in t?sb._fromServerResponse(e,t):wv(e,"internal-error")}}class ib extends rb{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ib(t)}}class sb extends rb{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new sb(t)}}function ob(e,t,n){var r;Ev((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ev(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ev(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ev(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ab(){return(ab=Hh(function*(e,t,n){var r;const i=$w(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=yield Uw(i,s,"getOobCode",!0);n&&ob(i,e,n),yield u_(i,e)}else n&&ob(i,s,n),yield u_(i,s).catch(function(){var e=Hh(function*(e){if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=yield Uw(i,s,"getOobCode",!0);n&&ob(i,e,n),yield u_(i,e)}});return function(t){return e.apply(this,arguments)}}())})).apply(this,arguments)}function cb(){return(cb=Hh(function*(e,t,n){yield Jw(bd(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function ub(){return(ub=Hh(function*(e,t){yield t_(bd(e),{oobCode:t})})).apply(this,arguments)}function lb(e,t){return hb.apply(this,arguments)}function hb(){return(hb=Hh(function*(e,t){const n=bd(e),r=yield Jw(n,{oobCode:t}),i=r.requestType;switch(Ev(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ev(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ev(r.mfaInfo,n,"internal-error");default:Ev(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=rb._fromServerResponse($w(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}})).apply(this,arguments)}function db(){return(db=Hh(function*(e,t){const{data:n}=yield lb(bd(e),t);return n.email})).apply(this,arguments)}function fb(){return(fb=Hh(function*(e,t,n){var r;const i=$w(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=yield Uw(i,s,"signUpPassword");o=P_(i,e)}else o=P_(i,s).catch(function(){var e=Hh(function*(e){if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=yield Uw(i,s,"signUpPassword");return P_(i,e)}return Promise.reject(e)});return function(t){return e.apply(this,arguments)}}());const a=yield o.catch(e=>Promise.reject(e)),c=yield D_._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(c.user),c})).apply(this,arguments)}function pb(){return(pb=Hh(function*(e,t,n){var r;const i=$w(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){Ev(t.handleCodeInApp,i,"argument-error"),t&&ob(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=yield Uw(i,s,"getOobCode",!0);o(e,n),yield h_(i,e)}else o(s,n),yield h_(i,s).catch(function(){var e=Hh(function*(e){if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=yield Uw(i,s,"getOobCode",!0);o(e,n),yield h_(i,e)}});return function(t){return e.apply(this,arguments)}}())})).apply(this,arguments)}function gb(){return(gb=Hh(function*(e,t,n){const r=bd(e),i=x_.credentialWithLink(t,n||kv());return Ev(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),W_(r,i)})).apply(this,arguments)}function mb(e,t){return yb.apply(this,arguments)}function yb(){return(yb=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:createAuthUri",Rv(e,t))})).apply(this,arguments)}function vb(){return(vb=Hh(function*(e,t){const n={identifier:t,continueUri:xv()?kv():"http://localhost"},{signinMethods:r}=yield mb(bd(e),n);return r||[]})).apply(this,arguments)}function wb(){return(wb=Hh(function*(e,t){const n=bd(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&ob(n.auth,r,t);const{email:i}=yield a_(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function _b(){return(_b=Hh(function*(e,t,n){const r=bd(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&ob(r.auth,i,n);const{email:s}=yield f_(r.auth,i);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function bb(e,t){return Ib.apply(this,arguments)}function Ib(){return(Ib=Hh(function*(e,t){return Lv(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Cb(){return(Cb=Hh(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=bd(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=yield nw(r,bb(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),yield r._updateTokensIfNecessary(s)})).apply(this,arguments)}function Eb(e,t,n){return Tb.apply(this,arguments)}function Tb(){return(Tb=Hh(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield nw(e,Zw(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Sb{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class kb extends Sb{constructor(e,t,n,r){super(e,t,n),this.username=r}}class xb extends Sb{constructor(e,t){super(e,"facebook.com",t)}}class Ab extends kb{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Ob extends Sb{constructor(e,t){super(e,"google.com",t)}}class Pb extends kb{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Mb(e,t,n,r){return bd(e).onIdTokenChanged(t,n,r)}function Db(e,t,n){return bd(e).beforeAuthStateChanged(t,n)}function Nb(e,t,n,r){return bd(e).onAuthStateChanged(t,n,r)}function Rb(){return(Rb=Hh(function*(e){return bd(e).delete()})).apply(this,arguments)}class Lb{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new Lb("enroll",e,t)}static _fromMfaPendingCredential(e){return new Lb("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Lb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Lb._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Vb{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=$w(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>rb._fromServerResponse(n,e));Ev(r.mfaPendingCredential,n,"internal-error");const s=Lb._fromMfaPendingCredential(r.mfaPendingCredential);return new Vb(s,i,function(){var e=Hh(function*(e){const i=yield e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=yield D_._fromIdTokenResponse(n,t.operationType,o);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return Ev(t.user,n,"internal-error"),D_._forOperation(t.user,t.operationType,o);default:wv(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return Hh(function*(){return t.signInResolver(e)})()}}function Fb(e,t){return Lv(e,"POST","/v2/accounts/mfaEnrollment:start",Rv(e,t))}class jb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>rb._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new jb(e)}getSession(){var e=this;return Hh(function*(){return Lb._fromIdtoken(yield e.user.getIdToken(),e.user.auth)})()}enroll(e,t){var n=this;return Hh(function*(){const r=e,i=yield n.getSession(),s=yield nw(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return Hh(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken();try{const e=yield nw(t.user,(i=t.user.auth,s={idToken:r,mfaEnrollmentId:n},Lv(i,"POST","/v2/accounts/mfaEnrollment:withdraw",Rv(i,s))));t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(e),yield t.user.reload()}catch(o){throw o}var i,s})()}}const Ub=new WeakMap,Bb="__sak";class zb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bb,"1"),this.storage.removeItem(Bb),Promise.resolve(!0)):Promise.resolve(!1)}catch(FF){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const qb=(()=>{class e extends zb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=rd();return Ew(e)||Ow(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Pw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=rd();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,r=this;return Hh(function*(){yield n().call(r,e,t),r.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return Hh(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return Hh(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),$b=(()=>{class e extends zb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let Hb=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return Hh(function*(){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=t.handlersMap[i];if(!(null==o?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(function(){var e=Hh(function*(e){return e(n.origin,s)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=Hh(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Kb(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Gb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var r=this;return Hh(function*(){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=Kb("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"))}}},r.handlers.add(o),i.port1.addEventListener("message",o.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&r.removeMessageHandler(o)})})()}}function Wb(){return window}function Qb(){return void 0!==Wb().WorkerGlobalScope&&"function"==typeof Wb().importScripts}function Yb(){return(Yb=Hh(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(FF){return null}})).apply(this,arguments)}const Jb="firebaseLocalStorageDb",Xb="firebaseLocalStorage",Zb="fbase_key";class eI{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tI(e,t){return e.transaction([Xb],t?"readwrite":"readonly").objectStore(Xb)}function nI(){const e=indexedDB.open(Jb,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Xb,{keyPath:Zb})}catch(r){n(r)}}),e.addEventListener("success",Hh(function*(){const n=e.result;n.objectStoreNames.contains(Xb)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Jb);return new eI(e).toPromise()}(),t(yield nI()))}))})}function rI(e,t,n){return iI.apply(this,arguments)}function iI(){return(iI=Hh(function*(e,t,n){const r=tI(e,!0).put({[Zb]:t,value:n});return new eI(r).toPromise()})).apply(this,arguments)}function sI(){return(sI=Hh(function*(e,t){const n=tI(e,!1).get(t),r=yield new eI(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function oI(e,t){const n=tI(e,!0).delete(t);return new eI(n).toPromise()}const aI=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return Hh(function*(){return e.db||(e.db=yield nI()),e.db})()}_withRetries(e){var t=this;return Hh(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return Hh(function*(){return Qb()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return Hh(function*(){e.receiver=Hb._getInstance(Qb()?self:null),e.receiver._subscribe("keyChanged",function(){var t=Hh(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=Hh(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return Hh(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Yb.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Gb(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return Hh(function*(){if(t.sender&&t.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(FF){}})()}_isAvailable(){return Hh(function*(){try{if(!indexedDB)return!1;const e=yield nI();return yield rI(e,Bb,"1"),yield oI(e,Bb),!0}catch(FF){}return!1})()}_withPendingWrite(e){var t=this;return Hh(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return Hh(function*(){return n._withPendingWrite(Hh(function*(){return yield n._withRetries(n=>rI(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return Hh(function*(){const n=yield t._withRetries(t=>function(e,t){return sI.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return Hh(function*(){return t._withPendingWrite(Hh(function*(){return yield t._withRetries(t=>oI(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return Hh(function*(){const t=yield e._withRetries(e=>{const t=tI(e,!1).getAll();return new eI(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Hh(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function cI(e,t){return Lv(e,"POST","/v2/accounts/mfaSignIn:start",Rv(e,t))}Fw("rcb"),new Ov(3e4,6e4);const uI="recaptcha";class lI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=S_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function hI(){return(hI=Hh(function*(e,t,n){const r=$w(e),i=yield pI(r,t,bd(n));return new lI(i,e=>W_(r,e))})).apply(this,arguments)}function dI(){return(dI=Hh(function*(e,t,n){const r=bd(e);yield z_(!1,r,"phone");const i=yield pI(r.auth,t,bd(n));return new lI(i,e=>Y_(r,e))})).apply(this,arguments)}function fI(){return(fI=Hh(function*(e,t,n){const r=bd(e),i=yield pI(r.auth,t,bd(n));return new lI(i,e=>X_(r,e))})).apply(this,arguments)}function pI(e,t,n){return gI.apply(this,arguments)}function gI(){return(gI=Hh(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(Ev("string"==typeof i,e,"argument-error"),Ev(n.type===uI,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return Ev("enroll"===t.type,e,"internal-error"),(yield Fb(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ev("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return Ev(n,e,"missing-multi-factor-info"),(yield cI(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield __(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function mI(){return(mI=Hh(function*(e,t){yield U_(bd(e),t)})).apply(this,arguments)}function yI(e,t){return t?vw(t):(Ev(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class vI extends Yw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return v_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return v_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return v_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wI(e){return K_(e.auth,new vI(e),e.bypassAuthState)}function _I(e){const{auth:t,user:n}=e;return Ev(n,t,"internal-error"),$_(n,new vI(e),e.bypassAuthState)}function bI(e){return II.apply(this,arguments)}function II(){return(II=Hh(function*(e){const{auth:t,user:n}=e;return Ev(n,t,"internal-error"),U_(n,new vI(e),e.bypassAuthState)})).apply(this,arguments)}class CI{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=Hh(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return Hh(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const c={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wI;case"linkViaPopup":case"linkViaRedirect":return bI;case"reauthViaPopup":case"reauthViaRedirect":return _I;default:wv(this.auth,"internal-error")}}resolve(e){Sv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const EI=new Ov(2e3,1e4);function TI(){return(TI=Hh(function*(e,t,n){const r=$w(e);Iv(e,t,A_);const i=yI(r,n);return new xI(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function SI(){return(SI=Hh(function*(e,t,n){const r=bd(e);Iv(r.auth,t,A_);const i=yI(r.auth,n);return new xI(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function kI(){return(kI=Hh(function*(e,t,n){const r=bd(e);Iv(r.auth,t,A_);const i=yI(r.auth,n);return new xI(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let xI=(()=>{class e extends CI{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return Hh(function*(){const t=yield e.execute();return Ev(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return Hh(function*(){Sv(1===e.filter.length,"Popup operations only handle one event");const t=Kb();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(_v(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_v(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_v(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(e,EI.get())};e()}}return e.currentPopupAction=null,e})();const AI=new Map;class OI extends CI{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return Hh(function*(){let n=AI.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return PI.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}AI.set(t.auth._key(),n)}return t.bypassAuthState||AI.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return Hh(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return Hh(function*(){})()}cleanUp(){}}function PI(){return(PI=Hh(function*(e,t){const n=LI(t),r=RI(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function MI(e,t){return DI.apply(this,arguments)}function DI(){return(DI=Hh(function*(e,t){return RI(e)._set(LI(t),"true")})).apply(this,arguments)}function NI(e,t){AI.set(e._key(),t)}function RI(e){return vw(e._redirectPersistence)}function LI(e){return _w("pendingRedirect",e.config.apiKey,e.name)}function VI(){return(VI=Hh(function*(e,t,n){const r=$w(e);Iv(e,t,A_),yield r._initializationPromise;const i=yI(r,n);return yield MI(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function FI(){return(FI=Hh(function*(e,t,n){const r=bd(e);Iv(r.auth,t,A_),yield r.auth._initializationPromise;const i=yI(r.auth,n);yield MI(i,r.auth);const s=yield qI(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)})).apply(this,arguments)}function jI(){return(jI=Hh(function*(e,t,n){const r=bd(e);Iv(r.auth,t,A_),yield r.auth._initializationPromise;const i=yI(r.auth,n);yield z_(!1,r,t.providerId),yield MI(i,r.auth);const s=yield qI(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)})).apply(this,arguments)}function UI(){return(UI=Hh(function*(e,t){return yield $w(e)._initializationPromise,BI(e,t,!1)})).apply(this,arguments)}function BI(e,t){return zI.apply(this,arguments)}function zI(){return(zI=Hh(function*(e,t,n=!1){const r=$w(e),i=yI(r,t),s=new OI(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function qI(e){return $I.apply(this,arguments)}function $I(){return($I=Hh(function*(e){const t=Kb(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class HI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!GI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_v(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(KI(e))}saveEventToCache(e){this.cachedEventUids.add(KI(e)),this.lastProcessedEventTime=Date.now()}}function KI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function GI({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function WI(e){return QI.apply(this,arguments)}function QI(){return(QI=Hh(function*(e,t={}){return Lv(e,"GET","/v1/projects",t)})).apply(this,arguments)}const YI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JI=/^https?/;function XI(){return(XI=Hh(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield WI(e);for(const n of t)try{if(ZI(n))return}catch(FF){}wv(e,"unauthorized-domain")})).apply(this,arguments)}function ZI(e){const t=kv(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!JI.test(n))return!1;if(YI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const eC=new Ov(3e4,6e4);function tC(){const e=Wb().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let nC=null;function rC(e){return nC=nC||function(e){return new Promise((t,n)=>{var r,i,s;function o(){tC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{tC(),n(_v(e,"network-request-failed"))},timeout:eC.get()})}if(null===(i=null===(r=Wb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Wb().gapi)||void 0===s?void 0:s.load)){const t=Fw("iframefcb");return Wb()[t]=()=>{gapi.load?o():n(_v(e,"network-request-failed"))},Vw(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw nC=null,e})}(e),nC}const iC=new Ov(5e3,15e3),sC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aC(e){const t=e.config;Ev(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Pv(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:uf},i=oC.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pd(r).slice(1)}`}function cC(){return(cC=Hh(function*(e){const t=yield rC(e),n=Wb().gapi;return Ev(n,e,"internal-error"),t.open({where:document.body,url:aC(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sC,dontclear:!0},t=>new Promise(function(){var n=Hh(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=_v(e,"network-request-failed"),s=Wb().setTimeout(()=>{r(i)},iC.get());function o(){Wb().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const uC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const hC=encodeURIComponent("fac");function dC(e,t,n,r,i,s){return fC.apply(this,arguments)}function fC(){return(fC=Hh(function*(e,t,n,r,i,s){Ev(e.config.authDomain,e,"auth-domain-config-required"),Ev(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:uf,eventId:i};if(t instanceof A_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",hd(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof O_){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=yield e._getAppCheckToken(),u=c?`#${hC}=${encodeURIComponent(c)}`:"";return`${pC(e)}?${pd(a).slice(1)}${u}`})).apply(this,arguments)}function pC({config:e}){return e.emulator?Pv(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}const gC="webStorageSupport",mC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$b,this._completeRedirectFn=BI,this._overrideRedirectResult=NI}_openPopup(e,t,n,r){var i=this;return Hh(function*(){var s;Sv(null===(s=i.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const o=yield dC(e,t,n,kv(),r);return function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},uC),{width:r.toString(),height:i.toString(),top:s,left:o}),u=rd().toLowerCase();n&&(a=Tw(u)?"_blank":n),Cw(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=rd()){var t;return Ow(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new lC(null);const h=window.open(t||"",a,l);Ev(h,e,"popup-blocked");try{h.focus()}catch(d){}return new lC(h)}(e,o,Kb())})()}_openRedirect(e,t,n,r){var i=this;return Hh(function*(){return yield i._originValidation(e),s=yield dC(e,t,n,kv(),r),Wb().location.href=s,new Promise(()=>{});var s})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Sv(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return Hh(function*(){const n=yield function(e){return cC.apply(this,arguments)}(e),r=new HI(e);return n.register("authEvent",t=>(Ev(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gC,{type:gC},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),wv(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return XI.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pw()||Ew()||Ow()}};var yC="@firebase/auth",vC="0.23.2";class wC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return Hh(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ev(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _C=td("authIdTokenMaxAge")||300;let bC=null;const IC=e=>function(){var t=Hh(function*(t){const n=t&&(yield t.getIdTokenResult()),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_C)return;const i=null==n?void 0:n.token;bC!==i&&(bC=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});return function(e){return t.apply(this,arguments)}}();var CC;function EC(e,t){return"function"==typeof t?n=>n.pipe(EC((n,r)=>F(e(n,r)).pipe(x((e,i)=>t(n,e,r,i))))):t=>t.lift(new TC(e))}CC="Browser",sf(new Id("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Ev(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:CC,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mw(CC)},c=new qw(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vw);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),sf(new Id("auth-internal",e=>{return t=$w(e.getProvider("auth").getImmediate()),new wC(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),pf(yC,vC,void 0),pf(yC,vC,"esm2017");class TC{constructor(e){this.project=e}call(e,t){return t.subscribe(new SC(e,this.project))}}class SC extends U{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new j(this),r=this.destination;r.add(n),this.innerSubscription=B(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function kC(e){return new _(function(t){return{unsubscribe:Mb(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})}const xC="auth";class AC{constructor(){return $y(xC)}}tv(0,300).pipe(Vu(()=>F($y(xC))),rv()),new Vn("angularfire2.auth-instances"),new tr,new tr,ev(function(e){return new _(function(t){return{unsubscribe:Nb(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})},!0),ev(kC,!0),ev(function(e){return kC(e).pipe(EC(function(e){return e?F(Jv(e)):Lu(null)}))},!0),ev(function(e,t){return ub.apply(this,arguments)},!0),ev(Db,!0),ev(lb,!0),ev(function(e,t,n){return cb.apply(this,arguments)},!0),ev(Gw,!0),ev(function(e,t,n){return fb.apply(this,arguments)},!0),ev(function(e){return Rb.apply(this,arguments)},!0),ev(function(e,t){return vb.apply(this,arguments)},!0),ev(function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=tw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Sb(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new xb(s,i);case"github.com":return new Ab(s,i);case"google.com":return new Ob(s,i);case"twitter.com":return new Pb(s,i,e.screenName||null);case"custom":case"anonymous":return new Sb(s,null);default:return new Sb(s,r,i)}}(n)},!0),ev(function(e=hf()){const t=of(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Kw(e,{popupRedirectResolver:mC,persistence:[aI,qb,$b]}),r=td("authTokenSyncURL");if(r){const e=IC(r);Db(n,e,()=>e(n.currentUser)),Mb(n,t=>e(t))}const i=Zh("auth");return i&&Gw(n,`http://${i}`),n},!0),ev(Jv,!0),ev(Xv,!0),ev(function(e,t){var n;const r=bd(e),i=t;return Ev(t.customData.operationType,r,"argument-error"),Ev(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Vb._fromError(r,i)},!0),ev(function(e,t){return UI.apply(this,arguments)},!0),ev(Kw,!0),ev(function(e,t){const n=k_.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)},!0),ev(Y_,!0),ev(function(e,t,n){return dI.apply(this,arguments)},!0),ev(function(e,t,n){return kI.apply(this,arguments)},!0),ev(function(e,t,n){return function(e,t,n){return jI.apply(this,arguments)}(e,t,n)},!0),ev(function(e){const t=bd(e);return Ub.has(t)||Ub.set(t,jb._fromUser(t)),Ub.get(t)},!0),ev(Nb,!0),ev(Mb,!0),ev(function(e){return k_.parseLink(e)},!0),ev(X_,!0),ev(function(e,t,n){return fI.apply(this,arguments)},!0),ev(function(e,t,n){return SI.apply(this,arguments)},!0),ev(function(e,t,n){return function(e,t,n){return FI.apply(this,arguments)}(e,t,n)},!0),ev(uw,!0),ev(function(e,t){return wb.apply(this,arguments)},!0),ev(function(e,t,n){return ab.apply(this,arguments)},!0),ev(function(e,t,n){return pb.apply(this,arguments)},!0),ev(function(e,t){return bd(e).setPersistence(t)},!0),ev(function(e){return R_.apply(this,arguments)},!0),ev(W_,!0),ev(function(e,t){return nb.apply(this,arguments)},!0),ev(function(e,t,n){return W_(bd(e),x_.credential(t,n))},!0),ev(function(e,t,n){return gb.apply(this,arguments)},!0),ev(function(e,t,n){return hI.apply(this,arguments)},!0),ev(function(e,t,n){return TI.apply(this,arguments)},!0),ev(function(e,t,n){return function(e,t,n){return VI.apply(this,arguments)}(e,t,n)},!0),ev(function(e){return bd(e).signOut()},!0),ev(function(e,t){return j_.apply(this,arguments)},!0),ev(function(e,t){return bd(e).updateCurrentUser(t)},!0),ev(function(e,t){return Eb(bd(e),t,null)},!0),ev(function(e,t){return Eb(bd(e),null,t)},!0),ev(function(e,t){return mI.apply(this,arguments)},!0),ev(function(e,t){return Cb.apply(this,arguments)},!0),ev(function(e){bd(e).useDeviceLanguage()},!0),ev(function(e,t,n){return _b.apply(this,arguments)},!0),ev(function(e,t){return db.apply(this,arguments)},!0);const OC=new Map,PC={activated:!1,tokenObservers:[]},MC={initialized:!1,enabled:!1};function DC(e){return OC.get(e)||Object.assign({},PC)}function NC(){return MC}class RC{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return Hh(function*(){t.stop();try{t.pending=new nd,yield function(e){return new Promise(t=>{setTimeout(t,e)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nd,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const LC=new ud("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function VC(e){if(!DC(e).activated)throw LC.create("use-before-activation",{appName:e.name})}function FC(e,t){return jC.apply(this,arguments)}function jC(){return(jC=Hh(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const e=yield i.getHeartbeatsHeader();e&&(r["X-Firebase-Client"]=e)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw LC.create("fetch-network-error",{originalErrorMessage:null==h?void 0:h.message})}if(200!==o.status)throw LC.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw LC.create("fetch-parse-error",{originalErrorMessage:null==h?void 0:h.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw LC.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function UC(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const BC="firebase-app-check-store",zC="debug-token";let qC=null;function $C(){return qC||(qC=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(LC.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(BC,{keyPath:"compositeKey"})}}}catch(n){t(LC.create("storage-open",{originalErrorMessage:null==n?void 0:n.message}))}}),qC)}function HC(e){return YC(XC(e))}function KC(e){return WC(zC,e)}function GC(){return YC(zC)}function WC(e,t){return QC.apply(this,arguments)}function QC(){return(QC=Hh(function*(e,t){const n=(yield $C()).transaction(BC,"readwrite"),r=n.objectStore(BC).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(LC.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}function YC(e){return JC.apply(this,arguments)}function JC(){return(JC=Hh(function*(e){const t=(yield $C()).transaction(BC,"readonly"),n=t.objectStore(BC).get(e);return new Promise((e,r)=>{n.onsuccess=t=>{const n=t.target.result;e(n?n.value:void 0)},t.onerror=e=>{var t;r(LC.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}})})).apply(this,arguments)}function XC(e){return`${e.options.appId}-${e.name}`}const ZC=new Dd("@firebase/app-check");function eE(){return(eE=Hh(function*(e){if(sd()){let n;try{n=yield HC(e)}catch(t){ZC.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return n}})).apply(this,arguments)}function tE(e,t){return sd()?function(e,t){return WC(XC(e),t)}(e,t).catch(e=>{ZC.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function nE(){return(nE=Hh(function*(){let e;try{e=yield GC()}catch(bO){}if(e)return e;{const e=wd();return KC(e).catch(e=>ZC.warn(`Failed to persist debug token to IndexedDB. Error: ${e}`)),e}})).apply(this,arguments)}function rE(){return NC().enabled}function iE(){return sE.apply(this,arguments)}function sE(){return(sE=Hh(function*(){const e=NC();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const oE={error:"UNKNOWN_ERROR"};function aE(e){return cE.apply(this,arguments)}function cE(){return(cE=Hh(function*(e,t=!1){const n=e.app;VC(n);const r=DC(n);let i,s=r.token;if(s&&!pE(s)&&(r.token=void 0,s=void 0),!s){const e=yield r.cachedTokenPromise;e&&(pE(e)?s=e:yield tE(n,void 0))}if(!t&&s&&pE(s))return{token:s.token};let o,a=!1;if(rE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FC(UC(n,yield iE()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);const t=yield r.exchangeTokenPromise;return yield tE(n,t),r.token=t,{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),s=yield DC(n).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?ZC.warn(c.message):ZC.error(c),i=c}return s?i?o=pE(s)?{token:s.token,internalError:i}:gE(i):(o={token:s.token},r.token=s,yield tE(n,s)):o=gE(i),a&&fE(n,o),o})).apply(this,arguments)}function uE(){return(uE=Hh(function*(e){const t=e.app;VC(t);const{provider:n}=DC(t);if(rE()){const n=yield iE(),{token:r}=yield FC(UC(t,n),e.heartbeatServiceProvider);return{token:r}}{const{token:e}=yield n.getToken();return{token:e}}})).apply(this,arguments)}function lE(e,t,n,r){const{app:i}=e,s=DC(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:t}],s.token&&pE(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),dE(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>dE(e))}function hE(e,t){const n=DC(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function dE(e){const{app:t}=e,n=DC(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new RC(Hh(function*(){let n;if(n=DC(t).token?yield aE(e,!0):yield aE(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{const e=DC(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function fE(e,t){const n=DC(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function pE(e){return e.expireTimeMillis-Date.now()>0}function gE(e){return{token:(t=oE,Gh.encodeString(JSON.stringify(t),!1)),error:e};var t}class mE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=DC(this.app);for(const t of e)hE(this.app,t.next);return Promise.resolve()}}function yE(){return(yE=Hh(function*(e,t){const n=yield aE(e,t);if(n.error)throw n.error;return{token:n.token}})).apply(this,arguments)}const vE="app-check-internal";sf(new Id("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new mE(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(vE).initialize()})),sf(new Id(vE,e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>aE(t,e),getLimitedUseToken:()=>function(e){return uE.apply(this,arguments)}(t),addTokenListener:e=>lE(t,"INTERNAL",e),removeTokenListener:e=>hE(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),pf("@firebase/app-check","0.8.0");const wE="app-check";class _E{constructor(){return $y(wE)}}function bE(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}tv(0,300).pipe(Vu(()=>F($y(wE))),rv()),new Vn("angularfire2.app-check-instances"),Symbol("angularfire2.app-check.namespace"),"undefined"!=typeof window&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname),new tr,new tr,ev(function(e,t){return yE.apply(this,arguments)},!0),ev(function(e=hf(),t){const n=of(e=bd(e),"app-check");if(NC().initialized||function(){const e=Jh(),t=NC();if(t.initialized=!0,"string"!=typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const n=new nd;t.token=n,n.resolve("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?e.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return nE.apply(this,arguments)}())}(),rE()&&iE().then(e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw LC.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return function(e,t,n){const r=function(e,t){return OC.set(e,t),OC.get(e)}(e,Object.assign({},PC));r.activated=!0,r.provider=t,r.cachedTokenPromise=function(e){return eE.apply(this,arguments)}(e).then(t=>(t&&pE(t)&&(r.token=t,fE(e,{token:t.token})),t)),r.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),DC(e).isTokenAutoRefreshEnabled&&lE(r,"INTERNAL",()=>{}),r},!0),ev(function(e,t,n,r){let i=()=>{},s=()=>{};return i=null!=t.next?t.next.bind(t):t,null!=t.error?s=t.error.bind(t):n&&(s=n),lE(e,"EXTERNAL",i,s),()=>hE(e.app,i)},!0),ev(function(e,t){const n=DC(e.app);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),n.isTokenAutoRefreshEnabled=t},!0);var IE,CE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},EE={},TE=TE||{},SE=CE||self;function kE(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xE(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var AE="closure_uid_"+(1e9*Math.random()>>>0),OE=0;function PE(e,t,n){return e.call.apply(e.bind,arguments)}function ME(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function DE(e,t,n){return(DE=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?PE:ME).apply(null,arguments)}function NE(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function RE(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function LE(){this.s=this.s,this.o=this.o}LE.prototype.s=!1,LE.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,AE)&&e[AE]||(e[AE]=++OE))},LE.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const VE=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function FE(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function jE(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(kE(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function UE(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}UE.prototype.h=function(){this.defaultPrevented=!0};var BE=function(){if(!SE.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{SE.addEventListener("test",()=>{},t),SE.removeEventListener("test",()=>{},t)}catch(Sh){}return e}();function zE(e){return/^[\s\xa0]*$/.test(e)}function qE(){var e=SE.navigator;return e&&(e=e.userAgent)?e:""}function $E(e){return-1!=qE().indexOf(e)}function HE(e){return HE[" "](e),e}HE[" "]=function(){};var KE,GE,WE=$E("Opera"),QE=$E("Trident")||$E("MSIE"),YE=$E("Edge"),JE=YE||QE,XE=$E("Gecko")&&!(-1!=qE().toLowerCase().indexOf("webkit")&&!$E("Edge"))&&!($E("Trident")||$E("MSIE"))&&!$E("Edge"),ZE=-1!=qE().toLowerCase().indexOf("webkit")&&!$E("Edge");function eT(){var e=SE.document;return e?e.documentMode:void 0}e:{var tT="",nT=(GE=qE(),XE?/rv:([^\);]+)(\)|;)/.exec(GE):YE?/Edge\/([\d\.]+)/.exec(GE):QE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(GE):ZE?/WebKit\/(\S+)/.exec(GE):WE?/(?:Version)[ \/]?(\S+)/.exec(GE):void 0);if(nT&&(tT=nT?nT[1]:""),QE){var rT=eT();if(null!=rT&&rT>parseFloat(tT)){KE=String(rT);break e}}KE=tT}var iT=SE.document&&QE&&(eT()||parseInt(KE,10))||void 0;function sT(e,t){if(UE.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(XE){e:{try{HE(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:oT[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&sT.$.h.call(this)}}RE(sT,UE);var oT={2:"touch",3:"pen",4:"mouse"};sT.prototype.h=function(){sT.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var aT="closure_listenable_"+(1e6*Math.random()|0),cT=0;function uT(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++cT,this.fa=this.ia=!1}function lT(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function hT(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function dT(e){const t={};for(const n in e)t[n]=e[n];return t}const fT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pT(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<fT.length;t++)n=fT[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gT(e){this.src=e,this.g={},this.h=0}function mT(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=VE(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(lT(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function yT(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}gT.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=yT(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new uT(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var vT="closure_lm_"+(1e6*Math.random()|0),wT={};function _T(e,t,n,r,i){if(r&&r.once)return IT(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)_T(e,t[s],n,r,i);return null}return n=AT(n),e&&e[aT]?e.O(t,n,xE(r)?!!r.capture:!!r,i):bT(e,t,n,!1,r,i)}function bT(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=xE(i)?!!i.capture:!!i,a=kT(e);if(a||(e[vT]=a=new gT(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=ST;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)BE||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(TT(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function IT(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)IT(e,t[s],n,r,i);return null}return n=AT(n),e&&e[aT]?e.P(t,n,xE(r)?!!r.capture:!!r,i):bT(e,t,n,!0,r,i)}function CT(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)CT(e,t[s],n,r,i);else r=xE(r)?!!r.capture:!!r,n=AT(n),e&&e[aT]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=yT(s=e.g[t],n,r,i))&&(lT(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=kT(e))&&(t=e.g[t.toString()],e=-1,t&&(e=yT(t,n,r,i)),(n=-1<e?t[e]:null)&&ET(n))}function ET(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[aT])mT(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(TT(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=kT(t))?(mT(n,e),0==n.h&&(n.src=null,t[vT]=null)):lT(e)}}}function TT(e){return e in wT?wT[e]:wT[e]="on"+e}function ST(e,t){if(e.fa)e=!0;else{t=new sT(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ET(e),e=n.call(r,t)}return e}function kT(e){return(e=e[vT])instanceof gT?e:null}var xT="__closure_events_fn_"+(1e9*Math.random()>>>0);function AT(e){return"function"==typeof e?e:(e[xT]||(e[xT]=function(t){return e.handleEvent(t)}),e[xT])}function OT(){LE.call(this),this.i=new gT(this),this.S=this,this.J=null}function PT(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new UE(t,e);else if(t instanceof UE)t.target=t.target||e;else{var i=t;pT(t=new UE(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=MT(o,r,!0,t)&&i}if(i=MT(o=t.g=e,r,!0,t)&&i,i=MT(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=MT(o=t.g=n[s],r,!1,t)&&i}function MT(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&mT(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}RE(OT,LE),OT.prototype[aT]=!0,OT.prototype.removeEventListener=function(e,t,n,r){CT(this,e,t,n,r)},OT.prototype.N=function(){if(OT.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)lT(n[r]);delete t.g[e],t.h--}}this.J=null},OT.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},OT.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var DT=SE.JSON.stringify;function NT(){var e=BT;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var RT=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new LT,e=>e.reset());class LT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VT(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function FT(e){SE.setTimeout(()=>{throw e},0)}let jT,UT=!1,BT=new class{constructor(){this.h=this.g=null}add(e,t){const n=RT.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},zT=()=>{const e=SE.Promise.resolve(void 0);jT=()=>{e.then(qT)}};var qT=()=>{for(var e;e=NT();){try{e.h.call(e.g)}catch(Sh){FT(Sh)}var t=RT;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}UT=!1};function $T(e,t){OT.call(this),this.h=e||1,this.g=t||SE,this.j=DE(this.qb,this),this.l=Date.now()}function HT(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function KT(e,t,n){if("function"==typeof e)n&&(e=DE(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=DE(e.handleEvent,e)}return 2147483647<Number(t)?-1:SE.setTimeout(e,t||0)}function GT(e){e.g=KT(()=>{e.g=null,e.i&&(e.i=!1,GT(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}RE($T,OT),(IE=$T.prototype).ga=!1,IE.T=null,IE.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),PT(this,"tick"),this.ga&&(HT(this),this.start()))}},IE.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},IE.N=function(){$T.$.N.call(this),HT(this),delete this.g};class WT extends LE{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:GT(this)}N(){super.N(),this.g&&(SE.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function QT(e){LE.call(this),this.h=e,this.g={}}RE(QT,LE);var YT=[];function JT(e,t,n,r){Array.isArray(n)||(n&&(YT[0]=n.toString()),n=YT);for(var i=0;i<n.length;i++){var s=_T(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function XT(e){hT(e.g,function(e,t){this.g.hasOwnProperty(t)&&ET(e)},e),e.g={}}function ZT(){this.g=!0}function eS(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return DT(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}QT.prototype.N=function(){QT.$.N.call(this),XT(this)},QT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ZT.prototype.Ea=function(){this.g=!1},ZT.prototype.info=function(){};var tS={},nS=null;function rS(){return nS=nS||new OT}function iS(e){UE.call(this,tS.Ta,e)}function sS(e){const t=rS();PT(t,new iS(t))}function oS(e,t){UE.call(this,tS.STAT_EVENT,e),this.stat=t}function aS(e){const t=rS();PT(t,new oS(t,e))}function cS(e,t){UE.call(this,tS.Ua,e),this.size=t}function uS(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return SE.setTimeout(function(){e()},t)}tS.Ta="serverreachability",RE(iS,UE),tS.STAT_EVENT="statevent",RE(oS,UE),tS.Ua="timingevent",RE(cS,UE);var lS={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dS(){}function fS(){}dS.prototype.h=null;var pS,gS={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mS(){UE.call(this,"d")}function yS(){UE.call(this,"c")}function vS(){}function wS(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new QT(this),this.P=bS,this.V=new $T(e=JE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _S}function _S(){this.i=null,this.g="",this.h=!1}RE(mS,UE),RE(yS,UE),RE(vS,dS),vS.prototype.g=function(){return new XMLHttpRequest},vS.prototype.i=function(){return{}},pS=new vS;var bS=45e3,IS={},CS={};function ES(e,t,n){e.L=1,e.v=qS(FS(t)),e.s=n,e.S=!0,TS(e,null)}function TS(e,t){e.G=Date.now(),AS(e),e.A=FS(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),nk(n.i,"t",r),e.C=0,n=e.l.J,e.h=new _S,e.g=ex(e.l,n?t:null,!e.s),0<e.O&&(e.M=new WT(DE(e.Pa,e,e.g),e.O)),JT(e.U,e.g,"readystatechange",e.nb),t=e.I?dT(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),sS(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function SS(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function kS(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=xS(e,n),r==CS){4==t&&(e.o=4,aS(14),i=!1),eS(e.j,e.m,null,"[Incomplete Response]");break}if(r==IS){e.o=4,aS(15),eS(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}eS(e.j,e.m,r,null),NS(e,r)}SS(e)&&r!=CS&&r!=IS&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,aS(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kk(t),t.M=!0,aS(11))):(eS(e.j,e.m,n,"[Invalid Chunked Response]"),DS(e),MS(e))}function xS(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?CS:(n=Number(t.substring(n,r)),isNaN(n)?IS:(r+=1)+n>t.length?CS:(t=t.slice(r,r+n),e.C=r+n,t))}function AS(e){e.Y=Date.now()+e.P,OS(e,e.P)}function OS(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=uS(DE(e.lb,e),t)}function PS(e){e.B&&(SE.clearTimeout(e.B),e.B=null)}function MS(e){0==e.l.H||e.J||Qk(e.l,e)}function DS(e){PS(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,HT(e.V),XT(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function NS(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ck(n.i,e)))if(!e.K&&ck(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Wk(n),Fk(n)}Hk(n),aS(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=uS(DE(n.ib,n),6e3));if(1>=ak(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Jk(n,11)}else if((e.K||n.g==e)&&Wk(n),!zE(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(n.L=r=1.5*l,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uk(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,zS(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Zk(r,r.J?r.pa:null,r.Y),o.K){lk(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(PS(a),AS(a)),r.g=o}else $k(r);0<n.j.length&&Uk(n)}else"stop"!=u[0]&&"close"!=u[0]||Jk(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Jk(n,7):Vk(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}sS()}catch(u){}}function RS(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(kE(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(kE(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(kE(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(IE=wS.prototype).setTimeout=function(e){this.P=e},IE.nb=function(e){e=e.target;const t=this.M;t&&3==Pk(e)?t.l():this.Pa(e)},IE.Pa=function(e){try{if(e==this.g)e:{const l=Pk(this.g);var t=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||JE||this.g&&(this.h.h||this.g.ja()||Mk(this.g)))){this.J||4!=l||7==t||sS(),PS(this);var n=this.g.da();this.ca=n;t:if(SS(this)){var r=Mk(this.g);e="";var i=r.length,s=4==Pk(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){DS(this),MS(this);var o="";break t}this.h.i=new SE.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zE(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,aS(12),DS(this),MS(this);break e}eS(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,NS(this,n)}this.S?(kS(this,l,o),JE&&this.i&&3==l&&(JT(this.U,this.V,"tick",this.mb),this.V.start())):(eS(this.j,this.m,o,null),NS(this,o)),4==l&&DS(this),this.i&&!this.J&&(4==l?Qk(this.l,this):(this.i=!1,AS(this)))}else(function(e){const t={};e=(e.g&&2<=Pk(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(zE(e[r]))continue;var n=VT(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,aS(12)):(this.o=0,aS(13)),DS(this),MS(this)}}}catch(oo){}},IE.mb=function(){if(this.g){var e=Pk(this.g),t=this.g.ja();this.C<t.length&&(PS(this),kS(this,e,t),this.i&&4!=e&&AS(this))}},IE.cancel=function(){this.J=!0,DS(this)},IE.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(sS(),aS(17)),DS(this),this.o=2,MS(this)):OS(this,this.Y-e)};var LS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VS(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof VS){this.h=e.h,jS(this,e.j),this.s=e.s,this.g=e.g,US(this,e.m),this.l=e.l;var t=e.i,n=new XS;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),BS(this,n),this.o=e.o}else e&&(t=String(e).match(LS))?(this.h=!1,jS(this,t[1]||"",!0),this.s=$S(t[2]||""),this.g=$S(t[3]||"",!0),US(this,t[4]),this.l=$S(t[5]||"",!0),BS(this,t[6]||"",!0),this.o=$S(t[7]||"")):(this.h=!1,this.i=new XS(null,this.h))}function FS(e){return new VS(e)}function jS(e,t,n){e.j=n?$S(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function US(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function BS(e,t,n){t instanceof XS?(e.i=t,function(e,t){t&&!e.j&&(ZS(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(ek(this,t),nk(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=HS(t,YS)),e.i=new XS(t,e.h))}function zS(e,t,n){e.i.set(t,n)}function qS(e){return zS(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $S(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function HS(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,KS),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function KS(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}VS.prototype.toString=function(){var e=[],t=this.j;t&&e.push(HS(t,GS,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(HS(t,GS,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(HS(n,"/"==n.charAt(0)?QS:WS,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",HS(n,JS)),e.join("")};var GS=/[#\/\?@]/g,WS=/[#\?:]/g,QS=/[#\?]/g,YS=/[#\?@]/g,JS=/#/g;function XS(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ZS(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ek(e,t){ZS(e),t=rk(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tk(e,t){return ZS(e),t=rk(e,t),e.g.has(t)}function nk(e,t,n){ek(e,t),0<n.length&&(e.i=null,e.g.set(rk(e,t),FE(n)),e.h+=n.length)}function rk(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ik(e){this.l=e||sk,e=SE.PerformanceNavigationTiming?0<(e=SE.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(SE.g&&SE.g.Ka&&SE.g.Ka()&&SE.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(IE=XS.prototype).add=function(e,t){ZS(this),this.i=null,e=rk(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},IE.forEach=function(e,t){ZS(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},IE.ta=function(){ZS(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},IE.Z=function(e){ZS(this);let t=[];if("string"==typeof e)tk(this,e)&&(t=t.concat(this.g.get(rk(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},IE.set=function(e,t){return ZS(this),this.i=null,tk(this,e=rk(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},IE.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},IE.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var sk=10;function ok(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ak(e){return e.h?1:e.g?e.g.size:0}function ck(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function uk(e,t){e.g?e.g.add(t):e.h=t}function lk(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function hk(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return FE(e.i)}function dk(){this.g=new class{stringify(e){return SE.JSON.stringify(e,void 0)}parse(e){return SE.JSON.parse(e,void 0)}}}function fk(e,t,n){const r=n||"";try{RS(e,function(e,n){let i=e;xE(e)&&(i=DT(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function pk(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function gk(e){this.l=e.fc||null,this.j=e.ob||!1}function mk(e,t){OT.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=yk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ik.prototype.cancel=function(){if(this.i=hk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},RE(gk,dS),gk.prototype.g=function(){return new mk(this.l,this.j)},gk.prototype.i=function(e){return function(){return e}}({}),RE(mk,OT);var yk=0;function vk(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function wk(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_k(e)}function _k(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(IE=mk.prototype).open=function(e,t){if(this.readyState!=yk)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_k(this)},IE.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||SE).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},IE.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wk(this)),this.readyState=yk},IE.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_k(this)),this.g&&(this.readyState=3,_k(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==SE.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vk(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},IE.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?wk(this):_k(this),3==this.readyState&&vk(this)}},IE.Za=function(e){this.g&&(this.response=this.responseText=e,wk(this))},IE.Ya=function(e){this.g&&(this.response=e,wk(this))},IE.ka=function(){this.g&&wk(this)},IE.setRequestHeader=function(e,t){this.v.append(e,t)},IE.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},IE.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(mk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bk=SE.JSON.parse;function Ik(e){OT.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ck,this.L=this.M=!1}RE(Ik,OT);var Ck="",Ek=/^https?$/i,Tk=["POST","PUT"];function Sk(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,kk(e),Ak(e)}function kk(e){e.F||(e.F=!0,PT(e,"complete"),PT(e,"error"))}function xk(e){if(e.h&&void 0!==TE&&(!e.C[1]||4!=Pk(e)||2!=e.da()))if(e.v&&4==Pk(e))KT(e.La,0,e);else if(PT(e,"readystatechange"),4==Pk(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(LS)[1]||null;!i&&SE.self&&SE.self.location&&(i=SE.self.location.protocol.slice(0,-1)),r=!Ek.test(i?i.toLowerCase():"")}n=r}if(n)PT(e,"complete"),PT(e,"success");else{e.m=6;try{var s=2<Pk(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",kk(e)}}finally{Ak(e)}}}function Ak(e,t){if(e.g){Ok(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||PT(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ok(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(SE.clearTimeout(e.A),e.A=null)}function Pk(e){return e.g?e.g.readyState:0}function Mk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ck:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Vx){return null}}function Dk(e){let t="";return hT(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Nk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dk(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):zS(e,t,n))}function Rk(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Lk(e){this.Ga=0,this.j=[],this.l=new ZT,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rk("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rk("baseRetryDelayMs",5e3,e),this.hb=Rk("retryDelaySeedMs",1e4,e),this.eb=Rk("forwardChannelMaxRetries",2,e),this.xa=Rk("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ik(e&&e.concurrentRequestLimit),this.Ja=new dk,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Vk(e){if(jk(e),3==e.H){var t=e.W++,n=FS(e.I);if(zS(n,"SID",e.K),zS(n,"RID",t),zS(n,"TYPE","terminate"),zk(e,n),(t=new wS(e,e.l,t)).L=2,t.v=qS(FS(n)),n=!1,SE.navigator&&SE.navigator.sendBeacon)try{n=SE.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&SE.Image&&((new Image).src=t.v,n=!0),n||(t.g=ex(t.l,null),t.g.ha(t.v)),t.G=Date.now(),AS(t)}Xk(e)}function Fk(e){e.g&&(Kk(e),e.g.cancel(),e.g=null)}function jk(e){Fk(e),e.u&&(SE.clearTimeout(e.u),e.u=null),Wk(e),e.i.cancel(),e.m&&("number"==typeof e.m&&SE.clearTimeout(e.m),e.m=null)}function Uk(e){if(!ok(e.i)&&!e.m){e.m=!0;var t=e.Na;jT||zT(),UT||(jT(),UT=!0),BT.add(t,e),e.C=0}}function Bk(e,t){var n;n=t?t.m:e.W++;const r=FS(e.I);zS(r,"SID",e.K),zS(r,"RID",n),zS(r,"AID",e.V),zk(e,r),e.o&&e.s&&Nk(r,e.o,e.s),n=new wS(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=qk(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),uk(e.i,n),ES(n,r,t)}function zk(e,t){e.na&&hT(e.na,function(e,n){zS(t,n,e)}),e.h&&RS({},function(e,n){zS(t,n,e)})}function qk(e,t,n){n=Math.min(e.j.length,n);var r=e.h?DE(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{fk(a,e,"req"+n+"_")}catch(Wx){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function $k(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;jT||zT(),UT||(jT(),UT=!0),BT.add(t,e),e.A=0}}function Hk(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=uS(DE(e.Ma,e),Yk(e,e.A)),e.A++,0))}function Kk(e){null!=e.B&&(SE.clearTimeout(e.B),e.B=null)}function Gk(e){e.g=new wS(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=FS(e.wa);zS(t,"RID","rpc"),zS(t,"SID",e.K),zS(t,"AID",e.V),zS(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&zS(t,"TO",e.qa),zS(t,"TYPE","xmlhttp"),zk(e,t),e.o&&e.s&&Nk(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=qS(FS(t)),n.s=null,n.S=!0,TS(n,e)}function Wk(e){null!=e.v&&(SE.clearTimeout(e.v),e.v=null)}function Qk(e,t){var n=null;if(e.g==t){Wk(e),Kk(e),e.g=null;var r=2}else{if(!ck(e.i,t))return;n=t.F,lk(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;PT(r=rS(),new cS(r,n)),Uk(e)}else $k(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ak(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=uS(DE(e.Na,e,t),Yk(e,e.C)),e.C++,0)))}(e,t)||2==r&&Hk(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Jk(e,5);break;case 4:Jk(e,10);break;case 3:Jk(e,6);break;default:Jk(e,2)}}function Yk(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Jk(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=DE(e.pb,e);n||(n=new VS("//www.google.com/images/cleardot.gif"),SE.location&&"http"==SE.location.protocol||jS(n,"https"),qS(n)),function(e,t){const n=new ZT;if(SE.Image){const r=new Image;r.onload=NE(pk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=NE(pk,n,r,"TestLoadImage: error",!1,t),r.onabort=NE(pk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=NE(pk,n,r,"TestLoadImage: timeout",!1,t),SE.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else aS(2);e.H=0,e.h&&e.h.za(t),Xk(e),jk(e)}function Xk(e){if(e.H=0,e.ma=[],e.h){const t=hk(e.i);0==t.length&&0==e.j.length||(jE(e.ma,t),jE(e.ma,e.j),e.i.i.length=0,FE(e.j),e.j.length=0),e.h.ya()}}function Zk(e,t,n){var r=n instanceof VS?FS(n):new VS(n);if(""!=r.g)t&&(r.g=t+"."+r.g),US(r,r.m);else{var i=SE.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new VS(null);r&&jS(s,r),t&&(s.g=t),i&&US(s,i),n&&(s.l=n),r=s}return t=e.Da,(n=e.F)&&t&&zS(r,n,t),zS(r,"VER",e.ra),zk(e,r),r}function ex(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ik(n&&e.Ha&&!e.va?new gk({ob:!0}):e.va)).Oa(e.J),t}function tx(){}function nx(){if(QE&&!(10<=Number(iT)))throw Error("Environmental error: no available transport.")}function rx(e,t){OT.call(this),this.g=new Lk(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!zE(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zE(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ox(this)}function ix(e){mS.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function sx(){yS.call(this),this.status=1}function ox(e){this.g=e}function ax(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function cx(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;var s=e.g[3],o=(t=e.g[0])+(s^(n=e.g[1])&((i=e.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function ux(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(IE=Ik.prototype).Oa=function(e){this.M=e},IE.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pS.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:pS),this.g.onreadystatechange=DE(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Sk(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=SE.FormData&&e instanceof SE.FormData,!(0<=VE(Tk,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ok(this),0<this.B&&((this.L=function(e){return QE&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=DE(this.ua,this)):this.A=KT(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Sk(this,s)}},IE.ua=function(){void 0!==TE&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,PT(this,"timeout"),this.abort(8))},IE.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,PT(this,"complete"),PT(this,"abort"),Ak(this))},IE.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ak(this,!0)),Ik.$.N.call(this)},IE.La=function(){this.s||(this.G||this.v||this.l?xk(this):this.kb())},IE.kb=function(){xk(this)},IE.isActive=function(){return!!this.g},IE.da=function(){try{return 2<Pk(this)?this.g.status:-1}catch(GE){return-1}},IE.ja=function(){try{return this.g?this.g.responseText:""}catch(GE){return""}},IE.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bk(t)}},IE.Ia=function(){return this.m},IE.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(IE=Lk.prototype).ra=8,IE.H=1,IE.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new wS(this,this.l,e);let s=this.s;if(this.U&&(s?(s=dT(s),pT(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=qk(this,i,t),zS(n=FS(this.I),"RID",e),zS(n,"CVER",22),this.F&&zS(n,"X-HTTP-Session-Id",this.F),zk(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Dk(s)))+"&"+t:this.o&&Nk(n,this.o,s)),uk(this.i,i),this.bb&&zS(n,"TYPE","init"),this.P?(zS(n,"$req",t),zS(n,"SID","null"),i.aa=!0,ES(i,n,null)):ES(i,n,t),this.H=2}}else 3==this.H&&(e?Bk(this,e):0==this.j.length||ok(this.i)||Bk(this))},IE.Ma=function(){if(this.u=null,Gk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=uS(DE(this.jb,this),e)}},IE.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,aS(10),Fk(this),Gk(this))},IE.ib=function(){null!=this.v&&(this.v=null,Fk(this),Hk(this),aS(19))},IE.pb=function(e){e?(this.l.info("Successfully pinged google.com"),aS(2)):(this.l.info("Failed to ping google.com"),aS(1))},IE.isActive=function(){return!!this.h&&this.h.isActive(this)},(IE=tx.prototype).Ba=function(){},IE.Aa=function(){},IE.za=function(){},IE.ya=function(){},IE.isActive=function(){return!0},IE.Va=function(){},nx.prototype.g=function(e,t){return new rx(e,t)},RE(rx,OT),rx.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;aS(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Zk(e,null,e.Y),Uk(e)},rx.prototype.close=function(){Vk(this.g)},rx.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=DT(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&Uk(t)},rx.prototype.N=function(){this.g.h=null,delete this.j,Vk(this.g),delete this.g,rx.$.N.call(this)},RE(ix,mS),RE(sx,yS),RE(ox,tx),ox.prototype.Ba=function(){PT(this.g,"a")},ox.prototype.Aa=function(e){PT(this.g,new ix(e))},ox.prototype.za=function(e){PT(this.g,new sx)},ox.prototype.ya=function(){PT(this.g,"b")},RE(ax,function(){this.blockSize=-1}),ax.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ax.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)cx(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){cx(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){cx(this,r),i=0;break}}this.h=i,this.i+=t},ax.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var lx={};function hx(e){return-128<=e&&128>e?function(e,t){var n=lx;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new ux([0|e],0>e?-1:0)}(e)}(e):new ux([0|e],0>e?-1:0)}function dx(e){if(isNaN(e)||!isFinite(e))return px;if(0>e)return wx(dx(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=fx;return new ux(t,0)}var fx=4294967296,px=hx(0),gx=hx(1),mx=hx(16777216);function yx(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function vx(e){return-1==e.h}function wx(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ux(n,~e.h).add(gx)}function _x(e,t){return e.add(wx(t))}function bx(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ix(e,t){this.g=e,this.h=t}function Cx(e,t){if(yx(t))throw Error("division by zero");if(yx(e))return new Ix(px,px);if(vx(e))return t=Cx(wx(e),t),new Ix(wx(t.g),wx(t.h));if(vx(t))return t=Cx(e,wx(t)),new Ix(wx(t.g),t.h);if(30<e.g.length){if(vx(e)||vx(t))throw Error("slowDivide_ only works with positive integers.");for(var n=gx,r=t;0>=r.X(e);)n=Ex(n),r=Ex(r);var i=Tx(n,1),s=Tx(r,1);for(r=Tx(r,2),n=Tx(n,2);!yx(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Tx(r,1),n=Tx(n,1)}return t=_x(e,i.R(t)),new Ix(i,t)}for(i=px;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=dx(n)).R(t);vx(o)||0<o.X(e);)o=(s=dx(n-=r)).R(t);yx(s)&&(s=gx),i=i.add(s),e=_x(e,o)}return new Ix(i,e)}function Ex(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ux(n,e.h)}function Tx(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new ux(i,e.h)}(IE=ux.prototype).ea=function(){if(vx(this))return-wx(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:fx+r)*t,t*=fx}return e},IE.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(yx(this))return"0";if(vx(this))return"-"+wx(this).toString(e);for(var t=dx(Math.pow(e,6)),n=this,r="";;){var i=Cx(n,t).g,s=((0<(n=_x(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(yx(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},IE.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},IE.X=function(e){return vx(e=_x(this,e))?-1:yx(e)?0:1},IE.abs=function(){return vx(this)?wx(this):this},IE.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new ux(n,-2147483648&n[n.length-1]?-1:0)},IE.R=function(e){if(yx(this)||yx(e))return px;if(vx(this))return vx(e)?wx(this).R(wx(e)):wx(wx(this).R(e));if(vx(e))return wx(this.R(wx(e)));if(0>this.X(mx)&&0>e.X(mx))return dx(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,bx(n,2*r+2*i),n[2*r+2*i+1]+=s*c,bx(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,bx(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,bx(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ux(n,0)},IE.gb=function(e){return Cx(this,e).h},IE.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ux(n,this.h&e.h)},IE.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ux(n,this.h|e.h)},IE.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ux(n,this.h^e.h)},nx.prototype.createWebChannel=nx.prototype.g,rx.prototype.send=rx.prototype.u,rx.prototype.open=rx.prototype.m,rx.prototype.close=rx.prototype.close,lS.NO_ERROR=0,lS.TIMEOUT=8,lS.HTTP_ERROR=6,hS.COMPLETE="complete",fS.EventType=gS,gS.OPEN="a",gS.CLOSE="b",gS.ERROR="c",gS.MESSAGE="d",OT.prototype.listen=OT.prototype.O,Ik.prototype.listenOnce=Ik.prototype.P,Ik.prototype.getLastError=Ik.prototype.Sa,Ik.prototype.getLastErrorCode=Ik.prototype.Ia,Ik.prototype.getStatus=Ik.prototype.da,Ik.prototype.getResponseJson=Ik.prototype.Wa,Ik.prototype.getResponseText=Ik.prototype.ja,Ik.prototype.send=Ik.prototype.ha,Ik.prototype.setWithCredentials=Ik.prototype.Oa,ax.prototype.digest=ax.prototype.l,ax.prototype.reset=ax.prototype.reset,ax.prototype.update=ax.prototype.j,ux.prototype.add=ux.prototype.add,ux.prototype.multiply=ux.prototype.R,ux.prototype.modulo=ux.prototype.gb,ux.prototype.compare=ux.prototype.X,ux.prototype.toNumber=ux.prototype.ea,ux.prototype.toString=ux.prototype.toString,ux.prototype.getBits=ux.prototype.D,ux.fromNumber=dx,ux.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return wx(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=dx(Math.pow(n,8)),i=px,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=dx(Math.pow(n,o)),i=i.R(o).add(dx(a))):i=(i=i.R(r)).add(dx(a))}return i};var Sx=EE.createWebChannelTransport=function(){return new nx},kx=EE.getStatEventTarget=function(){return rS()},xx=EE.ErrorCode=lS,Ax=EE.EventType=hS,Ox=EE.Event=tS,Px=EE.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Mx=EE.FetchXmlHttpFactory=gk,Dx=EE.WebChannel=fS,Nx=EE.XhrIo=Ik,Rx=EE.Md5=ax,Lx=EE.Integer=ux;const Vx="@firebase/firestore";class Fx{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fx.UNAUTHENTICATED=new Fx(null),Fx.GOOGLE_CREDENTIALS=new Fx("google-credentials-uid"),Fx.FIRST_PARTY=new Fx("first-party-uid"),Fx.MOCK_USER=new Fx("mock-user");let jx="9.23.0";const Ux=new Dd("@firebase/firestore");function Bx(){return Ux.logLevel}function zx(e,...t){if(Ux.logLevel<=kd.DEBUG){const n=t.map(Hx);Ux.debug(`Firestore (${jx}): ${e}`,...n)}}function qx(e,...t){if(Ux.logLevel<=kd.ERROR){const n=t.map(Hx);Ux.error(`Firestore (${jx}): ${e}`,...n)}}function $x(e,...t){if(Ux.logLevel<=kd.WARN){const n=t.map(Hx);Ux.warn(`Firestore (${jx}): ${e}`,...n)}}function Hx(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Kx(e="Unexpected state"){const t=`FIRESTORE (${jx}) INTERNAL ASSERTION FAILED: `+e;throw qx(t),new Error(t)}function Gx(e,t){e||Kx()}function Wx(e,t){return e}const Qx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yx extends cd{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jx{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fx.UNAUTHENTICATED))}shutdown(){}}class eA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tA{constructor(e){this.t=e,this.currentUser=Fx.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Jx;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jx,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable(Hh(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{zx("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(zx("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jx)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zx("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gx("string"==typeof t.accessToken),new Xx(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gx(null===e||"string"==typeof e),new Fx(e)}}class nA{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Fx.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class rA{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new nA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fx.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&zx("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,zx("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zx("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):zx("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Gx("string"==typeof e.token),this.T=e.token,new iA(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function oA(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class aA{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=oA(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function cA(e,t){return e<t?-1:e>t?1:0}function uA(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function lA(e){return e+"\0"}class hA{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Yx(Qx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Yx(Qx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Yx(Qx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Yx(Qx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hA.fromMillis(Date.now())}static fromDate(e){return hA.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hA(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cA(this.nanoseconds,e.nanoseconds):cA(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dA{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dA(e)}static min(){return new dA(new hA(0,0))}static max(){return new dA(new hA(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fA{constructor(e,t,n){void 0===t?t=0:t>e.length&&Kx(),void 0===n?n=e.length-t:n>e.length-t&&Kx(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===fA.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fA?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pA extends fA{construct(e,t,n){return new pA(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Yx(Qx.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new pA(t)}static emptyPath(){return new pA([])}}const gA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mA extends fA{construct(e,t,n){return new mA(e,t,n)}static isValidIdentifier(e){return gA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mA.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mA(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Yx(Qx.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Yx(Qx.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Yx(Qx.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Yx(Qx.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mA(t)}static emptyPath(){return new mA([])}}class yA{constructor(e){this.path=e}static fromPath(e){return new yA(pA.fromString(e))}static fromName(e){return new yA(pA.fromString(e).popFirst(5))}static empty(){return new yA(pA.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pA.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pA.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yA(new pA(e.slice()))}}class vA{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function wA(e){return e.fields.find(e=>2===e.kind)}function _A(e){return e.fields.filter(e=>2!==e.kind)}vA.UNKNOWN_ID=-1;class bA{constructor(e,t){this.fieldPath=e,this.kind=t}}class IA{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new IA(0,TA.min())}}function CA(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dA.fromTimestamp(1e9===r?new hA(n+1,0):new hA(n,r));return new TA(i,yA.empty(),t)}function EA(e){return new TA(e.readTime,e.key,-1)}class TA{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new TA(dA.min(),yA.empty(),-1)}static max(){return new TA(dA.max(),yA.empty(),-1)}}function SA(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=yA.comparator(e.documentKey,t.documentKey),0!==n?n:cA(e.largestBatchId,t.largestBatchId))}const kA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function AA(e){return OA.apply(this,arguments)}function OA(){return(OA=Hh(function*(e){if(e.code!==Qx.FAILED_PRECONDITION||e.message!==kA)throw e;zx("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class PA{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kx(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new PA((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof PA?t:PA.resolve(t)}catch(e){return PA.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):PA.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):PA.reject(t)}static resolve(e){return new PA((t,n)=>{t(e)})}static reject(e){return new PA((t,n)=>{n(e)})}static waitFor(e){return new PA((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=PA.resolve(!1);for(const n of e)t=t.next(e=>e?PA.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new PA((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next(e=>{s[c]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new PA((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}class MA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Jx,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new RA(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=UA(t.target.error);this.v.reject(new RA(e,n))}}static open(e,t,n,r){try{return new MA(t,e.transaction(r,n))}catch(e){throw new RA(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(zx("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new VA(t)}}class DA{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===DA.S(rd())&&qx("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return zx("SimpleDb","Removing database:",e),FA(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sd())return!1;if(DA.C())return!0;const e=rd(),t=DA.S(e),n=0<t&&t<10,r=DA.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}$(e){var t=this;return Hh(function*(){return t.db||(zx("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new RA(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Yx(Qx.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Yx(Qx.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new RA(e,n))},i.onupgradeneeded=e=>{zx("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.V.O(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{zx("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=e=>t.F(e)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return Hh(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.$(e);const t=MA.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).next(e=>(t.P(),e)).catch(e=>(t.abort(e),PA.reject(e))).toPromise();return o.catch(()=>{}),yield t.R,o}catch(e){const n=e,r="FirebaseError"!==n.name&&o<3;if(zx("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),i.close(),!r)return Promise.reject(n)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class NA{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return FA(this.L.delete())}}class RA extends Yx{constructor(e,t){super(Qx.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function LA(e){return"IndexedDbTransactionError"===e.name}class VA{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(zx("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(zx("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),FA(n)}add(e){return zx("SimpleDb","ADD",this.store.name,e,e),FA(this.store.add(e))}get(e){return FA(this.store.get(e)).next(t=>(void 0===t&&(t=null),zx("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return zx("SimpleDb","DELETE",this.store.name,e),FA(this.store.delete(e))}count(){return zx("SimpleDb","COUNT",this.store.name),FA(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new PA((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new PA((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}J(e,t){zx("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new PA((n,r)=>{t.onerror=e=>{const t=UA(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new PA((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new NA(i),o=t(i.primaryKey,i.value,s);if(o instanceof PA){const e=o.catch(e=>(s.done(),PA.reject(e)));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}}).next(()=>PA.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function FA(e){return new PA((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=UA(e.target.error);n(t)}})}let jA=!1;function UA(e){const t=DA.S(rd());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Yx("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jA||(jA=!0,setTimeout(()=>{throw e},0)),e}}return e}class BA{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;zx("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Hh(function*(){t.task=null;try{zx("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(e){LA(e)?zx("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):yield AA(e)}yield t.et(6e4)}))}}class zA{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return Hh(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>t.st(n,e))})()}st(e,t){const n=new Set;let r=t,i=!0;return PA.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return zx("IndexBackiller",`Processing collection: ${t}`),this.it(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.rt(r,n)).next(n=>(zx("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}rt(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=EA(t);SA(r,n)>0&&(n=r)}),new TA(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}let qA=(()=>{class e{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return e.ct=-1,e})();function $A(e){return null==e}function HA(e){return 0===e&&1/e==-1/0}function KA(e){return"number"==typeof e&&Number.isInteger(e)&&!HA(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function GA(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=QA(t)),t=WA(e.get(n),t);return QA(t)}function WA(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function QA(e){return e+"\x01\x01"}function YA(e){const t=e.length;if(Gx(t>=2),2===t)return Gx("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),pA.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Kx(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Kx()}s=t+2}return new pA(r)}const JA=["userId","batchId"];function XA(e,t){return[e,GA(t)]}function ZA(e,t,n){return[e,GA(t),n]}const eO={},tO=["prefixPath","collectionGroup","readTime","documentId"],nO=["prefixPath","collectionGroup","documentId"],rO=["collectionGroup","readTime","prefixPath","documentId"],iO=["canonicalId","targetId"],sO=["targetId","path"],oO=["path","targetId"],aO=["collectionId","parent"],cO=["indexId","uid"],uO=["uid","sequenceNumber"],lO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hO=["indexId","uid","orderedDocumentKey"],dO=["userId","collectionPath","documentId"],fO=["userId","collectionPath","largestBatchId"],pO=["userId","collectionGroup","largestBatchId"],gO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mO=[...gO,"documentOverlays"],yO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vO=yO,wO=[...vO,"indexConfiguration","indexState","indexEntries"];class _O extends xA{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function bO(e,t){const n=Wx(e);return DA.M(n.ht,t)}function IO(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function CO(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function EO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class TO{constructor(e,t){this.comparator=e,this.root=t||kO.EMPTY}insert(e,t){return new TO(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kO.BLACK,null,null))}remove(e){return new TO(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kO.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SO(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SO(this.root,e,this.comparator,!1)}getReverseIterator(){return new SO(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SO(this.root,e,this.comparator,!0)}}class SO{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kO{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:kO.RED,this.left=null!=r?r:kO.EMPTY,this.right=null!=i?i:kO.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new kO(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kO.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return kO.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kO.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kO.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Kx();if(this.right.isRed())throw Kx();const e=this.left.check();if(e!==this.right.check())throw Kx();return e+(this.isRed()?0:1)}}kO.EMPTY=null,kO.RED=!0,kO.BLACK=!1,kO.EMPTY=new class{constructor(){this.size=0}get key(){throw Kx()}get value(){throw Kx()}get color(){throw Kx()}get left(){throw Kx()}get right(){throw Kx()}copy(e,t,n,r,i){return this}insert(e,t,n){return new kO(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xO{constructor(e){this.comparator=e,this.data=new TO(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AO(this.data.getIterator())}getIteratorFrom(e){return new AO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof xO))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xO(this.comparator);return t.data=e,t}}class AO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function OO(e){return e.hasNext()?e.getNext():void 0}class PO{constructor(e){this.fields=e,e.sort(mA.comparator)}static empty(){return new PO([])}unionWith(e){let t=new xO(mA.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new PO(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uA(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class MO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}let DO=(()=>{class e{constructor(e){this.binaryString=e}static fromBase64String(t){const n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new MO("Invalid base64 string: "+e):e}}(t);return new e(n)}static fromUint8Array(t){const n=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cA(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}return e.EMPTY_BYTE_STRING=new e(""),e})();const NO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RO(e){if(Gx(!!e),"string"==typeof e){let t=0;const n=NO.exec(e);if(Gx(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:LO(e.seconds),nanos:LO(e.nanos)}}function LO(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function VO(e){return"string"==typeof e?DO.fromBase64String(e):DO.fromUint8Array(e)}function FO(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jO(e){const t=e.mapValue.fields.__previous_value__;return FO(t)?jO(t):t}function UO(e){const t=RO(e.mapValue.fields.__local_write_time__.timestampValue);return new hA(t.seconds,t.nanos)}class BO{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class zO{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zO("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zO&&e.projectId===this.projectId&&e.database===this.database}}const qO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$O={nullValue:"NULL_VALUE"};function HO(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?FO(e)?4:sP(e)?9007199254740991:10:Kx()}function KO(e,t){if(e===t)return!0;const n=HO(e);if(n!==HO(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return UO(e).isEqual(UO(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=RO(e.timestampValue),r=RO(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return VO(e.bytesValue).isEqual(VO(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return LO(e.geoPointValue.latitude)===LO(t.geoPointValue.latitude)&&LO(e.geoPointValue.longitude)===LO(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return LO(e.integerValue)===LO(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=LO(e.doubleValue),r=LO(t.doubleValue);return n===r?HA(n)===HA(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return uA(e.arrayValue.values||[],t.arrayValue.values||[],KO);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(IO(n)!==IO(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!KO(n[i],r[i])))return!1;return!0}(e,t);default:return Kx()}}function GO(e,t){return void 0!==(e.values||[]).find(e=>KO(e,t))}function WO(e,t){if(e===t)return 0;const n=HO(e),r=HO(t);if(n!==r)return cA(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cA(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=LO(e.integerValue||e.doubleValue),r=LO(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return QO(e.timestampValue,t.timestampValue);case 4:return QO(UO(e),UO(t));case 5:return cA(e.stringValue,t.stringValue);case 6:return function(e,t){const n=VO(e),r=VO(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=cA(n[i],r[i]);if(0!==e)return e}return cA(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=cA(LO(e.latitude),LO(t.latitude));return 0!==n?n:cA(LO(e.longitude),LO(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=WO(n[i],r[i]);if(e)return e}return cA(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===qO.mapValue&&t===qO.mapValue)return 0;if(e===qO.mapValue)return 1;if(t===qO.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=cA(r[o],s[o]);if(0!==e)return e;const t=WO(n[r[o]],i[s[o]]);if(0!==t)return t}return cA(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Kx()}}function QO(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cA(e,t);const n=RO(e),r=RO(t),i=cA(n.seconds,r.seconds);return 0!==i?i:cA(n.nanos,r.nanos)}function YO(e){return JO(e)}function JO(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=RO(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?VO(e.bytesValue).toBase64():"referenceValue"in e?yA.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=JO(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${JO(e.fields[i])}`;return n+"}"}(e.mapValue):Kx();var t}function XO(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ZO(e){return!!e&&"integerValue"in e}function eP(e){return!!e&&"arrayValue"in e}function tP(e){return!!e&&"nullValue"in e}function nP(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rP(e){return!!e&&"mapValue"in e}function iP(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return CO(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=iP(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=iP(e.arrayValue.values[n]);return t}return Object.assign({},e)}function sP(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function oP(e){return"nullValue"in e?$O:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?XO(zO.empty(),yA.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Kx()}function aP(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?XO(zO.empty(),yA.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?qO:Kx()}function cP(e,t){const n=WO(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function uP(e,t){const n=WO(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class lP{constructor(e){this.value=e}static empty(){return new lP({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!rP(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iP(t)}setAll(e){let t=mA.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=iP(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());rP(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return KO(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];rP(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){CO(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new lP(iP(this.value))}}function hP(e){const t=[];return CO(e.fields,(e,n)=>{const r=new mA([e]);if(rP(n)){const e=hP(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new PO(t)}class dP{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new dP(e,0,dA.min(),dA.min(),dA.min(),lP.empty(),0)}static newFoundDocument(e,t,n,r){return new dP(e,1,t,dA.min(),n,r,0)}static newNoDocument(e,t){return new dP(e,2,t,dA.min(),dA.min(),lP.empty(),0)}static newUnknownDocument(e,t){return new dP(e,3,t,dA.min(),dA.min(),lP.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dA.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lP.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lP.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dA.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dP&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dP(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fP{constructor(e,t){this.position=e,this.inclusive=t}}function pP(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?yA.comparator(yA.fromName(o.referenceValue),n.key):WO(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gP(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!KO(e.position[n],t.position[n]))return!1;return!0}class mP{constructor(e,t="asc"){this.field=e,this.dir=t}}function yP(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class vP{}class wP extends vP{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new AP(e,t,n):"array-contains"===t?new DP(e,n):"in"===t?new NP(e,n):"not-in"===t?new RP(e,n):"array-contains-any"===t?new LP(e,n):new wP(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new OP(e,n):new PP(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(WO(t,this.value)):null!==t&&HO(this.value)===HO(t)&&this.matchesComparison(WO(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kx()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _P extends vP{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _P(e,t)}matches(e){return bP(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function bP(e){return"and"===e.op}function IP(e){return"or"===e.op}function CP(e){return EP(e)&&bP(e)}function EP(e){for(const t of e.filters)if(t instanceof _P)return!1;return!0}function TP(e){if(e instanceof wP)return e.field.canonicalString()+e.op.toString()+YO(e.value);if(CP(e))return e.filters.map(e=>TP(e)).join(",");{const t=e.filters.map(e=>TP(e)).join(",");return`${e.op}(${t})`}}function SP(e,t){return e instanceof wP?function(e,t){return t instanceof wP&&e.op===t.op&&e.field.isEqual(t.field)&&KO(e.value,t.value)}(e,t):e instanceof _P?function(e,t){return t instanceof _P&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&SP(n,t.filters[r]),!0)}(e,t):void Kx()}function kP(e,t){const n=e.filters.concat(t);return _P.create(n,e.op)}function xP(e){return e instanceof wP?function(e){return`${e.field.canonicalString()} ${e.op} ${YO(e.value)}`}(e):e instanceof _P?function(e){return e.op.toString()+" {"+e.getFilters().map(xP).join(" ,")+"}"}(e):"Filter"}class AP extends wP{constructor(e,t,n){super(e,t,n),this.key=yA.fromName(n.referenceValue)}matches(e){const t=yA.comparator(e.key,this.key);return this.matchesComparison(t)}}class OP extends wP{constructor(e,t){super(e,"in",t),this.keys=MP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PP extends wP{constructor(e,t){super(e,"not-in",t),this.keys=MP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MP(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>yA.fromName(e.referenceValue))}class DP extends wP{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eP(t)&&GO(t.arrayValue,this.value)}}class NP extends wP{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&GO(this.value.arrayValue,t)}}class RP extends wP{constructor(e,t){super(e,"not-in",t)}matches(e){if(GO(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!GO(this.value.arrayValue,t)}}class LP extends wP{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eP(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>GO(this.value.arrayValue,e))}}class VP{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function FP(e,t=null,n=[],r=[],i=null,s=null,o=null){return new VP(e,t,n,r,i,s,o)}function jP(e){const t=Wx(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>TP(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),$A(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>YO(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>YO(e)).join(",")),t.dt=e}return t.dt}function UP(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yP(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!SP(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gP(e.startAt,t.startAt)&&gP(e.endAt,t.endAt)}function BP(e){return yA.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function zP(e,t){return e.filters.filter(e=>e instanceof wP&&e.field.isEqual(t))}function qP(e,t,n){let r=$O,i=!0;for(const s of zP(e,t)){let e=$O,t=!0;switch(s.op){case"<":case"<=":e=oP(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=$O}cP({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];cP({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function $P(e,t,n){let r=qO,i=!0;for(const s of zP(e,t)){let e=qO,t=!0;switch(s.op){case">=":case">":e=aP(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=qO}uP({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];uP({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class HP{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null}}function KP(e,t,n,r,i,s,o,a){return new HP(e,t,n,r,i,s,o,a)}function GP(e){return new HP(e)}function WP(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function QP(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function YP(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function JP(e){return null!==e.collectionGroup}function XP(e){const t=Wx(e);if(null===t.wt){t.wt=[];const e=YP(t),n=QP(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new mP(e)),t.wt.push(new mP(mA.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new mP(mA.keyField(),e))}}}return t.wt}function ZP(e){const t=Wx(e);if(!t._t)if("F"===t.limitType)t._t=FP(t.path,t.collectionGroup,XP(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of XP(t))e.push(new mP(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new fP(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fP(t.startAt.position,t.startAt.inclusive):null;t._t=FP(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function eM(e,t){t.getFirstInequalityField(),YP(e);const n=e.filters.concat([t]);return new HP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function tM(e,t,n){return new HP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nM(e,t){return UP(ZP(e),ZP(t))&&e.limitType===t.limitType}function rM(e){return`${jP(ZP(e))}|lt:${e.limitType}`}function iM(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>xP(e)).join(", ")}]`),$A(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>YO(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>YO(e)).join(",")),`Target(${t})`}(ZP(e))}; limitType=${e.limitType})`}function sM(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yA.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of XP(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=pP(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,XP(e),t)||e.endAt&&!function(e,t,n){const r=pP(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,XP(e),t))}(e,t)}function oM(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function aM(e){return(t,n)=>{let r=!1;for(const i of XP(e)){const e=cM(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function cM(e,t,n){const r=e.field.isKeyField()?yA.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?WO(r,i):Kx()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kx()}}class uM{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){CO(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return EO(this.inner)}size(){return this.innerSize}}const lM=new TO(yA.comparator);function hM(){return lM}const dM=new TO(yA.comparator);function fM(...e){let t=dM;for(const n of e)t=t.insert(n.key,n);return t}function pM(e){let t=dM;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function gM(){return yM()}function mM(){return yM()}function yM(){return new uM(e=>e.toString(),(e,t)=>e.isEqual(t))}const vM=new TO(yA.comparator),wM=new xO(yA.comparator);function _M(...e){let t=wM;for(const n of e)t=t.add(n);return t}const bM=new xO(cA);function IM(){return bM}function CM(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:HA(t)?"-0":t}}function EM(e){return{integerValue:""+e}}function TM(e,t){return KA(t)?EM(t):CM(e,t)}class SM{constructor(){this._=void 0}}function kM(e,t,n){return e instanceof OM?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&FO(t)&&(t=jO(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof PM?MM(e,t):e instanceof DM?NM(e,t):function(e,t){const n=AM(e,t),r=LM(n)+LM(e.gt);return ZO(n)&&ZO(e.gt)?EM(r):CM(e.serializer,r)}(e,t)}function xM(e,t,n){return e instanceof PM?MM(e,t):e instanceof DM?NM(e,t):n}function AM(e,t){return e instanceof RM?ZO(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class OM extends SM{}class PM extends SM{constructor(e){super(),this.elements=e}}function MM(e,t){const n=VM(t);for(const r of e.elements)n.some(e=>KO(e,r))||n.push(r);return{arrayValue:{values:n}}}class DM extends SM{constructor(e){super(),this.elements=e}}function NM(e,t){let n=VM(t);for(const r of e.elements)n=n.filter(e=>!KO(e,r));return{arrayValue:{values:n}}}class RM extends SM{constructor(e,t){super(),this.serializer=e,this.gt=t}}function LM(e){return LO(e.integerValue||e.doubleValue)}function VM(e){return eP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class FM{constructor(e,t){this.field=e,this.transform=t}}class jM{constructor(e,t){this.version=e,this.transformResults=t}}class UM{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new UM}static exists(e){return new UM(void 0,e)}static updateTime(e){return new UM(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function BM(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zM{}function qM(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ZM(e.key,UM.none()):new WM(e.key,e.data,UM.none());{const n=e.data,r=lP.empty();let i=new xO(mA.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new QM(e.key,r,new PO(i.toArray()),UM.none())}}function $M(e,t,n){e instanceof WM?function(e,t,n){const r=e.value.clone(),i=JM(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof QM?function(e,t,n){if(!BM(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=JM(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(YM(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function HM(e,t,n,r){return e instanceof WM?function(e,t,n,r){if(!BM(e.precondition,t))return n;const i=e.value.clone(),s=XM(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof QM?function(e,t,n,r){if(!BM(e.precondition,t))return n;const i=XM(e.fieldTransforms,r,t),s=t.data;return s.setAll(YM(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return BM(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function KM(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=AM(r.transform,e||null);null!=i&&(null===n&&(n=lP.empty()),n.set(r.field,i))}return n||null}function GM(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uA(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof PM&&t instanceof PM||e instanceof DM&&t instanceof DM?uA(e.elements,t.elements,KO):e instanceof RM&&t instanceof RM?KO(e.gt,t.gt):e instanceof OM&&t instanceof OM}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class WM extends zM{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class QM extends zM{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YM(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function JM(e,t,n){const r=new Map;Gx(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,xM(o,a,n[i]))}return r}function XM(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,kM(e,s,t))}return r}class ZM extends zM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eD extends zM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tD{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&$M(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=HM(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=HM(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=mM();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=qM(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(dA.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_M())}isEqual(e){return this.batchId===e.batchId&&uA(this.mutations,e.mutations,(e,t)=>GM(e,t))&&uA(this.baseMutations,e.baseMutations,(e,t)=>GM(e,t))}}class nD{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Gx(e.mutations.length===n.length);let r=vM;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new nD(e,t,n,r)}}class rD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class iD{constructor(e,t){this.count=e,this.unchangedNames=t}}var sD,oD;function aD(e){switch(e){default:return Kx();case Qx.CANCELLED:case Qx.UNKNOWN:case Qx.DEADLINE_EXCEEDED:case Qx.RESOURCE_EXHAUSTED:case Qx.INTERNAL:case Qx.UNAVAILABLE:case Qx.UNAUTHENTICATED:return!1;case Qx.INVALID_ARGUMENT:case Qx.NOT_FOUND:case Qx.ALREADY_EXISTS:case Qx.PERMISSION_DENIED:case Qx.FAILED_PRECONDITION:case Qx.ABORTED:case Qx.OUT_OF_RANGE:case Qx.UNIMPLEMENTED:case Qx.DATA_LOSS:return!0}}function cD(e){if(void 0===e)return qx("GRPC error has no .code"),Qx.UNKNOWN;switch(e){case sD.OK:return Qx.OK;case sD.CANCELLED:return Qx.CANCELLED;case sD.UNKNOWN:return Qx.UNKNOWN;case sD.DEADLINE_EXCEEDED:return Qx.DEADLINE_EXCEEDED;case sD.RESOURCE_EXHAUSTED:return Qx.RESOURCE_EXHAUSTED;case sD.INTERNAL:return Qx.INTERNAL;case sD.UNAVAILABLE:return Qx.UNAVAILABLE;case sD.UNAUTHENTICATED:return Qx.UNAUTHENTICATED;case sD.INVALID_ARGUMENT:return Qx.INVALID_ARGUMENT;case sD.NOT_FOUND:return Qx.NOT_FOUND;case sD.ALREADY_EXISTS:return Qx.ALREADY_EXISTS;case sD.PERMISSION_DENIED:return Qx.PERMISSION_DENIED;case sD.FAILED_PRECONDITION:return Qx.FAILED_PRECONDITION;case sD.ABORTED:return Qx.ABORTED;case sD.OUT_OF_RANGE:return Qx.OUT_OF_RANGE;case sD.UNIMPLEMENTED:return Qx.UNIMPLEMENTED;case sD.DATA_LOSS:return Qx.DATA_LOSS;default:return Kx()}}(oD=sD||(sD={}))[oD.OK=0]="OK",oD[oD.CANCELLED=1]="CANCELLED",oD[oD.UNKNOWN=2]="UNKNOWN",oD[oD.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oD[oD.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oD[oD.NOT_FOUND=5]="NOT_FOUND",oD[oD.ALREADY_EXISTS=6]="ALREADY_EXISTS",oD[oD.PERMISSION_DENIED=7]="PERMISSION_DENIED",oD[oD.UNAUTHENTICATED=16]="UNAUTHENTICATED",oD[oD.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oD[oD.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oD[oD.ABORTED=10]="ABORTED",oD[oD.OUT_OF_RANGE=11]="OUT_OF_RANGE",oD[oD.UNIMPLEMENTED=12]="UNIMPLEMENTED",oD[oD.INTERNAL=13]="INTERNAL",oD[oD.UNAVAILABLE=14]="UNAVAILABLE",oD[oD.DATA_LOSS=15]="DATA_LOSS";class uD{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return lD}static getOrCreateInstance(){return null===lD&&(lD=new uD),lD}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let lD=null;function hD(){return new TextEncoder}const dD=new Lx([4294967295,4294967295],0);function fD(e){const t=hD().encode(e),n=new Rx;return n.update(t),new Uint8Array(n.digest())}function pD(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Lx([n,r],0),new Lx([i,s],0)]}class gD{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new mD(`Invalid padding: ${t}`);if(n<0)throw new mD(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new mD(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new mD(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Lx.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Lx.fromNumber(n)));return 1===r.compare(dD)&&(r=new Lx([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=fD(e),[n,r]=pD(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new gD(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=fD(e),[n,r]=pD(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mD extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yD{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vD.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yD(dA.min(),r,new TO(cA),hM(),_M())}}class vD{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vD(n,t,_M(),_M(),_M())}}class wD{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class _D{constructor(e,t){this.targetId=e,this.Vt=t}}class bD{constructor(e,t,n=DO.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ID{constructor(){this.St=0,this.Dt=TD(),this.Ct=DO.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=_M(),t=_M(),n=_M();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kx()}}),new vD(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=TD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class CD{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=hM(),this.zt=ED(),this.Wt=new TO(cA)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Kx()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(BP(s))if(0===r){const e=new yA(s.path);this.Yt(n,e,dP.newNoDocument(e,dA.min()))}else Gx(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);0!==r&&(this.ee(n),this.Wt=this.Wt.insert(n,2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=uD.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,c;const u={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==l?void 0:l.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=VO(i).toUint8Array()}catch(e){if(e instanceof MO)return $x("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new gD(a,s,o)}catch(e){return $x(e instanceof mD?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&BP(i.target)){const t=new yA(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,dP.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=_M();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new yD(e,t,this.Wt,this.jt,n);return this.jt=hM(),this.zt=ED(),this.Wt=new TO(cA),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ID,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xO(cA),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||zx("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ID),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ED(){return new TO(yA.comparator)}function TD(){return new TO(yA.comparator)}const SD={asc:"ASCENDING",desc:"DESCENDING"},kD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xD={and:"AND",or:"OR"};class AD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function OD(e,t){return e.useProto3Json||$A(t)?t:{value:t}}function PD(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function MD(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function DD(e,t){return PD(e,t.toTimestamp())}function ND(e){return Gx(!!e),dA.fromTimestamp(function(e){const t=RO(e);return new hA(t.seconds,t.nanos)}(e))}function RD(e,t){return function(e){return new pA(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function LD(e){const t=pA.fromString(e);return Gx(iN(t)),t}function VD(e,t){return RD(e.databaseId,t.path)}function FD(e,t){const n=LD(t);if(n.get(1)!==e.databaseId.projectId)throw new Yx(Qx.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yx(Qx.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new yA(zD(n))}function jD(e,t){return RD(e.databaseId,t)}function UD(e){const t=LD(e);return 4===t.length?pA.emptyPath():zD(t)}function BD(e){return new pA(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zD(e){return Gx(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qD(e,t,n){return{name:VD(e,t),fields:n.value.mapValue.fields}}function $D(e,t,n){const r=FD(e,t.name),i=ND(t.updateTime),s=t.createTime?ND(t.createTime):dA.min(),o=new lP({mapValue:{fields:t.fields}}),a=dP.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function HD(e,t){let n;if(t instanceof WM)n={update:qD(e,t.key,t.value)};else if(t instanceof ZM)n={delete:VD(e,t.key)};else if(t instanceof QM)n={update:qD(e,t.key,t.data),updateMask:rN(t.fieldMask)};else{if(!(t instanceof eD))return Kx();n={verify:VD(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof OM)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof PM)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof DM)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof RM)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Kx()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:DD(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kx()}(e,t.precondition)),n}function KD(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?UM.updateTime(ND(e.updateTime)):void 0!==e.exists?UM.exists(e.exists):UM.none()}(t.currentDocument):UM.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(Gx("REQUEST_TIME"===t.setToServerValue),n=new OM):"appendMissingElements"in t?n=new PM(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new DM(t.removeAllFromArray.values||[]):"increment"in t?n=new RM(e,t.increment):Kx();const r=mA.fromServerFormat(t.fieldPath);return new FM(r,n)}(e,t)):[];if(t.update){const i=FD(e,t.update.name),s=new lP({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new PO((e.fieldPaths||[]).map(e=>mA.fromServerFormat(e)))}(t.updateMask);return new QM(i,s,e,n,r)}return new WM(i,s,n,r)}if(t.delete){const r=FD(e,t.delete);return new ZM(r,n)}if(t.verify){const r=FD(e,t.verify);return new eD(r,n)}return Kx()}function GD(e,t){return{documents:[jD(e,t.path)]}}function WD(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=jD(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=jD(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return nN(_P.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:eN(e.field),direction:JD(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=OD(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function QD(e){let t=UD(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Gx(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=YD(e);return t instanceof _P&&CP(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new mP(tN(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,$A(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){return new fP(e.values||[],!!e.before)}(n.startAt));let u=null;return n.endAt&&(u=function(e){return new fP(e.values||[],!e.before)}(n.endAt)),KP(t,i,o,s,a,"F",c,u)}function YD(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=tN(e.unaryFilter.field);return wP.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=tN(e.unaryFilter.field);return wP.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=tN(e.unaryFilter.field);return wP.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=tN(e.unaryFilter.field);return wP.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Kx()}}(e):void 0!==e.fieldFilter?function(e){return wP.create(tN(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kx()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _P.create(e.compositeFilter.filters.map(e=>YD(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Kx()}}(e.compositeFilter.op))}(e):Kx()}function JD(e){return SD[e]}function XD(e){return kD[e]}function ZD(e){return xD[e]}function eN(e){return{fieldPath:e.canonicalString()}}function tN(e){return mA.fromServerFormat(e.fieldPath)}function nN(e){return e instanceof wP?function(e){if("=="===e.op){if(nP(e.value))return{unaryFilter:{field:eN(e.field),op:"IS_NAN"}};if(tP(e.value))return{unaryFilter:{field:eN(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nP(e.value))return{unaryFilter:{field:eN(e.field),op:"IS_NOT_NAN"}};if(tP(e.value))return{unaryFilter:{field:eN(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eN(e.field),op:XD(e.op),value:e.value}}}(e):e instanceof _P?function(e){const t=e.getFilters().map(e=>nN(e));return 1===t.length?t[0]:{compositeFilter:{op:ZD(e.op),filters:t}}}(e):Kx()}function rN(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function iN(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class sN{constructor(e,t,n,r,i=dA.min(),s=dA.min(),o=DO.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new sN(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sN(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sN(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sN(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oN{constructor(e){this.fe=e}}function aN(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cN(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:VD(e,t.key),fields:t.data.value.mapValue.fields,updateTime:PD(e,t.version.toTimestamp()),createTime:PD(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:uN(t.version)};else{if(!t.isUnknownDocument())return Kx();r.unknownDocument={path:n.path.toArray(),version:uN(t.version)}}return r}function cN(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function uN(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function lN(e){const t=new hA(e.seconds,e.nanoseconds);return dA.fromTimestamp(t)}function hN(e,t){const n=(t.baseMutations||[]).map(t=>KD(e.fe,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>KD(e.fe,t)),i=hA.fromMillis(t.localWriteTimeMs);return new tD(t.batchId,i,n,r)}function dN(e){const t=lN(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?lN(e.lastLimboFreeSnapshotVersion):dA.min();let r;var i;return void 0!==e.query.documents?(Gx(1===(i=e.query).documents.length),r=ZP(GP(UD(i.documents[0])))):r=function(e){return ZP(QD(e))}(e.query),new sN(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,DO.fromBase64String(e.resumeToken))}function fN(e,t){const n=uN(t.snapshotVersion),r=uN(t.lastLimboFreeSnapshotVersion);let i;i=BP(t.target)?GD(e.fe,t.target):WD(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jP(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pN(e){const t=QD({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?tM(t,t.limit,"L"):t}function gN(e,t){return new rD(t.largestBatchId,KD(e.fe,t.overlayMutation))}function mN(e,t){const n=t.path.lastSegment();return[e,GA(t.path.popLast()),n]}function yN(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:uN(r.readTime),documentKey:GA(r.documentKey.path),largestBatchId:r.largestBatchId}}class vN{getBundleMetadata(e,t){return wN(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:lN(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return wN(e).put({bundleId:(n=t).id,createTime:uN(ND(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return _N(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:pN(t.bundledQuery),readTime:lN(t.readTime)};var t})}saveNamedQuery(e,t){return _N(e).put(function(e){return{name:e.name,readTime:uN(ND(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function wN(e){return bO(e,"bundles")}function _N(e){return bO(e,"namedQueries")}class bN{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new bN(e,t.uid||"")}getOverlay(e,t){return IN(e).get(mN(this.userId,t)).next(e=>e?gN(this.serializer,e):null)}getOverlays(e,t){const n=gM();return PA.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new rD(t,i);r.push(this.we(e,s))}),PA.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(GA(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(IN(e).J("collectionPathOverlayIndex",r))}),PA.waitFor(i)}getOverlaysForCollection(e,t,n){const r=gM(),i=GA(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return IN(e).j("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=gN(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=gM();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return IN(e).X({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=gN(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}we(e,t){return IN(e).put(function(e,t,n){const[r,i,s]=mN(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:HD(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function IN(e){return bO(e,"documentOverlays")}let CN=(()=>{class e{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(LO(e.integerValue));else if("doubleValue"in e){const n=LO(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),HA(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(VO(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?sP(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Kx()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),yA.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}return e.Ve=new e,e})();function EN(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function TN(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=EN(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class SN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=TN(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=TN(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class kN{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class xN{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class AN{constructor(){this.je=new SN,this.ze=new kN(this.je),this.We=new xN(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ON{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ON(this.indexId,this.documentKey,this.arrayValue,n)}}function PN(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=MN(e.arrayValue,t.arrayValue),0!==n?n:(n=MN(e.directionalValue,t.directionalValue),0!==n?n:yA.comparator(e.documentKey,t.documentKey)))}function MN(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class DN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){Gx(e.collectionGroup===this.collectionId);const t=wA(e);if(void 0!==t&&!this.en(t))return!1;const n=_A(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function NN(e){var t,n;if(Gx(e instanceof wP||e instanceof _P),e instanceof wP){if(e instanceof NP){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>wP.create(e.field,"==",t)))||[];return _P.create(r,"or")}return e}const r=e.filters.map(e=>NN(e));return _P.create(r,e.op)}function RN(e){if(0===e.getFilters().length)return[];const t=jN(NN(e));return Gx(FN(t)),LN(t)||VN(t)?[t]:t.getFilters()}function LN(e){return e instanceof wP}function VN(e){return e instanceof _P&&CP(e)}function FN(e){return LN(e)||VN(e)||function(e){if(e instanceof _P&&IP(e)){for(const t of e.getFilters())if(!LN(t)&&!VN(t))return!1;return!0}return!1}(e)}function jN(e){if(Gx(e instanceof wP||e instanceof _P),e instanceof wP)return e;if(1===e.filters.length)return jN(e.filters[0]);const t=e.filters.map(e=>jN(e));let n=_P.create(t,e.op);return n=zN(n),FN(n)?n:(Gx(n instanceof _P),Gx(bP(n)),Gx(n.filters.length>1),n.filters.reduce((e,t)=>UN(e,t)))}function UN(e,t){let n;return Gx(e instanceof wP||e instanceof _P),Gx(t instanceof wP||t instanceof _P),n=e instanceof wP?t instanceof wP?function(e,t){return _P.create([e,t],"and")}(e,t):BN(e,t):t instanceof wP?BN(t,e):function(e,t){if(Gx(e.filters.length>0&&t.filters.length>0),bP(e)&&bP(t))return kP(e,t.getFilters());const n=IP(e)?e:t,r=IP(e)?t:e,i=n.filters.map(e=>UN(e,r));return _P.create(i,"or")}(e,t),zN(n)}function BN(e,t){if(bP(t))return kP(t,e.getFilters());{const n=t.filters.map(t=>UN(e,t));return _P.create(n,"or")}}function zN(e){if(Gx(e instanceof wP||e instanceof _P),e instanceof wP)return e;const t=e.getFilters();if(1===t.length)return zN(t[0]);if(EP(e))return e;const n=t.map(e=>zN(e)),r=[];return n.forEach(t=>{t instanceof wP?r.push(t):t instanceof _P&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:_P.create(r,e.op)}class qN{constructor(){this.rn=new $N}addToCollectionParentIndex(e,t){return this.rn.add(t),PA.resolve()}getCollectionParents(e,t){return PA.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return PA.resolve()}deleteFieldIndex(e,t){return PA.resolve()}getDocumentsMatchingTarget(e,t){return PA.resolve(null)}getIndexType(e,t){return PA.resolve(0)}getFieldIndexes(e,t){return PA.resolve([])}getNextCollectionGroupToUpdate(e){return PA.resolve(null)}getMinOffset(e,t){return PA.resolve(TA.min())}getMinOffsetFromCollectionGroup(e,t){return PA.resolve(TA.min())}updateCollectionGroup(e,t,n){return PA.resolve()}updateIndexEntries(e,t){return PA.resolve()}}class $N{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xO(pA.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xO(pA.comparator)).toArray()}}const HN=new Uint8Array(0);class KN{constructor(e,t){this.user=e,this.databaseId=t,this.on=new $N,this.un=new uM(e=>jP(e),(e,t)=>UP(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const i={collectionId:n,parent:GA(r)};return GN(e).put(i)}return PA.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[lA(t),""],!1,!0);return GN(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(YA(r.parent))}return n})}addFieldIndex(e,t){const n=QN(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=YN(e);return i.next(e=>{n.put(yN(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=QN(e),r=YN(e),i=WN(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=WN(e);let r=!0;const i=new Map;return PA.forEach(this.cn(t),t=>this.an(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=_M();const r=[];return PA.forEach(i,(i,s)=>{var o;zx("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${jP(t)}`);const a=function(e,t){const n=wA(t);if(void 0===n)return null;for(const r of zP(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of _A(t))for(const t of zP(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of _A(t)){const t=0===i.kind?qP(e,i.fieldPath,e.startAt):$P(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new fP(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of _A(t)){const t=0===i.kind?$P(e,i.fieldPath,e.endAt):qP(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new fP(n,r)}(s,i),h=this.hn(i,s,u),d=this.hn(i,s,l),f=this.ln(i,s,c),p=this.fn(i.indexId,a,h,u.inclusive,d,l.inclusive,f);return PA.forEach(p,i=>n.H(i,t.limit).next(t=>{t.forEach(t=>{const n=yA.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return PA.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:RN(_P.create(e.filters,"and")).map(t=>FP(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.dn(t[l/c]):HN,h=this.wn(e,a,n[l%c],r),d=this._n(e,a,i[l%c],s),f=o.map(t=>this.wn(e,a,t,!0));u.push(...this.createRange(h,d,f))}return u}wn(e,t,n,r){const i=new ON(e,yA.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new ON(e,yA.empty(),t,n);return r?i.Je():i}an(e,t){const n=new DN(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.cn(t);return PA.forEach(r,t=>this.an(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new xO(mA.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}mn(e,t){const n=new AN;for(const r of _A(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);CN.Ve._e(e,i)}return n.Qe()}dn(e){const t=new AN;return CN.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new AN;return CN.Ve._e(XO(this.databaseId,t),n.He(function(e){const t=_A(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new AN);let i=0;for(const s of _A(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&eP(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);CN.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new AN;n.seed(e.Qe()),CN.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find(e=>e instanceof wP&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=QN(e),r=YN(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return PA.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new IA(t.sequenceNumber,new TA(lN(t.readTime),new yA(YA(t.documentKey)),t.largestBatchId)):IA.empty(),r=e.fields.map(([e,t])=>new bA(mA.fromServerFormat(e),t));return new vA(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:cA(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=QN(e),i=YN(e);return this.Tn(e).next(e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>PA.forEach(t,t=>i.put(yN(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return PA.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?PA.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),PA.forEach(i,n=>this.En(e,t,n).next(t=>{const i=this.An(r,n);return t.isEqual(i)?PA.resolve():this.vn(e,r,n,t,i)}))))})}Rn(e,t,n,r){return WN(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return WN(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=WN(e);let i=new xO(PN);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(e,r)=>{i=i.add(new ON(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}An(e,t){let n=new xO(PN);const r=this.mn(t,e);if(null==r)return n;const i=wA(t);if(null!=i){const s=e.data.field(i.fieldPath);if(eP(s))for(const i of s.arrayValue.values||[])n=n.add(new ON(t.indexId,e.key,this.dn(i),r))}else n=n.add(new ON(t.indexId,e.key,HN,r));return n}vn(e,t,n,r,i){zx("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=OO(s),c=OO(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=OO(o)):t?(i(a),a=OO(s)):(a=OO(s),c=OO(o))}}(r,i,PN,r=>{s.push(this.Rn(e,t,n,r))},r=>{s.push(this.Pn(e,t,n,r))}),PA.waitFor(s)}Tn(e){let t=1;return YN(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>PN(e,t)).filter((e,t,n)=>!t||0!==PN(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=PN(s,e),i=PN(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,HN,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,HN,[]]))}return i}bn(e,t){return PN(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(JN)}getMinOffset(e,t){return PA.mapArray(this.cn(t),t=>this.an(e,t).next(e=>e||Kx())).next(JN)}}function GN(e){return bO(e,"collectionParents")}function WN(e){return bO(e,"indexEntries")}function QN(e){return bO(e,"indexConfiguration")}function YN(e){return bO(e,"indexState")}function JN(e){Gx(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;SA(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new TA(t.readTime,t.documentKey,n)}const XN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ZN{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ZN(e,ZN.DEFAULT_COLLECTION_PERCENTILE,ZN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eR(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{Gx(1===a)}));const u=[];for(const l of n.mutations){const e=ZA(t,l.key.path,n.batchId);s.push(i.delete(e)),u.push(l.key)}return PA.waitFor(s).next(()=>u)}function tR(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Kx();t=e.noDocument}return JSON.stringify(t).length}ZN.DEFAULT_COLLECTION_PERCENTILE=10,ZN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ZN.DEFAULT=new ZN(41943040,ZN.DEFAULT_COLLECTION_PERCENTILE,ZN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ZN.DISABLED=new ZN(-1,0,0);class nR{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){Gx(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new nR(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iR(e).X({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=sR(e),s=iR(e);return s.add({}).next(o=>{Gx("number"==typeof o);const a=new tD(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>HD(e.fe,t)),i=n.mutations.map(t=>HD(e.fe,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new xO((e,t)=>cA(e.canonicalString(),t.canonicalString()));for(const e of r){const t=ZA(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,eO))}return l.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Vn[o]=a.keys()}),PA.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return iR(e).get(t).next(e=>e?(Gx(e.userId===this.userId),hN(this.serializer,e)):null)}Sn(e,t){return this.Vn[t]?PA.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return iR(e).X({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(Gx(t.batchId>=n),i=hN(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return iR(e).X({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iR(e).j("userMutationsIndex",t).next(e=>e.map(e=>hN(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=XA(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return sR(e).X({range:r},(n,r,s)=>{const[o,a,c]=n,u=YA(a);if(o===this.userId&&t.path.isEqual(u))return iR(e).get(c).next(e=>{if(!e)throw Kx();Gx(e.userId===this.userId),i.push(hN(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xO(cA);const r=[];return t.forEach(t=>{const i=XA(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=sR(e).X({range:s},(e,r,i)=>{const[s,o,a]=e,c=YA(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),PA.waitFor(r).next(()=>this.Dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=XA(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new xO(cA);return sR(e).X({range:s},(e,t,i)=>{const[s,a,c]=e,u=YA(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.Dn(e,o))}Dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(iR(e).get(t).next(e=>{if(null===e)throw Kx();Gx(e.userId===this.userId),n.push(hN(this.serializer,e))}))}),PA.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return eR(e.ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),PA.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return PA.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return sR(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=YA(e[1]);r.push(t)}else n.done()}).next(()=>{Gx(0===r.length)})})}containsKey(e,t){return rR(e,this.userId,t)}xn(e){return oR(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rR(e,t,n){const r=XA(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return sR(e).X({range:s,Y:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function iR(e){return bO(e,"mutations")}function sR(e){return bO(e,"documentMutations")}function oR(e){return bO(e,"mutationQueues")}class aR{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new aR(0)}static Mn(){return new aR(-1)}}class cR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const n=new aR(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(e=>dA.fromTimestamp(new hA(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>uR(e).delete(t.targetId)).next(()=>this.$n(e)).next(t=>(Gx(t.targetCount>0),t.targetCount-=1,this.On(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return uR(e).X((s,o)=>{const a=dN(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>PA.waitFor(i)).next(()=>r)}forEachTarget(e,t){return uR(e).X((e,n)=>{const r=dN(n);t(r)})}$n(e){return lR(e).get("targetGlobalKey").next(e=>(Gx(null!==e),e))}On(e,t){return lR(e).put("targetGlobalKey",t)}Fn(e,t){return uR(e).put(fN(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next(e=>e.targetCount)}getTargetData(e,t){const n=jP(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return uR(e).X({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=dN(n);UP(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=hR(e);return t.forEach(t=>{const s=GA(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),PA.waitFor(r)}removeMatchingKeys(e,t,n){const r=hR(e);return PA.forEach(t,t=>{const i=GA(t.path);return PA.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=hR(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=hR(e);let i=_M();return r.X({range:n,Y:!0},(e,t,n)=>{const r=YA(e[1]),s=new yA(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=GA(t.path),r=IDBKeyRange.bound([n],[lA(n)],!1,!0);let i=0;return hR(e).X({index:"documentTargetsIndex",Y:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}le(e,t){return uR(e).get(t).next(e=>e?dN(e):null)}}function uR(e){return bO(e,"targets")}function lR(e){return bO(e,"targetGlobal")}function hR(e){return bO(e,"targetDocuments")}function dR([e,t],[n,r]){const i=cA(e,n);return 0===i?cA(t,r):i}class fR{constructor(e){this.Ln=e,this.buffer=new xO(dR),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();dR(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pR{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;zx("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Hh(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(e){LA(e)?zx("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield AA(e)}yield t.Qn(3e5)}))}}class gR{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return PA.resolve(qA.ct);const n=new fR(t);return this.jn.forEachTarget(e,e=>n.Kn(e.sequenceNumber)).next(()=>this.jn.Wn(e,e=>n.Kn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(zx("LruGarbageCollector","Garbage collection skipped; disabled"),PA.resolve(XN)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(zx("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XN):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(zx("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),Bx()<=kd.DEBUG&&zx("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-u}ms`),PA.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class mR{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new gR(e,t)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Jn(e){let t=0;return this.Wn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(e,n)=>t(n))}addReference(e,t,n){return yR(e,n)}removeReference(e,t,n){return yR(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return yR(e,t)}Xn(e,t){return function(e,t){let n=!1;return oR(e).Z(r=>rR(e,r,t).next(e=>(e&&(n=!0),PA.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,(s,o)=>{if(o<=t){const t=this.Xn(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,dA.min()),hR(e).delete([0,GA(s.path)])))});r.push(t)}}).next(()=>PA.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return yR(e,t)}Yn(e,t){const n=hR(e);let r,i=qA.ct;return n.X({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==qA.ct&&t(new yA(YA(r)),i),i=o,r=s):i=qA.ct}).next(()=>{i!==qA.ct&&t(new yA(YA(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yR(e,t){return hR(e).put(function(e,t){return{targetId:0,path:GA(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class vR{constructor(){this.changes=new uM(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dP.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?PA.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return CR(e).put(n)}removeEntry(e,t,n){return CR(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],cN(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Zn(e,n)))}getEntry(e,t){let n=dP.newInvalidDocument(t);return CR(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ER(t))},(e,r)=>{n=this.ts(t,r)}).next(()=>n)}es(e,t){let n={size:0,document:dP.newInvalidDocument(t)};return CR(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ER(t))},(e,r)=>{n={document:this.ts(t,r),size:tR(r)}}).next(()=>n)}getEntries(e,t){let n=hM();return this.ns(e,t,(e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)}).next(()=>n)}ss(e,t){let n=hM(),r=new TO(yA.comparator);return this.ns(e,t,(e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,tR(t))}).next(()=>({documents:n,rs:r}))}ns(e,t,n){if(t.isEmpty())return PA.resolve();let r=new xO(SR);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(ER(r.first()),ER(r.last())),s=r.getIterator();let o=s.getNext();return CR(e).X({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=yA.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&SR(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(ER(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),cN(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return CR(e).j(IDBKeyRange.bound(s,o,!0)).next(e=>{let n=hM();for(const i of e){const e=this.ts(yA.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(sM(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=hM();const s=TR(t,n),o=TR(t,TA.max());return CR(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.ts(yA.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new bR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return IR(e).get("remoteDocumentGlobalKey").next(e=>(Gx(!!e),e))}Zn(e,t){return IR(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=$D(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=yA.fromSegments(t.noDocument.path),r=lN(t.noDocument.readTime);n=dP.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Kx();{const e=yA.fromSegments(t.unknownDocument.path),r=lN(t.unknownDocument.version);n=dP.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new hA(e[0],e[1]);return dA.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(dA.min()))return e}return dP.newInvalidDocument(e)}}function _R(e){return new wR(e)}class bR extends vR{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new uM(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new xO((e,t)=>cA(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=aN(this.os.serializer,s);r=r.add(i.path.popLast());const c=tR(a);n+=c-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=aN(this.os.serializer,s.convertToNoDocument(dA.min()));t.push(this.os.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.os.updateMetadata(e,n)),PA.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:e,rs:t})=>(t.forEach((t,n)=>{this.us.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function IR(e){return bO(e,"remoteDocumentGlobal")}function CR(e){return bO(e,"remoteDocumentsV14")}function ER(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function TR(e,t){const n=t.documentKey.path.toArray();return[e,cN(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SR(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=cA(n[s],r[s]),i)return i;return i=cA(n.length,r.length),i||(i=cA(n[n.length-2],r[r.length-2]),i||cA(n[n.length-1],r[r.length-1]))}class kR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xR{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&HM(n.mutation,e,PO.empty(),hA.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,_M()).next(()=>t))}getLocalViewOfDocuments(e,t,n=_M()){const r=gM();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=fM();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=gM();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,_M()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=hM();const s=yM(),o=yM();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof QM)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),HM(o.mutation,t,o.mutation.getFieldMask(),hA.now())):s.set(t.key,PO.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new kR(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=yM();let r=new TO((e,t)=>e-t),i=_M();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||PO.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||_M()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=mM();c.forEach(e=>{if(!i.has(e)){const r=qM(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return PA.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return yA.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):PA.resolve(gM());let o=-1,a=i;return s.next(t=>PA.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?PA.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,_M())).next(e=>({batchId:o,changes:pM(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yA(t)).next(e=>{let t=fM();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=fM();return this.indexManager.getCollectionParents(e,r).next(s=>PA.forEach(s,s=>{const o=function(e,t){return new HP(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,dP.newInvalidDocument(r)))});let n=fM();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&HM(s.mutation,i,PO.empty(),hA.now()),sM(t,i)&&(n=n.insert(e,i))}),n})}}class AR{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return PA.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:ND(n.createTime)}),PA.resolve()}getNamedQuery(e,t){return PA.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:pN(e.bundledQuery),readTime:ND(e.readTime)}}(t)),PA.resolve()}}class OR{constructor(){this.overlays=new TO(yA.comparator),this.ls=new Map}getOverlay(e,t){return PA.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gM();return PA.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),PA.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),PA.resolve()}getOverlaysForCollection(e,t,n){const r=gM(),i=t.length+1,s=new yA(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return PA.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new TO((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=gM(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=gM(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return PA.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rD(t,n));let i=this.ls.get(t);void 0===i&&(i=_M(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class PR{constructor(){this.fs=new xO(MR.ds),this.ws=new xO(MR._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new MR(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new MR(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new yA(new pA([])),n=new MR(t,e),r=new MR(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new yA(new pA([])),n=new MR(t,e),r=new MR(t,e+1);let i=_M();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new MR(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class MR{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return yA.comparator(e.key,t.key)||cA(e.As,t.As)}static _s(e,t){return cA(e.As,t.As)||yA.comparator(e.key,t.key)}}class DR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xO(MR.ds)}checkEmpty(e){return PA.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++;const s=new tD(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new MR(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return PA.resolve(s)}lookupMutationBatch(e,t){return PA.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.bs(t+1),r=n<0?0:n;return PA.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return PA.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return PA.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new MR(t,0),r=new MR(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),PA.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xO(cA);return t.forEach(e=>{const t=new MR(e,0),r=new MR(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),PA.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;yA.isDocumentKey(i)||(i=i.child(""));const s=new MR(new yA(i),0);let o=new xO(cA);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},s),PA.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Gx(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return PA.forEach(t.mutations,r=>{const i=new MR(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new MR(t,0),r=this.Rs.firstAfterOrEqual(n);return PA.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return PA.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NR{constructor(e){this.Ds=e,this.docs=new TO(yA.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return PA.resolve(n?n.document.mutableCopy():dP.newInvalidDocument(t))}getEntries(e,t){let n=hM();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():dP.newInvalidDocument(e))}),PA.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hM();const s=t.path,o=new yA(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||SA(EA(o),n)<=0||(r.has(o.key)||sM(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return PA.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Kx()}Cs(e,t){return PA.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new RR(this)}getSize(e){return PA.resolve(this.size)}}class RR extends vR{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),PA.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class LR{constructor(e){this.persistence=e,this.xs=new uM(e=>jP(e),UP),this.lastRemoteSnapshotVersion=dA.min(),this.highestTargetId=0,this.Ns=0,this.ks=new PR,this.targetCount=0,this.Ms=aR.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),PA.resolve()}getLastRemoteSnapshotVersion(e){return PA.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PA.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),PA.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),PA.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new aR(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,PA.resolve()}updateTargetData(e,t){return this.Fn(t),PA.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,PA.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),PA.waitFor(i).next(()=>r)}getTargetCount(e){return PA.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return PA.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),PA.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),PA.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),PA.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return PA.resolve(n)}containsKey(e,t){return PA.resolve(this.ks.containsKey(t))}}class VR{constructor(e,t){this.$s={},this.overlays={},this.Os=new qA(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new LR(this),this.indexManager=new qN,this.remoteDocumentCache=function(e){return new NR(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new oN(t),this.qs=new AR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new DR(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){zx("MemoryPersistence","Starting transaction:",e);const r=new FR(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return PA.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class FR extends xA{constructor(e){super(),this.currentSequenceNumber=e}}class jR{constructor(e){this.persistence=e,this.Qs=new PR,this.js=null}static zs(e){return new jR(e)}get Ws(){if(this.js)return this.js;throw Kx()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),PA.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),PA.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),PA.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PA.forEach(this.Ws,n=>{const r=yA.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,dA.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return PA.or([()=>PA.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class UR{constructor(e){this.serializer=e}O(e,t,n,r){const i=new MA("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JA,{unique:!0}),e.createObjectStore("documentMutations")}(e),BR(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=PA.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),BR(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dA.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").j().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JA,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return PA.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ys(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i)))),n<7&&r>=7&&(s=s.next(()=>this.Zs(i))),n<8&&r>=8&&(s=s.next(()=>this.ti(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.ei(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:dO});t.createIndex("collectionPathOverlayIndex",fO,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",pO,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:tO});t.createIndex("documentKeyIndex",nO),t.createIndex("collectionGroupIndex",rO)}(e)).next(()=>this.ni(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.si(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:cO}).createIndex("sequenceNumberIndex",uO,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:lO}).createIndex("documentKeyIndex",hO,{unique:!1})}(e))),s}Xs(e){let t=0;return e.store("remoteDocuments").X((e,n)=>{t+=tR(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next(t=>PA.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next(n=>PA.forEach(n,n=>{Gx(n.userId===t.userId);const r=hN(this.serializer,n);return eR(e,t.userId,r).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.X((n,i)=>{const s=new pA(n),o=function(e){return[0,GA(e)]}(s);r.push(t.get(o).next(n=>n?PA.resolve():(n=>t.put({targetId:0,path:GA(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>PA.waitFor(r))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:aO});const n=t.store("collectionParents"),r=new $N,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:GA(r)})}};return t.store("remoteDocuments").X({Y:!0},(e,t)=>{const n=new pA(e);return i(n.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([e,t,n],r)=>{const s=YA(t);return i(s.popLast())}))}ei(e){const t=e.store("targets");return t.X((e,n)=>{const r=dN(n),i=fN(this.serializer,r);return t.put(i)})}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new yA(pA.fromString(o.document.name).popFirst(5)):o.noDocument?yA.fromSegments(o.noDocument.path):o.unknownDocument?yA.fromSegments(o.unknownDocument.path):Kx()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>PA.waitFor(r))}si(e,t){const n=t.store("mutations"),r=_R(this.serializer),i=new VR(jR.zs,this.serializer.fe);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:_M();hN(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),PA.forEach(n,(e,n)=>{const s=new Fx(n),o=bN.de(this.serializer,s),a=i.getIndexManager(s),c=nR.de(s,this.serializer,a,i.referenceDelegate);return new xR(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new _O(t,qA.ct),e).next()})})}}function BR(e){e.createObjectStore("targetDocuments",{keyPath:sO}).createIndex("documentTargetsIndex",oO,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iO,{unique:!0}),e.createObjectStore("targetGlobal")}const zR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qR{constructor(e,t,n,r,i,s,o,a,c,u,l=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=c,this.oi=u,this.ui=l,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!qR.D())throw new Yx(Qx.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mR(this,r),this.di=t+"main",this.serializer=new oN(a),this.wi=new DA(this.di,this.ui,new UR(this.serializer)),this.Bs=new cR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_R(this.serializer),this.qs=new vN,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===u&&qx("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Yx(Qx.FAILED_PRECONDITION,zR);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new qA(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var n=Hh(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=Hh(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Hh(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>HR(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(LA(e))return zx("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return zx("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return $R(e).get("owner").next(e=>PA.resolve(this.Ri(e)))}Pi(e){return HR(e).delete(this.clientId)}bi(){var e=this;return Hh(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=bO(t,"clientMetadata");return n.j().next(t=>{const r=e.Si(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return PA.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e._i)for(const n of t)e._i.removeItem(e.Di(n.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?PA.resolve(!0):$R(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Yx(Qx.FAILED_PRECONDITION,zR);return!1}}return!(!this.networkEnabled||!this.inForeground)||HR(e).j().next(e=>void 0===this.Si(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&zx("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return Hh(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new _O(t,qA.ct);return e.Ai(n).next(()=>e.Pi(n))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>HR(e).j().next(e=>this.Si(e,18e5).map(e=>e.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return nR.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KN(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return bN.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){zx("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?wO:14===s?vO:13===s?yO:12===s?mO:11===s?gO:void Kx();var s;let o;return this.wi.runTransaction(e,r,i,r=>(o=new _O(r,this.Os?this.Os.next():qA.ct),"readwrite-primary"===t?this.Ti(o).next(e=>!!e||this.Ei(o)).next(t=>{if(!t)throw qx(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Yx(Qx.FAILED_PRECONDITION,kA);return n(o)}).next(e=>this.vi(o).next(()=>e)):this.Oi(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Oi(e){return $R(e).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Yx(Qx.FAILED_PRECONDITION,zR)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $R(e).put("owner",t)}static D(){return DA.D()}Ai(e){const t=$R(e);return t.get("owner").next(e=>this.Ri(e)?(zx("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):PA.resolve())}Vi(e,t){const n=Date.now();return!(e<n-t||e>n&&(qx(`Detected an update time that is in the future: ${e} > ${n}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!function(){var e;const t=null===(e=Xh())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return zx("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return qx("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){qx("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $R(e){return bO(e,"owner")}function HR(e){return bO(e,"clientMetadata")}function KR(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class GR{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=_M(),r=_M();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new GR(e,t.fromCache,n,r)}}class WR{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(WP(t))return PA.resolve(null);let n=ZP(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=tM(t,null,"F"),n=ZP(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=_M(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,tM(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return WP(t)||r.isEqual(dA.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Bx()<=kd.DEBUG&&zx("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iM(t)),this.Wi(e,s,t,CA(r,-1)))})}ji(e,t){let n=new xO(aM(e));return t.forEach((t,r)=>{sM(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Bx()<=kd.DEBUG&&zx("QueryEngine","Using full collection scan to execute query:",iM(t)),this.Ui.getDocumentsMatchingQuery(e,t,TA.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class QR{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new TO(cA),this.Yi=new uM(e=>jP(e),UP),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xR(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function YR(e,t,n,r){return new QR(e,t,n,r)}function JR(e,t){return XR.apply(this,arguments)}function XR(){return(XR=Hh(function*(e,t){const n=Wx(e);return yield n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=_M();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})})).apply(this,arguments)}function ZR(e,t){const n=Wx(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=PA.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Gx(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=_M();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}function eL(e){const t=Wx(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function tL(e,t){const n=Wx(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a)));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(DO.EMPTY_BYTE_STRING,dA.min()).withLastLimboFreeSnapshotVersion(dA.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Bs.updateTargetData(e,u))});let a=hM(),c=_M();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(nL(e,s,t.documentUpdates).next(e=>{a=e.nr,c=e.sr})),!r.isEqual(dA.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return PA.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.Ji=i,e))}function nL(e,t,n){let r=_M(),i=_M();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=hM();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(dA.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):zx("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{nr:r,sr:i}})}function rL(e,t){const n=Wx(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function iL(e,t){const n=Wx(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,PA.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new sN(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}function sL(e,t,n){return oL.apply(this,arguments)}function oL(){return(oL=Hh(function*(e,t,n){const r=Wx(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!LA(e))throw e;zx("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)})).apply(this,arguments)}function aL(e,t,n){const r=Wx(e);let i=dA.min(),s=_M();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Wx(e),i=r.Yi.get(n);return void 0!==i?PA.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,ZP(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:dA.min(),n?s:_M())).next(e=>(lL(r,oM(t),e),{documents:e,ir:s})))}function cL(e,t){const n=Wx(e),r=Wx(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.le(e,t).next(e=>e?e.target:null))}function uL(e,t){const n=Wx(e),r=n.Xi.get(t)||dA.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Zi.getAllFromCollectionGroup(e,t,CA(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(lL(n,t,e),e))}function lL(e,t,n){let r=e.Xi.get(t)||dA.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}function hL(){return(hL=Hh(function*(e,t,n,r){const i=Wx(e);let s=_M(),o=hM();for(const u of n){const e=t.rr(u.metadata.name);u.document&&(s=s.add(e));const n=t.ur(u);n.setReadTime(t.cr(u.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),c=yield iL(i,function(e){return ZP(GP(pA.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>nL(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.Bs.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.Bs.addMatchingKeys(e,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)).next(()=>t.nr)))})).apply(this,arguments)}function dL(e,t){return fL.apply(this,arguments)}function fL(){return(fL=Hh(function*(e,t,n=_M()){const r=yield iL(e,ZP(pN(t.bundledQuery))),i=Wx(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=ND(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(DO.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next(()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Bs.addMatchingKeys(e,n,r.targetId)).next(()=>i.qs.saveNamedQuery(e,t))})})).apply(this,arguments)}function pL(e,t){return`firestore_clients_${e}_${t}`}function gL(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function mL(e,t){return`firestore_targets_${e}_${t}`}class yL{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Yx(r.error.code,r.error.message))),s?new yL(e,t,r.state,i):(qx("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vL{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Yx(n.error.code,n.error.message))),i?new vL(e,n.state,r):(qx("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wL{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=IM();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=KA(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new wL(e,i):(qx("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _L{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _L(t.clientId,t.onlineState):(qx("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bL{constructor(){this.activeTargetIds=IM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IL{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new TO(cA),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=pL(this.persistenceKey,this.wr),this.Ir=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new bL),this.Tr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Rr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return Hh(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const t=e.getItem(pL(e.persistenceKey,r));if(t){const n=wL.ar(r,t);n&&(e.gr=e.gr.insert(n.clientId,n))}}e.Pr();const n=e.storage.getItem(e.vr);if(n){const t=e.br(n);t&&e.Vr(t)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(mL(this.persistenceKey,e));if(n){const r=vL.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mL(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Cr(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return zx("SharedClientState","READ",e,t),t}setItem(e,t){zx("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){zx("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const n=e;if(n.storageArea===this.storage){if(zx("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void qx("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Hh(function*(){if(t.started){if(null!==n.key)if(t.Tr.test(n.key)){if(null==n.newValue){const e=t.Or(n.key);return t.Fr(e,null)}{const e=t.Br(n.key,n.newValue);if(e)return t.Fr(e.clientId,e)}}else if(t.Er.test(n.key)){if(null!==n.newValue){const e=t.Lr(n.key,n.newValue);if(e)return t.qr(e)}}else if(t.Ar.test(n.key)){if(null!==n.newValue){const e=t.Ur(n.key,n.newValue);if(e)return t.Kr(e)}}else if(n.key===t.vr){if(null!==n.newValue){const e=t.br(n.newValue);if(e)return t.Vr(e)}}else if(n.key===t.Ir){const e=function(e){let t=qA.ct;if(null!=e)try{const n=JSON.parse(e);Gx("number"==typeof n),t=n}catch(e){qx("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==qA.ct&&t.sequenceNumberHandler(e)}else if(n.key===t.Rr){const e=t.Gr(n.newValue);yield Promise.all(e.map(e=>t.syncEngine.Qr(e)))}}else t.yr.push(n)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new yL(this.currentUser,e,t,n),i=gL(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=gL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,n){const r=mL(this.persistenceKey,e),i=new vL(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return wL.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]);return yL.ar(new Fx(void 0!==n[2]?n[2]:null),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return vL.ar(r,t)}br(e){return _L.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return Hh(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);zx("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Wr(s,o).then(()=>{this.gr=n})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=IM();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class CL{constructor(){this.Hr=new bL,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new bL,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EL{Yr(e){}shutdown(){}}class TL{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){zx("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){zx("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let SL=null;function kL(){return null===SL?SL=268435456+Math.round(2147483648*Math.random()):SL++,"0x"+SL.toString(16)}const xL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AL{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const OL="WebChannelConnection";class PL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=kL(),o=this.To(e,t);zx("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then(t=>(zx("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw $x("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+jx,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){return`${this.mo}/v1/${t}:${xL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=kL();return new Promise((s,o)=>{const a=new Nx;a.setWithCredentials(!0),a.listenOnce(Ax.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case xx.NO_ERROR:const t=a.getResponseJson();zx(OL,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case xx.TIMEOUT:zx(OL,`RPC '${e}' ${i} timed out`),o(new Yx(Qx.DEADLINE_EXCEEDED,"Request time out"));break;case xx.HTTP_ERROR:const n=a.getStatus();if(zx(OL,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Qx).indexOf(t)>=0?t:Qx.UNKNOWN}(t.status);o(new Yx(e,t.message))}else o(new Yx(Qx.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Yx(Qx.UNAVAILABLE,"Connection failed."));break;default:Kx()}}finally{zx(OL,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(r);zx(OL,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)})}Ro(e,t,n){const r=kL(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Sx(),o=kx(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Mx({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");zx(OL,`Creating RPC '${e}' stream ${r}: ${u}`,a);const l=s.createWebChannel(u,a);let h=!1,d=!1;const f=new AL({ro:t=>{d?zx(OL,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(zx(OL,`Opening RPC '${e}' stream ${r} transport.`),l.open(),h=!0),zx(OL,`RPC '${e}' stream ${r} sending:`,t),l.send(t))},oo:()=>l.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(l,Dx.EventType.OPEN,()=>{d||zx(OL,`RPC '${e}' stream ${r} transport opened.`)}),p(l,Dx.EventType.CLOSE,()=>{d||(d=!0,zx(OL,`RPC '${e}' stream ${r} transport closed`),f.wo())}),p(l,Dx.EventType.ERROR,t=>{d||(d=!0,$x(OL,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Yx(Qx.UNAVAILABLE,"The operation could not be completed")))}),p(l,Dx.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];Gx(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){zx(OL,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=sD[e];if(void 0!==t)return cD(t)}(t),i=o.message;void 0===n&&(n=Qx.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Yx(n,i)),l.close()}else zx(OL,`RPC '${e}' stream ${r} received:`,i),f._o(i)}}),p(o,Ox.STAT_EVENT,t=>{t.stat===Px.PROXY?zx(OL,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Px.NOPROXY&&zx(OL,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.fo()},0),f}}function ML(){return"undefined"!=typeof window?window:null}function DL(){return"undefined"!=typeof document?document:null}function NL(e){return new AD(e,!0)}class RL{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&zx("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class LL{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new RL(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return Hh(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return Hh(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var n=this;return Hh(function*(){n.Ho(),n.Jo(),n.qo.cancel(),n.Fo++,4!==e?n.qo.reset():t&&t.code===Qx.RESOURCE_EXHAUSTED?(qx(t.toString()),qx("Using maximum backoff delay to prevent overloading the backend."),n.qo.xo()):t&&t.code===Qx.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Yo(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Fo===t&&this.Zo(e,n)},t=>{e(()=>{const e=new Yx(Qx.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){var e=this;this.state=5,this.qo.No(Hh(function*(){e.state=0,e.start()}))}tu(e){return zx("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(zx("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VL extends LL{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kx()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Gx(void 0===t||"string"==typeof t),DO.fromBase64String(t||"")):(Gx(void 0===t||t instanceof Uint8Array),DO.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Qx.UNKNOWN:cD(e.code);return new Yx(t,e.message||"")}(o);n=new bD(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=FD(e,r.document.name),s=ND(r.document.updateTime),o=r.document.createTime?ND(r.document.createTime):dA.min(),a=new lP({mapValue:{fields:r.document.fields}}),c=dP.newFoundDocument(i,s,o,a);n=new wD(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in t){const r=t.documentDelete,i=FD(e,r.document),s=r.readTime?ND(r.readTime):dA.min(),o=dP.newNoDocument(i,s);n=new wD([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=FD(e,r.document);n=new wD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Kx();{const e=t.filter,{count:r=0,unchangedNames:i}=e,s=new iD(r,i);n=new _D(e.targetId,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return dA.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?dA.min():t.readTime?ND(t.readTime):dA.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=BD(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=BP(r)?{documents:GD(e,r)}:{query:WD(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=MD(e,t.resumeToken);const r=OD(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(dA.min())>0){n.readTime=PD(e,t.snapshotVersion.toTimestamp());const r=OD(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kx()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=BD(this.serializer),t.removeTarget=e,this.Wo(t)}}class FL extends LL{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Gx(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Gx(void 0!==t),e.map(e=>function(e,t){let n=ND(e.updateTime?e.updateTime:t);return n.isEqual(dA.min())&&(n=ND(t)),new jM(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ND(e.commitTime);return this.listener.cu(n,t)}return Gx(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=BD(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>HD(this.serializer,e))};this.Wo(t)}}class jL extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Yx(Qx.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Io(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qx.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yx(Qx.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.vo(e,t,n,i,s,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qx.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yx(Qx.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class UL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qx(t),this.mu=!1):zx("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class BL{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(Hh(function*(){var e;XL(s)&&(zx("RemoteStore","Restarting streams for network reachability change."),yield(e=Hh(function*(e){const t=Wx(e);t.vu.add(4),yield $L(t),t.bu.set("Unknown"),t.vu.delete(4),yield zL(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.bu=new UL(n,r)}}function zL(e){return qL.apply(this,arguments)}function qL(){return(qL=Hh(function*(e){if(XL(e))for(const t of e.Ru)yield t(!0)})).apply(this,arguments)}function $L(e){return HL.apply(this,arguments)}function HL(){return(HL=Hh(function*(e){for(const t of e.Ru)yield t(!1)})).apply(this,arguments)}function KL(e,t){const n=Wx(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),JL(n)?YL(n):kV(n).Ko()&&WL(n,t))}function GL(e,t){const n=Wx(e),r=kV(n);n.Au.delete(t),r.Ko()&&QL(n,t),0===n.Au.size&&(r.Ko()?r.jo():XL(n)&&n.bu.set("Unknown"))}function WL(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dA.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}kV(e).su(t)}function QL(e,t){e.Vu.qt(t),kV(e).iu(t)}function YL(e){e.Vu=new CD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),kV(e).start(),e.bu.gu()}function JL(e){return XL(e)&&!kV(e).Uo()&&e.Au.size>0}function XL(e){return 0===Wx(e).vu.size}function ZL(e){e.Vu=void 0}function eV(e){return tV.apply(this,arguments)}function tV(){return(tV=Hh(function*(e){e.Au.forEach((t,n)=>{WL(e,t)})})).apply(this,arguments)}function nV(e,t){return rV.apply(this,arguments)}function rV(){return(rV=Hh(function*(e,t){ZL(e),JL(e)?(e.bu.Iu(t),YL(e)):e.bu.set("Unknown")})).apply(this,arguments)}function iV(e,t,n){return sV.apply(this,arguments)}function sV(){return(sV=Hh(function*(e,t,n){if(e.bu.set("Online"),t instanceof bD&&2===t.state&&t.cause)try{yield(r=Hh(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){zx("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield oV(e,n)}else if(t instanceof wD?e.Vu.Ht(t):t instanceof _D?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(dA.min()))try{const t=yield eL(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(DO.EMPTY_BYTE_STRING,r.snapshotVersion)),QL(e,t);const i=new sN(r.target,t,n,r.sequenceNumber);WL(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){zx("RemoteStore","Failed to raise snapshot:",t),yield oV(e,t)}var r})).apply(this,arguments)}function oV(e,t,n){return aV.apply(this,arguments)}function aV(){return(aV=Hh(function*(e,t,n){if(!LA(t))throw t;e.vu.add(1),yield $L(e),e.bu.set("Offline"),n||(n=()=>eL(e.localStore)),e.asyncQueue.enqueueRetryable(Hh(function*(){zx("RemoteStore","Retrying IndexedDB access"),yield n(),e.vu.delete(1),yield zL(e)}))})).apply(this,arguments)}function cV(e,t){return t().catch(n=>oV(e,n,t))}function uV(e){return lV.apply(this,arguments)}function lV(){return(lV=Hh(function*(e){const t=Wx(e),n=xV(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;hV(t);)try{const e=yield rL(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,dV(t,e)}catch(e){yield oV(t,e)}fV(t)&&pV(t)})).apply(this,arguments)}function hV(e){return XL(e)&&e.Eu.length<10}function dV(e,t){e.Eu.push(t);const n=xV(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function fV(e){return XL(e)&&!xV(e).Uo()&&e.Eu.length>0}function pV(e){xV(e).start()}function gV(e){return mV.apply(this,arguments)}function mV(){return(mV=Hh(function*(e){xV(e).hu()})).apply(this,arguments)}function yV(e){return vV.apply(this,arguments)}function vV(){return(vV=Hh(function*(e){const t=xV(e);for(const n of e.Eu)t.uu(n.mutations)})).apply(this,arguments)}function wV(e,t,n){return _V.apply(this,arguments)}function _V(){return(_V=Hh(function*(e,t,n){const r=e.Eu.shift(),i=nD.from(r,t,n);yield cV(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield uV(e)})).apply(this,arguments)}function bV(e,t){return IV.apply(this,arguments)}function IV(){return(IV=Hh(function*(e,t){var n;t&&xV(e).ou&&(yield(n=Hh(function*(e,t){if(aD(n=t.code)&&n!==Qx.ABORTED){const n=e.Eu.shift();xV(e).Qo(),yield cV(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield uV(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),fV(e)&&pV(e)})).apply(this,arguments)}function CV(e,t){return EV.apply(this,arguments)}function EV(){return(EV=Hh(function*(e,t){const n=Wx(e);n.asyncQueue.verifyOperationInProgress(),zx("RemoteStore","RemoteStore received new credentials");const r=XL(n);n.vu.add(3),yield $L(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),yield zL(n)})).apply(this,arguments)}function TV(e,t){return SV.apply(this,arguments)}function SV(){return(SV=Hh(function*(e,t){const n=Wx(e);t?(n.vu.delete(2),yield zL(n)):t||(n.vu.add(2),yield $L(n),n.bu.set("Unknown"))})).apply(this,arguments)}function kV(e){return e.Su||(e.Su=function(e,t,n){const r=Wx(e);return r.fu(),new VL(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:eV.bind(null,e),ao:nV.bind(null,e),nu:iV.bind(null,e)}),e.Ru.push(function(){var t=Hh(function*(t){t?(e.Su.Qo(),JL(e)?YL(e):e.bu.set("Unknown")):(yield e.Su.stop(),ZL(e))});return function(e){return t.apply(this,arguments)}}())),e.Su}function xV(e){return e.Du||(e.Du=function(e,t,n){const r=Wx(e);return r.fu(),new FL(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:gV.bind(null,e),ao:bV.bind(null,e),au:yV.bind(null,e),cu:wV.bind(null,e)}),e.Ru.push(function(){var t=Hh(function*(t){t?(e.Du.Qo(),yield uV(e)):(yield e.Du.stop(),e.Eu.length>0&&(zx("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),e.Du}class AV{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Jx,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new AV(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yx(Qx.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function OV(e,t){if(qx("AsyncQueue",`${t}: ${e}`),LA(e))return new Yx(Qx.UNAVAILABLE,`${t}: ${e}`);throw e}class PV{constructor(e){this.comparator=e?(t,n)=>e(t,n)||yA.comparator(t.key,n.key):(e,t)=>yA.comparator(e.key,t.key),this.keyedMap=fM(),this.sortedSet=new TO(this.comparator)}static emptySet(e){return new PV(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof PV))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new PV;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class MV{constructor(){this.Cu=new TO(yA.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Kx():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class DV{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new DV(e,t,PV.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class NV{constructor(){this.Nu=void 0,this.listeners=[]}}class RV{constructor(){this.queries=new uM(e=>rM(e),nM),this.onlineState="Unknown",this.ku=new Set}}function LV(e,t){return VV.apply(this,arguments)}function VV(){return(VV=Hh(function*(e,t){const n=Wx(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new NV),i)try{s.Nu=yield n.onListen(r)}catch(e){const n=OV(e,`Initialization of query '${iM(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&zV(n)})).apply(this,arguments)}function FV(e,t){return jV.apply(this,arguments)}function jV(){return(jV=Hh(function*(e,t){const n=Wx(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function UV(e,t){const n=Wx(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.$u(i)&&(r=!0);e.Nu=i}}r&&zV(n)}function BV(e,t,n){const r=Wx(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function zV(e){e.ku.forEach(e=>{e.next()})}class qV{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new DV(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=DV.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class $V{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class HV{constructor(e){this.serializer=e}rr(e){return FD(this.serializer,e)}ur(e){return e.metadata.exists?$D(this.serializer,e.document,!1):dP.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ND(e)}}class KV{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GV(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=pA.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new HV(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||_M()).add(e);t.set(n,r)}}return t}complete(){var e=this;return Hh(function*(){const t=yield function(e,t,n,r){return hL.apply(this,arguments)}(e.localStore,new HV(e.serializer),e.documents,e.ju.id),n=e.Wu(e.documents);for(const r of e.queries)yield dL(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function GV(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class WV{constructor(e){this.key=e}}class QV{constructor(e){this.key=e}}class YV{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=_M(),this.mutatedKeys=_M(),this.tc=aM(e),this.ec=new PV(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new MV,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),l=sM(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.rc(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.tc(l,a)>0||c&&this.tc(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kx()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new DV(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new MV,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=_M(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new QV(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new WV(n))}),t}hc(e){this.Yu=e.ir,this.Zu=_M();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return DV.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class JV{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class XV{constructor(e){this.key=e,this.fc=!1}}class ZV{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new uM(e=>rM(e),nM),this._c=new Map,this.mc=new Set,this.gc=new TO(yA.comparator),this.yc=new Map,this.Ic=new PR,this.Tc={},this.Ec=new Map,this.Ac=aR.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function eF(e,t){return tF.apply(this,arguments)}function tF(){return(tF=Hh(function*(e,t){const n=$F(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=yield iL(n.localStore,ZP(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield nF(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&KL(n.remoteStore,e)}return i})).apply(this,arguments)}function nF(e,t,n,r,i){return rF.apply(this,arguments)}function rF(){return(rF=Hh(function*(e,t,n,r,i){e.Rc=(t,n,r)=>{return(i=Hh(function*(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=yield aL(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return bF(e,t.targetId,o.cc),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const s=yield aL(e.localStore,t,!0),o=new YV(t,s.ir),a=o.sc(s.documents),c=vD.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);bF(e,n,u.cc);const l=new JV(t,n,o);return e.wc.set(t,l),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot})).apply(this,arguments)}function iF(e,t){return sF.apply(this,arguments)}function sF(){return(sF=Hh(function*(e,t){const n=Wx(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!nM(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sL(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),GL(n.remoteStore,r.targetId),wF(n,r.targetId)}).catch(AA))):(wF(n,r.targetId),yield sL(n.localStore,r.targetId,!0))})).apply(this,arguments)}function oF(){return(oF=Hh(function*(e,t,n){const r=HF(e);try{const e=yield function(e,t){const n=Wx(e),r=hA.now(),i=t.reduce((e,t)=>e.add(t.key),_M());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=hM(),c=_M();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=KM(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new QM(e.key,t,hP(t.value.mapValue),UM.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:pM(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new TO(cA)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),yield EF(r,e.changes),yield uV(r.remoteStore)}catch(e){const t=OV(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function aF(e,t){return cF.apply(this,arguments)}function cF(){return(cF=Hh(function*(e,t){const n=Wx(e);try{const e=yield tL(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(Gx(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Gx(r.fc):e.removedDocuments.size>0&&(Gx(r.fc),r.fc=!1))}),yield EF(n,e,t)}catch(e){yield AA(e)}})).apply(this,arguments)}function uF(e,t,n){const r=Wx(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Wx(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&zV(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function lF(e,t,n){return hF.apply(this,arguments)}function hF(){return(hF=Hh(function*(e,t,n){const r=Wx(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new TO(yA.comparator);e=e.insert(s,dP.newNoDocument(s,dA.min()));const n=_M().add(s),i=new yD(dA.min(),new Map,new TO(cA),e,n);yield aF(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),CF(r)}else yield sL(r.localStore,t,!1).then(()=>wF(r,t,n)).catch(AA)})).apply(this,arguments)}function dF(e,t){return fF.apply(this,arguments)}function fF(){return(fF=Hh(function*(e,t){const n=Wx(e),r=t.batch.batchId;try{const e=yield ZR(n.localStore,t);vF(n,r,null),yF(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield EF(n,e)}catch(e){yield AA(e)}})).apply(this,arguments)}function pF(e,t,n){return gF.apply(this,arguments)}function gF(){return(gF=Hh(function*(e,t,n){const r=Wx(e);try{const e=yield function(e,t){const n=Wx(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Gx(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);vF(r,t,n),yF(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield EF(r,e)}catch(n){yield AA(n)}})).apply(this,arguments)}function mF(){return(mF=Hh(function*(e,t){const n=Wx(e);XL(n.remoteStore)||zx("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Wx(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=OV(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function yF(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function vF(e,t,n){const r=Wx(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function wF(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||_F(e,t)})}function _F(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(GL(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),CF(e))}function bF(e,t,n){for(const r of n)r instanceof WV?(e.Ic.addReference(r.key,t),IF(e,r)):r instanceof QV?(zx("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||_F(e,r.key)):Kx()}function IF(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(zx("SyncEngine","New document in limbo: "+n),e.mc.add(r),CF(e))}function CF(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new yA(pA.fromString(t)),r=e.Ac.next();e.yc.set(r,new XV(n)),e.gc=e.gc.insert(n,r),KL(e.remoteStore,new sN(ZP(GP(n.path)),r,"TargetPurposeLimboResolution",qA.ct))}}function EF(e,t,n){return TF.apply(this,arguments)}function TF(){return(TF=Hh(function*(e,t,n){const r=Wx(e),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=GR.Li(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=Hh(function*(e,t){const n=Wx(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>PA.forEach(t,t=>PA.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>PA.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!LA(e))throw e;zx("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Ji=n.Ji.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function SF(e,t){return kF.apply(this,arguments)}function kF(){return(kF=Hh(function*(e,t){const n=Wx(e);if(!n.currentUser.isEqual(t)){zx("SyncEngine","User change. New user:",t.toKey());const e=yield JR(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Yx(Qx.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield EF(n,e.er)}})).apply(this,arguments)}function xF(e,t){const n=Wx(e),r=n.yc.get(t);if(r&&r.fc)return _M().add(r.key);{let e=_M();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function AF(e,t){return OF.apply(this,arguments)}function OF(){return(OF=Hh(function*(e,t){const n=Wx(e),r=yield aL(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&bF(n,t.targetId,i.cc),i})).apply(this,arguments)}function PF(e,t){return MF.apply(this,arguments)}function MF(){return(MF=Hh(function*(e,t){const n=Wx(e);return uL(n.localStore,t).then(e=>EF(n,e))})).apply(this,arguments)}function DF(e,t,n,r){return NF.apply(this,arguments)}function NF(){return(NF=Hh(function*(e,t,n,r){const i=Wx(e),s=yield function(e,t){const n=Wx(e),r=Wx(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Sn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):PA.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield uV(i.remoteStore):"acknowledged"===n||"rejected"===n?(vF(i,t,r||null),yF(i,t),function(e,t){Wx(Wx(e).mutationQueue).Cn(t)}(i.localStore,t)):Kx(),yield EF(i,s)):zx("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function RF(){return(RF=Hh(function*(e,t){const n=Wx(e);if($F(n),HF(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield LF(n,e.toArray());n.vc=!0,yield TV(n.remoteStore,!0);for(const r of t)KL(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(wF(n,i),sL(n.localStore,i,!0))),GL(n.remoteStore,i)}),yield t,yield LF(n,e),function(e){const t=Wx(e);t.yc.forEach((e,n)=>{GL(t.remoteStore,n)}),t.Ic.Ts(),t.yc=new Map,t.gc=new TO(yA.comparator)}(n),n.vc=!1,yield TV(n.remoteStore,!1)}})).apply(this,arguments)}function LF(e,t,n){return VF.apply(this,arguments)}function VF(){return(VF=Hh(function*(e,t,n){const r=Wx(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=yield iL(r.localStore,ZP(t[0]));for(const e of t){const t=r.wc.get(e),n=yield AF(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield cL(r.localStore,o);e=yield iL(r.localStore,t),yield nF(r,FF(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i})).apply(this,arguments)}function FF(e){return KP(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jF(e){const t=Wx(e);return Wx(Wx(t.localStore).persistence).$i()}function UF(e,t,n,r){return BF.apply(this,arguments)}function BF(){return(BF=Hh(function*(e,t,n,r){const i=Wx(e);if(i.vc)return void zx("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=yield uL(i.localStore,oM(s[0])),r=yD.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,DO.EMPTY_BYTE_STRING);yield EF(i,e,r);break}case"rejected":yield sL(i.localStore,t,!0),wF(i,t,r);break;default:Kx()}})).apply(this,arguments)}function zF(e,t,n){return qF.apply(this,arguments)}function qF(){return(qF=Hh(function*(e,t,n){const r=$F(e);if(r.vc){for(const e of t){if(r._c.has(e)){zx("SyncEngine","Adding an already active target "+e);continue}const t=yield cL(r.localStore,e),n=yield iL(r.localStore,t);yield nF(r,FF(t),n.targetId,!1,n.resumeToken),KL(r.remoteStore,n)}for(const e of n)r._c.has(e)&&(yield sL(r.localStore,e,!1).then(()=>{GL(r.remoteStore,e),wF(r,e)}).catch(AA))}})).apply(this,arguments)}function $F(e){const t=Wx(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aF.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xF.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lF.bind(null,t),t.dc.nu=UV.bind(null,t.eventManager),t.dc.Pc=BV.bind(null,t.eventManager),t}function HF(e){const t=Wx(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dF.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pF.bind(null,t),t}class KF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return Hh(function*(){t.serializer=NL(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return YR(this.persistence,new WR,e.initialUser,this.serializer)}createPersistence(e){return new VR(jR.zs,this.serializer)}createSharedClientState(e){return new CL}terminate(){var e=this;return Hh(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GF extends KF{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return Hh(function*(){yield t().call(n,e),yield n.Vc.initialize(n,e),yield HF(n.Vc.syncEngine),yield uV(n.Vc.remoteStore),yield n.persistence.Ii(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(),n.indexBackfillerScheduler&&!n.indexBackfillerScheduler.started&&n.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return YR(this.persistence,new WR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new pR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new zA(t,this.persistence);return new BA(e.asyncQueue,n)}createPersistence(e){const t=KR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ZN.withCacheSize(this.cacheSizeBytes):ZN.DEFAULT;return new qR(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ML(),DL(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new CL}}class WF extends GF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return Hh(function*(){yield t().call(n,e);const r=n.Vc.syncEngine;n.sharedClientState instanceof IL&&(n.sharedClientState.syncEngine={jr:DF.bind(null,r),zr:UF.bind(null,r),Wr:zF.bind(null,r),$i:jF.bind(null,r),Qr:PF.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.Ii(function(){var e=Hh(function*(e){yield function(e,t){return RF.apply(this,arguments)}(n.Vc.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start():e||n.gcScheduler.stop()),n.indexBackfillerScheduler&&(e&&!n.indexBackfillerScheduler.started?n.indexBackfillerScheduler.start():e||n.indexBackfillerScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ML();if(!IL.D(t))throw new Yx(Qx.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=KR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IL(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class QF{initialize(e,t){var n=this;return Hh(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>uF(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=SF.bind(null,n.syncEngine),yield TV(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new RV}createDatastore(e){const t=NL(e.databaseInfo.databaseId),n=new PL(e.databaseInfo);return function(e,t,n,r){return new jL(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>uF(this.syncEngine,e,0),s=TL.D()?new TL:new EL,new BL(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ZV(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=Hh(function*(e){const t=Wx(e);zx("RemoteStore","RemoteStore shutting down."),t.vu.add(5),yield $L(t),t.Pu.shutdown(),t.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YF(e,t=10240){let n=0;return{read:()=>Hh(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>Hh(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class JF{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):qx("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class XF{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Jx,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.Gu)}`))},e=>this.metadata.reject(e))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return Hh(function*(){return e.metadata.promise})()}bc(){var e=this;return Hh(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return Hh(function*(){const t=yield e.kc();if(null===t)return null;const n=e.xc.decode(t),r=Number(n);isNaN(r)&&e.Mc(`length string (${n}) is not valid number`);const i=yield e.$c(r);return new $V(JSON.parse(i),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return Hh(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}$c(e){var t=this;return Hh(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const n=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return Hh(function*(){const t=yield e.Cc.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class ZF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return Hh(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Yx(Qx.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=Hh(function*(e,t){const n=Wx(e),r=BD(n.serializer)+"/documents",i={documents:t.map(e=>VD(n.serializer,e))},s=yield n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Gx(!!t.found);const n=FD(e,t.found.name),r=ND(t.found.updateTime),i=t.found.createTime?ND(t.found.createTime):dA.min(),s=new lP({mapValue:{fields:t.found.fields}});return dP.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Gx(!!t.missing),Gx(!!t.readTime);const n=FD(e,t.missing),r=ND(t.readTime);return dP.newNoDocument(n,r)}(e,t):Kx()}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Gx(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ZM(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return Hh(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=yA.fromPath(n);e.mutations.push(new eD(r,e.precondition(r)))}),yield(n=Hh(function*(e,t){const n=Wx(e),r=BD(n.serializer)+"/documents",i={writes:t.map(e=>HD(n.serializer,e))};yield n.Io("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kx();t=dA.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Yx(Qx.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dA.min())?UM.exists(!1):UM.updateTime(t):UM.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dA.min()))throw new Yx(Qx.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return UM.updateTime(t)}return UM.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ej{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new RL(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No(Hh(function*(){const t=new ZF(e.datastore),n=e.qc(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.Uc(t)}))}).catch(t=>{e.Uc(t)})}))}qc(e){try{const t=this.updateFunction(e);return!$A(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!aD(t)}return!1}}class tj{constructor(e,t,n,r){var i=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Fx.UNAUTHENTICATED,this.clientId=aA.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=Hh(function*(e){zx("FirestoreClient","Received user=",e.uid),yield i.authCredentialListener(e),i.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,e=>(zx("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}getConfiguration(){var e=this;return Hh(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Yx(Qx.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jx;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Hh(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=OV(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function nj(e,t){return rj.apply(this,arguments)}function rj(){return(rj=Hh(function*(e,t){e.asyncQueue.verifyOperationInProgress(),zx("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=Hh(function*(e){r.isEqual(e)||(yield JR(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})).apply(this,arguments)}function ij(e,t){return sj.apply(this,arguments)}function sj(){return(sj=Hh(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield aj(e);zx("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>CV(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>CV(t.remoteStore,n)),e._onlineComponents=t})).apply(this,arguments)}function oj(e){return"FirebaseError"===e.name?e.code===Qx.FAILED_PRECONDITION||e.code===Qx.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function aj(e){return cj.apply(this,arguments)}function cj(){return(cj=Hh(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zx("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nj(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!oj(n))throw n;$x("Error using user provided cache. Falling back to memory cache: "+n),yield nj(e,new KF)}}else zx("FirestoreClient","Using default OfflineComponentProvider"),yield nj(e,new KF);return e._offlineComponents})).apply(this,arguments)}function uj(e){return lj.apply(this,arguments)}function lj(){return(lj=Hh(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zx("FirestoreClient","Using user provided OnlineComponentProvider"),yield ij(e,e._uninitializedComponentsProvider._online)):(zx("FirestoreClient","Using default OnlineComponentProvider"),yield ij(e,new QF))),e._onlineComponents})).apply(this,arguments)}function hj(e){return aj(e).then(e=>e.persistence)}function dj(e){return aj(e).then(e=>e.localStore)}function fj(e){return uj(e).then(e=>e.remoteStore)}function pj(e){return uj(e).then(e=>e.syncEngine)}function gj(e){return mj.apply(this,arguments)}function mj(){return(mj=Hh(function*(e){const t=yield uj(e),n=t.eventManager;return n.onListen=eF.bind(null,t.syncEngine),n.onUnlisten=iF.bind(null,t.syncEngine),n})).apply(this,arguments)}function yj(e,t,n={}){const r=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){return function(e,t,n,r,i){const s=new JF({next:s=>{t.enqueueAndForget(()=>FV(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Yx(Qx.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Yx(Qx.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new qV(GP(n.path),s,{includeMetadataChanges:!0,Ku:!0});return LV(e,o)}(yield gj(e),e.asyncQueue,t,n,r)})),r.promise}function vj(e,t,n={}){const r=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){return function(e,t,n,r,i){const s=new JF({next:n=>{t.enqueueAndForget(()=>FV(e,o)),n.fromCache&&"server"===r.source?i.reject(new Yx(Qx.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new qV(n,s,{includeMetadataChanges:!0,Ku:!0});return LV(e,o)}(yield gj(e),e.asyncQueue,t,n,r)})),r.promise}function wj(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _j=new Map;function bj(e,t,n){if(!n)throw new Yx(Qx.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ij(e){if(!yA.isDocumentKey(e))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Cj(e){if(yA.isDocumentKey(e))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ej(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Kx()}function Tj(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yx(Qx.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ej(e);throw new Yx(Qx.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Sj(e,t){if(t<=0)throw new Yx(Qx.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class kj{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Yx(Qx.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Yx(Qx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Yx(Qx.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=wj(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Yx(Qx.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Yx(Qx.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Yx(Qx.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xj{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Yx(Qx.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Yx(Qx.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kj(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Zx;switch(e.type){case"firstParty":return new rA(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Yx(Qx.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_j.get(e);t&&(zx("ComponentProvider","Removing Datastore"),_j.delete(e),t.terminate())}(this),Promise.resolve()}}function Aj(e,t,n,r={}){var i;const s=(e=Tj(e,xj))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&$x("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Fx.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Qh(JSON.stringify({alg:"none",type:"JWT"})),Qh(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Yx(Qx.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Fx(s)}e._authCredentials=new eA(new Xx(t,n))}}class Oj{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mj(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oj(this.firestore,e,this._key)}}class Pj{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pj(this.firestore,e,this._query)}}class Mj extends Pj{constructor(e,t,n){super(e,t,GP(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oj(this.firestore,null,new yA(e))}withConverter(e){return new Mj(this.firestore,e,this._path)}}function Dj(e,t,...n){if(e=bd(e),1===arguments.length&&(t=aA.A()),bj("doc","path",t),e instanceof xj){const r=pA.fromString(t,...n);return Ij(r),new Oj(e,null,new yA(r))}{if(!(e instanceof Oj||e instanceof Mj))throw new Yx(Qx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pA.fromString(t,...n));return Ij(r),new Oj(e.firestore,e instanceof Mj?e.converter:null,new yA(r))}}function Nj(e,t){return e=bd(e),t=bd(t),(e instanceof Oj||e instanceof Mj)&&(t instanceof Oj||t instanceof Mj)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Rj(e,t){return e=bd(e),t=bd(t),e instanceof Pj&&t instanceof Pj&&e.firestore===t.firestore&&nM(e._query,t._query)&&e.converter===t.converter}class Lj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new RL(this,"async_queue_retry"),this.Xc=()=>{const e=DL();e&&zx("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=DL();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=DL();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Jx;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return Hh(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!LA(t))throw t;zx("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{throw this.Wc=e,this.Hc=!1,qx("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=AV.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Kx()}verifyOperationInProgress(){}sa(){var e=this;return Hh(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Vj(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Fj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jx,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jj extends xj{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Lj,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bj(this),this._firestoreClient.terminate()}}function Uj(e){return e._firestoreClient||Bj(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bj(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new BO(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wj(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new tj(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function zj(e,t,n){const r=new Jx;return e.asyncQueue.enqueue(Hh(function*(){try{yield nj(e,n),yield ij(e,t),r.resolve()}catch(e){const n=e;if(!oj(n))throw n;$x("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then(()=>r.promise)}function qj(e){if(e._initialized||e._terminated)throw new Yx(Qx.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $j{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $j(DO.fromBase64String(e))}catch(e){throw new Yx(Qx.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new $j(DO.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hj{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Yx(Qx.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mA(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kj{constructor(e){this._methodName=e}}class Gj{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Yx(Qx.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Yx(Qx.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cA(this._lat,e._lat)||cA(this._long,e._long)}}const Wj=/^__.*__$/;class Qj{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new QM(e,this.data,this.fieldMask,t,this.fieldTransforms):new WM(e,this.data,t,this.fieldTransforms)}}class Yj{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new QM(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jj(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kx()}}class Xj{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Xj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return vU(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Jj(this.ca)&&Wj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Zj{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||NL(e)}ya(e,t,n,r=!1){return new Xj({ca:e,methodName:t,ga:n,path:mA.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eU(e){const t=e._freezeSettings(),n=NL(e._databaseId);return new Zj(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tU(e,t,n,r,i,s={}){const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);pU("Data must be an object, but it was:",o,r);const a=dU(r,o);let c,u;if(s.merge)c=new PO(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=gU(t,r,n);if(!o.contains(i))throw new Yx(Qx.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);wU(e,i)||e.push(i)}c=new PO(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new Qj(new lP(a),c,u)}class nU extends Kj{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nU}}function rU(e,t,n){return new Xj({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class iU extends Kj{_toFieldTransform(e){return new FM(e.path,new OM)}isEqual(e){return e instanceof iU}}class sU extends Kj{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rU(this,e,!0),n=this.pa.map(e=>hU(e,t)),r=new PM(n);return new FM(e.path,r)}isEqual(e){return this===e}}class oU extends Kj{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rU(this,e,!0),n=this.pa.map(e=>hU(e,t)),r=new DM(n);return new FM(e.path,r)}isEqual(e){return this===e}}class aU extends Kj{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new RM(e.serializer,TM(e.serializer,this.Ia));return new FM(e.path,t)}isEqual(e){return this===e}}function cU(e,t,n,r){const i=e.ya(1,t,n);pU("Data must be an object, but it was:",i,r);const s=[],o=lP.empty();CO(r,(e,r)=>{const a=yU(t,e,n);r=bd(r);const c=i.da(a);if(r instanceof nU)s.push(a);else{const e=hU(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new PO(s);return new Yj(o,a,i.fieldTransforms)}function uU(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[gU(t,r,n)],c=[i];if(s.length%2!=0)throw new Yx(Qx.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(gU(t,s[d])),c.push(s[d+1]);const u=[],l=lP.empty();for(let d=a.length-1;d>=0;--d)if(!wU(u,a[d])){const e=a[d];let t=c[d];t=bd(t);const n=o.da(e);if(t instanceof nU)u.push(e);else{const r=hU(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new PO(u);return new Yj(l,h,o.fieldTransforms)}function lU(e,t,n,r=!1){return hU(n,e.ya(r?4:3,t))}function hU(e,t){if(fU(e=bd(e)))return pU("Unsupported field value:",t,e),dU(e,t);if(e instanceof Kj)return function(e,t){if(!Jj(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=hU(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=bd(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return TM(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hA.fromDate(e);return{timestampValue:PD(t.serializer,n)}}if(e instanceof hA){const n=new hA(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:PD(t.serializer,n)}}if(e instanceof Gj)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $j)return{bytesValue:MD(t.serializer,e._byteString)};if(e instanceof Oj){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:RD(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${Ej(e)}`)}(e,t)}function dU(e,t){const n={};return EO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):CO(e,(e,r)=>{const i=hU(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function fU(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hA||e instanceof Gj||e instanceof $j||e instanceof Oj||e instanceof Kj)}function pU(e,t,n){if(!fU(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ej(n);throw t._a("an object"===r?e+" a custom object":e+" "+r)}}function gU(e,t,n){if((t=bd(t))instanceof Hj)return t._internalPath;if("string"==typeof t)return yU(e,t);throw vU("Field path arguments must be of type string or ",e,!1,void 0,n)}const mU=new RegExp("[~\\*/\\[\\]]");function yU(e,t,n){if(t.search(mU)>=0)throw vU(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Hj(...t.split("."))._internalPath}catch(r){throw vU(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function vU(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Yx(Qx.INVALID_ARGUMENT,a+e+c)}function wU(e,t){return e.some(e=>e.isEqual(t))}class _U{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oj(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IU("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bU extends _U{data(){return super.data()}}function IU(e,t){return"string"==typeof t?yU(e,t):t instanceof Hj?t._internalPath:t._delegate._internalPath}function CU(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Yx(Qx.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EU{}class TU extends EU{}class SU extends TU{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new SU(e,t,n)}_apply(e){const t=this._parse(e);return RU(e._query,t),new Pj(e.firestore,e.converter,eM(e._query,t))}_parse(e){const t=eU(e.firestore);return function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Yx(Qx.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){NU(o,s);const t=[];for(const n of o)t.push(DU(r,e,n));a={arrayValue:{values:t}}}else a=DU(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||NU(o,s),a=lU(n,"where",o,"in"===s||"not-in"===s);return wP.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class kU extends EU{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kU(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:_P.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)RU(n,i),n=eM(n,i)}(e._query,t),new Pj(e.firestore,e.converter,eM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xU extends TU{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xU(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Yx(Qx.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Yx(Qx.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new mP(t,n);return function(e,t){if(null===QP(e)){const n=YP(e);null!==n&&LU(0,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Pj(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new HP(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class AU extends TU{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new AU(e,t,n)}_apply(e){return new Pj(e.firestore,e.converter,tM(e._query,this._limit,this._limitType))}}class OU extends TU{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new OU(e,t,n)}_apply(e){const t=MU(e,this.type,this._docOrFields,this._inclusive);return new Pj(e.firestore,e.converter,function(e,t){return new HP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class PU extends TU{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new PU(e,t,n)}_apply(e){const t=MU(e,this.type,this._docOrFields,this._inclusive);return new Pj(e.firestore,e.converter,function(e,t){return new HP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function MU(e,t,n,r){if(n[0]=bd(n[0]),n[0]instanceof _U)return function(e,t,n,r,i){if(!r)throw new Yx(Qx.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of XP(e))if(o.field.isKeyField())s.push(XO(t,r.key));else{const e=r.data.field(o.field);if(FO(e))throw new Yx(Qx.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new fP(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=eU(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Yx(Qx.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!JP(e)&&-1!==s.indexOf("/"))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(pA.fromString(s));if(!yA.isDocumentKey(n))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new yA(n);a.push(XO(t,i))}else{const e=lU(n,r,s);a.push(e)}}return new fP(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function DU(e,t,n){if("string"==typeof(n=bd(n))){if(""===n)throw new Yx(Qx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JP(t)&&-1!==n.indexOf("/"))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pA.fromString(n));if(!yA.isDocumentKey(r))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return XO(e,new yA(r))}if(n instanceof Oj)return XO(e,n._key);throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ej(n)}.`)}function NU(e,t){if(!Array.isArray(e)||0===e.length)throw new Yx(Qx.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function RU(e,t){if(t.isInequality()){const n=YP(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=QP(e);null!==i&&LU(0,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Yx(Qx.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function LU(e,t,n){if(!n.isEqual(t))throw new Yx(Qx.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class VU{convertValue(e,t="none"){switch(HO(e)){case 0:return null;case 1:return e.booleanValue;case 2:return LO(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(VO(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kx()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return CO(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Gj(LO(e.latitude),LO(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=jO(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(UO(e));default:return null}}convertTimestamp(e){const t=RO(e);return new hA(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=pA.fromString(e);Gx(iN(n));const r=new zO(n.get(1),n.get(3)),i=new yA(n.popFirst(5));return r.isEqual(t)||qx(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function FU(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class jU extends VU{constructor(e){super(),this.firestore=e}convertBytes(e){return new $j(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oj(this.firestore,null,t)}}class UU{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BU extends _U{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zU(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(IU("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class zU extends BU{data(e={}){return super.data(e)}}class qU{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new UU(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new zU(this._firestore,this._userDataWriter,n.key,n,new UU(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Yx(Qx.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new zU(e._firestore,e._userDataWriter,n.doc.key,n.doc,new UU(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new zU(e._firestore,e._userDataWriter,t.doc.key,t.doc,new UU(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:$U(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $U(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kx()}}class HU extends VU{constructor(e){super(),this.firestore=e}convertBytes(e){return new $j(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oj(this.firestore,null,t)}}function KU(e,...t){var n,r,i;e=bd(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Vj(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Vj(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,l;if(e instanceof Oj)u=Tj(e.firestore,jj),l=GP(e._key.path),c={next:n=>{t[o]&&t[o](WU(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Tj(e,Pj);u=Tj(n.firestore,jj),l=n._query;const r=new HU(u);c={next:e=>{t[o]&&t[o](new qU(u,r,n,e))},error:t[o+1],complete:t[o+2]},CU(e._query)}return function(e,t,n,r){const i=new JF(r),s=new qV(t,i,n);return e.asyncQueue.enqueueAndForget(Hh(function*(){return LV(yield gj(e),s)})),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(Hh(function*(){return FV(yield gj(e),s)}))}}(Uj(u),l,a,c)}function GU(e,t){return function(e,t){const n=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){return function(e,t,n){return oF.apply(this,arguments)}(yield pj(e),t,n)})),n.promise}(Uj(e),t)}function WU(e,t,n){const r=n.docs.get(t._key),i=new HU(e);return new BU(e,i,t._key,r,new UU(n.hasPendingWrites,n.fromCache),t.converter)}const QU={maxAttempts:5};class YU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eU(e)}set(e,t,n){this._verifyNotCommitted();const r=JU(e,this._firestore),i=FU(r.converter,t,n),s=tU(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,UM.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=JU(e,this._firestore);let s;return s="string"==typeof(t=bd(t))||t instanceof Hj?uU(this._dataReader,"WriteBatch.update",i._key,t,n,r):cU(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,UM.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=JU(e,this._firestore);return this._mutations=this._mutations.concat(new ZM(t._key,UM.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yx(Qx.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function JU(e,t){if((e=bd(e)).firestore!==t)throw new Yx(Qx.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class XU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=eU(e)}get(e){const t=JU(e,this._firestore),n=new jU(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Kx();const r=e[0];if(r.isFoundDocument())return new _U(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new _U(this._firestore,n,t._key,null,t.converter);throw Kx()})}set(e,t,n){const r=JU(e,this._firestore),i=FU(r.converter,t,n),s=tU(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=JU(e,this._firestore);let s;return s="string"==typeof(t=bd(t))||t instanceof Hj?uU(this._dataReader,"Transaction.update",i._key,t,n,r):cU(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=JU(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=JU(e,this._firestore),n=new HU(this._firestore);return super.get(e).then(e=>new BU(this._firestore,n,t._key,e._document,new UU(!1,!1),t.converter))}}function ZU(...e){return H(1)(Lu(...e))}!function(e,t=!0){jx="9.23.0",sf(new Id("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new jj(new tA(e.getProvider("auth-internal")),new sA(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Yx(Qx.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zO(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),pf(Vx,"3.13.0",e),pf(Vx,"3.13.0","esm2017")}();class eB{call(e,t){return t.subscribe(new tB(e))}}class tB extends p{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function nB(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new rB(e,t,n))}}class rB{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new iB(e,this.accumulator,this.seed,this.hasSeed))}}class iB extends p{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class sB{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new oB(e,this.compare,this.keySelector))}}class oB extends p{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var aB={includeMetadataChanges:!1};function cB(e,t){return void 0===t&&(t=aB),new _(function(n){return{unsubscribe:KU(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}function uB(e){return cB(e,{includeMetadataChanges:!0})}function lB(e,t){void 0===t&&(t={});var n=e.data();return e.exists()&&"object"==typeof n&&null!==n?(t.idField&&(n[t.idField]=e.id),n):n}var hB=["added","modified","removed"];function dB(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s=e.slice();return s.splice.apply(s,bE([t,n],r)),s}var fB=function(){return v(function(...e){const t=e[e.length-1];return k(t)?(e.pop(),n=>ZU(e,n,t)):t=>ZU(e,t)}(void 0),e=>e.lift(new eB))},pB=function(e,t){return JSON.stringify(e.metadata)===JSON.stringify(t.metadata)};function gB(e,t){return void 0===t&&(t={}),cB(e,{includeMetadataChanges:!0}).pipe(fB(),x(function(e){var t=e[0],n=e[1],r=n.docChanges();return t&&!pB(t,n)&&n.docs.forEach(function(e,n){var i=r.find(function(t){return Nj(t.doc.ref,e.ref)});if(i){if(pB(i.doc,e))return}else{var s=null==t?void 0:t.docs.find(function(t){return Nj(t.ref,e.ref)});if(s&&pB(s,e))return}r.push({oldIndex:n,newIndex:n,type:"modified",doc:e})}),r}),(n=t.events||hB,Fu(function(e){for(var t=!1,r=0;r<e.length;r++)if(n&&n.indexOf(e[r].type)>=0){t=!0;break}return t})),v(fB(),Fu(function(e){return e[1].length>0||void 0===e[0]}),x(function(e){return e[1]})));var n}function mB(e){return cB(e,{includeMetadataChanges:!0}).pipe(x(function(e){return e.docs}))}class yB{constructor(e){return e}}const vB="firestore";tv(0,300).pipe(Vu(()=>F($y(vB))),rv());const wB=new Vn("angularfire2.firestore-instances");function _B(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new yB(r)}}const bB={provide:class{constructor(){return $y(vB)}},deps:[[new tr,wB]]},IB={provide:yB,useFactory:function(e,t){const n=function(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider("firestore").getImmediate({optional:!0})}(0,e,t);return n&&new yB(n)},deps:[[new tr,wB],ov]};let CB=(()=>{class e{constructor(){pf("angularfire",Vy.full,"fst")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({providers:[IB,bB]}),e})();function EB(e,...t){return{ngModule:CB,providers:[{provide:wB,useFactory:_B(e),multi:!0,deps:[Cc,ks,Wy,av,[new tr,AC],[new tr,_E],...t]}]}}ev(gB,!0),ev(mB,!0),ev(function(e,t){return void 0===t&&(t={}),gB(e,t).pipe(nB(function(e,n){return function(e,t,n){return void 0===n&&(n=hB),t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!Nj(e[t.newIndex].doc.ref,t.doc.ref))return dB(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||Nj(e[t.oldIndex].doc.ref,t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return dB(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&Nj(e[t.oldIndex].doc.ref,t.doc.ref))return dB(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n,t.events)},[]),e=>e.lift(new sB(void 0,void 0)))},!0),ev(function(e,t){return void 0===t&&(t={}),gB(e,t).pipe(nB(function(e,t){return bE(bE([],e),t)},[]))},!0);const TB=ev(function(e,t){return void 0===t&&(t={}),mB(e).pipe(x(function(e){return e.map(function(e){return lB(e,t)})}))},!0),SB=(ev(uB,!0),ev(function(e,t){return void 0===t&&(t={}),uB(e).pipe(x(function(e){return lB(e,t)}))},!0),ev(lB,!0),ev(cB,!0),ev(function(e,t){const n=Tj(e.firestore,jj),r=Dj(e),i=FU(e.converter,t);return GU(n,[tU(eU(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,UM.exists(!1))]).then(()=>r)},!0)),kB=(ev(function(...e){return new oU("arrayRemove",e)},!0),ev(function(...e){return new sU("arrayUnion",e)},!0),ev(function(e){if(e._initialized&&!e._terminated)throw new Yx(Qx.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Jx;return e._queue.enqueueAndForgetEvenWhileRestricted(Hh(function*(){try{yield(n=Hh(function*(e){if(!DA.D())return Promise.resolve();const t=e+"main";yield DA.delete(t)}),function(e){return n.apply(this,arguments)})(KR(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise},!0),ev(function(e,t,...n){if(e=bd(e),bj("collection","path",t),e instanceof xj){const r=pA.fromString(t,...n);return Cj(r),new Mj(e,null,r)}{if(!(e instanceof Oj||e instanceof Mj))throw new Yx(Qx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pA.fromString(t,...n));return Cj(r),new Mj(e.firestore,null,r)}},!0)),xB=(ev(function(e,t){if(e=Tj(e,xj),bj("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Yx(Qx.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pj(e,null,function(e){return new HP(pA.emptyPath(),e)}(t))},!0),ev(Aj,!0),ev(function(e){return GU(Tj(e.firestore,jj),[new ZM(e._key,UM.none())])},!0),ev(function(){return new nU("deleteField")},!0),ev(function(e){return function(e){return e.asyncQueue.enqueue(Hh(function*(){const t=yield hj(e),n=yield fj(e);return t.setNetworkEnabled(!1),(r=Hh(function*(e){const t=Wx(e);t.vu.add(0),yield $L(t),t.bu.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(Uj(e=Tj(e,jj)))},!0),ev(Dj,!0),ev(function(){return new Hj("__name__")},!0),ev(function(e,t){qj(e=Tj(e,jj));const n=Uj(e);if(n._uninitializedComponentsProvider)throw new Yx(Qx.FAILED_PRECONDITION,"SDK cache is already specified.");$x("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new QF;return zj(n,i,new GF(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))},!0),ev(function(e){qj(e=Tj(e,jj));const t=Uj(e);if(t._uninitializedComponentsProvider)throw new Yx(Qx.FAILED_PRECONDITION,"SDK cache is already specified.");$x("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new QF;return zj(t,r,new WF(r,n.cacheSizeBytes))},!0),ev(function(e){return function(e){return e.asyncQueue.enqueue(Hh(function*(){const t=yield hj(e),n=yield fj(e);return t.setNetworkEnabled(!0),function(e){const t=Wx(e);return t.vu.delete(0),zL(t)}(n)}))}(Uj(e=Tj(e,jj)))},!0),ev(function(...e){return PU._create("endAt",e,!0)},!0),ev(function(...e){return PU._create("endBefore",e,!1)},!0),ev(function(e){e=Tj(e,Oj);const t=Tj(e.firestore,jj);return yj(Uj(t),e._key).then(n=>WU(t,e,n))},!0),ev(function(e){e=Tj(e,Oj);const t=Tj(e.firestore,jj),n=Uj(t),r=new HU(t);return function(e,t){const n=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){return(r=Hh(function*(e,t,n){try{const r=yield function(e,t){const n=Wx(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Yx(Qx.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=OV(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield dj(e),t,n);var r})),n.promise}(n,e._key).then(n=>new BU(t,r,e._key,n,new UU(null!==n&&n.hasLocalMutations,!0),e.converter))},!0),ev(function(e){e=Tj(e,Oj);const t=Tj(e.firestore,jj);return yj(Uj(t),e._key,{source:"server"}).then(n=>WU(t,e,n))},!0),ev(function(e){e=Tj(e,Pj);const t=Tj(e.firestore,jj),n=Uj(t),r=new HU(t);return CU(e._query),vj(n,e._query).then(n=>new qU(t,r,e,n))},!0),ev(function(e){e=Tj(e,Pj);const t=Tj(e.firestore,jj),n=Uj(t),r=new HU(t);return function(e,t){const n=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){return(r=Hh(function*(e,t,n){try{const r=yield aL(e,t,!0),i=new YV(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=OV(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield dj(e),t,n);var r})),n.promise}(n,e._query).then(n=>new qU(t,r,e,n))},!0),ev(function(e){e=Tj(e,Pj);const t=Tj(e.firestore,jj),n=Uj(t),r=new HU(t);return vj(n,e._query,{source:"server"}).then(n=>new qU(t,r,e,n))},!0),ev(function(e,t){const n="string"==typeof e?e:t||"(default)",r=of("object"==typeof e?e:hf(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Zh("firestore");if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})();e&&Aj(r,...e)}return r},!0));ev(function(e){return new aU("increment",e)},!0),ev(function(e,t,n){n||(n="(default)");const r=of(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(dd(r.getOptions(n),t))return e;throw new Yx(Qx.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new Yx(Qx.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Yx(Qx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})},!0),ev(function(e){return Sj("limit",e),AU._create("limit",e,"F")},!0),ev(function(e){return Sj("limitToLast",e),AU._create("limitToLast",e,"L")},!0),ev(function(e,t){const n=Uj(e=Tj(e,jj)),r=new Fj;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?hD().encode(e):e,function(e,t){return new XF(e,t)}(function(e,t){if(e instanceof Uint8Array)return YF(e,t);if(e instanceof ArrayBuffer)return YF(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,NL(t));e.asyncQueue.enqueueAndForget(Hh(function*(){!function(e,t,n){const r=Wx(e);var i;(i=Hh(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Wx(e),r=ND(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.qs.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(GV(r));const i=new KV(r,e.localStore,t.serializer);let s=yield t.bc();for(;s;){const e=yield i.zu(s);e&&n._updateProgress(e),s=yield t.bc()}const o=yield i.complete();return yield EF(e,o.Ju,void 0),yield function(e,t){const n=Wx(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.qs.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return $x("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(yield pj(e),i,r)}))}(n,e._databaseId,t,r),r},!0),ev(function(e,t){return function(e,t){return e.asyncQueue.enqueue(Hh(function*(){return function(e,t){const n=Wx(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.qs.getNamedQuery(e,t))}(yield dj(e),t)}))}(Uj(e=Tj(e,jj)),t).then(t=>t?new Pj(e,null,t.query):null)},!0),ev(KU,!0),ev(function(e,t){return function(e,t){const n=new JF(t);return e.asyncQueue.enqueueAndForget(Hh(function*(){return function(e,t){Wx(e).ku.add(t),t.next()}(yield gj(e),n)})),()=>{n.Dc(),e.asyncQueue.enqueueAndForget(Hh(function*(){return function(e,t){Wx(e).ku.delete(t)}(yield gj(e),n)}))}}(Uj(e=Tj(e,jj)),Vj(t)?t:{next:t})},!0),ev(function(e,t="asc"){const n=t,r=IU("orderBy",e);return xU._create(r,n)},!0),ev(function(e,t,...n){let r=[];t instanceof EU&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof kU).length,n=e.filter(e=>e instanceof SU).length;if(t>1||t>0&&n>0)throw new Yx(Qx.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e},!0),ev(Rj,!0),ev(Nj,!0),ev(function(e,t,n){e=Tj(e,jj);const r=Object.assign(Object.assign({},QU),n);return function(e){if(e.maxAttempts<1)throw new Yx(Qx.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){const i=yield function(e){return uj(e).then(e=>e.datastore)}(e);new ej(e.asyncQueue,i,n,t,r).run()})),r.promise}(Uj(e),n=>t(new XU(e,n)),r)},!0),ev(function(){return new iU("serverTimestamp")},!0),ev(function(e,t,n){e=Tj(e,Oj);const r=Tj(e.firestore,jj),i=FU(e.converter,t,n);return GU(r,[tU(eU(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,UM.none())])},!0),ev(function(e){Ux.setLogLevel(e)},!0),ev(function(e,t){return e instanceof BU&&t instanceof BU?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof qU&&t instanceof qU&&e._firestore===t._firestore&&Rj(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},!0),ev(function(...e){return OU._create("startAfter",e,!1)},!0),ev(function(...e){return OU._create("startAt",e,!0)},!0),ev(function(e){return function(e,t,n="[DEFAULT]"){of(e,"firestore").clearInstance(n)}(e.app,0,e._databaseId.database),e._delete()},!0),ev(function(e,t,n,...r){e=Tj(e,Oj);const i=Tj(e.firestore,jj),s=eU(i);let o;return o="string"==typeof(t=bd(t))||t instanceof Hj?uU(s,"updateDoc",e._key,t,n,r):cU(s,"updateDoc",e._key,t),GU(i,[o.toMutation(e._key,UM.exists(!0))])},!0),ev(function(e){return function(e){const t=new Jx;return e.asyncQueue.enqueueAndForget(Hh(function*(){return function(e,t){return mF.apply(this,arguments)}(yield pj(e),t)})),t.promise}(Uj(e=Tj(e,jj)))},!0),ev(function(e,t,n){const r=t,i=IU("where",e);return SU._create(i,r,n)},!0),ev(function(e){return Uj(e=Tj(e,jj)),new YU(e,t=>GU(e,t))},!0);let AB=(()=>{class e{constructor(e){this.firestore=e}addRSVP(e,t){const n=kB(this.firestore,t?"rsvp":"rsvp-jb");return SB(n,e)}getRSVPs(e){const t=kB(this.firestore,e?"rsvp":"rsvp-jb");return TB(t,{idField:"id"})}}return e.\u0275fac=function(t){return new(t||e)(Jn(yB))},e.\u0275prov=fe({token:e,factory:e.\u0275fac}),e})(),OB=(()=>{class e{constructor(e,t,n,r){this.document=e,this.fb=t,this.http=n,this.firebaseProvider=r,this.rsvp={name:"",phone:"",pax:"",address:""},this.rsvps=[],this.hasError=!1,this.isLoading=!1,this.isKL=!0,console.log(this.document.location.href)}ngOnInit(){this.firebaseProvider.getRSVPs(this.isKL).subscribe(e=>{this.rsvps=e,console.table(this.rsvps)}),this.confirmationModal=new window.bootstrap.Modal(document.getElementById("confirmationModal")),this.errorModal=new window.bootstrap.Modal(document.getElementById("errorModal")),console.log(this.isKL)}onSubmit(e){this.validate(e),this.hasError||(this.isLoading=!0,this.firebaseProvider.addRSVP(e.value,this.isKL).then(()=>{this.openConfirmationModal(),e.reset(),this.isLoading=!1}))}openConfirmationModal(){console.log("open"),this.confirmationModal.show()}openErrorModal(){this.errorModal.show()}validate(e){console.log(e.value);var t=e.value;this.hasError=!!(this.isStringNullOrEmpty(t.name)||this.isStringNullOrEmpty(t.phone)||this.isStringNullOrEmpty(t.pax))}isStringNullOrEmpty(e){return null==e||0==e.toString().trim().length}}return e.\u0275fac=function(t){return new(t||e)(Bs(Qc),Bs(Ih),Bs(sl),Bs(AB))},e.\u0275cmp=$e({type:e,selectors:[["app-rsvp-form"]],inputs:{isKL:"isKL"},decls:40,vars:7,consts:[[1,""],[1,"form",3,"ngSubmit"],["rsvpForm","ngForm"],["id","name","name","name","placeholder","Your name..","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["id","phone","name","phone","placeholder","Your phone number..","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","pax","name","pax","placeholder","# of Guests","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","address","name","address","placeholder","Mailing Address","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"accept",3,"disabled"],[1,"bi","bi-plus"],[1,"errorTxt",3,"ngClass"],["id","confirmationModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","errorModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","errorModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"]],template:function(e,t){if(1&e){const e=xt();$s(0,"div",0),$s(1,"div",0),$s(2,"form",1,2),Qs("ngSubmit",function(){St.lFrame.contextLView=e;const n=Us(3);return t.onSubmit(n)}),$s(4,"input",3,4),Qs("ngModelChange",function(e){return t.rsvp.name=e}),Hs(),$s(6,"input",5,4),Qs("ngModelChange",function(e){return t.rsvp.phone=e}),Hs(),$s(8,"input",6,4),Qs("ngModelChange",function(e){return t.rsvp.pax=e}),Hs(),$s(10,"input",7,4),Qs("ngModelChange",function(e){return t.rsvp.address=e}),Hs(),$s(12,"button",8),Ks(13,"i",9),so(14,"RSVP"),Hs(),Hs(),$s(15,"div"),$s(16,"span",10),so(17,"Kindly complete all the fields with the necessary information."),Hs(),Hs(),Hs(),$s(18,"div",11),$s(19,"div",12),$s(20,"div",13),$s(21,"div",14),$s(22,"h3"),so(23,"Thank you for responding! We are excited to see you there!"),Hs(),Hs(),$s(24,"div",15),$s(25,"button",16),so(26," Close "),Hs(),Hs(),Hs(),Hs(),Hs(),$s(27,"div",17),$s(28,"div",12),$s(29,"div",13),$s(30,"div",18),$s(31,"h5",19),so(32,"Error"),Hs(),Ks(33,"button",20),Hs(),$s(34,"div",14),$s(35,"h3"),so(36,"Thank you for responding! We are excited to see you there!"),Hs(),Hs(),$s(37,"div",15),$s(38,"button",16),so(39," Close "),Hs(),Hs(),Hs(),Hs(),Hs(),Hs()}if(2&e){const e=Us(3);wi(4),zs("ngModel",t.rsvp.name),wi(2),zs("ngModel",t.rsvp.phone),wi(2),zs("ngModel",t.rsvp.pax),wi(2),zs("ngModel",t.rsvp.address),wi(2),zs("disabled",!e.valid)("disabled",e.invalid||t.isLoading),wi(4),zs("ngClass",t.hasError?"show":"hide")}},directives:[dh,Bl,ch,Tl,vh,Ul,hh,ph,eu],styles:[".container[_ngcontent-%COMP%]{margin:5em}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:15px;color:#666;padding:6px;margin:25px auto 20px;display:block;width:75%}input[_ngcontent-%COMP%]:focus{outline:0}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:400px}button[_ngcontent-%COMP%]{width:75%;margin:25px auto 20px;display:block;border-radius:.375rem;background:#4f3566;color:#fff;padding:.5em}button[_ngcontent-%COMP%]:hover{background-color:#12071b;transition:.5s}button[_ngcontent-%COMP%]:focus{outline:0}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.errorTxt[_ngcontent-%COMP%]{visibility:hidden;color:red;font-family:Courier New,Courier,monospace}.show[_ngcontent-%COMP%]{visibility:visible}.hide[_ngcontent-%COMP%]{visibility:hidden}.modal[_ngcontent-%COMP%]{top:50%}.modal-footer[_ngcontent-%COMP%]{justify-content:center}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}"]}),e})(),PB=(()=>{class e{constructor(e,t){this.document=e,this.loadingService=t,this.title="ng-wedding-eInvitation",this.isKL=!0,this.isLoading=!0,console.log(this.document.location.href),this.loadingService.setLoading(!0),-1==this.document.location.href.toLowerCase().indexOf("kl")&&(this.isKL=!1)}ngOnInit(){(class{static initialize(e=Math.floor((window.innerHeight+window.innerWidth)/100),t=[5,25+Math.floor((window.innerHeight+window.innerWidth)/100)],n=[{fill:"#ffffea",glow:"#ff881b"}],r=!0,i=!0,s=!0,o=!1){this.terminate(),Th=document.createElement("canvas"),document.body.appendChild(Th),Sh=Th.getContext("2d"),Th.width=window.innerWidth,Th.height=window.innerHeight,Sh.globalCompositeOperation="screen";for(let c=0;c<e;c++){let e;"[object Array]"===Object.prototype.toString.call(t)?(e=Ch(t[0],t[1]),Ah=1.5*t[1]):(e=t,Ah=1.5*t);const u=Ch(e,Th.width-e),l=Ch(e,Th.height-e),h=(a=n)[Math.floor(Math.random()*a.length)];Oh[c]=new Nh(u,l,e,h,r,i,s,o)}var a;addEventListener("resize",Mh),addEventListener("mousemove",Dh),Ph()}static terminate(){cancelAnimationFrame(kh),removeEventListener("resize",Mh),removeEventListener("mousemove",Dh);for(let e=0;e<Oh.length;e++)Oh.splice(0,Oh.length);Th&&Th.remove()}}).initialize(15,[5,30],[{fill:"#ffffff",glow:"#eee063"}],!0,!0,!0,!0)}ngAfterViewInit(){setTimeout(()=>{this.isLoading=!1,this.loadingService.setLoading(!1)},1e3)}}return e.\u0275fac=function(t){return new(t||e)(Bs(Qc),Bs(Rh))},e.\u0275cmp=$e({type:e,selectors:[["app-root"]],decls:47,vars:3,consts:function(){let e;return e=$localize`Home`,[["role","main",1,"content"],[1,"nav"],["href","#"],e,["href","#couple"],["href","#wedding"],["href","#biography"],["href","#link"],["href","#rsvp"],[1,"banner-area"],[1,"fs",3,"isKL"],["id","couple",1,"couple-area"],[1,"bg-image"],[1,"section-title"],["id","biography",1,"biography-area"],["id","gallery",1,"gallery-area"],["id","wedding",1,"wedding-area"],[1,"fs","app-venue",3,"isKL"],["id","link",1,"link-area"],["id","rsvp",1,"rsvp-area"],["id","rsvp-form",1,"fs",3,"isKL"]]},template:function(e,t){1&e&&($s(0,"div",0),Ks(1,"app-spinner"),$s(2,"header"),$s(3,"ul",1),$s(4,"li"),$s(5,"a",2),Ko(6,3),Hs(),Hs(),$s(7,"li"),$s(8,"a",4),so(9,"Couple"),Hs(),Hs(),$s(10,"li"),$s(11,"a",5),so(12,"Venue"),Hs(),Hs(),$s(13,"li"),$s(14,"a",6),so(15,"Biography"),Hs(),Hs(),$s(16,"li"),$s(17,"a",7),so(18,"Links"),Hs(),Hs(),$s(19,"li"),$s(20,"a",8),so(21,"RSVP"),Hs(),Hs(),Hs(),Hs(),$s(22,"section",9),Ks(23,"app-hero",10),Hs(),$s(24,"section",11),Ks(25,"div",12),$s(26,"h1",13),so(27,"The Happy Couple"),Hs(),Ks(28,"app-couple"),Hs(),$s(29,"section",14),$s(30,"h1",13),so(31,"Biography"),Hs(),Ks(32,"app-biography"),Hs(),$s(33,"section",15),Ks(34,"app-gallery"),Hs(),$s(35,"section",16),$s(36,"h1",13),so(37,"The Venue "),Hs(),Ks(38,"app-venue",17),Hs(),$s(39,"section",18),$s(40,"h1",13),so(41,"Links"),Hs(),Ks(42,"app-link"),Hs(),$s(43,"section",19),$s(44,"h1",13),so(45,"Will you be attending?"),Hs(),Ks(46,"app-rsvp-form",20),Hs(),Hs()),2&e&&(wi(23),zs("isKL",t.isKL),wi(15),zs("isKL",t.isKL),wi(8),zs("isKL",t.isKL))},directives:[Vh,Fh,jh,Uh,Bh,zh,qh,OB],styles:['.card[_ngcontent-%COMP%]{padding:1em;margin:1em;border-radius:.5em;display:flex;flex-direction:column}header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:10;width:100%;display:flex;justify-content:center;align-items:center;color:#fff;margin-top:1em;font-size:1.5em;background-color:#104e4e70}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:1em}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:flex}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 1em}.banner-area[_ngcontent-%COMP%], .gallery-area[_ngcontent-%COMP%]{justify-content:center}.banner-area[_ngcontent-%COMP%]{position:relative;min-height:100vh;color:#fff;text-align:center}.section-title[_ngcontent-%COMP%]{color:#fff}.couple-area[_ngcontent-%COMP%]{position:relative}.bg-image[_ngcontent-%COMP%]{display:none;background-image:url(ring-cropped2.35cb5827d861335e7ede.png);background-repeat:no-repeat;background-size:contain;overflow:hidden;filter:blur(.15em) contrast(.5) opacity(.7);position:absolute;background-position:bottom;width:100%;height:100%}.wedding-area[_ngcontent-%COMP%]   .wedding-title[_ngcontent-%COMP%]{height:20%}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]{display:flex;width:75%;flex-direction:row;justify-content:space-evenly;flex-wrap:wrap}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{position:relative;min-width:600px;width:40%;display:flex;flex-direction:row;margin:1em 1em 2em;min-height:400px}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{padding:1em;color:#000;display:flex;justify-content:space-between;align-items:flex-end}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   .year-txt[_ngcontent-%COMP%]{font-size:2em}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:4em}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]{margin:0;padding:5px;background-color:#000;border-radius:2em;display:flex;justify-content:space-evenly;flex-wrap:wrap}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .weekdays[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;display:inline-block;width:13.6%;text-align:center;color:#fff}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{padding:5px;margin:0;display:flex;flex-wrap:wrap;justify-content:space-evenly}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;display:inline-block;width:13.6%;text-align:center;margin-bottom:5px;color:#777;font-weight:700}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{position:relative;color:#fff!important}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#000;z-index:-1;transform:scale(2)}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #calendar-card[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{z-index:2}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:0;margin-top:1em;width:100%;z-index:2}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{border:.5em solid #000;position:absolute;padding:1em;margin-bottom:3em;display:flex;flex-direction:column;background-color:#fff;font-family:Ma Shan Zheng,Dancing script,"cursive";font-size:1.5em;width:100%;height:70%}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:.2em;width:100%;border-bottom:2px solid #000}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-txt-container[_ngcontent-%COMP%]{justify-content:flex-start}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-txt-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-txt-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.3em}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #date-info-card[_ngcontent-%COMP%]{right:0;padding-left:4em;align-items:flex-start;justify-content:flex-start}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   #venue-info-card[_ngcontent-%COMP%]{left:0;padding-right:4em;align-items:flex-end;justify-content:flex-start;text-align:right}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   #venue-card-container[_ngcontent-%COMP%]{flex-direction:row-reverse}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   #venue-card-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:100%;width:auto}.wedding-area[_ngcontent-%COMP%]   .wedding-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-family:Dancing script;font-size:2em}@media only screen and (max-width:768px){header[_ngcontent-%COMP%]{font-size:1em;flex-direction:column}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1em}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0}header[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 .5em}.banner-area[_ngcontent-%COMP%]{min-height:100vh}.banner-area[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1em}.banner-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.card-container[_ngcontent-%COMP%]{flex-direction:column!important;min-width:80%!important;width:unset!important;align-items:center!important}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:70%!important;margin-bottom:1em}.card-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{position:relative!important;padding:1em!important;width:unset!important;text-align:start!important}}@media only screen and (max-width:1040px){.bg-image[_ngcontent-%COMP%]{display:none}}']}),e})();const MB={apiKey:"AIzaSyAfOWLsTPy_bvwFsJEA4ML3aigQfuDSbcQ",authDomain:"einvite-ede8d.firebaseapp.com",projectId:"einvite-ede8d",storageBucket:"einvite-ede8d.appspot.com",messagingSenderId:"447945930691",appId:"1:447945930691:web:9cae5f8780fc8bb21c2f76"};let DB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e}),e.\u0275inj=pe({imports:[[Ru]]}),e})(),NB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=We({type:e,bootstrap:[PB]}),e.\u0275inj=pe({providers:[Ih,AB],imports:[[Ru,_h,bh,vl,DB,fv(()=>pv(MB)),EB(()=>xB())]]}),e})();(function(){if(Lc)throw new Error("Cannot enable prod mode after platform setup.");Rc=!1})(),Du().bootstrapModule(NB).catch(e=>console.error(e))}},e=>{"use strict";e(e.s=955)}]);